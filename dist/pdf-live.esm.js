var t=async(t,e,r,a)=>{try{window.pdfjsLib.GlobalWorkerOptions.workerSrc=e,a&&(a=(t=>{if(t.match(/^(https?:)?\/\//))return t;if(t.match(/^\//))return`${location.origin}/${t.replace(/^\//,"")}`;const e=location.href.split("/"),r=t.split("/");e.pop();for(var a=0;a<r.length;a++)"."!=r[a]&&(".."==r[a]?e.pop():e.push(r[a]));return e.join("/")})(a));return await window.pdfjsLib.getDocument({url:t,cMapUrl:a,cMapPacked:!0}).promise}catch(t){throw new Error(r.message.badDocument)}};var e=async t=>{const e=document.querySelector('[data-element="printFrame"]');return e.src=t,new Promise((t=>{e.addEventListener("load",(()=>{e.contentWindow.print(),t()}),{passive:!0,once:!0})}))},r=t=>{if("dark"!==t&&"light"!==t)throw new Error("The theme can be either light or dark");document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t)},a=t=>!isNaN(parseFloat(t))&&isFinite(t),n=(t,e,r)=>{let n=1;return a(t)?n=parseInt(t,10)/100:"pageFit"===t?n=e.clientHeight/r.height:"pageWidth"===t&&(n=e.clientWidth/r.width),n};class i{loadingNode;constructor(t){t.insertAdjacentHTML("beforeend",this.render()),this.loadingNode=t.lastChild}render(){return'<div class="pl-loading">\n              <div class="pl-loading-content">\n                <div class="pl-loading-spinner"></div>\n              </div>\n            </div>'}show(){return this.loadingNode.classList.add("pl-loading-show"),this}hide(){return this.loadingNode.classList.remove("pl-loading-show"),this}destroy(){this.loadingNode.remove()}}class o{modalNode;language;constructor(t,e){this.language=e,t.insertAdjacentHTML("beforeend",this.render()),this.modalNode=t.lastChild;for(let t of Array.from(this.modalNode.querySelectorAll("[data-element]")))this[t.dataset.element]=t}render(){return""}show(){return this.modalNode.classList.add("pl-modal-show"),this}hide(){return this.modalNode.classList.remove("pl-modal-show"),this}destroy(){this.modalNode.remove()}}class s extends o{message;constructor(t){super(t),this.message=this.modalNode.querySelector('[data-element="message"]')}render(){return'<div class="pl-modal">\n              <div class="pl-modal-dialog">\n                <div class="pl-modal-content">\n                  <div class="pl-modal-body">\n                    <div data-element="message">This is an error</div>\n                  </div>\n                </div>\n              </div>\n            </div>'}show(t){return this.message.textContent=t,super.show(),this}}var l=t=>t&&t.constructor&&t.constructor===Object.getPrototypeOf((async function(){})).constructor,c=async t=>new Promise((e=>setTimeout(e,1e3*t)));var u=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}return r.m=t,r.c=e,r.p="",r(0)}([function(t,e,r){var a=r(1).default;e.__esModule=!0;var n=a(r(2)),i=a(r(45)),o=r(46),s=r(51),l=a(r(52)),c=a(r(49)),u=a(r(44)),h=n.default.create;function d(){var t=h();return t.compile=function(e,r){return s.compile(e,r,t)},t.precompile=function(e,r){return s.precompile(e,r,t)},t.AST=i.default,t.Compiler=s.Compiler,t.JavaScriptCompiler=l.default,t.Parser=o.parser,t.parse=o.parse,t.parseWithoutProcessing=o.parseWithoutProcessing,t}var p=d();p.create=d,u.default(p),p.Visitor=c.default,p.default=p,e.default=p,t.exports=e.default},function(t,e){e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,r){var a=r(3).default,n=r(1).default;e.__esModule=!0;var i=a(r(4)),o=n(r(37)),s=n(r(6)),l=a(r(5)),c=a(r(38)),u=n(r(44));function h(){var t=new i.HandlebarsEnvironment;return l.extend(t,i),t.SafeString=o.default,t.Exception=s.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var d=h();d.create=h,u.default(d),d.default=d,e.default=d,t.exports=e.default},function(t,e){e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},e.__esModule=!0},function(t,e,r){var a=r(1).default;e.__esModule=!0,e.HandlebarsEnvironment=u;var n=r(5),i=a(r(6)),o=r(10),s=r(30),l=a(r(32)),c=r(33);function u(t,e,r){this.helpers=t||{},this.partials=e||{},this.decorators=r||{},o.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}e.VERSION="4.7.7",e.COMPILER_REVISION=8,e.LAST_COMPATIBLE_COMPILER_REVISION=7,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"},u.prototype={constructor:u,logger:l.default,log:l.default.log,registerHelper:function(t,e){if("[object Object]"===n.toString.call(t)){if(e)throw new i.default("Arg not supported with multiple helpers");n.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if("[object Object]"===n.toString.call(t))n.extend(this.partials,t);else{if(void 0===e)throw new i.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if("[object Object]"===n.toString.call(t)){if(e)throw new i.default("Arg not supported with multiple decorators");n.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var h=l.default.log;e.log=h,e.createFrame=n.createFrame,e.logger=l.default},function(t,e){e.__esModule=!0,e.extend=o,e.indexOf=function(t,e){for(var r=0,a=t.length;r<a;r++)if(t[r]===e)return r;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return n.test(t)?t.replace(a,i):t},e.isEmpty=function(t){return!t&&0!==t||!(!c(t)||0!==t.length)},e.createFrame=function(t){var e=o({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},a=/[&<>"'`=]/g,n=/[&<>"'`=]/;function i(t){return r[t]}function o(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],r)&&(t[r]=arguments[e][r]);return t}var s=Object.prototype.toString;e.toString=s;var l=function(t){return"function"==typeof t};l(/x/)&&(e.isFunction=l=function(t){return"function"==typeof t&&"[object Function]"===s.call(t)}),e.isFunction=l;var c=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===s.call(t)};e.isArray=c},function(t,e,r){var a=r(7).default;e.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function i(t,e){var r=e&&e.loc,o=void 0,s=void 0,l=void 0,c=void 0;r&&(o=r.start.line,s=r.end.line,l=r.start.column,c=r.end.column,t+=" - "+o+":"+l);for(var u=Error.prototype.constructor.call(this,t),h=0;h<n.length;h++)this[n[h]]=u[n[h]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{r&&(this.lineNumber=o,this.endLineNumber=s,a?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:c,enumerable:!0})):(this.column=l,this.endColumn=c))}catch(t){}}i.prototype=new Error,e.default=i,t.exports=e.default},function(t,e,r){t.exports={default:r(8),__esModule:!0}},function(t,e,r){var a=r(9);t.exports=function(t,e,r){return a.setDesc(t,e,r)}},function(t,e){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(t,e,r){var a=r(1).default;e.__esModule=!0,e.registerDefaultHelpers=function(t){n.default(t),i.default(t),o.default(t),s.default(t),l.default(t),c.default(t),u.default(t)},e.moveHelperToHooks=function(t,e,r){t.helpers[e]&&(t.hooks[e]=t.helpers[e],r||delete t.helpers[e])};var n=a(r(11)),i=a(r(12)),o=a(r(25)),s=a(r(26)),l=a(r(27)),c=a(r(28)),u=a(r(29))},function(t,e,r){e.__esModule=!0;var a=r(5);e.default=function(t){t.registerHelper("blockHelperMissing",(function(e,r){var n=r.inverse,i=r.fn;if(!0===e)return i(this);if(!1===e||null==e)return n(this);if(a.isArray(e))return e.length>0?(r.ids&&(r.ids=[r.name]),t.helpers.each(e,r)):n(this);if(r.data&&r.ids){var o=a.createFrame(r.data);o.contextPath=a.appendContextPath(r.data.contextPath,r.name),r={data:o}}return i(e,r)}))},t.exports=e.default},function(t,e,r){(function(a){var n=r(13).default,i=r(1).default;e.__esModule=!0;var o=r(5),s=i(r(6));e.default=function(t){t.registerHelper("each",(function(t,e){if(!e)throw new s.default("Must pass iterator to #each");var r,i=e.fn,l=e.inverse,c=0,u="",h=void 0,d=void 0;function p(e,r,a){h&&(h.key=e,h.index=r,h.first=0===r,h.last=!!a,d&&(h.contextPath=d+e)),u+=i(t[e],{data:h,blockParams:o.blockParams([t[e],e],[d+e,null])})}if(e.data&&e.ids&&(d=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),o.isFunction(t)&&(t=t.call(this)),e.data&&(h=o.createFrame(e.data)),t&&"object"==typeof t)if(o.isArray(t))for(var f=t.length;c<f;c++)c in t&&p(c,c,c===t.length-1);else if(a.Symbol&&t[a.Symbol.iterator]){for(var m=[],g=t[a.Symbol.iterator](),v=g.next();!v.done;v=g.next())m.push(v.value);for(f=(t=m).length;c<f;c++)p(c,c,c===t.length-1)}else r=void 0,n(t).forEach((function(t){void 0!==r&&p(r,c-1),r=t,c++})),void 0!==r&&p(r,c-1,!0);return 0===c&&(u=l(this)),u}))},t.exports=e.default}).call(e,function(){return this}())},function(t,e,r){t.exports={default:r(14),__esModule:!0}},function(t,e,r){r(15),t.exports=r(21).Object.keys},function(t,e,r){var a=r(16);r(18)("keys",(function(t){return function(e){return t(a(e))}}))},function(t,e,r){var a=r(17);t.exports=function(t){return Object(a(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var a=r(19),n=r(21),i=r(24);t.exports=function(t,e){var r=(n.Object||{})[t]||Object[t],o={};o[t]=e(r),a(a.S+a.F*i((function(){r(1)})),"Object",o)}},function(t,e,r){var a=r(20),n=r(21),i=r(22),o=function(t,e,r){var s,l,c,u=t&o.F,h=t&o.G,d=t&o.S,p=t&o.P,f=t&o.B,m=t&o.W,g=h?n:n[e]||(n[e]={}),v=h?a:d?a[e]:(a[e]||{}).prototype;for(s in h&&(r=e),r)(l=!u&&v&&s in v)&&s in g||(c=l?v[s]:r[s],g[s]=h&&"function"!=typeof v[s]?r[s]:f&&l?i(c,a):m&&v[s]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e.prototype=t.prototype,e}(c):p&&"function"==typeof c?i(Function.call,c):c,p&&((g.prototype||(g.prototype={}))[s]=c))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,t.exports=o},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(t,e,r){var a=r(23);t.exports=function(t,e,r){if(a(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,a){return t.call(e,r,a)};case 3:return function(r,a,n){return t.call(e,r,a,n)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var a=r(1).default;e.__esModule=!0;var n=a(r(6));e.default=function(t){t.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new n.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=e.default},function(t,e,r){var a=r(1).default;e.__esModule=!0;var n=r(5),i=a(r(6));e.default=function(t){t.registerHelper("if",(function(t,e){if(2!=arguments.length)throw new i.default("#if requires exactly one argument");return n.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||n.isEmpty(t)?e.inverse(this):e.fn(this)})),t.registerHelper("unless",(function(e,r){if(2!=arguments.length)throw new i.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:r.inverse,inverse:r.fn,hash:r.hash})}))},t.exports=e.default},function(t,e){e.__esModule=!0,e.default=function(t){t.registerHelper("log",(function(){for(var e=[void 0],r=arguments[arguments.length-1],a=0;a<arguments.length-1;a++)e.push(arguments[a]);var n=1;null!=r.hash.level?n=r.hash.level:r.data&&null!=r.data.level&&(n=r.data.level),e[0]=n,t.log.apply(t,e)}))},t.exports=e.default},function(t,e){e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",(function(t,e,r){return t?r.lookupProperty(t,e):t}))},t.exports=e.default},function(t,e,r){var a=r(1).default;e.__esModule=!0;var n=r(5),i=a(r(6));e.default=function(t){t.registerHelper("with",(function(t,e){if(2!=arguments.length)throw new i.default("#with requires exactly one argument");n.isFunction(t)&&(t=t.call(this));var r=e.fn;if(n.isEmpty(t))return e.inverse(this);var a=e.data;return e.data&&e.ids&&((a=n.createFrame(e.data)).contextPath=n.appendContextPath(e.data.contextPath,e.ids[0])),r(t,{data:a,blockParams:n.blockParams([t],[a&&a.contextPath])})}))},t.exports=e.default},function(t,e,r){var a=r(1).default;e.__esModule=!0,e.registerDefaultDecorators=function(t){n.default(t)};var n=a(r(31))},function(t,e,r){e.__esModule=!0;var a=r(5);e.default=function(t){t.registerDecorator("inline",(function(t,e,r,n){var i=t;return e.partials||(e.partials={},i=function(n,i){var o=r.partials;r.partials=a.extend({},o,e.partials);var s=t(n,i);return r.partials=o,s}),e.partials[n.args[0]]=n.fn,i}))},t.exports=e.default},function(t,e,r){e.__esModule=!0;var a=r(5),n={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=a.indexOf(n.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=n.lookupLevel(t),"undefined"!=typeof console&&n.lookupLevel(n.level)<=t){var e=n.methodMap[t];console[e]||(e="log");for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];console[e].apply(console,a)}}};e.default=n,t.exports=e.default},function(t,e,r){var a=r(34).default,n=r(13).default,i=r(3).default;e.__esModule=!0,e.createProtoAccessControl=function(t){var e=a(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var r=a(null);return r.__proto__=!1,{properties:{whitelist:o.createNewLookupObject(r,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:o.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}},e.resultIsAllowed=function(t,e,r){return function(t,e){return void 0!==t.whitelist[e]?!0===t.whitelist[e]:void 0!==t.defaultValue?t.defaultValue:(function(t){!0!==l[t]&&(l[t]=!0,s.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(e),!1)}("function"==typeof t?e.methods:e.properties,r)},e.resetLoggedProperties=function(){n(l).forEach((function(t){delete l[t]}))};var o=r(36),s=i(r(32)),l=a(null)},function(t,e,r){t.exports={default:r(35),__esModule:!0}},function(t,e,r){var a=r(9);t.exports=function(t,e){return a.create(t,e)}},function(t,e,r){var a=r(34).default;e.__esModule=!0,e.createNewLookupObject=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return n.extend.apply(void 0,[a(null)].concat(e))};var n=r(5)},function(t,e){function r(t){this.string=t}e.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default},function(t,e,r){var a=r(39).default,n=r(13).default,i=r(3).default,o=r(1).default;e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,r=c.COMPILER_REVISION;if(!(e>=c.LAST_COMPATIBLE_COMPILER_REVISION&&e<=c.COMPILER_REVISION)){if(e<c.LAST_COMPATIBLE_COMPILER_REVISION){var a=c.REVISION_CHANGES[r],n=c.REVISION_CHANGES[e];throw new l.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+n+").")}throw new l.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(t,e){if(!e)throw new l.default("No environment passed to template");if(!t||!t.main)throw new l.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var r=t.compiler&&7===t.compiler[0],i={strict:function(t,e,r){if(!t||!(e in t))throw new l.default('"'+e+'" not defined in '+t,{loc:r});return i.lookupProperty(t,e)},lookupProperty:function(t,e){var r=t[e];return null==r||Object.prototype.hasOwnProperty.call(t,e)||d.resultIsAllowed(r,i.protoAccessControl,e)?r:void 0},lookup:function(t,e){for(var r=t.length,a=0;a<r;a++)if(null!=(t[a]&&i.lookupProperty(t[a],e)))return t[a][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:s.escapeExpression,invokePartial:function(r,a,n){n.hash&&(a=s.extend({},a,n.hash),n.ids&&(n.ids[0]=!0)),r=e.VM.resolvePartial.call(this,r,a,n);var i=s.extend({},n,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),o=e.VM.invokePartial.call(this,r,a,i);if(null==o&&e.compile&&(n.partials[n.name]=e.compile(r,t.compilerOptions,e),o=n.partials[n.name](a,i)),null!=o){if(n.indent){for(var c=o.split("\n"),u=0,h=c.length;u<h&&(c[u]||u+1!==h);u++)c[u]=n.indent+c[u];o=c.join("\n")}return o}throw new l.default("The partial "+n.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var r=t[e];return r.decorator=t[e+"_d"],r},programs:[],program:function(t,e,r,a,n){var i=this.programs[t],o=this.fn(t);return e||n||a||r?i=p(this,t,o,e,r,a,n):i||(i=this.programs[t]=p(this,t,o)),i},data:function(t,e){for(;t&&e--;)t=t._parent;return t},mergeIfNeeded:function(t,e){var r=t||e;return t&&e&&t!==e&&(r=s.extend({},e,t)),r},nullContext:a({}),noop:e.VM.noop,compilerInfo:t.compiler};function o(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=r.data;o._setup(r),!r.partial&&t.useData&&(a=m(e,a));var n=void 0,s=t.useBlockParams?[]:void 0;function l(e){return""+t.main(i,e,i.helpers,i.partials,a,s,n)}return t.useDepths&&(n=r.depths?e!=r.depths[0]?[e].concat(r.depths):r.depths:[e]),(l=g(t.main,l,i,r.depths||[],a,s))(e,r)}return o.isTop=!0,o._setup=function(a){if(a.partial)i.protoAccessControl=a.protoAccessControl,i.helpers=a.helpers,i.partials=a.partials,i.decorators=a.decorators,i.hooks=a.hooks;else{var o=s.extend({},e.helpers,a.helpers);!function(t,e){n(t).forEach((function(r){var a=t[r];t[r]=function(t,e){var r=e.lookupProperty;return h.wrapHelper(t,(function(t){return s.extend({lookupProperty:r},t)}))}(a,e)}))}(o,i),i.helpers=o,t.usePartial&&(i.partials=i.mergeIfNeeded(a.partials,e.partials)),(t.usePartial||t.useDecorators)&&(i.decorators=s.extend({},e.decorators,a.decorators)),i.hooks={},i.protoAccessControl=d.createProtoAccessControl(a);var l=a.allowCallsToHelperMissing||r;u.moveHelperToHooks(i,"helperMissing",l),u.moveHelperToHooks(i,"blockHelperMissing",l)}},o._child=function(e,r,a,n){if(t.useBlockParams&&!a)throw new l.default("must pass block params");if(t.useDepths&&!n)throw new l.default("must pass parent depths");return p(i,e,t[e],r,0,a,n)},o},e.wrapProgram=p,e.resolvePartial=function(t,e,r){return t?t.call||r.name||(r.name=t,t=r.partials[t]):t="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],t},e.invokePartial=function(t,e,r){var a=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var n=void 0;if(r.fn&&r.fn!==f&&function(){r.data=c.createFrame(r.data);var t=r.fn;n=r.data["partial-block"]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=c.createFrame(r.data),r.data["partial-block"]=a,t(e,r)},t.partials&&(r.partials=s.extend({},r.partials,t.partials))}(),void 0===t&&n&&(t=n),void 0===t)throw new l.default("The partial "+r.name+" could not be found");if(t instanceof Function)return t(e,r)},e.noop=f;var s=i(r(5)),l=o(r(6)),c=r(4),u=r(10),h=r(43),d=r(33);function p(t,e,r,a,n,i,o){function s(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return!o||e==o[0]||e===t.nullContext&&null===o[0]||(s=[e].concat(o)),r(t,e,t.helpers,t.partials,n.data||a,i&&[n.blockParams].concat(i),s)}return(s=g(r,s,t,o,a,i)).program=e,s.depth=o?o.length:0,s.blockParams=n||0,s}function f(){return""}function m(t,e){return e&&"root"in e||((e=e?c.createFrame(e):{}).root=t),e}function g(t,e,r,a,n,i){if(t.decorator){var o={};e=t.decorator(e,o,r,a&&a[0],n,i,a),s.extend(e,o)}return e}},function(t,e,r){t.exports={default:r(40),__esModule:!0}},function(t,e,r){r(41),t.exports=r(21).Object.seal},function(t,e,r){var a=r(42);r(18)("seal",(function(t){return function(e){return t&&a(e)?t(e):e}}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){e.__esModule=!0,e.wrapHelper=function(t,e){return"function"!=typeof t?t:function(){var r=arguments[arguments.length-1];return arguments[arguments.length-1]=e(r),t.apply(this,arguments)}}},function(t,e){(function(r){e.__esModule=!0,e.default=function(t){var e=void 0!==r?r:window,a=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=a),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){e.__esModule=!0;var r={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!r.helpers.scopedId(t)&&!t.depth}}};e.default=r,t.exports=e.default},function(t,e,r){var a=r(1).default,n=r(3).default;e.__esModule=!0,e.parseWithoutProcessing=u,e.parse=function(t,e){var r=u(t,e);return new o.default(e).accept(r)};var i=a(r(47)),o=a(r(48)),s=n(r(50)),l=r(5);e.parser=i.default;var c={};function u(t,e){return"Program"===t.type?t:(i.default.yy=c,c.locInfo=function(t){return new c.SourceLocation(e&&e.srcName,t)},i.default.parse(t))}l.extend(c,s)},function(t,e){e.__esModule=!0;var r=function(){var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,r,a,n,i,o){var s=i.length-1;switch(n){case 1:return i[s-1];case 2:this.$=a.prepareProgram(i[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=i[s];break;case 9:this.$={type:"CommentStatement",value:a.stripComment(i[s]),strip:a.stripFlags(i[s],i[s]),loc:a.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:i[s],value:i[s],loc:a.locInfo(this._$)};break;case 11:this.$=a.prepareRawBlock(i[s-2],i[s-1],i[s],this._$);break;case 12:this.$={path:i[s-3],params:i[s-2],hash:i[s-1]};break;case 13:this.$=a.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!1,this._$);break;case 14:this.$=a.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!0,this._$);break;case 15:this.$={open:i[s-5],path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:a.stripFlags(i[s-5],i[s])};break;case 16:case 17:this.$={path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:a.stripFlags(i[s-5],i[s])};break;case 18:this.$={strip:a.stripFlags(i[s-1],i[s-1]),program:i[s]};break;case 19:var l=a.prepareBlock(i[s-2],i[s-1],i[s],i[s],!1,this._$),c=a.prepareProgram([l],i[s-1].loc);c.chained=!0,this.$={strip:i[s-2].strip,program:c,chain:!0};break;case 21:this.$={path:i[s-1],strip:a.stripFlags(i[s-2],i[s])};break;case 22:case 23:this.$=a.prepareMustache(i[s-3],i[s-2],i[s-1],i[s-4],a.stripFlags(i[s-4],i[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:i[s-3],params:i[s-2],hash:i[s-1],indent:"",strip:a.stripFlags(i[s-4],i[s]),loc:a.locInfo(this._$)};break;case 25:this.$=a.preparePartialBlock(i[s-2],i[s-1],i[s],this._$);break;case 26:this.$={path:i[s-3],params:i[s-2],hash:i[s-1],strip:a.stripFlags(i[s-4],i[s])};break;case 29:this.$={type:"SubExpression",path:i[s-3],params:i[s-2],hash:i[s-1],loc:a.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:i[s],loc:a.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:a.id(i[s-2]),value:i[s],loc:a.locInfo(this._$)};break;case 32:this.$=a.id(i[s-1]);break;case 35:this.$={type:"StringLiteral",value:i[s],original:i[s],loc:a.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(i[s]),original:Number(i[s]),loc:a.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===i[s],original:"true"===i[s],loc:a.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:a.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:a.locInfo(this._$)};break;case 42:this.$=a.preparePath(!0,i[s],this._$);break;case 43:this.$=a.preparePath(!1,i[s],this._$);break;case 44:i[s-2].push({part:a.id(i[s]),original:i[s],separator:i[s-1]}),this.$=i[s-2];break;case 45:this.$=[{part:a.id(i[s]),original:i[s]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:i[s-1].push(i[s]);break;case 98:case 100:this.$=[i[s]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=[0],r=[null],a=[],n=this.table,i="",o=0,s=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;a.push(l);var c=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var u,h,d,p,f,m,g,v,y,_={};;){if(h=e[e.length-1],this.defaultActions[h]?d=this.defaultActions[h]:(null==u&&(y=void 0,"number"!=typeof(y=this.lexer.lex()||1)&&(y=this.symbols_[y]||y),u=y),d=n[h]&&n[h][u]),void 0===d||!d.length||!d[0]){var b;for(f in v=[],n[h])this.terminals_[f]&&f>2&&v.push("'"+this.terminals_[f]+"'");b=this.lexer.showPosition?"Parse error on line "+(o+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[u]||u)+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==u?"end of input":"'"+(this.terminals_[u]||u)+"'"),this.parseError(b,{text:this.lexer.match,token:this.terminals_[u]||u,line:this.lexer.yylineno,loc:l,expected:v})}if(d[0]instanceof Array&&d.length>1)throw new Error("Parse Error: multiple actions possible at state: "+h+", token: "+u);switch(d[0]){case 1:e.push(u),r.push(this.lexer.yytext),a.push(this.lexer.yylloc),e.push(d[1]),u=null,s=this.lexer.yyleng,i=this.lexer.yytext,o=this.lexer.yylineno,l=this.lexer.yylloc;break;case 2:if(m=this.productions_[d[1]][1],_.$=r[r.length-m],_._$={first_line:a[a.length-(m||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(m||1)].first_column,last_column:a[a.length-1].last_column},c&&(_._$.range=[a[a.length-(m||1)].range[0],a[a.length-1].range[1]]),void 0!==(p=this.performAction.call(_,i,s,o,this.yy,d[1],r,a)))return p;m&&(e=e.slice(0,-1*m*2),r=r.slice(0,-1*m),a=a.slice(0,-1*m)),e.push(this.productions_[d[1]][0]),r.push(_.$),a.push(_._$),g=n[e[e.length-2]][e[e.length-1]],e.push(g);break;case 3:return!0}}return!0}},e=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===a.length?this.yylloc.first_column:0)+a[a.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,r,a,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length&&(!(r=this._input.match(this.rules[i[o]]))||e&&!(r[0].length>e[0].length)||(e=r,a=o,this.options.flex));o++);return e?((n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,i[a],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,r,a){function n(t,r){return e.yytext=e.yytext.substring(t,e.yyleng-r+t)}switch(r){case 0:if("\\\\"===e.yytext.slice(-2)?(n(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(n(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(n(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=n(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=n(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return t}();function r(){this.yy={}}return t.lexer=e,r.prototype=t,t.Parser=r,new r}();e.default=r,t.exports=e.default},function(t,e,r){var a=r(1).default;e.__esModule=!0;var n=a(r(49));function i(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function o(t,e,r){void 0===e&&(e=t.length);var a=t[e-1],n=t[e-2];return a?"ContentStatement"===a.type?(n||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(a.original):void 0:r}function s(t,e,r){void 0===e&&(e=-1);var a=t[e+1],n=t[e+2];return a?"ContentStatement"===a.type?(n||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(a.original):void 0:r}function l(t,e,r){var a=t[null==e?0:e+1];if(a&&"ContentStatement"===a.type&&(r||!a.rightStripped)){var n=a.value;a.value=a.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),a.rightStripped=a.value!==n}}function c(t,e,r){var a=t[null==e?t.length-1:e-1];if(a&&"ContentStatement"===a.type&&(r||!a.leftStripped)){var n=a.value;return a.value=a.value.replace(r?/\s+$/:/[ \t]+$/,""),a.leftStripped=a.value!==n,a.leftStripped}}i.prototype=new n.default,i.prototype.Program=function(t){var e=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var a=t.body,n=0,i=a.length;n<i;n++){var u=a[n],h=this.accept(u);if(h){var d=o(a,n,r),p=s(a,n,r),f=h.openStandalone&&d,m=h.closeStandalone&&p,g=h.inlineStandalone&&d&&p;h.close&&l(a,n,!0),h.open&&c(a,n,!0),e&&g&&(l(a,n),c(a,n)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(a[n-1].original)[1])),e&&f&&(l((u.program||u.inverse).body),c(a,n)),e&&m&&(l(a,n),c((u.inverse||u.program).body))}}return t},i.prototype.BlockStatement=i.prototype.DecoratorBlock=i.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,r=t.program&&t.inverse,a=r,n=r;if(r&&r.chained)for(a=r.body[0].program;n.chained;)n=n.body[n.body.length-1].program;var i={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:s(e.body),closeStandalone:o((a||e).body)};if(t.openStrip.close&&l(e.body,null,!0),r){var u=t.inverseStrip;u.open&&c(e.body,null,!0),u.close&&l(a.body,null,!0),t.closeStrip.open&&c(n.body,null,!0),!this.options.ignoreStandalone&&o(e.body)&&s(a.body)&&(c(e.body),l(a.body))}else t.closeStrip.open&&c(e.body,null,!0);return i},i.prototype.Decorator=i.prototype.MustacheStatement=function(t){return t.strip},i.prototype.PartialStatement=i.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=i,t.exports=e.default},function(t,e,r){var a=r(1).default;e.__esModule=!0;var n=a(r(6));function i(){this.parents=[]}function o(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function s(t){o.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function l(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}i.prototype={constructor:i,mutating:!1,acceptKey:function(t,e){var r=this.accept(t[e]);if(this.mutating){if(r&&!i.prototype[r.type])throw new n.default('Unexpected node type "'+r.type+'" found when accepting '+e+" on "+t.type);t[e]=r}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new n.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,r=t.length;e<r;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,r--)},accept:function(t){if(t){if(!this[t.type])throw new n.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:o,Decorator:o,BlockStatement:s,DecoratorBlock:s,PartialStatement:l,PartialBlockStatement:function(t){l.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:o,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=i,t.exports=e.default},function(t,e,r){var a=r(1).default;e.__esModule=!0,e.SourceLocation=function(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t},e.stripFlags=function(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(t,e,r){r=this.locInfo(r);for(var a=t?"@":"",i=[],o=0,s=0,l=e.length;s<l;s++){var c=e[s].part,u=e[s].original!==c;if(a+=(e[s].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)i.push(c);else{if(i.length>0)throw new n.default("Invalid path: "+a,{loc:r});".."===c&&o++}}return{type:"PathExpression",data:t,depth:o,parts:i,original:a,loc:r}},e.prepareMustache=function(t,e,r,a,n,i){var o=a.charAt(3)||a.charAt(2),s="{"!==o&&"&"!==o;return{type:/\*/.test(a)?"Decorator":"MustacheStatement",path:t,params:e,hash:r,escaped:s,strip:n,loc:this.locInfo(i)}},e.prepareRawBlock=function(t,e,r,a){i(t,r);var n={type:"Program",body:e,strip:{},loc:a=this.locInfo(a)};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:n,openStrip:{},inverseStrip:{},closeStrip:{},loc:a}},e.prepareBlock=function(t,e,r,a,o,s){a&&a.path&&i(t,a);var l=/\*/.test(t.open);e.blockParams=t.blockParams;var c=void 0,u=void 0;if(r){if(l)throw new n.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=a.strip),u=r.strip,c=r.program}return o&&(o=c,c=e,e=o),{type:l?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:c,openStrip:t.strip,inverseStrip:u,closeStrip:a&&a.strip,loc:this.locInfo(s)}},e.prepareProgram=function(t,e){if(!e&&t.length){var r=t[0].loc,a=t[t.length-1].loc;r&&a&&(e={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:a.end.line,column:a.end.column}})}return{type:"Program",body:t,strip:{},loc:e}},e.preparePartialBlock=function(t,e,r,a){return i(t,r),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:r&&r.strip,loc:this.locInfo(a)}};var n=a(r(6));function i(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var r={loc:t.path.loc};throw new n.default(t.path.original+" doesn't match "+e,r)}}},function(t,e,r){var a=r(34).default,n=r(1).default;e.__esModule=!0,e.Compiler=c,e.precompile=function(t,e,r){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0),e.compat&&(e.useDepths=!0);var a=r.parse(t,e),n=(new r.Compiler).compile(a,e);return(new r.JavaScriptCompiler).compile(n,e)},e.compile=function(t,e,r){if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=o.extend({},e))||(e.data=!0),e.compat&&(e.useDepths=!0);var a=void 0;function n(){var a=r.parse(t,e),n=(new r.Compiler).compile(a,e),i=(new r.JavaScriptCompiler).compile(n,e,void 0,!0);return r.template(i)}function s(t,e){return a||(a=n()),a.call(this,t,e)}return s._setup=function(t){return a||(a=n()),a._setup(t)},s._child=function(t,e,r,i){return a||(a=n()),a._child(t,e,r,i)},s};var i=n(r(6)),o=r(5),s=n(r(45)),l=[].slice;function c(){}function u(t,e){if(t===e)return!0;if(o.isArray(t)&&o.isArray(e)&&t.length===e.length){for(var r=0;r<t.length;r++)if(!u(t[r],e[r]))return!1;return!0}}function h(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}c.prototype={compiler:c,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var r=0;r<e;r++){var a=this.opcodes[r],n=t.opcodes[r];if(a.opcode!==n.opcode||!u(a.args,n.args))return!1}for(e=this.children.length,r=0;r<e;r++)if(!this.children[r].equals(t.children[r]))return!1;return!0},guid:0,compile:function(t,e){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[],e.knownHelpers=o.extend(a(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},e.knownHelpers),this.accept(t)},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),r=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[r]=e,this.useDepths=this.useDepths||e.useDepths,r},accept:function(t){if(!this[t.type])throw new i.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,r=e.length,a=0;a<r;a++)this.accept(e[a]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){h(t);var e=t.program,r=t.inverse;e=e&&this.compileProgram(e),r=r&&this.compileProgram(r);var a=this.classifySexpr(t);"helper"===a?this.helperSexpr(t,e,r):"simple"===a?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,r),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),r=this.setupFullMustacheParams(t,e,void 0),a=t.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,a.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var r=t.params;if(r.length>1)throw new i.default("Unsupported number of partial arguments: "+r.length,t);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var a=t.name.original,n="SubExpression"===t.name.type;n&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",n,a,o),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){h(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,r){var a=t.path,n=a.parts[0],i=null!=e||null!=r;this.opcode("getContext",a.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",r),a.strict=!0,this.accept(a),this.opcode("invokeAmbiguous",n,i)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,r){var a=this.setupFullMustacheParams(t,e,r),n=t.path,o=n.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",a.length,o);else{if(this.options.knownHelpersOnly)throw new i.default("You specified knownHelpersOnly, but used the unknown helper "+o,t);n.strict=!0,n.falsy=!0,this.accept(n),this.opcode("invokeHelper",a.length,n.original,s.default.helpers.simpleId(n))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],r=s.default.helpers.scopedId(t),a=!t.depth&&!r&&this.blockParamIndex(e);a?this.opcode("lookupBlockParam",a,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,r):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,r=0,a=e.length;for(this.opcode("pushHash");r<a;r++)this.pushParam(e[r].value);for(;r--;)this.opcode("assignToHash",e[r].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:l.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=s.default.helpers.simpleId(t.path),r=e&&!!this.blockParamIndex(t.path.parts[0]),a=!r&&s.default.helpers.helperExpression(t),n=!r&&(a||e);if(n&&!a){var i=t.path.parts[0],o=this.options;o.knownHelpers[i]?a=!0:o.knownHelpersOnly&&(n=!1)}return a?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e=0,r=t.length;e<r;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var r=void 0;if(!t.parts||s.default.helpers.scopedId(t)||t.depth||(r=this.blockParamIndex(t.parts[0])),r){var a=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,a)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,r,a){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",r),t.hash?this.accept(t.hash):this.opcode("emptyHash",a),n},blockParamIndex:function(t){for(var e=0,r=this.options.blockParams.length;e<r;e++){var a=this.options.blockParams[e],n=a&&o.indexOf(a,t);if(a&&n>=0)return[e,n]}}}},function(t,e,r){var a=r(13).default,n=r(1).default;e.__esModule=!0;var i=r(4),o=n(r(6)),s=r(5),l=n(r(53));function c(t){this.value=t}function u(){}u.prototype={nameLookup:function(t,e){return this.internalNameLookup(t,e)},depthedLookup:function(t){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(t),")"]},compilerInfo:function(){var t=i.COMPILER_REVISION;return[t,i.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,r){return s.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:r?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(t,e){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",t,",",JSON.stringify(e),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(t,e,r,a){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!a,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var n=t.opcodes,i=void 0,s=void 0,l=void 0,c=void 0;for(l=0,c=n.length;l<c;l++)i=n[l],this.source.currentLocation=i.loc,s=s||i.loc,this[i.opcode].apply(this,i.args);if(this.source.currentLocation=s,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),a?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(a);if(this.isChild)return u;var h={compiler:this.compilerInfo(),main:u};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var d=this.context,p=d.programs,f=d.decorators;for(l=0,c=p.length;l<c;l++)p[l]&&(h[l]=p[l],f[l]&&(h[l+"_d"]=f[l],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),a?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),e.srcName?(h=h.toStringWithSourceMap({file:e.destName})).map=h.map&&h.map.toString():h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new l.default(this.options.srcName),this.decorators=new l.default(this.options.srcName)},createFunctionContext:function(t){var e=this,r="",n=this.stackVars.concat(this.registers.list);n.length>0&&(r+=", "+n.join(", "));var i=0;a(this.aliases).forEach((function(t){var a=e.aliases[t];a.children&&a.referenceCount>1&&(r+=", alias"+ ++i+"="+t,a.children[0]="alias"+i)})),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var o=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var s=this.mergeSource(r);return t?(o.push(s),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",s,"}"])},mergeSource:function(t){var e=this.environment.isSimple,r=!this.forceBuffer,a=void 0,n=void 0,i=void 0,o=void 0;return this.source.each((function(t){t.appendToBuffer?(i?t.prepend("  + "):i=t,o=t):(i&&(n?i.prepend("buffer += "):a=!0,o.add(";"),i=o=void 0),n=!0,e||(r=!1))})),r?i?(i.prepend("return "),o.add(";")):n||this.source.push('return "";'):(t+=", buffer = "+(a?"":this.initializeBuffer()),i?(i.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(a?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(t,0,r);var a=this.popStack();r.splice(1,0,a),this.push(this.source.functionCall(e,"call",r))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var r=this.topStack();e.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack((function(t){return[" != null ? ",t,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,r,a){var n=0;a||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[n++])),this.resolvePath("context",t,n,e,r)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,r){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,r)},resolvePath:function(t,e,r,a,n){var i=this;if(this.options.strict||this.options.assumeObjects)this.push(function(t,e,r,a){var n=e.popStack(),i=0,o=r.length;for(t&&o--;i<o;i++)n=e.nameLookup(n,r[i],a);return t?[e.aliasable("container.strict"),"(",n,", ",e.quotedString(r[i]),", ",JSON.stringify(e.source.currentLocation)," )"]:n}(this.options.strict&&n,this,e,t));else for(var o=e.length;r<o;r++)this.replaceStack((function(n){var o=i.nameLookup(n,e[r],t);return a?[" && ",o]:[" != null ? ",o," : ",n]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var r=this.nameLookup("decorators",e,"decorator"),a=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",a])," || fn;"])},invokeHelper:function(t,e,r){var a=this.popStack(),n=this.setupHelper(t,e),i=[];r&&i.push(n.name),i.push(a),this.options.strict||i.push(this.aliasable("container.hooks.helperMissing"));var o=["(",this.itemsSeparatedBy(i,"||"),")"],s=this.source.functionCall(o,"call",n.callParams);this.push(s)},itemsSeparatedBy:function(t,e){var r=[];r.push(t[0]);for(var a=1;a<t.length;a++)r.push(e,t[a]);return r},invokeKnownHelper:function(t,e){var r=this.setupHelper(t,e);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var r=this.popStack();this.emptyHash();var a=this.setupHelper(0,t,e),n=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",t,"helper")," || ",r,")"];this.options.strict||(n[0]="(helper = ",n.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",n,a.paramsInit?["),(",a.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",a.callParams)," : helper))"])},invokePartial:function(t,e,r){var a=[],n=this.setupParams(e,1,a);t&&(e=this.popStack(),delete n.name),r&&(n.indent=JSON.stringify(r)),n.helpers="helpers",n.partials="partials",n.decorators="container.decorators",t?a.unshift(e):a.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(n.depths="depths"),n=this.objectLiteral(n),a.push(n),this.push(this.source.functionCall("container.invokePartial","",a))},assignToHash:function(t){var e=this.popStack(),r=void 0,a=void 0,n=void 0;this.trackIds&&(n=this.popStack()),this.stringParams&&(a=this.popStack(),r=this.popStack());var i=this.hash;r&&(i.contexts[t]=r),a&&(i.types[t]=a),n&&(i.ids[t]=n),i.values[t]=e},pushId:function(t,e,r){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(t,e){for(var r=t.children,a=void 0,n=void 0,i=0,o=r.length;i<o;i++){a=r[i],n=new this.compiler;var s=this.matchExistingProgram(a);if(null==s){this.context.programs.push("");var l=this.context.programs.length;a.index=l,a.name="program"+l,this.context.programs[l]=n.compile(a,e,this.context,!this.precompile),this.context.decorators[l]=n.decorators,this.context.environments[l]=a,this.useDepths=this.useDepths||n.useDepths,this.useBlockParams=this.useBlockParams||n.useBlockParams,a.useDepths=this.useDepths,a.useBlockParams=this.useBlockParams}else a.index=s.index,a.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(t){for(var e=0,r=this.context.environments.length;e<r;e++){var a=this.context.environments[e];if(a&&a.equals(t))return a}},programExpression:function(t){var e=this.environment.children[t],r=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof c||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new c(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],r=void 0,a=void 0,n=void 0;if(!this.isInline())throw new o.default("replaceStack on non-inline");var i=this.popStack(!0);if(i instanceof c)e=["(",r=[i.value]],n=!0;else{a=!0;var s=this.incrStack();e=["((",this.push(s)," = ",i,")"],r=this.topStack()}var l=t.call(this,r);n||this.popStack(),a&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,r=t.length;e<r;e++){var a=t[e];if(a instanceof c)this.compileStack.push(a);else{var n=this.incrStack();this.pushSource([n," = ",a,";"]),this.compileStack.push(n)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),r=(e?this.inlineStack:this.compileStack).pop();if(!t&&r instanceof c)return r.value;if(!e){if(!this.stackSlot)throw new o.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof c?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,r){var a=[];return{params:a,paramsInit:this.setupHelperArgs(e,t,a,r),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(a)}},setupParams:function(t,e,r){var a={},n=[],i=[],o=[],s=!r,l=void 0;s&&(r=[]),a.name=this.quotedString(t),a.hash=this.popStack(),this.trackIds&&(a.hashIds=this.popStack()),this.stringParams&&(a.hashTypes=this.popStack(),a.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(a.fn=u||"container.noop",a.inverse=c||"container.noop");for(var h=e;h--;)l=this.popStack(),r[h]=l,this.trackIds&&(o[h]=this.popStack()),this.stringParams&&(i[h]=this.popStack(),n[h]=this.popStack());return s&&(a.args=this.source.generateArray(r)),this.trackIds&&(a.ids=this.source.generateArray(o)),this.stringParams&&(a.types=this.source.generateArray(i),a.contexts=this.source.generateArray(n)),this.options.data&&(a.data="data"),this.useBlockParams&&(a.blockParams="blockParams"),a},setupHelperArgs:function(t,e,r,a){var n=this.setupParams(t,e,r);return n.loc=JSON.stringify(this.source.currentLocation),n=this.objectLiteral(n),a?(this.useRegister("options"),r.push("options"),["options=",n]):r?(r.push(n),""):n}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=u.RESERVED_WORDS={},r=0,a=t.length;r<a;r++)e[t[r]]=!0}(),u.isValidJavaScriptVariableName=function(t){return!u.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=u,t.exports=e.default},function(t,e,r){var a=r(13).default;e.__esModule=!0;var n=r(5),i=void 0;function o(t,e,r){if(n.isArray(t)){for(var a=[],i=0,o=t.length;i<o;i++)a.push(e.wrap(t[i],r));return a}return"boolean"==typeof t||"number"==typeof t?t+"":t}function s(t){this.srcFile=t,this.source=[]}i||((i=function(t,e,r,a){this.src="",a&&this.add(a)}).prototype={add:function(t){n.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){n.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),s.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each((function(e){t.add(["  ",e,"\n"])})),t},each:function(t){for(var e=0,r=this.source.length;e<r;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new i(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof i?t:(t=o(t,this,e),new i(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,r){return r=this.generateList(r),this.wrap([t,e?"."+e+"(":"(",r,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=this,r=[];a(t).forEach((function(a){var n=o(t[a],e);"undefined"!==n&&r.push([e.quotedString(a),":",n])}));var n=this.generateList(r);return n.prepend("{"),n.add("}"),n},generateList:function(t){for(var e=this.empty(),r=0,a=t.length;r<a;r++)r&&e.add(","),e.add(o(t[r],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=s,t.exports=e.default}]));
/**!

 @license
 handlebars v4.7.7

Copyright (C) 2011-2019 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/function h(t){return"string"==typeof t}function d(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function p(t){return"[object Array]"===Object.prototype.toString.call(t)}var f,m=Object.freeze({__proto__:null,opr:function(t,e,r){if("=="===e)return t==r;if("==="===e)return t===r;if("!="===e)return t!=r;if("!=="===e)return t!==r;if("<"===e)return t<r;if(">"===e)return t>r;if("<="===e)return t<=r;if(">="===e)return t>=r;throw new Error(`opr helper operator: ${e} is invalid`)},eq:function(t,e){return t===e},eqw:function(t,e){return t==e},neq:function(t,e){return t!==e},neqw:function(t,e){return t!=e},lt:function(t,e){return t<e},gt:function(t,e){return t>e},gte:function(t,e){return t>=e},lte:function(t,e){return t<=e},ifx:function(t,e,r){return d(r)&&"ifx"===r.name&&r.hasOwnProperty("hash")&&(r=""),t?e:r},not:function(t){return!t},empty:function(t){return"string"==typeof t?t=t.replace(/^[\s　]+|[\s　]+$/g,""):Array.isArray(t)&&0===t.length&&(t=null),!t},notEmpty:function(t){return"string"==typeof t?t=t.replace(/^[\s　]+|[\s　]+$/g,""):Array.isArray(t)&&0===t.length&&(t=null),!!t},count:function(t){return!!p(t)&&t.length},and:function(...t){d(t[t.length-1])&&t.pop();for(let e=0;e<t.length;e++)if(!t[e])return!1;return!0},or:function(...t){d(t[t.length-1])&&t.pop();for(let e=0;e<t.length;e++)if(t[e])return!0;return!1},coalesce:function(...t){d(t[t.length-1])&&t.pop();for(let e=0;e<t.length;e++)if(t[e])return t[e];return t.pop()},includes:function(t,e,r=!0){if(!p(t)||0===t.length)return!1;for(let a=0;a<t.length;a++)if(r&&t[a]===e||!r&&t[a]==e)return!0;return!1}}),g={exports:{}};(f=g).exports=function(){var t,e;function r(){return t.apply(null,arguments)}function a(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(i(t,e))return!1;return!0}function s(t){return void 0===t}function l(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function c(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var r,a=[];for(r=0;r<t.length;++r)a.push(e(t[r],r));return a}function h(t,e){for(var r in e)i(e,r)&&(t[r]=e[r]);return i(e,"toString")&&(t.toString=e.toString),i(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,r,a){return we(t,e,r,a,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function m(t){if(null==t._isValid){var r=p(t),a=e.call(r.parsedDateParts,(function(t){return null!=t})),n=!isNaN(t._d.getTime())&&r.overflow<0&&!r.empty&&!r.invalidEra&&!r.invalidMonth&&!r.invalidWeekday&&!r.weekdayMismatch&&!r.nullInput&&!r.invalidFormat&&!r.userInvalidated&&(!r.meridiem||r.meridiem&&a);if(t._strict&&(n=n&&0===r.charsLeftOver&&0===r.unusedTokens.length&&void 0===r.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function g(t){var e=d(NaN);return null!=t?h(p(e),t):p(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){var e,r=Object(this),a=r.length>>>0;for(e=0;e<a;e++)if(e in r&&t.call(this,r[e],e,r))return!0;return!1};var v=r.momentProperties=[],y=!1;function _(t,e){var r,a,n;if(s(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),s(e._i)||(t._i=e._i),s(e._f)||(t._f=e._f),s(e._l)||(t._l=e._l),s(e._strict)||(t._strict=e._strict),s(e._tzm)||(t._tzm=e._tzm),s(e._isUTC)||(t._isUTC=e._isUTC),s(e._offset)||(t._offset=e._offset),s(e._pf)||(t._pf=p(e)),s(e._locale)||(t._locale=e._locale),v.length>0)for(r=0;r<v.length;r++)s(n=e[a=v[r]])||(t[a]=n);return t}function b(t){_(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,r.updateOffset(this),y=!1)}function A(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function S(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function k(t,e){var a=!0;return h((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),a){var n,o,s,l=[];for(o=0;o<arguments.length;o++){if(n="","object"==typeof arguments[o]){for(s in n+="\n["+o+"] ",arguments[0])i(arguments[0],s)&&(n+=s+": "+arguments[0][s]+", ");n=n.slice(0,-2)}else n=arguments[o];l.push(n)}S(t+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),a=!1}return e.apply(this,arguments)}),e)}var w,P={};function x(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),P[t]||(S(e),P[t]=!0)}function C(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function E(t,e){var r,a=h({},t);for(r in e)i(e,r)&&(n(t[r])&&n(e[r])?(a[r]={},h(a[r],t[r]),h(a[r],e[r])):null!=e[r]?a[r]=e[r]:delete a[r]);for(r in t)i(t,r)&&!i(e,r)&&n(t[r])&&(a[r]=h({},a[r]));return a}function T(t){null!=t&&this.set(t)}function F(t,e,r){var a=""+Math.abs(t),n=e-a.length;return(t>=0?r?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+a}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,w=Object.keys?Object.keys:function(t){var e,r=[];for(e in t)i(t,e)&&r.push(e);return r};var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,I=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,O={},R={};function D(t,e,r,a){var n=a;"string"==typeof a&&(n=function(){return this[a]()}),t&&(R[t]=n),e&&(R[e[0]]=function(){return F(n.apply(this,arguments),e[1],e[2])}),r&&(R[r]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function L(t,e){return t.isValid()?(e=N(e,t.localeData()),O[e]=O[e]||function(t){var e,r,a,n=t.match(M);for(e=0,r=n.length;e<r;e++)R[n[e]]?n[e]=R[n[e]]:n[e]=(a=n[e]).match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"");return function(e){var a,i="";for(a=0;a<r;a++)i+=C(n[a])?n[a].call(e,t):n[a];return i}}(e),O[e](t)):t.localeData().invalidDate()}function N(t,e){var r=5;function a(t){return e.longDateFormat(t)||t}for(I.lastIndex=0;r>=0&&I.test(t);)t=t.replace(I,a),I.lastIndex=0,r-=1;return t}var j={};function G(t,e){var r=t.toLowerCase();j[r]=j[r+"s"]=j[e]=t}function B(t){return"string"==typeof t?j[t]||j[t.toLowerCase()]:void 0}function U(t){var e,r,a={};for(r in t)i(t,r)&&(e=B(r))&&(a[e]=t[r]);return a}var W={};function z(t,e){W[t]=e}function H(t){return t%4==0&&t%100!=0||t%400==0}function q(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function V(t){var e=+t,r=0;return 0!==e&&isFinite(e)&&(r=q(e)),r}function Y(t,e){return function(a){return null!=a?(K(this,t,a),r.updateOffset(this,e),this):X(this,t)}}function X(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function K(t,e,r){t.isValid()&&!isNaN(r)&&("FullYear"===e&&H(t.year())&&1===t.month()&&29===t.date()?(r=V(r),t._d["set"+(t._isUTC?"UTC":"")+e](r,t.month(),At(r,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](r))}var $,J=/\d/,Q=/\d\d/,Z=/\d{3}/,tt=/\d{4}/,et=/[+-]?\d{6}/,rt=/\d\d?/,at=/\d\d\d\d?/,nt=/\d\d\d\d\d\d?/,it=/\d{1,3}/,ot=/\d{1,4}/,st=/[+-]?\d{1,6}/,lt=/\d+/,ct=/[+-]?\d+/,ut=/Z|[+-]\d\d:?\d\d/gi,ht=/Z|[+-]\d\d(?::?\d\d)?/gi,dt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pt(t,e,r){$[t]=C(e)?e:function(t,a){return t&&r?r:e}}function ft(t,e){return i($,t)?$[t](e._strict,e._locale):new RegExp(mt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,r,a,n){return e||r||a||n}))))}function mt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}$={};var gt,vt={};function yt(t,e){var r,a=e;for("string"==typeof t&&(t=[t]),l(e)&&(a=function(t,r){r[e]=V(t)}),r=0;r<t.length;r++)vt[t[r]]=a}function _t(t,e){yt(t,(function(t,r,a,n){a._w=a._w||{},e(t,a._w,a,n)}))}function bt(t,e,r){null!=e&&i(vt,t)&&vt[t](e,r._a,r,t)}function At(t,e){if(isNaN(t)||isNaN(e))return NaN;var r=(e%12+12)%12;return t+=(e-r)/12,1===r?H(t)?29:28:31-r%7%2}gt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},D("M",["MM",2],"Mo",(function(){return this.month()+1})),D("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),D("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),G("month","M"),z("month",8),pt("M",rt),pt("MM",rt,Q),pt("MMM",(function(t,e){return e.monthsShortRegex(t)})),pt("MMMM",(function(t,e){return e.monthsRegex(t)})),yt(["M","MM"],(function(t,e){e[1]=V(t)-1})),yt(["MMM","MMMM"],(function(t,e,r,a){var n=r._locale.monthsParse(t,a,r._strict);null!=n?e[1]=n:p(r).invalidMonth=t}));var St="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),kt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),wt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pt=dt,xt=dt;function Ct(t,e,r){var a,n,i,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)i=d([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(i,"").toLocaleLowerCase();return r?"MMM"===e?-1!==(n=gt.call(this._shortMonthsParse,o))?n:null:-1!==(n=gt.call(this._longMonthsParse,o))?n:null:"MMM"===e?-1!==(n=gt.call(this._shortMonthsParse,o))||-1!==(n=gt.call(this._longMonthsParse,o))?n:null:-1!==(n=gt.call(this._longMonthsParse,o))||-1!==(n=gt.call(this._shortMonthsParse,o))?n:null}function Et(t,e){var r;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=V(e);else if(!l(e=t.localeData().monthsParse(e)))return t;return r=Math.min(t.date(),At(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,r),t}function Tt(t){return null!=t?(Et(this,t),r.updateOffset(this,!0),this):X(this,"Month")}function Ft(){function t(t,e){return e.length-t.length}var e,r,a=[],n=[],i=[];for(e=0;e<12;e++)r=d([2e3,e]),a.push(this.monthsShort(r,"")),n.push(this.months(r,"")),i.push(this.months(r,"")),i.push(this.monthsShort(r,""));for(a.sort(t),n.sort(t),i.sort(t),e=0;e<12;e++)a[e]=mt(a[e]),n[e]=mt(n[e]);for(e=0;e<24;e++)i[e]=mt(i[e]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Mt(t){return H(t)?366:365}D("Y",0,0,(function(){var t=this.year();return t<=9999?F(t,4):"+"+t})),D(0,["YY",2],0,(function(){return this.year()%100})),D(0,["YYYY",4],0,"year"),D(0,["YYYYY",5],0,"year"),D(0,["YYYYYY",6,!0],0,"year"),G("year","y"),z("year",1),pt("Y",ct),pt("YY",rt,Q),pt("YYYY",ot,tt),pt("YYYYY",st,et),pt("YYYYYY",st,et),yt(["YYYYY","YYYYYY"],0),yt("YYYY",(function(t,e){e[0]=2===t.length?r.parseTwoDigitYear(t):V(t)})),yt("YY",(function(t,e){e[0]=r.parseTwoDigitYear(t)})),yt("Y",(function(t,e){e[0]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return V(t)+(V(t)>68?1900:2e3)};var It=Y("FullYear",!0);function Ot(t,e,r,a,n,i,o){var s;return t<100&&t>=0?(s=new Date(t+400,e,r,a,n,i,o),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,r,a,n,i,o),s}function Rt(t){var e,r;return t<100&&t>=0?((r=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,r)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Dt(t,e,r){var a=7+e-r;return-(7+Rt(t,0,a).getUTCDay()-e)%7+a-1}function Lt(t,e,r,a,n){var i,o,s=1+7*(e-1)+(7+r-a)%7+Dt(t,a,n);return s<=0?o=Mt(i=t-1)+s:s>Mt(t)?(i=t+1,o=s-Mt(t)):(i=t,o=s),{year:i,dayOfYear:o}}function Nt(t,e,r){var a,n,i=Dt(t.year(),e,r),o=Math.floor((t.dayOfYear()-i-1)/7)+1;return o<1?a=o+jt(n=t.year()-1,e,r):o>jt(t.year(),e,r)?(a=o-jt(t.year(),e,r),n=t.year()+1):(n=t.year(),a=o),{week:a,year:n}}function jt(t,e,r){var a=Dt(t,e,r),n=Dt(t+1,e,r);return(Mt(t)-a+n)/7}function Gt(t,e){return t.slice(e,7).concat(t.slice(0,e))}D("w",["ww",2],"wo","week"),D("W",["WW",2],"Wo","isoWeek"),G("week","w"),G("isoWeek","W"),z("week",5),z("isoWeek",5),pt("w",rt),pt("ww",rt,Q),pt("W",rt),pt("WW",rt,Q),_t(["w","ww","W","WW"],(function(t,e,r,a){e[a.substr(0,1)]=V(t)})),D("d",0,"do","day"),D("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),D("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),D("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),D("e",0,0,"weekday"),D("E",0,0,"isoWeekday"),G("day","d"),G("weekday","e"),G("isoWeekday","E"),z("day",11),z("weekday",11),z("isoWeekday",11),pt("d",rt),pt("e",rt),pt("E",rt),pt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),pt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),pt("dddd",(function(t,e){return e.weekdaysRegex(t)})),_t(["dd","ddd","dddd"],(function(t,e,r,a){var n=r._locale.weekdaysParse(t,a,r._strict);null!=n?e.d=n:p(r).invalidWeekday=t})),_t(["d","e","E"],(function(t,e,r,a){e[a]=V(t)}));var Bt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ut="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Wt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),zt=dt,Ht=dt,qt=dt;function Vt(t,e,r){var a,n,i,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)i=d([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(i,"").toLocaleLowerCase();return r?"dddd"===e?-1!==(n=gt.call(this._weekdaysParse,o))?n:null:"ddd"===e?-1!==(n=gt.call(this._shortWeekdaysParse,o))?n:null:-1!==(n=gt.call(this._minWeekdaysParse,o))?n:null:"dddd"===e?-1!==(n=gt.call(this._weekdaysParse,o))||-1!==(n=gt.call(this._shortWeekdaysParse,o))||-1!==(n=gt.call(this._minWeekdaysParse,o))?n:null:"ddd"===e?-1!==(n=gt.call(this._shortWeekdaysParse,o))||-1!==(n=gt.call(this._weekdaysParse,o))||-1!==(n=gt.call(this._minWeekdaysParse,o))?n:null:-1!==(n=gt.call(this._minWeekdaysParse,o))||-1!==(n=gt.call(this._weekdaysParse,o))||-1!==(n=gt.call(this._shortWeekdaysParse,o))?n:null}function Yt(){function t(t,e){return e.length-t.length}var e,r,a,n,i,o=[],s=[],l=[],c=[];for(e=0;e<7;e++)r=d([2e3,1]).day(e),a=mt(this.weekdaysMin(r,"")),n=mt(this.weekdaysShort(r,"")),i=mt(this.weekdays(r,"")),o.push(a),s.push(n),l.push(i),c.push(a),c.push(n),c.push(i);o.sort(t),s.sort(t),l.sort(t),c.sort(t),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Xt(){return this.hours()%12||12}function Kt(t,e){D(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function $t(t,e){return e._meridiemParse}D("H",["HH",2],0,"hour"),D("h",["hh",2],0,Xt),D("k",["kk",2],0,(function(){return this.hours()||24})),D("hmm",0,0,(function(){return""+Xt.apply(this)+F(this.minutes(),2)})),D("hmmss",0,0,(function(){return""+Xt.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)})),D("Hmm",0,0,(function(){return""+this.hours()+F(this.minutes(),2)})),D("Hmmss",0,0,(function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)})),Kt("a",!0),Kt("A",!1),G("hour","h"),z("hour",13),pt("a",$t),pt("A",$t),pt("H",rt),pt("h",rt),pt("k",rt),pt("HH",rt,Q),pt("hh",rt,Q),pt("kk",rt,Q),pt("hmm",at),pt("hmmss",nt),pt("Hmm",at),pt("Hmmss",nt),yt(["H","HH"],3),yt(["k","kk"],(function(t,e,r){var a=V(t);e[3]=24===a?0:a})),yt(["a","A"],(function(t,e,r){r._isPm=r._locale.isPM(t),r._meridiem=t})),yt(["h","hh"],(function(t,e,r){e[3]=V(t),p(r).bigHour=!0})),yt("hmm",(function(t,e,r){var a=t.length-2;e[3]=V(t.substr(0,a)),e[4]=V(t.substr(a)),p(r).bigHour=!0})),yt("hmmss",(function(t,e,r){var a=t.length-4,n=t.length-2;e[3]=V(t.substr(0,a)),e[4]=V(t.substr(a,2)),e[5]=V(t.substr(n)),p(r).bigHour=!0})),yt("Hmm",(function(t,e,r){var a=t.length-2;e[3]=V(t.substr(0,a)),e[4]=V(t.substr(a))})),yt("Hmmss",(function(t,e,r){var a=t.length-4,n=t.length-2;e[3]=V(t.substr(0,a)),e[4]=V(t.substr(a,2)),e[5]=V(t.substr(n))}));var Jt,Qt=Y("Hours",!0),Zt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:St,monthsShort:kt,week:{dow:0,doy:6},weekdays:Bt,weekdaysMin:Wt,weekdaysShort:Ut,meridiemParse:/[ap]\.?m?\.?/i},te={},ee={};function re(t,e){var r,a=Math.min(t.length,e.length);for(r=0;r<a;r+=1)if(t[r]!==e[r])return r;return a}function ae(t){return t?t.toLowerCase().replace("_","-"):t}function ne(t){var e=null;if(void 0===te[t]&&f&&f.exports)try{e=Jt._abbr,function(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}("./locale/"+t),ie(e)}catch(e){te[t]=null}return te[t]}function ie(t,e){var r;return t&&((r=s(e)?se(t):oe(t,e))?Jt=r:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Jt._abbr}function oe(t,e){if(null!==e){var r,a=Zt;if(e.abbr=t,null!=te[t])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=te[t]._config;else if(null!=e.parentLocale)if(null!=te[e.parentLocale])a=te[e.parentLocale]._config;else{if(null==(r=ne(e.parentLocale)))return ee[e.parentLocale]||(ee[e.parentLocale]=[]),ee[e.parentLocale].push({name:t,config:e}),null;a=r._config}return te[t]=new T(E(a,e)),ee[t]&&ee[t].forEach((function(t){oe(t.name,t.config)})),ie(t),te[t]}return delete te[t],null}function se(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Jt;if(!a(t)){if(e=ne(t))return e;t=[t]}return function(t){for(var e,r,a,n,i=0;i<t.length;){for(e=(n=ae(t[i]).split("-")).length,r=(r=ae(t[i+1]))?r.split("-"):null;e>0;){if(a=ne(n.slice(0,e).join("-")))return a;if(r&&r.length>=e&&re(n,r)>=e-1)break;e--}i++}return Jt}(t)}function le(t){var e,r=t._a;return r&&-2===p(t).overflow&&(e=r[1]<0||r[1]>11?1:r[2]<1||r[2]>At(r[0],r[1])?2:r[3]<0||r[3]>24||24===r[3]&&(0!==r[4]||0!==r[5]||0!==r[6])?3:r[4]<0||r[4]>59?4:r[5]<0||r[5]>59?5:r[6]<0||r[6]>999?6:-1,p(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),p(t)._overflowWeeks&&-1===e&&(e=7),p(t)._overflowWeekday&&-1===e&&(e=8),p(t).overflow=e),t}var ce=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ue=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,he=/Z|[+-]\d\d(?::?\d\d)?/,de=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],pe=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],fe=/^\/?Date\((-?\d+)/i,me=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ge={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ve(t){var e,r,a,n,i,o,s=t._i,l=ce.exec(s)||ue.exec(s);if(l){for(p(t).iso=!0,e=0,r=de.length;e<r;e++)if(de[e][1].exec(l[1])){n=de[e][0],a=!1!==de[e][2];break}if(null==n)return void(t._isValid=!1);if(l[3]){for(e=0,r=pe.length;e<r;e++)if(pe[e][1].exec(l[3])){i=(l[2]||" ")+pe[e][0];break}if(null==i)return void(t._isValid=!1)}if(!a&&null!=i)return void(t._isValid=!1);if(l[4]){if(!he.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=n+(i||"")+(o||""),Se(t)}else t._isValid=!1}function ye(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function _e(t){var e,r,a,n,i,o,s,l,c=me.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(r=c[4],a=c[3],n=c[2],i=c[5],o=c[6],s=c[7],l=[ye(r),kt.indexOf(a),parseInt(n,10),parseInt(i,10),parseInt(o,10)],s&&l.push(parseInt(s,10)),e=l,!function(t,e,r){return!t||Ut.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(p(r).weekdayMismatch=!0,r._isValid=!1,!1)}(c[1],e,t))return;t._a=e,t._tzm=function(t,e,r){if(t)return ge[t];if(e)return 0;var a=parseInt(r,10),n=a%100;return(a-n)/100*60+n}(c[8],c[9],c[10]),t._d=Rt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function be(t,e,r){return null!=t?t:null!=e?e:r}function Ae(t){var e,a,n,i,o,s=[];if(!t._d){for(n=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,r,a,n,i,o,s,l,c;null!=(e=t._w).GG||null!=e.W||null!=e.E?(i=1,o=4,r=be(e.GG,t._a[0],Nt(Pe(),1,4).year),a=be(e.W,1),((n=be(e.E,1))<1||n>7)&&(l=!0)):(i=t._locale._week.dow,o=t._locale._week.doy,c=Nt(Pe(),i,o),r=be(e.gg,t._a[0],c.year),a=be(e.w,c.week),null!=e.d?((n=e.d)<0||n>6)&&(l=!0):null!=e.e?(n=e.e+i,(e.e<0||e.e>6)&&(l=!0)):n=i),a<1||a>jt(r,i,o)?p(t)._overflowWeeks=!0:null!=l?p(t)._overflowWeekday=!0:(s=Lt(r,a,n,i,o),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(o=be(t._a[0],n[0]),(t._dayOfYear>Mt(o)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),a=Rt(o,0,t._dayOfYear),t._a[1]=a.getUTCMonth(),t._a[2]=a.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=n[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Rt:Ot).apply(null,s),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==i&&(p(t).weekdayMismatch=!0)}}function Se(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],p(t).empty=!0;var e,a,n,i,o,s,l=""+t._i,c=l.length,u=0;for(n=N(t._f,t._locale).match(M)||[],e=0;e<n.length;e++)i=n[e],(a=(l.match(ft(i,t))||[])[0])&&((o=l.substr(0,l.indexOf(a))).length>0&&p(t).unusedInput.push(o),l=l.slice(l.indexOf(a)+a.length),u+=a.length),R[i]?(a?p(t).empty=!1:p(t).unusedTokens.push(i),bt(i,a,t)):t._strict&&!a&&p(t).unusedTokens.push(i);p(t).charsLeftOver=c-u,l.length>0&&p(t).unusedInput.push(l),t._a[3]<=12&&!0===p(t).bigHour&&t._a[3]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[3]=function(t,e,r){var a;return null==r?e:null!=t.meridiemHour?t.meridiemHour(e,r):null!=t.isPM?((a=t.isPM(r))&&e<12&&(e+=12),a||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),null!==(s=p(t).era)&&(t._a[0]=t._locale.erasConvertYear(s,t._a[0])),Ae(t),le(t)}else _e(t);else ve(t)}function ke(t){var e=t._i,i=t._f;return t._locale=t._locale||se(t._l),null===e||void 0===i&&""===e?g({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),A(e)?new b(le(e)):(c(e)?t._d=e:a(i)?function(t){var e,r,a,n,i,o,s=!1;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(n=0;n<t._f.length;n++)i=0,o=!1,e=_({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[n],Se(e),m(e)&&(o=!0),i+=p(e).charsLeftOver,i+=10*p(e).unusedTokens.length,p(e).score=i,s?i<a&&(a=i,r=e):(null==a||i<a||o)&&(a=i,r=e,o&&(s=!0));h(t,r||e)}(t):i?Se(t):function(t){var e=t._i;s(e)?t._d=new Date(r.now()):c(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=fe.exec(t._i);null===e?(ve(t),!1===t._isValid&&(delete t._isValid,_e(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:r.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):a(e)?(t._a=u(e.slice(0),(function(t){return parseInt(t,10)})),Ae(t)):n(e)?function(t){if(!t._d){var e=U(t._i),r=void 0===e.day?e.date:e.day;t._a=u([e.year,e.month,r,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Ae(t)}}(t):l(e)?t._d=new Date(e):r.createFromInputFallback(t)}(t),m(t)||(t._d=null),t))}function we(t,e,r,i,s){var l,c={};return!0!==e&&!1!==e||(i=e,e=void 0),!0!==r&&!1!==r||(i=r,r=void 0),(n(t)&&o(t)||a(t)&&0===t.length)&&(t=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=s,c._l=r,c._i=t,c._f=e,c._strict=i,(l=new b(le(ke(c))))._nextDay&&(l.add(1,"d"),l._nextDay=void 0),l}function Pe(t,e,r,a){return we(t,e,r,a,!1)}r.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var xe=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Pe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:g()})),Ce=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Pe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:g()}));function Ee(t,e){var r,n;if(1===e.length&&a(e[0])&&(e=e[0]),!e.length)return Pe();for(r=e[0],n=1;n<e.length;++n)e[n].isValid()&&!e[n][t](r)||(r=e[n]);return r}var Te=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Fe(t){var e=U(t),r=e.year||0,a=e.quarter||0,n=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,l=e.hour||0,c=e.minute||0,u=e.second||0,h=e.millisecond||0;this._isValid=function(t){var e,r,a=!1;for(e in t)if(i(t,e)&&(-1===gt.call(Te,e)||null!=t[e]&&isNaN(t[e])))return!1;for(r=0;r<Te.length;++r)if(t[Te[r]]){if(a)return!1;parseFloat(t[Te[r]])!==V(t[Te[r]])&&(a=!0)}return!0}(e),this._milliseconds=+h+1e3*u+6e4*c+1e3*l*60*60,this._days=+s+7*o,this._months=+n+3*a+12*r,this._data={},this._locale=se(),this._bubble()}function Me(t){return t instanceof Fe}function Ie(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Oe(t,e){D(t,0,0,(function(){var t=this.utcOffset(),r="+";return t<0&&(t=-t,r="-"),r+F(~~(t/60),2)+e+F(~~t%60,2)}))}Oe("Z",":"),Oe("ZZ",""),pt("Z",ht),pt("ZZ",ht),yt(["Z","ZZ"],(function(t,e,r){r._useUTC=!0,r._tzm=De(ht,t)}));var Re=/([\+\-]|\d\d)/gi;function De(t,e){var r,a,n=(e||"").match(t);return null===n?null:0===(a=60*(r=((n[n.length-1]||[])+"").match(Re)||["-",0,0])[1]+V(r[2]))?0:"+"===r[0]?a:-a}function Le(t,e){var a,n;return e._isUTC?(a=e.clone(),n=(A(t)||c(t)?t.valueOf():Pe(t).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+n),r.updateOffset(a,!1),a):Pe(t).local()}function Ne(t){return-Math.round(t._d.getTimezoneOffset())}function je(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ge=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Be=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ue(t,e){var r,a,n,o,s,c,u=t,h=null;return Me(t)?u={ms:t._milliseconds,d:t._days,M:t._months}:l(t)||!isNaN(+t)?(u={},e?u[e]=+t:u.milliseconds=+t):(h=Ge.exec(t))?(r="-"===h[1]?-1:1,u={y:0,d:V(h[2])*r,h:V(h[3])*r,m:V(h[4])*r,s:V(h[5])*r,ms:V(Ie(1e3*h[6]))*r}):(h=Be.exec(t))?(r="-"===h[1]?-1:1,u={y:We(h[2],r),M:We(h[3],r),w:We(h[4],r),d:We(h[5],r),h:We(h[6],r),m:We(h[7],r),s:We(h[8],r)}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(o=Pe(u.from),s=Pe(u.to),n=o.isValid()&&s.isValid()?(s=Le(s,o),o.isBefore(s)?c=ze(o,s):((c=ze(s,o)).milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0},(u={}).ms=n.milliseconds,u.M=n.months),a=new Fe(u),Me(t)&&i(t,"_locale")&&(a._locale=t._locale),Me(t)&&i(t,"_isValid")&&(a._isValid=t._isValid),a}function We(t,e){var r=t&&parseFloat(t.replace(",","."));return(isNaN(r)?0:r)*e}function ze(t,e){var r={};return r.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(r.months,"M").isAfter(e)&&--r.months,r.milliseconds=+e-+t.clone().add(r.months,"M"),r}function He(t,e){return function(r,a){var n;return null===a||isNaN(+a)||(x(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=r,r=a,a=n),qe(this,Ue(r,a),t),this}}function qe(t,e,a,n){var i=e._milliseconds,o=Ie(e._days),s=Ie(e._months);t.isValid()&&(n=null==n||n,s&&Et(t,X(t,"Month")+s*a),o&&K(t,"Date",X(t,"Date")+o*a),i&&t._d.setTime(t._d.valueOf()+i*a),n&&r.updateOffset(t,o||s))}Ue.fn=Fe.prototype,Ue.invalid=function(){return Ue(NaN)};var Ve=He(1,"add"),Ye=He(-1,"subtract");function Xe(t){return"string"==typeof t||t instanceof String}function Ke(t){return A(t)||c(t)||Xe(t)||l(t)||function(t){var e=a(t),r=!1;return e&&(r=0===t.filter((function(e){return!l(e)&&Xe(t)})).length),e&&r}(t)||function(t){var e,r=n(t)&&!o(t),a=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<s.length;e+=1)a=a||i(t,s[e]);return r&&a}(t)||null==t}function $e(t){var e,r=n(t)&&!o(t),a=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<s.length;e+=1)a=a||i(t,s[e]);return r&&a}function Je(t,e){if(t.date()<e.date())return-Je(e,t);var r=12*(e.year()-t.year())+(e.month()-t.month()),a=t.clone().add(r,"months");return-(r+(e-a<0?(e-a)/(a-t.clone().add(r-1,"months")):(e-a)/(t.clone().add(r+1,"months")-a)))||0}function Qe(t){var e;return void 0===t?this._locale._abbr:(null!=(e=se(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ze=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function tr(){return this._locale}function er(t,e){return(t%e+e)%e}function rr(t,e,r){return t<100&&t>=0?new Date(t+400,e,r)-126227808e5:new Date(t,e,r).valueOf()}function ar(t,e,r){return t<100&&t>=0?Date.UTC(t+400,e,r)-126227808e5:Date.UTC(t,e,r)}function nr(t,e){return e.erasAbbrRegex(t)}function ir(){var t,e,r=[],a=[],n=[],i=[],o=this.eras();for(t=0,e=o.length;t<e;++t)a.push(mt(o[t].name)),r.push(mt(o[t].abbr)),n.push(mt(o[t].narrow)),i.push(mt(o[t].name)),i.push(mt(o[t].abbr)),i.push(mt(o[t].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function or(t,e){D(0,[t,t.length],0,e)}function sr(t,e,r,a,n){var i;return null==t?Nt(this,a,n).year:(e>(i=jt(t,a,n))&&(e=i),lr.call(this,t,e,r,a,n))}function lr(t,e,r,a,n){var i=Lt(t,e,r,a,n),o=Rt(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}D("N",0,0,"eraAbbr"),D("NN",0,0,"eraAbbr"),D("NNN",0,0,"eraAbbr"),D("NNNN",0,0,"eraName"),D("NNNNN",0,0,"eraNarrow"),D("y",["y",1],"yo","eraYear"),D("y",["yy",2],0,"eraYear"),D("y",["yyy",3],0,"eraYear"),D("y",["yyyy",4],0,"eraYear"),pt("N",nr),pt("NN",nr),pt("NNN",nr),pt("NNNN",(function(t,e){return e.erasNameRegex(t)})),pt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),yt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,r,a){var n=r._locale.erasParse(t,a,r._strict);n?p(r).era=n:p(r).invalidEra=t})),pt("y",lt),pt("yy",lt),pt("yyy",lt),pt("yyyy",lt),pt("yo",(function(t,e){return e._eraYearOrdinalRegex||lt})),yt(["y","yy","yyy","yyyy"],0),yt(["yo"],(function(t,e,r,a){var n;r._locale._eraYearOrdinalRegex&&(n=t.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?e[0]=r._locale.eraYearOrdinalParse(t,n):e[0]=parseInt(t,10)})),D(0,["gg",2],0,(function(){return this.weekYear()%100})),D(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),or("gggg","weekYear"),or("ggggg","weekYear"),or("GGGG","isoWeekYear"),or("GGGGG","isoWeekYear"),G("weekYear","gg"),G("isoWeekYear","GG"),z("weekYear",1),z("isoWeekYear",1),pt("G",ct),pt("g",ct),pt("GG",rt,Q),pt("gg",rt,Q),pt("GGGG",ot,tt),pt("gggg",ot,tt),pt("GGGGG",st,et),pt("ggggg",st,et),_t(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,r,a){e[a.substr(0,2)]=V(t)})),_t(["gg","GG"],(function(t,e,a,n){e[n]=r.parseTwoDigitYear(t)})),D("Q",0,"Qo","quarter"),G("quarter","Q"),z("quarter",7),pt("Q",J),yt("Q",(function(t,e){e[1]=3*(V(t)-1)})),D("D",["DD",2],"Do","date"),G("date","D"),z("date",9),pt("D",rt),pt("DD",rt,Q),pt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),yt(["D","DD"],2),yt("Do",(function(t,e){e[2]=V(t.match(rt)[0])}));var cr=Y("Date",!0);D("DDD",["DDDD",3],"DDDo","dayOfYear"),G("dayOfYear","DDD"),z("dayOfYear",4),pt("DDD",it),pt("DDDD",Z),yt(["DDD","DDDD"],(function(t,e,r){r._dayOfYear=V(t)})),D("m",["mm",2],0,"minute"),G("minute","m"),z("minute",14),pt("m",rt),pt("mm",rt,Q),yt(["m","mm"],4);var ur=Y("Minutes",!1);D("s",["ss",2],0,"second"),G("second","s"),z("second",15),pt("s",rt),pt("ss",rt,Q),yt(["s","ss"],5);var hr,dr,pr=Y("Seconds",!1);for(D("S",0,0,(function(){return~~(this.millisecond()/100)})),D(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),D(0,["SSS",3],0,"millisecond"),D(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),D(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),D(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),D(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),D(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),D(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),G("millisecond","ms"),z("millisecond",16),pt("S",it,J),pt("SS",it,Q),pt("SSS",it,Z),hr="SSSS";hr.length<=9;hr+="S")pt(hr,lt);function fr(t,e){e[6]=V(1e3*("0."+t))}for(hr="S";hr.length<=9;hr+="S")yt(hr,fr);dr=Y("Milliseconds",!1),D("z",0,0,"zoneAbbr"),D("zz",0,0,"zoneName");var mr=b.prototype;function gr(t){return t}mr.add=Ve,mr.calendar=function(t,e){1===arguments.length&&(arguments[0]?Ke(arguments[0])?(t=arguments[0],e=void 0):$e(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var a=t||Pe(),n=Le(a,this).startOf("day"),i=r.calendarFormat(this,n)||"sameElse",o=e&&(C(e[i])?e[i].call(this,a):e[i]);return this.format(o||this.localeData().calendar(i,this,Pe(a)))},mr.clone=function(){return new b(this)},mr.diff=function(t,e,r){var a,n,i;if(!this.isValid())return NaN;if(!(a=Le(t,this)).isValid())return NaN;switch(n=6e4*(a.utcOffset()-this.utcOffset()),e=B(e)){case"year":i=Je(this,a)/12;break;case"month":i=Je(this,a);break;case"quarter":i=Je(this,a)/3;break;case"second":i=(this-a)/1e3;break;case"minute":i=(this-a)/6e4;break;case"hour":i=(this-a)/36e5;break;case"day":i=(this-a-n)/864e5;break;case"week":i=(this-a-n)/6048e5;break;default:i=this-a}return r?i:q(i)},mr.endOf=function(t){var e,a;if(void 0===(t=B(t))||"millisecond"===t||!this.isValid())return this;switch(a=this._isUTC?ar:rr,t){case"year":e=a(this.year()+1,0,1)-1;break;case"quarter":e=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=a(this.year(),this.month()+1,1)-1;break;case"week":e=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-er(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-er(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-er(e,1e3)-1}return this._d.setTime(e),r.updateOffset(this,!0),this},mr.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=L(this,t);return this.localeData().postformat(e)},mr.from=function(t,e){return this.isValid()&&(A(t)&&t.isValid()||Pe(t).isValid())?Ue({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},mr.fromNow=function(t){return this.from(Pe(),t)},mr.to=function(t,e){return this.isValid()&&(A(t)&&t.isValid()||Pe(t).isValid())?Ue({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},mr.toNow=function(t){return this.to(Pe(),t)},mr.get=function(t){return C(this[t=B(t)])?this[t]():this},mr.invalidAt=function(){return p(this).overflow},mr.isAfter=function(t,e){var r=A(t)?t:Pe(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=B(e)||"millisecond")?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(e).valueOf())},mr.isBefore=function(t,e){var r=A(t)?t:Pe(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=B(e)||"millisecond")?this.valueOf()<r.valueOf():this.clone().endOf(e).valueOf()<r.valueOf())},mr.isBetween=function(t,e,r,a){var n=A(t)?t:Pe(t),i=A(e)?e:Pe(e);return!!(this.isValid()&&n.isValid()&&i.isValid())&&("("===(a=a||"()")[0]?this.isAfter(n,r):!this.isBefore(n,r))&&(")"===a[1]?this.isBefore(i,r):!this.isAfter(i,r))},mr.isSame=function(t,e){var r,a=A(t)?t:Pe(t);return!(!this.isValid()||!a.isValid())&&("millisecond"===(e=B(e)||"millisecond")?this.valueOf()===a.valueOf():(r=a.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf()))},mr.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},mr.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},mr.isValid=function(){return m(this)},mr.lang=Ze,mr.locale=Qe,mr.localeData=tr,mr.max=Ce,mr.min=xe,mr.parsingFlags=function(){return h({},p(this))},mr.set=function(t,e){if("object"==typeof t){var r,a=function(t){var e,r=[];for(e in t)i(t,e)&&r.push({unit:e,priority:W[e]});return r.sort((function(t,e){return t.priority-e.priority})),r}(t=U(t));for(r=0;r<a.length;r++)this[a[r].unit](t[a[r].unit])}else if(C(this[t=B(t)]))return this[t](e);return this},mr.startOf=function(t){var e,a;if(void 0===(t=B(t))||"millisecond"===t||!this.isValid())return this;switch(a=this._isUTC?ar:rr,t){case"year":e=a(this.year(),0,1);break;case"quarter":e=a(this.year(),this.month()-this.month()%3,1);break;case"month":e=a(this.year(),this.month(),1);break;case"week":e=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=a(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=er(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=er(e,6e4);break;case"second":e=this._d.valueOf(),e-=er(e,1e3)}return this._d.setTime(e),r.updateOffset(this,!0),this},mr.subtract=Ye,mr.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},mr.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},mr.toDate=function(){return new Date(this.valueOf())},mr.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,r=e?this.clone().utc():this;return r.year()<0||r.year()>9999?L(r,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",L(r,"Z")):L(r,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},mr.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,r,a="moment",n="";return this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),t="["+a+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r=n+'[")]',this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+r)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(mr[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),mr.toJSON=function(){return this.isValid()?this.toISOString():null},mr.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},mr.unix=function(){return Math.floor(this.valueOf()/1e3)},mr.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},mr.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},mr.eraName=function(){var t,e,r,a=this.localeData().eras();for(t=0,e=a.length;t<e;++t){if(r=this.clone().startOf("day").valueOf(),a[t].since<=r&&r<=a[t].until)return a[t].name;if(a[t].until<=r&&r<=a[t].since)return a[t].name}return""},mr.eraNarrow=function(){var t,e,r,a=this.localeData().eras();for(t=0,e=a.length;t<e;++t){if(r=this.clone().startOf("day").valueOf(),a[t].since<=r&&r<=a[t].until)return a[t].narrow;if(a[t].until<=r&&r<=a[t].since)return a[t].narrow}return""},mr.eraAbbr=function(){var t,e,r,a=this.localeData().eras();for(t=0,e=a.length;t<e;++t){if(r=this.clone().startOf("day").valueOf(),a[t].since<=r&&r<=a[t].until)return a[t].abbr;if(a[t].until<=r&&r<=a[t].since)return a[t].abbr}return""},mr.eraYear=function(){var t,e,a,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(a=i[t].since<=i[t].until?1:-1,n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return(this.year()-r(i[t].since).year())*a+i[t].offset;return this.year()},mr.year=It,mr.isLeapYear=function(){return H(this.year())},mr.weekYear=function(t){return sr.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},mr.isoWeekYear=function(t){return sr.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},mr.quarter=mr.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},mr.month=Tt,mr.daysInMonth=function(){return At(this.year(),this.month())},mr.week=mr.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},mr.isoWeek=mr.isoWeeks=function(t){var e=Nt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},mr.weeksInYear=function(){var t=this.localeData()._week;return jt(this.year(),t.dow,t.doy)},mr.weeksInWeekYear=function(){var t=this.localeData()._week;return jt(this.weekYear(),t.dow,t.doy)},mr.isoWeeksInYear=function(){return jt(this.year(),1,4)},mr.isoWeeksInISOWeekYear=function(){return jt(this.isoWeekYear(),1,4)},mr.date=cr,mr.day=mr.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},mr.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},mr.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},mr.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},mr.hour=mr.hours=Qt,mr.minute=mr.minutes=ur,mr.second=mr.seconds=pr,mr.millisecond=mr.milliseconds=dr,mr.utcOffset=function(t,e,a){var n,i=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=De(ht,t)))return this}else Math.abs(t)<16&&!a&&(t*=60);return!this._isUTC&&e&&(n=Ne(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==t&&(!e||this._changeInProgress?qe(this,Ue(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Ne(this)},mr.utc=function(t){return this.utcOffset(0,t)},mr.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ne(this),"m")),this},mr.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=De(ut,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},mr.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Pe(t).utcOffset():0,(this.utcOffset()-t)%60==0)},mr.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},mr.isLocal=function(){return!!this.isValid()&&!this._isUTC},mr.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},mr.isUtc=je,mr.isUTC=je,mr.zoneAbbr=function(){return this._isUTC?"UTC":""},mr.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},mr.dates=k("dates accessor is deprecated. Use date instead.",cr),mr.months=k("months accessor is deprecated. Use month instead",Tt),mr.years=k("years accessor is deprecated. Use year instead",It),mr.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),mr.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var t,e={};return _(e,this),(e=ke(e))._a?(t=e._isUTC?d(e._a):Pe(e._a),this._isDSTShifted=this.isValid()&&function(t,e,r){var a,n=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),o=0;for(a=0;a<n;a++)V(t[a])!==V(e[a])&&o++;return o+i}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var vr=T.prototype;function yr(t,e,r,a){var n=se(),i=d().set(a,e);return n[r](i,t)}function _r(t,e,r){if(l(t)&&(e=t,t=void 0),t=t||"",null!=e)return yr(t,e,r,"month");var a,n=[];for(a=0;a<12;a++)n[a]=yr(t,a,r,"month");return n}function br(t,e,r,a){"boolean"==typeof t?(l(e)&&(r=e,e=void 0),e=e||""):(r=e=t,t=!1,l(e)&&(r=e,e=void 0),e=e||"");var n,i=se(),o=t?i._week.dow:0,s=[];if(null!=r)return yr(e,(r+o)%7,a,"day");for(n=0;n<7;n++)s[n]=yr(e,(n+o)%7,a,"day");return s}vr.calendar=function(t,e,r){var a=this._calendar[t]||this._calendar.sameElse;return C(a)?a.call(e,r):a},vr.longDateFormat=function(t){var e=this._longDateFormat[t],r=this._longDateFormat[t.toUpperCase()];return e||!r?e:(this._longDateFormat[t]=r.match(M).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},vr.invalidDate=function(){return this._invalidDate},vr.ordinal=function(t){return this._ordinal.replace("%d",t)},vr.preparse=gr,vr.postformat=gr,vr.relativeTime=function(t,e,r,a){var n=this._relativeTime[r];return C(n)?n(t,e,r,a):n.replace(/%d/i,t)},vr.pastFuture=function(t,e){var r=this._relativeTime[t>0?"future":"past"];return C(r)?r(e):r.replace(/%s/i,e)},vr.set=function(t){var e,r;for(r in t)i(t,r)&&(C(e=t[r])?this[r]=e:this["_"+r]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},vr.eras=function(t,e){var a,n,i,o=this._eras||se("en")._eras;for(a=0,n=o.length;a<n;++a){if("string"==typeof o[a].since)i=r(o[a].since).startOf("day"),o[a].since=i.valueOf();switch(typeof o[a].until){case"undefined":o[a].until=1/0;break;case"string":i=r(o[a].until).startOf("day").valueOf(),o[a].until=i.valueOf()}}return o},vr.erasParse=function(t,e,r){var a,n,i,o,s,l=this.eras();for(t=t.toUpperCase(),a=0,n=l.length;a<n;++a)if(i=l[a].name.toUpperCase(),o=l[a].abbr.toUpperCase(),s=l[a].narrow.toUpperCase(),r)switch(e){case"N":case"NN":case"NNN":if(o===t)return l[a];break;case"NNNN":if(i===t)return l[a];break;case"NNNNN":if(s===t)return l[a]}else if([i,o,s].indexOf(t)>=0)return l[a]},vr.erasConvertYear=function(t,e){var a=t.since<=t.until?1:-1;return void 0===e?r(t.since).year():r(t.since).year()+(e-t.offset)*a},vr.erasAbbrRegex=function(t){return i(this,"_erasAbbrRegex")||ir.call(this),t?this._erasAbbrRegex:this._erasRegex},vr.erasNameRegex=function(t){return i(this,"_erasNameRegex")||ir.call(this),t?this._erasNameRegex:this._erasRegex},vr.erasNarrowRegex=function(t){return i(this,"_erasNarrowRegex")||ir.call(this),t?this._erasNarrowRegex:this._erasRegex},vr.months=function(t,e){return t?a(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||wt).test(e)?"format":"standalone"][t.month()]:a(this._months)?this._months:this._months.standalone},vr.monthsShort=function(t,e){return t?a(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[wt.test(e)?"format":"standalone"][t.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},vr.monthsParse=function(t,e,r){var a,n,i;if(this._monthsParseExact)return Ct.call(this,t,e,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(n=d([2e3,a]),r&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),r||this._monthsParse[a]||(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[a]=new RegExp(i.replace(".",""),"i")),r&&"MMMM"===e&&this._longMonthsParse[a].test(t))return a;if(r&&"MMM"===e&&this._shortMonthsParse[a].test(t))return a;if(!r&&this._monthsParse[a].test(t))return a}},vr.monthsRegex=function(t){return this._monthsParseExact?(i(this,"_monthsRegex")||Ft.call(this),t?this._monthsStrictRegex:this._monthsRegex):(i(this,"_monthsRegex")||(this._monthsRegex=xt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},vr.monthsShortRegex=function(t){return this._monthsParseExact?(i(this,"_monthsRegex")||Ft.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,"_monthsShortRegex")||(this._monthsShortRegex=Pt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},vr.week=function(t){return Nt(t,this._week.dow,this._week.doy).week},vr.firstDayOfYear=function(){return this._week.doy},vr.firstDayOfWeek=function(){return this._week.dow},vr.weekdays=function(t,e){var r=a(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Gt(r,this._week.dow):t?r[t.day()]:r},vr.weekdaysMin=function(t){return!0===t?Gt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},vr.weekdaysShort=function(t){return!0===t?Gt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},vr.weekdaysParse=function(t,e,r){var a,n,i;if(this._weekdaysParseExact)return Vt.call(this,t,e,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(n=d([2e3,1]).day(a),r&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[a]=new RegExp(i.replace(".",""),"i")),r&&"dddd"===e&&this._fullWeekdaysParse[a].test(t))return a;if(r&&"ddd"===e&&this._shortWeekdaysParse[a].test(t))return a;if(r&&"dd"===e&&this._minWeekdaysParse[a].test(t))return a;if(!r&&this._weekdaysParse[a].test(t))return a}},vr.weekdaysRegex=function(t){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,"_weekdaysRegex")||(this._weekdaysRegex=zt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},vr.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ht),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},vr.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(i(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=qt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},vr.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},vr.meridiem=function(t,e,r){return t>11?r?"pm":"PM":r?"am":"AM"},ie("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===V(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=k("moment.lang is deprecated. Use moment.locale instead.",ie),r.langData=k("moment.langData is deprecated. Use moment.localeData instead.",se);var Ar=Math.abs;function Sr(t,e,r,a){var n=Ue(e,r);return t._milliseconds+=a*n._milliseconds,t._days+=a*n._days,t._months+=a*n._months,t._bubble()}function kr(t){return t<0?Math.floor(t):Math.ceil(t)}function wr(t){return 4800*t/146097}function Pr(t){return 146097*t/4800}function xr(t){return function(){return this.as(t)}}var Cr=xr("ms"),Er=xr("s"),Tr=xr("m"),Fr=xr("h"),Mr=xr("d"),Ir=xr("w"),Or=xr("M"),Rr=xr("Q"),Dr=xr("y");function Lr(t){return function(){return this.isValid()?this._data[t]:NaN}}var Nr=Lr("milliseconds"),jr=Lr("seconds"),Gr=Lr("minutes"),Br=Lr("hours"),Ur=Lr("days"),Wr=Lr("months"),zr=Lr("years"),Hr=Math.round,qr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Vr(t,e,r,a,n){return n.relativeTime(e||1,!!r,t,a)}var Yr=Math.abs;function Xr(t){return(t>0)-(t<0)||+t}function Kr(){if(!this.isValid())return this.localeData().invalidDate();var t,e,r,a,n,i,o,s,l=Yr(this._milliseconds)/1e3,c=Yr(this._days),u=Yr(this._months),h=this.asSeconds();return h?(t=q(l/60),e=q(t/60),l%=60,t%=60,r=q(u/12),u%=12,a=l?l.toFixed(3).replace(/\.?0+$/,""):"",n=h<0?"-":"",i=Xr(this._months)!==Xr(h)?"-":"",o=Xr(this._days)!==Xr(h)?"-":"",s=Xr(this._milliseconds)!==Xr(h)?"-":"",n+"P"+(r?i+r+"Y":"")+(u?i+u+"M":"")+(c?o+c+"D":"")+(e||t||l?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(l?s+a+"S":"")):"P0D"}var $r=Fe.prototype;return $r.isValid=function(){return this._isValid},$r.abs=function(){var t=this._data;return this._milliseconds=Ar(this._milliseconds),this._days=Ar(this._days),this._months=Ar(this._months),t.milliseconds=Ar(t.milliseconds),t.seconds=Ar(t.seconds),t.minutes=Ar(t.minutes),t.hours=Ar(t.hours),t.months=Ar(t.months),t.years=Ar(t.years),this},$r.add=function(t,e){return Sr(this,t,e,1)},$r.subtract=function(t,e){return Sr(this,t,e,-1)},$r.as=function(t){if(!this.isValid())return NaN;var e,r,a=this._milliseconds;if("month"===(t=B(t))||"quarter"===t||"year"===t)switch(e=this._days+a/864e5,r=this._months+wr(e),t){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(e=this._days+Math.round(Pr(this._months)),t){case"week":return e/7+a/6048e5;case"day":return e+a/864e5;case"hour":return 24*e+a/36e5;case"minute":return 1440*e+a/6e4;case"second":return 86400*e+a/1e3;case"millisecond":return Math.floor(864e5*e)+a;default:throw new Error("Unknown unit "+t)}},$r.asMilliseconds=Cr,$r.asSeconds=Er,$r.asMinutes=Tr,$r.asHours=Fr,$r.asDays=Mr,$r.asWeeks=Ir,$r.asMonths=Or,$r.asQuarters=Rr,$r.asYears=Dr,$r.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*V(this._months/12):NaN},$r._bubble=function(){var t,e,r,a,n,i=this._milliseconds,o=this._days,s=this._months,l=this._data;return i>=0&&o>=0&&s>=0||i<=0&&o<=0&&s<=0||(i+=864e5*kr(Pr(s)+o),o=0,s=0),l.milliseconds=i%1e3,t=q(i/1e3),l.seconds=t%60,e=q(t/60),l.minutes=e%60,r=q(e/60),l.hours=r%24,o+=q(r/24),s+=n=q(wr(o)),o-=kr(Pr(n)),a=q(s/12),s%=12,l.days=o,l.months=s,l.years=a,this},$r.clone=function(){return Ue(this)},$r.get=function(t){return t=B(t),this.isValid()?this[t+"s"]():NaN},$r.milliseconds=Nr,$r.seconds=jr,$r.minutes=Gr,$r.hours=Br,$r.days=Ur,$r.weeks=function(){return q(this.days()/7)},$r.months=Wr,$r.years=zr,$r.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var r,a,n=!1,i=qr;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(n=t),"object"==typeof e&&(i=Object.assign({},qr,e),null!=e.s&&null==e.ss&&(i.ss=e.s-1)),a=function(t,e,r,a){var n=Ue(t).abs(),i=Hr(n.as("s")),o=Hr(n.as("m")),s=Hr(n.as("h")),l=Hr(n.as("d")),c=Hr(n.as("M")),u=Hr(n.as("w")),h=Hr(n.as("y")),d=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||o<=1&&["m"]||o<r.m&&["mm",o]||s<=1&&["h"]||s<r.h&&["hh",s]||l<=1&&["d"]||l<r.d&&["dd",l];return null!=r.w&&(d=d||u<=1&&["w"]||u<r.w&&["ww",u]),(d=d||c<=1&&["M"]||c<r.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=e,d[3]=+t>0,d[4]=a,Vr.apply(null,d)}(this,!n,i,r=this.localeData()),n&&(a=r.pastFuture(+this,a)),r.postformat(a)},$r.toISOString=Kr,$r.toString=Kr,$r.toJSON=Kr,$r.locale=Qe,$r.localeData=tr,$r.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Kr),$r.lang=Ze,D("X",0,0,"unix"),D("x",0,0,"valueOf"),pt("x",ct),pt("X",/[+-]?\d+(\.\d{1,3})?/),yt("X",(function(t,e,r){r._d=new Date(1e3*parseFloat(t))})),yt("x",(function(t,e,r){r._d=new Date(V(t))})),
//! moment.js
r.version="2.29.1",t=Pe,r.fn=mr,r.min=function(){var t=[].slice.call(arguments,0);return Ee("isBefore",t)},r.max=function(){var t=[].slice.call(arguments,0);return Ee("isAfter",t)},r.now=function(){return Date.now?Date.now():+new Date},r.utc=d,r.unix=function(t){return Pe(1e3*t)},r.months=function(t,e){return _r(t,e,"months")},r.isDate=c,r.locale=ie,r.invalid=g,r.duration=Ue,r.isMoment=A,r.weekdays=function(t,e,r){return br(t,e,r,"weekdays")},r.parseZone=function(){return Pe.apply(null,arguments).parseZone()},r.localeData=se,r.isDuration=Me,r.monthsShort=function(t,e){return _r(t,e,"monthsShort")},r.weekdaysMin=function(t,e,r){return br(t,e,r,"weekdaysMin")},r.defineLocale=oe,r.updateLocale=function(t,e){if(null!=e){var r,a,n=Zt;null!=te[t]&&null!=te[t].parentLocale?te[t].set(E(te[t]._config,e)):(null!=(a=ne(t))&&(n=a._config),e=E(n,e),null==a&&(e.abbr=t),(r=new T(e)).parentLocale=te[t],te[t]=r),ie(t)}else null!=te[t]&&(null!=te[t].parentLocale?(te[t]=te[t].parentLocale,t===ie()&&ie(t)):null!=te[t]&&delete te[t]);return te[t]},r.locales=function(){return w(te)},r.weekdaysShort=function(t,e,r){return br(t,e,r,"weekdaysShort")},r.normalizeUnits=B,r.relativeTimeRounding=function(t){return void 0===t?Hr:"function"==typeof t&&(Hr=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==qr[t]&&(void 0===e?qr[t]:(qr[t]=e,"s"===t&&(qr.ss=e-1),!0))},r.calendarFormat=function(t,e){var r=t.diff(e,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},r.prototype=mr,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}();var v,y=g.exports,_=Object.freeze({__proto__:null,formatDate:function(t,e,r){if(t=h(t)?t:"",h(r)||p(r)){const a=y(e||new Date);return a.locale(r),a.format(t)}return y(e||new Date).format(t)}}),b=Object.freeze({__proto__:null,classIf:function(t,e){return t?e:""},selectedIf:function(t){return t?"selected":""},checkedIf:function(t){return t?"checked":""},options:function(t,e){const r=e.hash.value||"value",a=e.hash.text||"text",n=e.hash.selected||null;return t.map((t=>{const e=t[r]||"",i=t[a]||"";return`<option value="${e}"${e==n?" selected":""}>${i}</option>`})).join("\n")}}),A=Object.freeze({__proto__:null,add:function(t,e){return Number(t)+Number(e)},sub:function(t,e){return Number(t)-Number(e)},ceil:function(t){return Math.ceil(Number(t))},floor:function(t){return Math.floor(Number(t))},abs:function(t){return Math.abs(Number(t))}}),S={};
/*! sprintf-js v1.1.2 | Copyright (c) 2007-present, Alexandru Mărășteanu <hello@alexei.ro> | BSD-3-Clause */
v=S,function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(r){return function(r,a){var n,i,o,s,l,c,u,h,d,p=1,f=r.length,m="";for(i=0;i<f;i++)if("string"==typeof r[i])m+=r[i];else if("object"==typeof r[i]){if((s=r[i]).keys)for(n=a[p],o=0;o<s.keys.length;o++){if(null==n)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[o],s.keys[o-1]));n=n[s.keys[o]]}else n=s.param_no?a[s.param_no]:a[p++];if(t.not_type.test(s.type)&&t.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),t.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(e("[sprintf] expecting number but found %T",n));switch(t.number.test(s.type)&&(h=0<=n),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}t.json.test(s.type)?m+=n:(!t.number.test(s.type)||h&&!s.sign?d="":(d=h?"+":"-",n=n.toString().replace(t.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(d+n).length,l=s.width&&0<u?c.repeat(u):"",m+=s.align?d+n+l:"0"===c?d+l+n:l+d+n)}return m}(function(e){if(a[e])return a[e];for(var r,n=e,i=[],o=0;n;){if(null!==(r=t.text.exec(n)))i.push(r[0]);else if(null!==(r=t.modulo.exec(n)))i.push("%");else{if(null===(r=t.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){o|=1;var s=[],l=r[2],c=[];if(null===(c=t.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(c[1]);""!==(l=l.substring(c[0].length));)if(null!==(c=t.key_access.exec(l)))s.push(c[1]);else{if(null===(c=t.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(c[1])}r[2]=s}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}n=n.substring(r[0].length)}return a[e]=i}(r),arguments)}function r(t,r){return e.apply(null,[t].concat(r||[]))}var a=Object.create(null);v.sprintf=e,v.vsprintf=r,"undefined"!=typeof window&&(window.sprintf=e,window.vsprintf=r)}();var k=Object.freeze({__proto__:null,slice:function(t,e,r){return"string"!=typeof t||"number"!=typeof e||t.length<e?t:"number"!=typeof r?t.slice(e):t.slice(e,r)},nltobr:function(t){return t.replace(/\r?\n|\r/g,"<br>")},sprintf:function(t,...e){const r=[];for(let t of e)d(t)&&d(t.hash)&&(t=t.hash),r.push(t);return r.length>0?S.vsprintf(t,r):t},lowercase:function(t){return h(t)?t.toLowerCase():t},uppercase:function(t){return h(t)?t.toUpperCase():t},concat:function(...t){return d(t[t.length-1])&&t.pop(),t.join("")},join:function(t,e){return e&&!d(e)||(e=""),!!p(t)&&t.join(e)}});for(let t of[m,_,b,A,k])for(let[e,r]of Object.entries(t))u.registerHelper(e,r);class w extends o{enterListener=t=>!1;rslv;rej;loading;passwordInput;incorrect;submitButton;constructor(t,e){super(t,e),this.passwordInput=this.modalNode.querySelector('[data-element="passwordInput"]'),this.incorrect=this.modalNode.querySelector('[data-element="incorrect"]'),this.submitButton=this.modalNode.querySelector('[type="submit"]'),this.loading=new i(t),this.passwordInput.addEventListener("input",(t=>{this.submitButton.disabled=""===t.currentTarget.value})),this.modalNode.querySelector('[data-element="form"]')?.addEventListener("submit",(async t=>{t.preventDefault();const r=+new Date;try{let t;if(this.submitButton.disabled=!0,this.loading.show(),t=l(this.enterListener)?await this.enterListener(this.passwordInput.value):this.enterListener(this.passwordInput.value),!t)return await c(1-(+new Date-r)/1e3),this.loading.hide(),this.incorrect.textContent=e.message.incorrectPassword,void this.passwordInput.classList.add("wrong");this.passwordInput.classList.remove("wrong"),this.passwordInput.classList.add("correct"),this.incorrect.textContent="",await c(1-(+new Date-r)/1e3),this.destroy(),this.rslv()}catch(t){this.destroy(),this.rej(t)}finally{this.submitButton.disabled=!1}}),{passive:!1})}render(){return u.compile('<div class="pl-modal pl-modal-password">\n        <div class="pl-modal-dialog">\n          <div class="pl-modal-content">\n            <div class="pl-modal-header">\n              <h2>{{language.message.passwordRequired}}</h2>\n            </div>\n            <div class="pl-modal-body">\n              <form data-element="form" id="passwordForm">\n                <div class="enter">\n                  <div>{{language.message.enterPassword}}</div>\n                  <input data-element="passwordInput" type="password" autocomplete="current-password" aria-label="Password required">\n                </div>\n                <div data-element="incorrect" class="incorrect-password"></div>\n              </form>\n            </div>\n            <div class="pl-modal-footer">\n              <button form="passwordForm" type="submit" class="pl-btn pl-btn-confirm pl-btn-modal" data-element="passwordSubmitButton" disabled><span>{{language.action.submit}}</span></button>\n            </div>\n          </div>\n        </div>\n      </div>')({language:this.language})}async show(){return super.show(),this.passwordInput.focus(),new Promise(((t,e)=>{this.rslv=t,this.rej=e}))}destroy(){this.loading.destroy(),super.destroy()}onEnter(t){return this.enterListener=t,this}}class P{leftPanelToggle;leftPanel;pagegContainer;thumbnailsPanel;thumbnailNodes=[];activeThumbnailNode=void 0;selectListener=t=>{};constructor(t,e){this.leftPanelToggle=t.querySelector('[data-element="leftPanelToggle"]'),this.leftPanel=t.querySelector('[data-element="leftPanel"]'),this.pagegContainer=t.querySelector('[data-element="pagegContainer"]'),this.thumbnailsPanel=t.querySelector('[data-element="thumbnailsPanel"]'),this.leftPanelToggle.addEventListener("click",(()=>{this.leftPanel.classList.contains("pl-left-panel-closed")?this.open():this.close()}),{passive:!0}),this.thumbnailNodes=this.render(e),this.activeThumbnailNode=this.thumbnailNodes.find((t=>t.classList.contains("pl-thumbnail-active")));for(let t of this.thumbnailNodes)t.addEventListener("click",(t=>{this.activeThumbnailNode.classList.remove("pl-thumbnail-active"),t.currentTarget.classList.add("pl-thumbnail-active"),this.activeThumbnailNode=t.currentTarget;const e=parseInt(this.activeThumbnailNode.dataset.pageNumber,10);this.selectListener(e)}),{passive:!0})}open(){this.leftPanel.classList.remove("pl-left-panel-closed"),this.pagegContainer.classList.add("pl-page-container-open")}close(){this.leftPanel.classList.add("pl-left-panel-closed"),this.pagegContainer.classList.remove("pl-page-container-open")}activatePage(t){this.activeThumbnailNode&&this.activeThumbnailNode.classList.remove("pl-thumbnail-active");const e=this.thumbnailNodes.find((e=>e.dataset.pageNumber==t.toString()));if(e){e.classList.add("pl-thumbnail-active"),this.activeThumbnailNode=e;const t=this.thumbnailsPanel.getBoundingClientRect(),r=this.activeThumbnailNode.getBoundingClientRect();r.top>=t.top&&r.top<=t.top+this.thumbnailsPanel.clientHeight||(this.thumbnailsPanel.scrollTop=r.top+this.thumbnailsPanel.scrollTop-t.top)}}render(t){const e=[];for(let r=1;r<=t.length;r++){const a=t[r-1],n=a.getViewport({scale:1.5}),i=document.createElement("div");i.classList.add("pl-thumbnail"),i.dataset.pageNumber=r.toString(),1===r&&i.classList.add("pl-thumbnail-active");const o=document.createElement("canvas");o.classList.add("pl-thumbnail-img"),o.width=Math.floor(n.width),o.height=Math.floor(n.height),i.appendChild(o);const s=document.createElement("div");s.classList.add("pl-thumbnail-label"),s.textContent=r.toString(),i.appendChild(s),this.thumbnailsPanel.appendChild(i),a.render({canvasContext:o.getContext("2d"),viewport:n}),e.push(i)}return e}onSelect(t){return this.selectListener=t,this}}class x{defaultViewport;zoomToggle;zoomMenu;zoomSelects;zoomOutButton;zoomInButton;zoomForm;zoomInput;pageView;resizeTimeout=null;lastZoom=-1;zoomList;minZoom;maxZoom;changeListener=t=>{};constructor(t,e){this.defaultViewport=e,this.zoomToggle=t.querySelector('[data-element="zoomToggle"]'),this.zoomMenu=t.querySelector('[data-element="zoomMenu"]'),this.zoomSelects=Array.from(t.querySelectorAll('[data-element="zoomSelect"]')),this.zoomOutButton=t.querySelector('[data-element="zoomOutButton"]'),this.zoomInButton=t.querySelector('[data-element="zoomInButton"]'),this.zoomForm=t.querySelector('[data-element="zoomForm"]'),this.zoomInput=t.querySelector('[data-element="zoomInput"]'),this.pageView=t.querySelector('[data-element="pageView"]');let r="100";e.width>this.pageView.clientWidth&&(r="pageWidth");this.zoomSelects.find((t=>t.dataset.value===r)).classList.add("pl-zoom-menu-item-selected"),this.updateInputZoom(r),this.zoomList=this.zoomSelects.flatMap((t=>{const e=parseInt(t.dataset.value,10);return a(e)?e:[]})),this.minZoom=Math.min(...this.zoomList),this.maxZoom=Math.max(...this.zoomList),this.zoomToggle.addEventListener("click",(t=>{this.zoomMenu.classList.contains("pl-zoom-menu-closed")?(t.stopPropagation(),this.layout(),this.open()):this.close()}),{passive:!0});for(let t of this.zoomSelects)t.addEventListener("click",(t=>{this.close(),this.deselectMenu();const e=t.target;e.classList.add("pl-zoom-menu-item-selected");const r=n(e.dataset.value,this.pageView,this.defaultViewport);this.zoomInput.value=Math.floor(100*r).toString(),this.lastZoom=parseInt(this.zoomInput.value,10),this.changeListener(r)}),{passive:!0});window.addEventListener("resize",(()=>{this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((()=>{this.layout();const t=this.zoomSelects.find((t=>t.classList.contains("pl-zoom-menu-item-selected"))),e=t.dataset.value;if("pageFit"===e||"pageWidth"===e){const t=n(e,this.pageView,this.defaultViewport);this.changeListener(t)}}),100)}),{passive:!0}),document.body.addEventListener("click",(t=>{var e,r;this.zoomMenu.classList.contains("pl-zoom-menu-closed")||(e={x:t.pageX,y:t.pageY},(r=this.zoomMenu.getBoundingClientRect()).x<=e.x&&e.x<=r.x+r.width&&r.y<=e.y&&e.y<=r.y+r.height)||this.close()}),{passive:!0}),this.zoomOutButton.addEventListener("click",(()=>{this.calcStep(0)}),{passive:!0}),this.zoomInButton.addEventListener("click",(()=>{this.calcStep(1)}),{passive:!0}),window.addEventListener("wheel",(t=>{if(!t.ctrlKey)return;t.preventDefault();const e=this.lastZoom;let r=e;if(t.deltaY<0){if(this.zoomOutButton.disabled=!1,e>=this.maxZoom)return;const t=1.25;r=Math.min(Math.floor(e*t),this.maxZoom),this.zoomInButton.disabled=r>=this.maxZoom}else if(t.deltaY>0){if(this.zoomInButton.disabled=!1,e<=this.minZoom)return;const t=.8;r=Math.max(Math.floor(e*t),this.minZoom),this.zoomOutButton.disabled=r<=this.minZoom}this.zoomInput.value=r.toString(),this.lastZoom=parseInt(this.zoomInput.value,10),this.activateMenu(this.zoomInput.value);const a=n(this.zoomInput.value,this.pageView,this.defaultViewport);this.changeListener(a)}),{passive:!1}),this.zoomInput.addEventListener("blur",(()=>{this.enterZoom()}),{passive:!0}),this.zoomForm.addEventListener("submit",(t=>{t.preventDefault(),this.enterZoom()}),{passive:!1})}open(){this.zoomMenu.classList.remove("pl-zoom-menu-closed")}close(){this.zoomMenu.classList.add("pl-zoom-menu-closed")}layout(){const t=this.zoomToggle.getBoundingClientRect();this.zoomMenu.style.top=`${t.bottom}px`,this.zoomMenu.style.left=`${t.left}px`}getZoomFactor(){return n(this.zoomInput.value,this.pageView,this.defaultViewport)}updateInputZoom(t){const e=n(t.toString(),this.pageView,this.defaultViewport);this.zoomInput.value=Math.floor(100*e).toString(),this.lastZoom=parseInt(this.zoomInput.value,10)}deselectMenu(){const t=this.zoomSelects.find((t=>t.classList.contains("pl-zoom-menu-item-selected")));t&&t.classList.remove("pl-zoom-menu-item-selected")}activateMenu(t){this.deselectMenu();const e=this.zoomSelects.find((e=>e.dataset.value==t));e&&e.classList.add("pl-zoom-menu-item-selected")}enterZoom(){let t=parseInt(this.zoomInput.value,10);if(isNaN(t))this.zoomInput.value=this.lastZoom.toString();else{t<this.minZoom?t=this.minZoom:t>this.maxZoom&&(t=this.maxZoom),this.zoomInput.value=t.toString(),this.lastZoom=parseInt(this.zoomInput.value,10),this.zoomOutButton.disabled=this.zoomInput.value==this.minZoom.toString(),this.zoomInButton.disabled=this.zoomInput.value==this.maxZoom.toString();const e=n(this.zoomInput.value,this.pageView,this.defaultViewport);this.changeListener(e)}}calcStep(t){this.zoomInput.value=0===t?(this.zoomList.sort(((t,e)=>e-t)).find((t=>t<this.lastZoom))??this.minZoom).toString():(this.zoomList.sort(((t,e)=>t-e)).find((t=>t>this.lastZoom))??this.maxZoom).toString(),this.lastZoom=parseInt(this.zoomInput.value,10),0===t?(this.zoomOutButton.disabled=this.zoomInput.value==this.minZoom.toString(),this.zoomInButton.disabled=!1):(this.zoomInButton.disabled=this.zoomInput.value==this.maxZoom.toString(),this.zoomOutButton.disabled=!1),this.activateMenu(this.zoomInput.value);const e=n(this.zoomInput.value,this.pageView,this.defaultViewport);this.changeListener(e)}onChange(t){return this.changeListener=t,this}}class C{pageInput;totalPage;prevPageButton;nextPageButton;pageView;pageNodes;pageForm;minPage=1;maxPage;lastPage=1;changeListener=t=>{};constructor(t,e){this.pageInput=t.querySelector('[data-element="pageInput"]'),this.totalPage=t.querySelector('[data-element="totalPage"]'),this.prevPageButton=t.querySelector('[data-element="prevPageButton"]'),this.nextPageButton=t.querySelector('[data-element="nextPageButton"]'),this.pageView=t.querySelector('[data-element="pageView"]'),this.pageNodes=Array.from(this.pageView.querySelectorAll('[id^="page"]')),this.pageForm=t.querySelector('[data-element="pageForm"]'),this.totalPage.textContent=e.toString(),this.maxPage=e;const r=new IntersectionObserver((t=>{t.forEach((t=>{if(!t.isIntersecting)return;const e=t.target,r=parseInt(e.dataset.pageNumber,10);this.updatePage(r),this.changeListener(r)}))}),{root:this.pageView,rootMargin:"-50% 0px",threshold:0});for(let t of this.pageNodes)r.observe(t);this.pageInput.addEventListener("blur",(()=>{this.enterPage()}),{passive:!0}),this.pageForm.addEventListener("submit",(t=>{t.preventDefault(),this.enterPage()}),{passive:!1}),this.prevPageButton.addEventListener("click",(()=>{this.activatePage(parseInt(this.pageInput.value,10)-1)}),{passive:!0}),this.nextPageButton.addEventListener("click",(()=>{this.activatePage(parseInt(this.pageInput.value,10)+1)}),{passive:!0})}activatePage(t){const e=this.pageNodes.find((e=>e.dataset.pageNumber==t.toString()));this.pageView.scrollTop=e.offsetTop,this.updatePage(t)}updatePage(t){this.pageInput.value=t.toString(),this.lastPage=parseInt(this.pageInput.value,10),this.prevPageButton.disabled=t==this.minPage,this.nextPageButton.disabled=t==this.maxPage}enterPage(){let t=parseInt(this.pageInput.value,10);isNaN(t)?this.pageInput.value=this.lastPage.toString():(t<this.minPage?t=this.minPage:t>this.maxPage&&(t=this.maxPage),this.activatePage(t))}onChange(t){return this.changeListener=t,this}getCurrentPageNumber(){return parseInt(this.pageInput.value,10)}}var E=t=>{const e=t.match(/([^/]+)\.pdf$/i);return e?`${e[1]}.pdf`:"document.pdf"},T={action:{cancel:"Abbrechen",close:"Schliessen",download:"Download",enterFullscreen:"Vollbildansicht",exitFullscreen:"Vollbildansicht beenden",fitToPage:"An Seite anpassen",fitToWidth:"An Breite anpassen",pagePrev:"Vorherige Seite",pageNext:"Nächste Seite",print:"Drucken",ok:"OK",submit:"OK",zoomIn:"Heranzoomen",zoomOut:"Rauszoomen",zoomControls:"Zoomeinstellungen",darkMode:"Dark Mode",lightMode:"Heller Modus"},component:{leftPanel:"Linke Leiste",zoomOverlay:"Zoom-Overlay"},message:{badDocument:"Fehler beim Laden des Dokuments. Das Dokument ist entweder defekt oder ungültig.",enterPassword:"Dieses Dokument ist durch ein Passwort geschützt. Bitte geben Sie ein Passwort ein",incorrectPassword:"Falsches Passwort",notSupported:"Dieser Dateityp wird nicht unterstützt.",passwordRequired:"Passwort erforderlich",warning:"Warnung"},shortcut:{zoomIn:"(Strg +)",zoomOut:"(Strg -)"}},F={action:{cancel:"Cancel",close:"Close",download:"Download",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen",fitToPage:"Fit to page",fitToWidth:"Fit to width",pagePrev:"Previous page",pageNext:"Next page",print:"Print",ok:"OK",submit:"Submit",zoomIn:"Zoom in",zoomOut:"Zoom out",zoomControls:"Zoom Controls",darkMode:"Dark mode",lightMode:"Light mode"},component:{leftPanel:"Panel",zoomOverlay:"Zoom Overlay"},message:{badDocument:"Failed to load document. The document is either corrupt or not valid.",enterPassword:"This document is password protected. Please enter a password",incorrectPassword:"Incorrect password",notSupported:"That file type is not supported.",passwordRequired:"Password required",warning:"Warning"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}},M={action:{cancel:"Cancelar",close:"Cerrar",download:"Descargar",enterFullscreen:"Pantalla completa",exitFullscreen:"Salir de pantalla completa",fitToPage:"Ajustar a la página",fitToWidth:"Ajustar al ancho",pagePrev:"Pagina anterior",pageNext:"Siguiente página",print:"Imprimir",ok:"OK",submit:"Enviar",zoomIn:"Acercar zoom",zoomOut:"Alejar zoom",zoomControls:"Controles de zoom",darkMode:"Modo oscuro",lightMode:"Modo de luz"},component:{leftPanel:"Panel",zoomOverlay:"Superposición de zoom"},message:{badDocument:"Error al cargar el documento. El documento está dañado o no es válido.",enterPassword:"Este documento está protegido por contraseña. Introduce una contraseña",incorrectPassword:"Contraseña incorrecta",notSupported:"Ese tipo de archivo no es compatible.",passwordRequired:"Se requiere contraseña",warning:"Advertencia"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}},I={action:{cancel:"Annuler",close:"Fermer",download:"Télécharger",enterFullscreen:"Plein écran",exitFullscreen:"Quitter le plein écran",fitToPage:"Ajuster à la page",fitToWidth:"Ajuster à la largeur",pagePrev:"Page précédente",pageNext:"Page suivante",print:"Imprimer",ok:"OK",submit:"Soumettre",zoomIn:"Zoom avant",zoomOut:"Zoom arrière",zoomControls:"Commandes de zoom",darkMode:"Mode sombre",lightMode:"Mode clair"},component:{leftPanel:"Panneau de gauche",zoomOverlay:"Superposition de zoom"},message:{badDocument:"Échec du chargement du document. Le document est corrompu ou non valide.",enterPassword:"Ce document est protégé par un mot de passe. Veuillez saisir ce mot de passe.",incorrectPassword:"Mot de passe incorrect",notSupported:"Ce type de fichier n'est pas pris en charge.",passwordRequired:"Mot de passe requis",warning:"Avertissement"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}},O={action:{cancel:"Annulla",close:"Vicino",download:"Scarica",enterFullscreen:"A schermo intero",exitFullscreen:"Esci dalla modalità schermo intero",fitToPage:"Adatta alla pagina",fitToWidth:"Adatta alla larghezza",pagePrev:"Pagina precedente",pageNext:"Pagina successiva",print:"Stampa",ok:"ok",submit:"Invia",zoomIn:"Ingrandire",zoomOut:"Rimpicciolisci",zoomControls:"Controlli dello zoom",darkMode:"Modalità scura",lightMode:"Modalità luce"},component:{leftPanel:"Pannello",zoomOverlay:"Sovrapposizione zoom"},message:{badDocument:"Caricamento del documento non riuscito. Il documento è corrotto o non valido.",enterPassword:"Questo documento è protetto da password. Per favore inserire una password",incorrectPassword:"Password errata",notSupported:"Quel tipo di file non è supportato.",passwordRequired:"Password richiesta",warning:"Avvertimento"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}},R={action:{cancel:"キャンセル",close:"閉じる",download:"ダウンロード",enterFullscreen:"全画面表示",exitFullscreen:"全画面表示を終了",fitToPage:"高さに合わせる",fitToWidth:"幅に合わせる",pagePrev:"前のページ",pageNext:"次のページ",print:"印刷",ok:"OK",submit:"送信",zoomIn:"ズームイン",zoomOut:"ズームアウト",zoomControls:"ズームコントロール",darkMode:"ダークモード",lightMode:"ライトモード"},component:{leftPanel:"パネル",zoomOverlay:"ズームオーバーレイ"},message:{badDocument:"ドキュメントの読み込みに失敗しました。ドキュメントが破損しているか、有効ではありません。",enterPassword:"このドキュメントは、パスワードで保護されています。 パスワードを入力してください。",incorrectPassword:"パスワードが正しくありません。",notSupported:"このファイル形式はサポートされていません。",passwordRequired:"パスワードが必要です",warning:"警告"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}},D={action:{cancel:"취소",close:"닫기",download:"다운로드",enterFullscreen:"전체 화면",exitFullscreen:"전체 화면 끝내기",fitToPage:"페이지에 맞추기",fitToWidth:"너비에 맞추기",pagePrev:"이전 페이지",pageNext:"다음 페이지",print:"인쇄",ok:"확인",submit:"제출",zoomIn:"확대",zoomOut:"축소",zoomControls:"줌 컨트롤",darkMode:"다크모드",lightMode:"라이트모드"},component:{leftPanel:"패널",zoomOverlay:"줌 오버레이"},message:{badDocument:"문서를 로드하지 못했습니다. 문서가 손상되었거나 유효하지 않습니다.",enterPassword:"이 문서는 비밀번호로 보호되어 있습니다. 비밀번호를 입력하세요",incorrectPassword:"비밀번호가 잘못되었습니다",notSupported:"해당 유형의 파일은 지원되지 않습니다.",passwordRequired:"비밀번호가 필요합니다",warning:"경고"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}},L={action:{cancel:"Annuleren",close:"Sluiten",download:"Download bestand",enterFullscreen:"Document in volledig scherm",exitFullscreen:"Document normaal weergeven",fitToPage:"Vensterhoogte",fitToWidth:"Vensterbreedte",pagePrev:"Vorige pagina",pageNext:"Volgende bladzijde",print:"Printen",ok:"OK",submit:"Verzenden",zoomIn:"Zoom in",zoomOut:"Zoom uit",zoomControls:"Zoomregelaars",darkMode:"Donkere modus",lightMode:"Lichte modus"},component:{leftPanel:"Panel",zoomOverlay:"Zoom-overlay"},message:{badDocument:"Er is een fout opgetreden bij het laden van het document. Het document is corrupt of heeft een ongeldige indeling.",enterPassword:"Dit document heeft een wachtwoord beveiliging. Geef een wachtwoord",incorrectPassword:"Fout wachtwoord",notSupported:"Dit bestandstype wordt niet ondersteund.",passwordRequired:"Wachtwoord vereist",warning:"Waarschuwing"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}},N={action:{cancel:"Cancelar",close:"Fechar",download:"Download",enterFullscreen:"Tela cheia",exitFullscreen:"Sair da tela cheia",fitToPage:"Ajustar à página",fitToWidth:"Ajustar à largura",pagePrev:"Página anterior",pageNext:"Próxima página",print:"Imprimir",ok:"OK",submit:"Enviar",zoomIn:"Aproximar",zoomOut:"Afastar",zoomControls:"Controles de zoom",darkMode:"Modo escuro",lightMode:"Modo claro"},component:{leftPanel:"Painel",zoomOverlay:"Sobreposição de zoom"},message:{badDocument:"Falha ao carregar documento. O documento está corrompido ou é inválido.",enterPassword:"Esse documento é protegido por senha. Digite uma senha",incorrectPassword:"Senha incorreta",notSupported:"Esse tipo de arquivo não é compatível.",passwordRequired:"Senha obrigatória",warning:"Aviso"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}},j={action:{cancel:"Отменить",close:"Закрыть",download:"Скачать",enterFullscreen:"Полный экран",exitFullscreen:"Выйти из полного экрана",fitToPage:"Уместить страницу",fitToWidth:"Уместить по ширине",pagePrev:"Предыдущая страница",pageNext:"Следующая страница",print:"Распечатать",ok:"OK",submit:"Отправить",zoomIn:"Увеличить",zoomOut:"Уменьшить",zoomControls:"Управление масштабированием",darkMode:"Темный режим",lightMode:"Легкий режим"},component:{leftPanel:"Панель",zoomOverlay:"Наложение масштаба"},message:{badDocument:"Произошла ошибка при загрузке документа. Документ содержит ошибки или недостоверный.",enterPassword:"Документ защищен паролем. Пожалуйста введите пароль.",incorrectPassword:"Пароль неверный",notSupported:"Расширение файла не поддерживается.",passwordRequired:"Пароль необходим",warning:"Предупреждение"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}},G={action:{cancel:"取消",close:"关闭",download:"下载",enterFullscreen:"全屏",exitFullscreen:"退出全屏",fitToPage:"页面尺寸",fitToWidth:"自身尺寸",pagePrev:"上一页",pageNext:"下一页",print:"打印",ok:"好的",submit:"提交",zoomIn:"放大",zoomOut:"缩小",zoomControls:"缩放控制",darkMode:"暗模式",lightMode:"灯光模式"},component:{leftPanel:"面板",zoomOverlay:"缩放叠加"},message:{badDocument:"无法加载文档，此文档已损坏或无效。",enterPassword:"此文档已被加密。请输入密码。",incorrectPassword:"密码错误",notSupported:"不支持该文件类型。",passwordRequired:"需要输入密码",warning:"警告"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}},B={action:{cancel:"取消",close:"關閉",download:"下載",enterFullscreen:"全螢幕",exitFullscreen:"退出全螢幕",fitToPage:"符合頁面大小",fitToWidth:"符合寬度",pagePrev:"上一頁",pageNext:"下一頁",print:"列印",ok:"OK",submit:"提交",zoomIn:"放大",zoomOut:"縮小",zoomControls:"縮放控制",darkMode:"暗模式",lightMode:"燈光模式"},component:{leftPanel:"面板",zoomOverlay:"縮放疊加"},message:{badDocument:"無法載入文件。此文件已損壞或無效。",enterPassword:"文件有密碼保護。請輸入密碼",incorrectPassword:"密碼不正確",notSupported:"不支援該檔案類型。",passwordRequired:"需要密碼",warning:"警告"},shortcut:{zoomIn:"(Ctrl +)",zoomOut:"(Ctrl -)"}};class U extends HTMLElement{loading=new i(this);errorModal=new s(this);passwordModal;language;loaded=!1;calledLoadListener=!1;pageNav;documentTitle;printButton;downloadButton;themeChangeButton;pageView;listeners={pageChange:void 0,documentLoaded:void 0,passwordEnter:void 0};documentUrl=void 0;documentObject=void 0;constructor(){super(),"false"!==this.getAttribute("restoretheme")&&(()=>{const t=localStorage.getItem("theme");t&&r(t)})();const t=this.getAttribute("lang")||"en";this.language=((t="en")=>{const e={de:T,en:F,es:M,fr:I,it:O,ja:R,ko:D,nl:L,pt_br:N,ru:j,zh_cn:G,zh_tw:B};return e[t in e?t:"en"]})(t),document.documentElement.setAttribute("data-lang",t),this.render(),this.documentTitle=this.querySelector('[data-element="title"]'),this.printButton=this.querySelector('[data-element="printButton"]'),this.downloadButton=this.querySelector('[data-element="downloadButton"]'),this.themeChangeButton=this.querySelector('[data-element="themeChangeButton"]'),this.pageView=this.querySelector('[data-element="pageView"]'),this.passwordModal=new w(this,this.language)}async connectedCallback(){try{this.loading.show();const a=this.getAttribute("src");if(!a)throw new Error("Element pdf-live is missing required attribute src");this.documentUrl=a,this.getAttribute("title")?this.documentTitle.textContent=document.title=this.getAttribute("title"):this.documentTitle.textContent=document.title=E(a);const i=this.getAttribute("worker");if(!i)throw new Error("Element pdf-live is missing required attribute worker");let o;(()=>{let t=document.createElement("script");t.innerHTML='!function webpackUniversalModuleDefinition(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],e):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=e():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=e()}(globalThis,(()=>(()=>{"use strict";var __webpack_modules__=[,(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0;e.arrayByteLength=arrayByteLength;e.arraysToBytes=function arraysToBytes(t){const e=t.length;if(1===e&&t[0]instanceof Uint8Array)return t[0];let s=0;for(let n=0;n<e;n++)s+=arrayByteLength(t[n]);let n=0;const i=new Uint8Array(s);for(let s=0;s<e;s++){let e=t[s];e instanceof Uint8Array||(e="string"==typeof e?stringToBytes(e):new Uint8Array(e));const r=e.byteLength;i.set(e,n);n+=r}return i};e.assert=function assert(t,e){t||unreachable(e)};e.bytesToString=function bytesToString(t){"object"==typeof t&&null!==t&&void 0!==t.length||unreachable("Invalid argument for bytesToString");const e=t.length,s=8192;if(e<s)return String.fromCharCode.apply(null,t);const n=[];for(let i=0;i<e;i+=s){const r=Math.min(i+s,e),a=t.subarray(i,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")};e.createPromiseCapability=function createPromiseCapability(){const t=Object.create(null);let e=!1;Object.defineProperty(t,"settled",{get:()=>e});t.promise=new Promise((function(s,n){t.resolve=function(t){e=!0;s(t)};t.reject=function(t){e=!0;n(t)}}));return t};e.createValidAbsoluteUrl=function createValidAbsoluteUrl(t,e=null,s=null){if(!t)return null;try{if(s&&"string"==typeof t){if(s.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\\./g);e&&e.length>=2&&(t=`http://${t}`)}if(s.tryConvertEncoding)try{t=stringToUTF8String(t)}catch(t){}}const n=e?new URL(t,e):new URL(t);if(function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(t){}return null};e.escapeString=function escapeString(t){return t.replace(/([()\\\\\\n\\r])/g,(t=>"\\n"===t?"\\\\n":"\\r"===t?"\\\\r":`\\\\${t}`))};e.getModificationDate=function getModificationDate(t=new Date){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")};e.getVerbosityLevel=function getVerbosityLevel(){return i};e.info=function info(t){i>=n.INFOS&&console.log(`Info: ${t}`)};e.isArrayBuffer=function isArrayBuffer(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength};e.isArrayEqual=function isArrayEqual(t,e){if(t.length!==e.length)return!1;for(let s=0,n=t.length;s<n;s++)if(t[s]!==e[s])return!1;return!0};e.isAscii=function isAscii(t){return/^[\\x00-\\x7F]*$/.test(t)};e.objectFromMap=function objectFromMap(t){const e=Object.create(null);for(const[s,n]of t)e[s]=n;return e};e.objectSize=function objectSize(t){return Object.keys(t).length};e.setVerbosityLevel=function setVerbosityLevel(t){Number.isInteger(t)&&(i=t)};e.shadow=shadow;e.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)};e.stringToBytes=stringToBytes;e.stringToPDFString=function stringToPDFString(t){if(t[0]>="ï"){let e;"þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8");if(e)try{const s=new TextDecoder(e,{fatal:!0}),n=stringToBytes(t);return s.decode(n)}catch(t){warn(`stringToPDFString: "${t}".`)}}const e=[];for(let s=0,n=t.length;s<n;s++){const n=o[t.charCodeAt(s)];e.push(n?String.fromCharCode(n):t.charAt(s))}return e.join("")};e.stringToUTF16BEString=function stringToUTF16BEString(t){const e=["þÿ"];for(let s=0,n=t.length;s<n;s++){const n=t.charCodeAt(s);e.push(String.fromCharCode(n>>8&255),String.fromCharCode(255&n))}return e.join("")};e.stringToUTF8String=stringToUTF8String;e.unreachable=unreachable;e.utf8StringToString=function utf8StringToString(t){return unescape(encodeURIComponent(t))};e.warn=warn;s(2);e.IDENTITY_MATRIX=[1,0,0,1,0,0];e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];e.LINE_FACTOR=1.35;e.LINE_DESCENT_FACTOR=.35;e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationEditorPrefix="pdfjs_internal_editor_";e.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReplyType={GROUP:"Group",REPLY:"R"};e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.PageActionEventType={O:"PageOpen",C:"PageClose"};e.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const n={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=n;e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let i=n.WARNINGS;function warn(t){i>=n.WARNINGS&&console.log(`Warning: ${t}`)}function unreachable(t){throw new Error(t)}function shadow(t,e,s){Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!1});return s}const r=function BaseExceptionClosure(){function BaseException(t,e){this.constructor===BaseException&&unreachable("Cannot initialize BaseException.");this.message=t;this.name=e}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();e.BaseException=r;e.PasswordException=class PasswordException extends r{constructor(t,e){super(t,"PasswordException");this.code=e}};e.UnknownErrorException=class UnknownErrorException extends r{constructor(t,e){super(t,"UnknownErrorException");this.details=e}};e.InvalidPDFException=class InvalidPDFException extends r{constructor(t){super(t,"InvalidPDFException")}};e.MissingPDFException=class MissingPDFException extends r{constructor(t){super(t,"MissingPDFException")}};e.UnexpectedResponseException=class UnexpectedResponseException extends r{constructor(t,e){super(t,"UnexpectedResponseException");this.status=e}};e.FormatError=class FormatError extends r{constructor(t){super(t,"FormatError")}};e.AbortException=class AbortException extends r{constructor(t){super(t,"AbortException")}};function stringToBytes(t){"string"!=typeof t&&unreachable("Invalid argument for stringToBytes");const e=t.length,s=new Uint8Array(e);for(let n=0;n<e;++n)s[n]=255&t.charCodeAt(n);return s}function arrayByteLength(t){if(void 0!==t.length)return t.length;if(void 0!==t.byteLength)return t.byteLength;unreachable("Invalid argument for arrayByteLength")}e.FeatureTest=class FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",function isLittleEndian(){const t=new Uint8Array(4);t[0]=1;return 1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return shadow(this,"isEvalSupported",function isEvalSupported(){try{new Function("");return!0}catch(t){return!1}}())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const a=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));class Util{static makeHexColor(t,e,s){return`#${a[t]}${a[e]}${a[s]}`}static scaleMinMax(t,e){let s;if(t[0]){if(t[0]<0){s=e[0];e[0]=e[1];e[1]=s}e[0]*=t[0];e[1]*=t[0];if(t[3]<0){s=e[2];e[2]=e[3];e[3]=s}e[2]*=t[3];e[3]*=t[3]}else{s=e[0];e[0]=e[2];e[2]=s;s=e[1];e[1]=e[3];e[3]=s;if(t[1]<0){s=e[2];e[2]=e[3];e[3]=s}e[2]*=t[1];e[3]*=t[1];if(t[2]<0){s=e[0];e[0]=e[1];e[1]=s}e[0]*=t[2];e[1]*=t[2]}e[0]+=t[4];e[1]+=t[4];e[2]+=t[5];e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const s=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s]}static getAxialAlignedBoundingBox(t,e){const s=Util.applyTransform(t,e),n=Util.applyTransform(t.slice(2,4),e),i=Util.applyTransform([t[0],t[3]],e),r=Util.applyTransform([t[2],t[1]],e);return[Math.min(s[0],n[0],i[0],r[0]),Math.min(s[1],n[1],i[1],r[1]),Math.max(s[0],n[0],i[0],r[0]),Math.max(s[1],n[1],i[1],r[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static apply3dTransform(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],i=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],a=(s+r)/2,o=Math.sqrt((s+r)**2-4*(s*r-i*n))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);if(t[0]>t[2]){e[0]=t[2];e[2]=t[0]}if(t[1]>t[3]){e[1]=t[3];e[3]=t[1]}return e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>n)return null;const i=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return i>r?null:[s,i,n,r]}static bezierBoundingBox(t,e,s,n,i,r,a,o){const l=[],c=[[],[]];let h,d,u,p,g,f,m,b;for(let c=0;c<2;++c){if(0===c){d=6*t-12*s+6*i;h=-3*t+9*s-9*i+3*a;u=3*s-3*t}else{d=6*e-12*n+6*r;h=-3*e+9*n-9*r+3*o;u=3*n-3*e}if(Math.abs(h)<1e-12){if(Math.abs(d)<1e-12)continue;p=-u/d;0<p&&p<1&&l.push(p)}else{m=d*d-4*u*h;b=Math.sqrt(m);if(!(m<0)){g=(-d+b)/(2*h);0<g&&g<1&&l.push(g);f=(-d-b)/(2*h);0<f&&f<1&&l.push(f)}}}let _,A=l.length;const y=A;for(;A--;){p=l[A];_=1-p;c[0][A]=_*_*_*t+3*_*_*p*s+3*_*p*p*i+p*p*p*a;c[1][A]=_*_*_*e+3*_*_*p*n+3*_*p*p*r+p*p*p*o}c[0][y]=t;c[1][y]=e;c[0][y+1]=a;c[1][y+1]=o;c[0].length=c[1].length=y+2;return[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}e.Util=Util;const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(t){return decodeURIComponent(escape(t))}},(t,e,s)=>{s(3)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.isNodeJS=void 0;const s=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=s},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0;e.binarySearchFirstItem=function binarySearchFirstItem(t,e,s=0){let n=s,i=t.length-1;if(i<0||!e(t[i]))return t.length;if(e(t[n]))return n;for(;n<i;){const s=n+i>>1,r=t[s];e(r)?i=s:n=s+1}return n};e.deprecated=function deprecated(t){console.log("Deprecated API usage: "+t)};e.getColorValues=function getColorValues(t){const e=document.createElement("span");e.style.visibility="hidden";document.body.append(e);for(const s of t.keys()){e.style.color=s;const n=window.getComputedStyle(e).color;t.set(s,getRGB(n))}e.remove()};e.getFilenameFromUrl=function getFilenameFromUrl(t){const e=t.indexOf("#"),s=t.indexOf("?"),n=Math.min(e>0?e:t.length,s>0?s:t.length);return t.substring(t.lastIndexOf("/",n)+1,n)};e.getPdfFilenameFromUrl=function getPdfFilenameFromUrl(t,e="document.pdf"){if("string"!=typeof t)return e;if(isDataScheme(t)){(0,i.warn)(\'getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.\');return e}const s=/[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i,n=/^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/.exec(t);let r=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(r){r=r[0];if(r.includes("%"))try{r=s.exec(decodeURIComponent(r))[0]}catch(t){}}return r||e};e.getRGB=getRGB;e.getXfaPageViewport=function getXfaPageViewport(t,{scale:e=1,rotation:s=0}){const{width:n,height:i}=t.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new PageViewport({viewBox:r,scale:e,rotation:s})};e.isDataScheme=isDataScheme;e.isPdfFile=function isPdfFile(t){return"string"==typeof t&&/\\.pdf$/i.test(t)};e.isValidFetchUrl=isValidFetchUrl;e.loadScript=function loadScript(t,e=!1){return new Promise(((s,n)=>{const i=document.createElement("script");i.src=t;i.onload=function(t){e&&i.remove();s(t)};i.onerror=function(){n(new Error(`Cannot load script at: ${i.src}`))};(document.head||document.documentElement).append(i)}))};var n=s(5),i=s(1);class PixelsPerInch{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=PixelsPerInch;class DOMCanvasFactory extends n.BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document}={}){super();this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");s.width=t;s.height=e;return s}}e.DOMCanvasFactory=DOMCanvasFactory;async function fetchData(t,e=!1){if(isValidFetchUrl(t,document.baseURI)){const s=await fetch(t);if(!s.ok)throw new Error(s.statusText);return e?new Uint8Array(await s.arrayBuffer()):(0,i.stringToBytes)(await s.text())}return new Promise(((s,n)=>{const r=new XMLHttpRequest;r.open("GET",t,!0);e&&(r.responseType="arraybuffer");r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){let t;e&&r.response?t=new Uint8Array(r.response):!e&&r.responseText&&(t=(0,i.stringToBytes)(r.responseText));if(t){s(t);return}}n(new Error(r.statusText))}};r.send(null)}))}class DOMCMapReaderFactory extends n.BaseCMapReaderFactory{_fetchData(t,e){return fetchData(t,this.isCompressed).then((t=>({cMapData:t,compressionType:e})))}}e.DOMCMapReaderFactory=DOMCMapReaderFactory;class DOMStandardFontDataFactory extends n.BaseStandardFontDataFactory{_fetchData(t){return fetchData(t,!0)}}e.DOMStandardFontDataFactory=DOMStandardFontDataFactory;class DOMSVGFactory extends n.BaseSVGFactory{_createSVG(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}}e.DOMSVGFactory=DOMSVGFactory;class PageViewport{constructor({viewBox:t,scale:e,rotation:s,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}){this.viewBox=t;this.scale=e;this.rotation=s;this.offsetX=n;this.offsetY=i;const a=(t[2]+t[0])/2,o=(t[3]+t[1])/2;let l,c,h,d,u,p,g,f;(s%=360)<0&&(s+=360);switch(s){case 180:l=-1;c=0;h=0;d=1;break;case 90:l=0;c=1;h=1;d=0;break;case 270:l=0;c=-1;h=-1;d=0;break;case 0:l=1;c=0;h=0;d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}if(r){h=-h;d=-d}if(0===l){u=Math.abs(o-t[1])*e+n;p=Math.abs(a-t[0])*e+i;g=Math.abs(t[3]-t[1])*e;f=Math.abs(t[2]-t[0])*e}else{u=Math.abs(a-t[0])*e+n;p=Math.abs(o-t[1])*e+i;g=Math.abs(t[2]-t[0])*e;f=Math.abs(t[3]-t[1])*e}this.transform=[l*e,c*e,h*e,d*e,u-l*e*a-h*e*o,p-c*e*a-d*e*o];this.width=g;this.height=f}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:i=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:i})}convertToViewportPoint(t,e){return i.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=i.Util.applyTransform([t[0],t[1]],this.transform),s=i.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){return i.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=PageViewport;class RenderingCancelledException extends i.BaseException{constructor(t,e){super(t,"RenderingCancelledException");this.type=e}}e.RenderingCancelledException=RenderingCancelledException;function isDataScheme(t){const e=t.length;let s=0;for(;s<e&&""===t[s].trim();)s++;return"data:"===t.substring(s,s+5).toLowerCase()}e.StatTimer=class StatTimer{constructor(){this.started=Object.create(null);this.times=[]}time(t){t in this.started&&(0,i.warn)(`Timer is already running for ${t}`);this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,i.warn)(`Timer has not been started for ${t}`);this.times.push({name:t,start:this.started[t],end:Date.now()});delete this.started[t]}toString(){const t=[];let e=0;for(const t of this.times){const s=t.name;s.length>e&&(e=s.length)}for(const s of this.times){const n=s.end-s.start;t.push(`${s.name.padEnd(e)} ${n}ms\\n`)}return t.join("")}};function isValidFetchUrl(t,e){try{const{protocol:s}=e?new URL(t,e):new URL(t);return"http:"===s||"https:"===s}catch(t){return!1}}let r;e.PDFDateString=class PDFDateString{static toDateObject(t){if(!t||"string"!=typeof t)return null;r||(r=new RegExp("^D:(\\\\d{4})(\\\\d{2})?(\\\\d{2})?(\\\\d{2})?(\\\\d{2})?(\\\\d{2})?([Z|+|-])?(\\\\d{2})?\'?(\\\\d{2})?\'?"));const e=r.exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let i=parseInt(e[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;d=d>=0&&d<=59?d:0;if("-"===c){a+=h;o+=d}else if("+"===c){a-=h;o-=d}return new Date(Date.UTC(s,n,i,a,o,l))}};function getRGB(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}if(t.startsWith("rgb("))return t.slice(4,-1).split(",").map((t=>parseInt(t)));if(t.startsWith("rgba("))return t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3);(0,i.warn)(`Not a valid color format: "${t}"`);return[0,0,0]}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class BaseCanvasFactory{constructor(){this.constructor===BaseCanvasFactory&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d")}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e;t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0;t.canvas.height=0;t.canvas=null;t.context=null}_createCanvas(t,e){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=BaseCanvasFactory;class BaseCMapReaderFactory{constructor({baseUrl:t=null,isCompressed:e=!1}){this.constructor===BaseCMapReaderFactory&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory.");this.baseUrl=t;this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error(\'The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.\');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),s=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(e,s).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)}))}_fetchData(t,e){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=BaseCMapReaderFactory;class BaseStandardFontDataFactory{constructor({baseUrl:t=null}){this.constructor===BaseStandardFontDataFactory&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory.");this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error(\'The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.\');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch((t=>{throw new Error(`Unable to load font data at: ${e}`)}))}_fetchData(t){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=BaseStandardFontDataFactory;class BaseSVGFactory{constructor(){this.constructor===BaseSVGFactory&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");n.setAttribute("version","1.1");if(!s){n.setAttribute("width",`${t}px`);n.setAttribute("height",`${e}px`)}n.setAttribute("preserveAspectRatio","none");n.setAttribute("viewBox",`0 0 ${t} ${e}`);return n}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=BaseSVGFactory},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0;exports.getDocument=getDocument;exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory;exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(7),_display_utils=__w_pdfjs_require__(4),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;if(_is_node.isNodeJS){const{NodeCanvasFactory:t,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:s}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=t;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=s}function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){const e=new PDFDocumentLoadingTask;let s;if("string"==typeof t||t instanceof URL)s={url:t};else if((0,_util.isArrayBuffer)(t))s={data:t};else if(t instanceof PDFDataRangeTransport)s={range:t};else{if("object"!=typeof t)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");s=t}const n=Object.create(null);let i=null,r=null;for(const t in s){const e=s[t];switch(t){case"url":if("undefined"!=typeof window)try{n[t]=new URL(e,window.location).href;continue}catch(t){(0,_util.warn)(`Cannot create valid URL: "${t}".`)}else if("string"==typeof e||e instanceof URL){n[t]=e.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":i=e;continue;case"worker":r=e;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)n[t]=new Uint8Array(e);else{if(e instanceof Uint8Array)break;if("string"==typeof e)n[t]=(0,_util.stringToBytes)(e);else if("object"!=typeof e||null===e||isNaN(e.length)){if(!(0,_util.isArrayBuffer)(e))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");n[t]=new Uint8Array(e)}else n[t]=new Uint8Array(e)}continue}n[t]=e}n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory;n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory;n.ignoreErrors=!0!==n.stopAtErrors;n.fontExtraProperties=!0===n.fontExtraProperties;n.pdfBug=!0===n.pdfBug;n.enableXfa=!0===n.enableXfa;(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE);("string"!=typeof n.docBaseUrl||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null);(!Number.isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1);"string"!=typeof n.cMapUrl&&(n.cMapUrl=null);"string"!=typeof n.standardFontDataUrl&&(n.standardFontDataUrl=null);"boolean"!=typeof n.useWorkerFetch&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory);"boolean"!=typeof n.isEvalSupported&&(n.isEvalSupported=!0);"boolean"!=typeof n.disableFontFace&&(n.disableFontFace=_is_node.isNodeJS);"boolean"!=typeof n.useSystemFonts&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace);"object"==typeof n.ownerDocument&&null!==n.ownerDocument||(n.ownerDocument=globalThis.document);"boolean"!=typeof n.disableRange&&(n.disableRange=!1);"boolean"!=typeof n.disableStream&&(n.disableStream=!1);"boolean"!=typeof n.disableAutoFetch&&(n.disableAutoFetch=!1);(0,_util.setVerbosityLevel)(n.verbosity);if(!r){const t={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};r=t.port?PDFWorker.fromPort(t):new PDFWorker(t);e._worker=r}const a=e.docId;r.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");const t=_fetchDocument(r,n,i,a),s=new Promise((function(t){let e;i?e=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},i):n.data||(e=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream}));t(e)}));return Promise.all([t,s]).then((function([t,s]){if(e.destroyed)throw new Error("Loading aborted");const i=new _message_handler.MessageHandler(a,t,r.port),o=new WorkerTransport(i,e,s,n);e._transport=o;i.send("Ready",null)}))})).catch(e._capability.reject);return e}async function _fetchDocument(t,e,s,n){if(t.destroyed)throw new Error("Worker was destroyed");if(s){e.length=s.length;e.initialData=s.initialData;e.progressiveDone=s.progressiveDone;e.contentDispositionFilename=s.contentDispositionFilename}const i=await t.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.15.349",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});e.data&&(e.data=null);if(t.destroyed)throw new Error("Worker was destroyed");return i}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId="d"+PDFDocumentLoadingTask.#t++;this.destroyed=!1;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;await(this._transport?.destroy());this._transport=null;if(this._worker){this._worker.destroy();this._worker=null}}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,e,s=!1,n=null){this.length=t;this.initialData=e;this.progressiveDone=s;this.contentDispositionFilename=n;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const s of this._progressListeners)s(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t;this._transport=e;Object.defineProperty(this,"fingerprint",{get(){(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead.");return this.fingerprints[0]}});Object.defineProperty(this,"getStats",{value:async()=>{(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead.");return this.stats||{streamTypes:{},fontTypes:{}}}})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");return this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,e,s,n,i=!1){this._pageIndex=t;this._pageInfo=e;this._ownerDocument=n;this._transport=s;this._stats=i?new _display_utils.StatTimer:null;this._pdfBug=i;this.commonObjs=s.commonObjs;this.objs=new PDFObjects;this._bitmaps=new Set;this.cleanupAfterRender=!1;this.pendingCleanup=!1;this._intentStates=new Map;this._annotationPromises=new Map;this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:i=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:i})}getAnnotations({intent:t="display"}={}){const e=this._transport.getRenderingIntent(t);let s=this._annotationPromises.get(e.cacheKey);if(!s){s=this._transport.getAnnotations(this._pageIndex,e.renderingIntent);this._annotationPromises.set(e.cacheKey,s);s=s.then((t=>{for(const e of t){void 0!==e.titleObj&&Object.defineProperty(e,"title",{get(){(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead.");return e.titleObj.str}});void 0!==e.contentsObj&&Object.defineProperty(e,"contents",{get(){(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead.");return e.contentsObj.str}})}return t}))}return s}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:n=_util.AnnotationMode.ENABLE,transform:i=null,imageLayer:r=null,canvasFactory:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:d=null}){if(void 0!==arguments[0]?.renderInteractiveForms){(0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead.");!0===arguments[0].renderInteractiveForms&&n===_util.AnnotationMode.ENABLE&&(n=_util.AnnotationMode.ENABLE_FORMS)}if(void 0!==arguments[0]?.includeAnnotationStorage){(0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead.");!0===arguments[0].includeAnnotationStorage&&n===_util.AnnotationMode.ENABLE&&(n=_util.AnnotationMode.ENABLE_STORAGE)}this._stats&&this._stats.time("Overall");const u=this._transport.getRenderingIntent(s,n,d);this.pendingCleanup=!1;l||(l=this._transport.getOptionalContentConfig());let p=this._intentStates.get(u.cacheKey);if(!p){p=Object.create(null);this._intentStates.set(u.cacheKey,p)}if(p.streamReaderCancelTimeout){clearTimeout(p.streamReaderCancelTimeout);p.streamReaderCancelTimeout=null}const g=a||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),f=!!(u.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!p.displayReadyCapability){p.displayReadyCapability=(0,_util.createPromiseCapability)();p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};this._stats&&this._stats.time("Page Request");this._pumpOperatorList(u)}const complete=t=>{p.renderTasks.delete(m);(this.cleanupAfterRender||f)&&(this.pendingCleanup=!0);this._tryCleanup();if(t){m.capability.reject(t);this._abortOperatorList({intentState:p,reason:t instanceof Error?t:new Error(t)})}else m.capability.resolve();if(this._stats){this._stats.timeEnd("Rendering");this._stats.timeEnd("Overall")}},m=new InternalRenderTask({callback:complete,params:{canvasContext:t,viewport:e,transform:i,imageLayer:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:g,useRequestAnimationFrame:!f,pdfBug:this._pdfBug,pageColors:h});(p.renderTasks||=new Set).add(m);const b=m.task;Promise.all([p.displayReadyCapability.promise,l]).then((([t,e])=>{if(this.pendingCleanup)complete();else{this._stats&&this._stats.time("Rendering");m.initializeGraphics({transparency:t,optionalContentConfig:e});m.operatorListChanged()}})).catch(complete);return b}getOperatorList({intent:t="display",annotationMode:e=_util.AnnotationMode.ENABLE,printAnnotationStorage:s=null}={}){const n=this._transport.getRenderingIntent(t,e,s,!0);let i,r=this._intentStates.get(n.cacheKey);if(!r){r=Object.create(null);this._intentStates.set(n.cacheKey,r)}if(!r.opListReadCapability){i=Object.create(null);i.operatorListChanged=function operatorListChanged(){if(r.operatorList.lastChunk){r.opListReadCapability.resolve(r.operatorList);r.renderTasks.delete(i)}};r.opListReadCapability=(0,_util.createPromiseCapability)();(r.renderTasks||=new Set).add(i);r.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};this._stats&&this._stats.time("Page Request");this._pumpOperatorList(n)}return r.opListReadCapability.promise}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==t,includeMarkedContent:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then((t=>_xfa_text.XfaText.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,s){const n=e.getReader(),i={items:[],styles:Object.create(null)};!function pump(){n.read().then((function({value:e,done:s}){if(s)t(i);else{Object.assign(i.styles,e.styles);i.items.push(...e.items);pump()}}),s)}()}))}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values()){this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0});if(!e.opListReadCapability)for(const s of e.renderTasks){t.push(s.completed);s.cancel()}}this.objs.clear();for(const t of this._bitmaps)t.close();this._bitmaps.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;this.pendingCleanup=!1;return Promise.all(t)}cleanup(t=!1){this.pendingCleanup=!0;return this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;this._intentStates.clear();this.objs.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();this._bitmaps.clear();this.pendingCleanup=!1;return!0}_startRenderPage(t,e){const s=this._intentStates.get(e);if(s){this._stats&&this._stats.timeEnd("Page Request");s.displayReadyCapability&&s.displayReadyCapability.resolve(t)}}_renderPageChunk(t,e){for(let s=0,n=t.length;s<n;s++){e.operatorList.fnArray.push(t.fnArray[s]);e.operatorList.argsArray.push(t.argsArray[s])}e.operatorList.lastChunk=t.lastChunk;e.operatorList.separateAnnots=t.separateAnnots;for(const t of e.renderTasks)t.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageMap:s}){const n=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s}).getReader(),i=this._intentStates.get(e);i.streamReader=n;const pump=()=>{n.read().then((({value:t,done:e})=>{if(e)i.streamReader=null;else if(!this._transport.destroyed){this._renderPageChunk(t,i);pump()}}),(t=>{i.streamReader=null;if(!this._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;for(const t of i.renderTasks)t.operatorListChanged();this._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(t);else{if(!i.opListReadCapability)throw t;i.opListReadCapability.reject(t)}}}))};pump()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(!s){if(t.renderTasks.size>0)return;if(e instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:t,reason:e,force:!0});t.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT);return}}t.streamReader.cancel(new _util.AbortException(e.message)).catch((()=>{}));t.streamReader=null;if(!this._transport.destroyed){for(const[e,s]of this._intentStates)if(s===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[];this._deferred=Promise.resolve()}postMessage(t,e){const s={data:structuredClone(t,e)};this._deferred.then((()=>{for(const t of this._listeners)t.call(this,s)}))}addEventListener(t,e){this._listeners.push(e)}removeEventListener(t,e){const s=this._listeners.indexOf(e);this._listeners.splice(s,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;if(_is_node.isNodeJS&&"function"==typeof require){PDFWorkerUtil.isWorkerDisabled=!0;PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js"}else if("object"==typeof document){const t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\\.(?:min\\.)?js)(\\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let s;try{s=new URL(t);if(!s.origin||"null"===s.origin)return!1}catch(t){return!1}const n=new URL(e,s);return s.origin===n.origin};PDFWorkerUtil.createCDNWrapper=function(t){const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))};class PDFWorker{static#e=new WeakMap;constructor({name:t=null,port:e=null,verbosity:s=(0,_util.getVerbosityLevel)()}={}){if(e&&PDFWorker.#e.has(e))throw new Error("Cannot use more than one PDFWorker per port.");this.name=t;this.destroyed=!1;this.verbosity=s;this._readyCapability=(0,_util.createPromiseCapability)();this._port=null;this._webWorker=null;this._messageHandler=null;if(e){PDFWorker.#e.set(e,this);this._initializeFromPort(e)}else this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t;this._messageHandler=new _message_handler.MessageHandler("main","worker",t);this._messageHandler.on("ready",(function(){}));this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let t=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),s=new _message_handler.MessageHandler("main","worker",e),terminateEarly=()=>{e.removeEventListener("error",onWorkerError);s.destroy();e.terminate();this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},onWorkerError=()=>{this._webWorker||terminateEarly()};e.addEventListener("error",onWorkerError);s.on("test",(t=>{e.removeEventListener("error",onWorkerError);if(this.destroyed)terminateEarly();else if(t){this._messageHandler=s;this._port=e;this._webWorker=e;this._readyCapability.resolve();s.send("configure",{verbosity:this.verbosity})}else{this._setupFakeWorker();s.destroy();e.terminate()}}));s.on("ready",(t=>{e.removeEventListener("error",onWorkerError);if(this.destroyed)terminateEarly();else try{sendTest()}catch(t){this._setupFakeWorker()}}));const sendTest=()=>{const t=new Uint8Array;s.send("test",t,[t.buffer])};sendTest();return}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){if(!PDFWorkerUtil.isWorkerDisabled){(0,_util.warn)("Setting up fake worker.");PDFWorkerUtil.isWorkerDisabled=!0}PDFWorker._setupFakeWorkerGlobal.then((t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const s="fake"+PDFWorkerUtil.fakeWorkerId++,n=new _message_handler.MessageHandler(s+"_worker",s,e);t.setup(n,e);const i=new _message_handler.MessageHandler(s,s+"_worker",e);this._messageHandler=i;this._readyCapability.resolve();i.send("configure",{verbosity:this.verbosity})})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}PDFWorker.#e.delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null}}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#e.has(t.port)?this.#e.get(t.port):new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc){_is_node.isNodeJS||(0,_display_utils.deprecated)(\'No "GlobalWorkerOptions.workerSrc" specified.\');return PDFWorkerUtil.fallbackWorkerSrc}throw new Error(\'No "GlobalWorkerOptions.workerSrc" specified.\')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch(t){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&"function"==typeof require){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}await(0,_display_utils.loadScript)(this.workerSrc);return window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;PDFWorker.getWorkerSrc=function(){(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead.");return this.workerSrc};class WorkerTransport{#s=null;#n=new Map;#i=new Map;#r=null;constructor(t,e,s,n){this.messageHandler=t;this.loadingTask=e;this.commonObjs=new PDFObjects;this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:n.ownerDocument,styleElement:n.styleElement});this._params=n;if(!n.useWorkerFetch){this.CMapReaderFactory=new n.CMapReaderFactory({baseUrl:n.cMapUrl,isCompressed:n.cMapPacked});this.StandardFontDataFactory=new n.StandardFontDataFactory({baseUrl:n.standardFontDataUrl})}this.destroyed=!1;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=s;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#s}getRenderingIntent(t,e=_util.AnnotationMode.ENABLE,s=null,n=!1){let i=_util.RenderingIntentFlag.DISPLAY,r=null;switch(t){case"any":i=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":i=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case _util.AnnotationMode.DISABLE:i+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:i+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE;r=(i&_util.RenderingIntentFlag.PRINT&&s instanceof _annotation_storage.PrintAnnotationStorage?s:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(i+=_util.RenderingIntentFlag.OPLIST);return{renderingIntent:i,cacheKey:`${i}_${_annotation_storage.AnnotationStorage.getHash(r)}`,annotationStorageMap:r}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=(0,_util.createPromiseCapability)();this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const e of this.#n.values())t.push(e._destroy());this.#n.clear();this.#i.clear();this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);t.push(e);Promise.all(t).then((()=>{this.commonObjs.clear();this.fontLoader.clear();this.#r=null;this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null;this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated."));if(this.messageHandler){this.messageHandler.destroy();this.messageHandler=null}this.destroyCapability.resolve()}),this.destroyCapability.reject);return this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available.");this._fullReader=this._networkStream.getFullReader();this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}};e.onPull=()=>{this._fullReader.read().then((function({value:t,done:s}){if(s)e.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer.");e.enqueue(new Uint8Array(t),1,[t])}})).catch((t=>{e.error(t)}))};e.onCancel=t=>{this._fullReader.cancel(t);e.ready.catch((t=>{if(!this.destroyed)throw t}))}}));t.on("ReaderHeadersReady",(t=>{const s=(0,_util.createPromiseCapability)(),n=this._fullReader;n.headersReady.then((()=>{if(!n.isStreamingSupported||!n.isRangeSupported){this._lastProgress&&e.onProgress?.(this._lastProgress);n.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}}s.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})}),s.reject);return s.promise}));t.on("GetRangeReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(t.begin,t.end);if(s){e.onPull=()=>{s.read().then((function({value:t,done:s}){if(s)e.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer.");e.enqueue(new Uint8Array(t),1,[t])}})).catch((t=>{e.error(t)}))};e.onCancel=t=>{s.cancel(t);e.ready.catch((t=>{if(!this.destroyed)throw t}))}}else e.close()}));t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages;this._htmlForXfa=t.htmlForXfa;delete t.htmlForXfa;e._capability.resolve(new PDFDocumentProxy(t,this))}));t.on("DocException",(function(t){let s;switch(t.name){case"PasswordException":s=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":s=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":s=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":s=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":s=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}e._capability.reject(s)}));t.on("PasswordRequest",(t=>{this._passwordCapability=(0,_util.createPromiseCapability)();if(e.onPassword){const updatePassword=t=>{t instanceof Error?this._passwordCapability.reject(t):this._passwordCapability.resolve({password:t})};try{e.onPassword(updatePassword,t.code)}catch(t){this._passwordCapability.reject(t)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}));t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length});this.downloadInfoCapability.resolve(t)}));t.on("StartRenderPage",(t=>{if(this.destroyed)return;this.#n.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}));t.on("commonobj",(([e,s,n])=>{if(!this.destroyed&&!this.commonObjs.has(e))switch(s){case"Font":const i=this._params;if("error"in n){const t=n.error;(0,_util.warn)(`Error during font loading: ${t}`);this.commonObjs.resolve(e,t);break}let r=null;i.pdfBug&&globalThis.FontInspector?.enabled&&(r={registerFont(t,e){globalThis.FontInspector.fontAdded(t,e)}});const a=new _font_loader.FontFaceObject(n,{isEvalSupported:i.isEvalSupported,disableFontFace:i.disableFontFace,ignoreErrors:i.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:r});this.fontLoader.bind(a).catch((s=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!i.fontExtraProperties&&a.data&&(a.data=null);this.commonObjs.resolve(e,a)}));break;case"FontPath":case"Image":this.commonObjs.resolve(e,n);break;default:throw new Error(`Got unknown common object type ${s}`)}}));t.on("obj",(([t,e,s,n])=>{if(this.destroyed)return;const i=this.#n.get(e);if(!i.objs.has(t))switch(s){case"Image":i.objs.resolve(t,n);const e=8e6;if(n){let t;if(n.bitmap){const{bitmap:e,width:s,height:r}=n;t=s*r*4;i._bitmaps.add(e)}else t=n.data?.length||0;t>e&&(i.cleanupAfterRender=!0)}break;case"Pattern":i.objs.resolve(t,n);break;default:throw new Error(`Got unknown object type ${s}`)}}));t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})}));t.on("DocStats",(t=>{this.destroyed||(this.#s=Object.freeze({streamTypes:Object.freeze(t.streamTypes),fontTypes:Object.freeze(t.fontTypes)}))}));t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this));t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))));t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}_onUnsupportedFeature({featureId:t}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#i.get(e);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((t=>{if(this.destroyed)throw new Error("Transport destroyed");const s=new PDFPageProxy(e,t,this,this._params.ownerDocument,this._params.pdfBug);this.#n.set(e,s);return s}));this.#i.set(e,n);return n}getPageIndex(t){return"object"!=typeof t||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally((()=>{this.annotationStorage.resetModified()}))}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((t=>new _optional_content_config.OptionalContentConfig(t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#r||=this.messageHandler.sendWithPromise("GetMetadata",null).then((t=>({info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){await this.messageHandler.sendWithPromise("Cleanup",null);if(!this.destroyed){for(const t of this.#n.values()){if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`)}this.commonObjs.clear();t||this.fontLoader.clear();this.#r=null;this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null}}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}class PDFObjects{#a=Object.create(null);#o(t){const e=this.#a[t];return e||(this.#a[t]={capability:(0,_util.createPromiseCapability)(),data:null})}get(t,e=null){if(e){const s=this.#o(t);s.capability.promise.then((()=>e(s.data)));return null}const s=this.#a[t];if(!s?.capability.settled)throw new Error(`Requesting object that isn\'t resolved yet ${t}.`);return s.data}has(t){return this.#a[t]?.capability.settled||!1}resolve(t,e=null){const s=this.#o(t);s.data=e;s.capability.resolve()}clear(){this.#a=Object.create(null)}}class RenderTask{#l=null;constructor(t){this.#l=t;this.onContinue=null}get promise(){return this.#l.capability.promise}cancel(){this.#l.cancel()}get separateAnnots(){const{separateAnnots:t}=this.#l.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#l;return t.form||t.canvas&&e?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#c=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:n,annotationCanvasMap:i,operatorList:r,pageIndex:a,canvasFactory:o,useRequestAnimationFrame:l=!1,pdfBug:c=!1,pageColors:h=null}){this.callback=t;this.params=e;this.objs=s;this.commonObjs=n;this.annotationCanvasMap=i;this.operatorListIdx=null;this.operatorList=r;this._pageIndex=a;this.canvasFactory=o;this._pdfBug=c;this.pageColors=h;this.running=!1;this.graphicsReadyCallback=null;this.graphicsReady=!1;this._useRequestAnimationFrame=!0===l&&"undefined"!=typeof window;this.cancelled=!1;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#c.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#c.add(this._canvas)}if(this._pdfBug&&globalThis.StepperManager?.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}const{canvasContext:s,viewport:n,transform:i,imageLayer:r,background:a}=this.params;this.gfx=new _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,r,e,this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:a});this.operatorListIdx=0;this.graphicsReady=!0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1;this.cancelled=!0;this.gfx&&this.gfx.endDrawing();this._canvas&&InternalRenderTask.#c.delete(this._canvas);this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(this.graphicsReady){this.stepper&&this.stepper.updateOperatorList(this.operatorList);this.running||this._continue()}else this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0;this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){if(!this.cancelled){this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=!1;if(this.operatorList.lastChunk){this.gfx.endDrawing();this._canvas&&InternalRenderTask.#c.delete(this._canvas);this.callback()}}}}}const version="2.15.349";exports.version=version;const build="b8aa9c622";exports.build=build},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),i=s(8),r=s(10);class AnnotationStorage{constructor(){this._storage=new Map;this._modified=!1;this.onSetModified=null;this.onResetModified=null}getValue(t,e){const s=this._storage.get(t);return void 0===s?e:Object.assign(e,s)}getRawValue(t){return this._storage.get(t)}removeKey(t){this._storage.delete(t);0===this._storage.size&&this.resetModified()}setValue(t,e){const s=this._storage.get(t);let n=!1;if(void 0!==s){for(const[t,i]of Object.entries(e))if(s[t]!==i){n=!0;s[t]=i}}else{n=!0;this._storage.set(t,e)}n&&this.#h()}has(t){return this._storage.has(t)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}#h(){if(!this._modified){this._modified=!0;"function"==typeof this.onSetModified&&this.onSetModified()}}resetModified(){if(this._modified){this._modified=!1;"function"==typeof this.onResetModified&&this.onResetModified()}}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(0===this._storage.size)return null;const t=new Map;for(const[e,s]of this._storage){const n=s instanceof i.AnnotationEditor?s.serialize():s;n&&t.set(e,n)}return t}static getHash(t){if(!t)return"";const e=new r.MurmurHash3_64;for(const[s,n]of t)e.update(`${s}:${JSON.stringify(n)}`);return e.hexdigest()}}e.AnnotationStorage=AnnotationStorage;class PrintAnnotationStorage extends AnnotationStorage{#d=null;constructor(t){super();this.#d=structuredClone(t.serializable)}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#d}}e.PrintAnnotationStorage=PrintAnnotationStorage},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.AnnotationEditor=void 0;var n=s(9),i=s(1);class AnnotationEditor{#u=this.focusin.bind(this);#p=this.focusout.bind(this);#g=!1;#f=!1;#m=!1;#b=AnnotationEditor._zIndex++;static _colorManager=new n.ColorManager;static _zIndex=1;constructor(t){this.constructor===AnnotationEditor&&(0,i.unreachable)("Cannot initialize AnnotationEditor.");this.parent=t.parent;this.id=t.id;this.width=this.height=null;this.pageIndex=t.parent.pageIndex;this.name=t.name;this.div=null;const[e,s]=this.parent.viewportBaseDimensions;this.x=t.x/e;this.y=t.y/s;this.rotation=this.parent.viewport.rotation;this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#b}focusin(t){this.#g?this.#g=!1:this.parent.setSelected(this)}focusout(t){if(!this.isAttachedToDOM)return;if(!t.relatedTarget?.closest(`#${this.id}`)){t.preventDefault();this.parent.isMultipleSelection||this.commitOrRemove()}}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(t){const e=this.parent.div.getBoundingClientRect();this.startX=t.clientX-e.x;this.startY=t.clientY-e.y;t.dataTransfer.setData("text/plain",this.id);t.dataTransfer.effectAllowed="move"}setAt(t,e,s,n){const[i,r]=this.parent.viewportBaseDimensions;[s,n]=this.screenToPageTranslation(s,n);this.x=(t+s)/i;this.y=(e+n)/r;this.div.style.left=100*this.x+"%";this.div.style.top=100*this.y+"%"}translate(t,e){const[s,n]=this.parent.viewportBaseDimensions;[t,e]=this.screenToPageTranslation(t,e);this.x+=t/s;this.y+=e/n;this.div.style.left=100*this.x+"%";this.div.style.top=100*this.y+"%"}screenToPageTranslation(t,e){const{rotation:s}=this.parent.viewport;switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}setDims(t,e){const[s,n]=this.parent.viewportBaseDimensions;this.div.style.width=100*t/s+"%";this.div.style.height=100*e/n+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div");this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute("id",this.id);this.div.setAttribute("tabIndex",0);this.setInForeground();this.div.addEventListener("focusin",this.#u);this.div.addEventListener("focusout",this.#p);const[t,e]=this.getInitialTranslation();this.translate(t,e);(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]);return this.div}pointerdown(t){const e=n.KeyboardManager.platform.isMac;if(0!==t.button||t.ctrlKey&&e)t.preventDefault();else{t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this);this.#g=!0}}getRect(t,e){const[s,n]=this.parent.viewportBaseDimensions,[i,r]=this.parent.pageDimensions,a=i*t/s,o=r*e/n,l=this.x*i,c=this.y*r,h=this.width*i,d=this.height*r;switch(this.rotation){case 0:return[l+a,r-c-o-d,l+a+h,r-c-o];case 90:return[l+o,r-c+a,l+o+d,r-c+a+h];case 180:return[l-a-h,r-c+o,l-a,r-c+o+d];case 270:return[l-o-d,r-c-a-h,l-o,r-c-a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,n,i,r]=t,a=i-s,o=r-n;switch(this.rotation){case 0:return[s,e-r,a,o];case 90:return[s,e-n,o,a];case 180:return[i,e-n,a,o];case 270:return[i,e-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#u)}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(t,e){const s=new this.prototype.constructor({parent:e,id:e.getNextId()});s.rotation=t.rotation;const[n,i]=e.pageDimensions,[r,a,o,l]=s.getRectInCurrentCoords(t.rect,i);s.x=r/n;s.y=a/i;s.width=o/n;s.height=l/i;return s}remove(){this.div.removeEventListener("focusin",this.#u);this.div.removeEventListener("focusout",this.#p);this.isEmpty()||this.commit();this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(t,e){}disableEditing(){}enableEditing(){}getIdForTextLayer(){return this.id}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(t){this.#f=t;if(t){this.parent.setSelected(this);this.parent.setActiveEditor(this)}else this.parent.setActiveEditor(null)}}e.AnnotationEditor=AnnotationEditor},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0;e.bindEvents=function bindEvents(t,e,s){for(const n of s)e.addEventListener(n,t[n].bind(t))};e.opacityToHex=function opacityToHex(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")};var n=s(1),i=s(4);class IdManager{#_=0;getId(){return`${n.AnnotationEditorPrefix}${this.#_++}`}}class CommandManager{#A=[];#y=!1;#v;#S=-1;constructor(t=128){this.#v=t}add({cmd:t,undo:e,mustExec:s,type:n=NaN,overwriteIfSameType:i=!1,keepUndo:r=!1}){s&&t();if(this.#y)return;const a={cmd:t,undo:e,type:n};if(-1===this.#S){this.#A.length>0&&(this.#A.length=0);this.#S=0;this.#A.push(a);return}if(i&&this.#A[this.#S].type===n){r&&(a.undo=this.#A[this.#S].undo);this.#A[this.#S]=a;return}const o=this.#S+1;if(o===this.#v)this.#A.splice(0,1);else{this.#S=o;o<this.#A.length&&this.#A.splice(o)}this.#A.push(a)}undo(){if(-1!==this.#S){this.#y=!0;this.#A[this.#S].undo();this.#y=!1;this.#S-=1}}redo(){if(this.#S<this.#A.length-1){this.#S+=1;this.#y=!0;this.#A[this.#S].cmd();this.#y=!1}}hasSomethingToUndo(){return-1!==this.#S}hasSomethingToRedo(){return this.#S<this.#A.length-1}destroy(){this.#A=null}}e.CommandManager=CommandManager;class KeyboardManager{constructor(t){this.buffer=[];this.callbacks=new Map;this.allKeys=new Set;const e=KeyboardManager.platform.isMac;for(const[s,n]of t)for(const t of s){const s=t.startsWith("mac+");if(e&&s){this.callbacks.set(t.slice(4),n);this.allKeys.add(t.split("+").at(-1))}else if(!e&&!s){this.callbacks.set(t,n);this.allKeys.add(t.split("+").at(-1))}}}static get platform(){const t="undefined"!=typeof navigator?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}#x(t){t.altKey&&this.buffer.push("alt");t.ctrlKey&&this.buffer.push("ctrl");t.metaKey&&this.buffer.push("meta");t.shiftKey&&this.buffer.push("shift");this.buffer.push(t.key);const e=this.buffer.join("+");this.buffer.length=0;return e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#x(e));if(s){s.bind(t)();e.stopPropagation();e.preventDefault()}}}e.KeyboardManager=KeyboardManager;class ClipboardManager{#E=null;copy(t){if(t){Array.isArray(t)?this.#E=t.map((t=>t.serialize())):this.#E=[t.serialize()];this.#E=this.#E.filter((t=>!!t));0===this.#E.length&&(this.#E=null)}}paste(){return this.#E}isEmpty(){return null===this.#E}destroy(){this.#E=null}}class ColorManager{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);(0,i.getColorValues)(t);return(0,n.shadow)(this,"_colors",t)}convert(t){const e=(0,i.getRGB)(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[t,s]of this._colors)if(s.every(((t,s)=>t===e[s])))return ColorManager._colorsMapping.get(t);return e}getHexCode(t){const e=this._colors.get(t);return e?n.Util.makeHexColor(...e):t}}e.ColorManager=ColorManager;class AnnotationEditorUIManager{#C=null;#T=new Map;#P=new Map;#w=new ClipboardManager;#k=new CommandManager;#F=0;#M=null;#R=null;#D=new IdManager;#I=!1;#O=n.AnnotationEditorType.NONE;#L=new Set;#N=this.keydown.bind(this);#B=this.onEditingAction.bind(this);#j=this.onPageChanging.bind(this);#U=this.onTextLayerRendered.bind(this);#q={isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#W=null;static _keyboardManager=new KeyboardManager([[["ctrl+a","mac+meta+a"],AnnotationEditorUIManager.prototype.selectAll],[["ctrl+c","mac+meta+c"],AnnotationEditorUIManager.prototype.copy],[["ctrl+v","mac+meta+v"],AnnotationEditorUIManager.prototype.paste],[["ctrl+x","mac+meta+x"],AnnotationEditorUIManager.prototype.cut],[["ctrl+z","mac+meta+z"],AnnotationEditorUIManager.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],AnnotationEditorUIManager.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],AnnotationEditorUIManager.prototype.delete],[["Escape","mac+Escape"],AnnotationEditorUIManager.prototype.unselectAll]]);constructor(t,e){this.#W=t;this.#R=e;this.#R._on("editingaction",this.#B);this.#R._on("pagechanging",this.#j);this.#R._on("textlayerrendered",this.#U)}destroy(){this.#z();this.#R._off("editingaction",this.#B);this.#R._off("pagechanging",this.#j);this.#R._off("textlayerrendered",this.#U);for(const t of this.#P.values())t.destroy();this.#P.clear();this.#T.clear();this.#C=null;this.#L.clear();this.#w.destroy();this.#k.destroy()}onPageChanging({pageNumber:t}){this.#F=t-1}onTextLayerRendered({pageNumber:t}){const e=t-1;this.#P.get(e)?.onTextLayerRendered()}focusMainContainer(){this.#W.focus()}#H(){this.#W.addEventListener("keydown",this.#N)}#z(){this.#W.removeEventListener("keydown",this.#N)}keydown(t){this.getActive()?.shouldGetKeyboardEvents()||AnnotationEditorUIManager._keyboardManager.exec(this,t)}onEditingAction(t){["undo","redo","cut","copy","paste","delete","selectAll"].includes(t.name)&&this[t.name]()}#G(t){Object.entries(t).some((([t,e])=>this.#q[t]!==e))&&this.#R.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#q,t)})}#V(t){this.#R.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){if(t){this.#H();this.#G({isEditing:this.#O!==n.AnnotationEditorType.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#k.hasSomethingToUndo(),hasSomethingToRedo:this.#k.hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:this.#w.isEmpty()})}else{this.#z();this.#G({isEditing:!1})}}registerEditorTypes(t){this.#M=t;for(const t of this.#M)this.#V(t.defaultPropertiesToUpdate)}getId(){return this.#D.getId()}addLayer(t){this.#P.set(t.pageIndex,t);this.#I?t.enable():t.disable()}removeLayer(t){this.#P.delete(t.pageIndex)}updateMode(t){this.#O=t;if(t===n.AnnotationEditorType.NONE){this.setEditingState(!1);this.#$()}else{this.setEditingState(!0);this.#Y();for(const e of this.#P.values())e.updateMode(t)}}updateToolbar(t){t!==this.#O&&this.#R.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){for(const s of this.#L)s.updateParams(t,e);for(const s of this.#M)s.updateDefaultParams(t,e)}#Y(){if(!this.#I){this.#I=!0;for(const t of this.#P.values())t.enable()}}#$(){this.unselectAll();if(this.#I){this.#I=!1;for(const t of this.#P.values())t.disable()}}getEditors(t){const e=[];for(const s of this.#T.values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return this.#T.get(t)}addEditor(t){this.#T.set(t.id,t)}removeEditor(t){this.#T.delete(t.id);this.unselect(t)}#K(t){const e=this.#P.get(t.pageIndex);e?e.addOrRebuild(t):this.addEditor(t)}setActiveEditor(t){if(this.#C!==t){this.#C=t;t&&this.#V(t.propertiesToUpdate)}}toggleSelected(t){if(this.#L.has(t)){this.#L.delete(t);t.unselect();this.#G({hasSelectedEditor:this.hasSelection})}else{this.#L.add(t);t.select();this.#V(t.propertiesToUpdate);this.#G({hasSelectedEditor:!0})}}setSelected(t){for(const e of this.#L)e!==t&&e.unselect();this.#L.clear();this.#L.add(t);t.select();this.#V(t.propertiesToUpdate);this.#G({hasSelectedEditor:!0})}isSelected(t){return this.#L.has(t)}unselect(t){t.unselect();this.#L.delete(t);this.#G({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#L.size}undo(){this.#k.undo();this.#G({hasSomethingToUndo:this.#k.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()})}redo(){this.#k.redo();this.#G({hasSomethingToUndo:!0,hasSomethingToRedo:this.#k.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#k.add(t);this.#G({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}#X(){if(0===this.#T.size)return!0;if(1===this.#T.size)for(const t of this.#T.values())return t.isEmpty();return!1}delete(){this.#C&&this.#C.commitOrRemove();if(!this.hasSelection)return;const t=[...this.#L];this.addCommands({cmd:()=>{for(const e of t)e.remove()},undo:()=>{for(const e of t)this.#K(e)},mustExec:!0})}copy(){this.#C&&this.#C.commitOrRemove();if(this.hasSelection){const t=[];for(const e of this.#L)e.isEmpty()||t.push(e);if(0===t.length)return;this.#w.copy(t);this.#G({hasEmptyClipboard:!1})}}cut(){this.copy();this.delete()}paste(){if(this.#w.isEmpty())return;this.unselectAll();const t=this.#P.get(this.#F),e=this.#w.paste().map((e=>t.deserialize(e)));this.addCommands({cmd:()=>{for(const t of e)this.#K(t);this.#J(e)},undo:()=>{for(const t of e)t.remove()},mustExec:!0})}#J(t){this.#L.clear();for(const e of t)if(!e.isEmpty()){this.#L.add(e);e.select()}this.#G({hasSelectedEditor:!0})}selectAll(){for(const t of this.#L)t.commit();this.#J(this.#T.values())}unselectAll(){if(this.#C)this.#C.commitOrRemove();else if(0!==this.#J.size){for(const t of this.#L)t.unselect();this.#L.clear();this.#G({hasSelectedEditor:!1})}}isActive(t){return this.#C===t}getActive(){return this.#C}getMode(){return this.#O}}e.AnnotationEditorUIManager=AnnotationEditorUIManager},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,r=4294901760,a=65535;e.MurmurHash3_64=class MurmurHash3_64{constructor(t){this.h1=t?4294967295&t:i;this.h2=t?4294967295&t:i}update(t){let e,s;if("string"==typeof t){e=new Uint8Array(2*t.length);s=0;for(let n=0,i=t.length;n<i;n++){const i=t.charCodeAt(n);if(i<=255)e[s++]=i;else{e[s++]=i>>>8;e[s++]=255&i}}}else{if(!(0,n.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=t.slice();s=e.byteLength}const i=s>>2,o=s-4*i,l=new Uint32Array(e.buffer,0,i);let c=0,h=0,d=this.h1,u=this.h2;const p=3432918353,g=461845907,f=11601,m=13715;for(let t=0;t<i;t++)if(1&t){c=l[t];c=c*p&r|c*f&a;c=c<<15|c>>>17;c=c*g&r|c*m&a;d^=c;d=d<<13|d>>>19;d=5*d+3864292196}else{h=l[t];h=h*p&r|h*f&a;h=h<<15|h>>>17;h=h*g&r|h*m&a;u^=h;u=u<<13|u>>>19;u=5*u+3864292196}c=0;switch(o){case 3:c^=e[4*i+2]<<16;case 2:c^=e[4*i+1]<<8;case 1:c^=e[4*i];c=c*p&r|c*f&a;c=c<<15|c>>>17;c=c*g&r|c*m&a;1&i?d^=c:u^=c}this.h1=d;this.h2=u}hexdigest(){let t=this.h1,e=this.h2;t^=e>>>1;t=3981806797*t&r|36045*t&a;e=4283543511*e&r|(2950163797*(e<<16|t>>>16)&r)>>>16;t^=e>>>1;t=444984403*t&r|60499*t&a;e=3301882366*e&r|(3120437893*(e<<16|t>>>16)&r)>>>16;t^=e>>>1;const s=(t>>>0).toString(16),n=(e>>>0).toString(16);return s.padStart(8,"0")+n.padStart(8,"0")}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class BaseFontLoader{constructor({docId:t,onUnsupportedFeature:e,ownerDocument:s=globalThis.document,styleElement:i=null}){this.constructor===BaseFontLoader&&(0,n.unreachable)("Cannot initialize BaseFontLoader.");this.docId=t;this._onUnsupportedFeature=e;this._document=s;this.nativeFontFaces=[];this.styleElement=null}addNativeFontFace(t){this.nativeFontFaces.push(t);this._document.fonts.add(t)}insertRule(t){let e=this.styleElement;if(!e){e=this.styleElement=this._document.createElement("style");e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`;this._document.documentElement.getElementsByTagName("head")[0].append(e)}const s=e.sheet;s.insertRule(t,s.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.length=0;if(this.styleElement){this.styleElement.remove();this.styleElement=null}}async bind(t){if(t.attached||t.missingFile)return;t.attached=!0;if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(s){this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative});(0,n.warn)(`Failed to load font \'${e.family}\': \'${s}\'.`);t.disableFontFace=!0;throw s}}return}const e=t.createFontFaceRule();if(e){this.insertRule(e);if(this.isSyncFontLoadingSupported)return;await new Promise((s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent([e],[t],n)}))}}_queueLoadingCallback(t){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return(0,n.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(t,e,s){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let i;e.FontLoader=i;e.FontLoader=i=class GenericFontLoader extends BaseFontLoader{constructor(t){super(t);this.loadingContext={requests:[],nextRequestId:0};this.loadTestFontId=0}get isSyncFontLoadingSupported(){let t=!1;if("undefined"==typeof navigator)t=!0;else{/Mozilla\\/5.0.*?rv:(\\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14&&(t=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const e=this.loadingContext,s={id:"pdfjs-font-loading-"+e.nextRequestId++,done:!1,complete:function completeRequest(){(0,n.assert)(!s.done,"completeRequest() cannot be called twice.");s.done=!0;for(;e.requests.length>0&&e.requests[0].done;){const t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};e.requests.push(s);return s}get _loadTestFont(){return(0,n.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e,s){function int32(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function spliceString(t,e,s,n){return t.substring(0,e)+n+t.substring(e+s)}let i,r;const a=this._document.createElement("canvas");a.width=1;a.height=1;const o=a.getContext("2d");let l=0;const c=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=spliceString(h,976,c.length,c);const d=1482184792;let u=int32(h,16);for(i=0,r=c.length-3;i<r;i+=4)u=u-d+int32(c,i)|0;i<c.length&&(u=u-d+int32(c+"XXX",i)|0);h=spliceString(h,16,4,(0,n.string32)(u));const p=`@font-face {font-family:"${c}";src:${`url(data:font/opentype;base64,${btoa(h)});`}}`;this.insertRule(p);const g=[];for(const t of e)g.push(t.loadedName);g.push(c);const f=this._document.createElement("div");f.style.visibility="hidden";f.style.width=f.style.height="10px";f.style.position="absolute";f.style.top=f.style.left="0px";for(const t of g){const e=this._document.createElement("span");e.textContent="Hi";e.style.fontFamily=t;f.append(e)}this._document.body.append(f);!function isFontReady(t,e){l++;if(l>30){(0,n.warn)("Load test font never loaded.");e();return}o.font="30px "+t;o.fillText(".",0,20);o.getImageData(0,0,1,1).data[3]>0?e():setTimeout(isFontReady.bind(null,t,e))}(c,(()=>{f.remove();s.complete()}))}};e.FontFaceObject=class FontFaceObject{constructor(t,{isEvalSupported:e=!0,disableFontFace:s=!1,ignoreErrors:n=!1,onUnsupportedFeature:i,fontRegistry:r=null}){this.compiledGlyphs=Object.create(null);for(const e in t)this[e]=t[e];this.isEvalSupported=!1!==e;this.disableFontFace=!0===s;this.ignoreErrors=!0===n;this._onUnsupportedFeature=i;this.fontRegistry=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`);t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});this.fontRegistry&&this.fontRegistry.registerFont(this);return t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=(0,n.bytesToString)(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let s;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`);s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else s=`@font-face {font-family:"${this.loadedName}";src:${e}}`;this.fontRegistry&&this.fontRegistry.registerFont(this,e);return s}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let s;try{s=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors)throw t;this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath});(0,n.warn)(`getPathGenerator - ignoring character: "${t}".`);return this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const t=[];for(const e of s){const s=void 0!==e.args?e.args.join(","):"";t.push("c.",e.cmd,"(",s,");\\n")}return this.compiledGlyphs[e]=new Function("c","size",t.join(""))}return this.compiledGlyphs[e]=function(t,e){for(const n of s){"scale"===n.cmd&&(n.args=[e,-e]);t[n.cmd].apply(t,n.args)}}}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.CanvasGraphics=void 0;var n=s(1),i=s(4),r=s(13),a=s(14),o=s(3);const l=4096,c=16;function addContextCurrentTransform(t){t._transformStack&&(t._transformStack=[]);if(!t.mozCurrentTransform){t._originalSave=t.save;t._originalRestore=t.restore;t._originalRotate=t.rotate;t._originalScale=t.scale;t._originalTranslate=t.translate;t._originalTransform=t.transform;t._originalSetTransform=t.setTransform;t._originalResetTransform=t.resetTransform;t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0];t._transformStack=[];try{const e=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"lineWidth");t._setLineWidth=e.set;t._getLineWidth=e.get;Object.defineProperty(t,"lineWidth",{set:function setLineWidth(t){this._setLineWidth(1.000001*t)},get:function getLineWidth(){return this._getLineWidth()}})}catch(t){}Object.defineProperty(t,"mozCurrentTransform",{get:function getCurrentTransform(){return this._transformMatrix}});Object.defineProperty(t,"mozCurrentTransformInverse",{get:function getCurrentTransformInverse(){const[t,e,s,n,i,r]=this._transformMatrix,a=t*n-e*s,o=e*s-t*n;return[n/a,e/o,s/o,t/a,(n*i-s*r)/o,(e*i-t*r)/a]}});t.save=function ctxSave(){const t=this._transformMatrix;this._transformStack.push(t);this._transformMatrix=t.slice(0,6);this._originalSave()};t.restore=function ctxRestore(){0===this._transformStack.length&&(0,n.warn)("Tried to restore a ctx when the stack was already empty.");const t=this._transformStack.pop();if(t){this._transformMatrix=t;this._originalRestore()}};t.translate=function ctxTranslate(t,e){const s=this._transformMatrix;s[4]=s[0]*t+s[2]*e+s[4];s[5]=s[1]*t+s[3]*e+s[5];this._originalTranslate(t,e)};t.scale=function ctxScale(t,e){const s=this._transformMatrix;s[0]*=t;s[1]*=t;s[2]*=e;s[3]*=e;this._originalScale(t,e)};t.transform=function ctxTransform(e,s,n,i,r,a){const o=this._transformMatrix;this._transformMatrix=[o[0]*e+o[2]*s,o[1]*e+o[3]*s,o[0]*n+o[2]*i,o[1]*n+o[3]*i,o[0]*r+o[2]*a+o[4],o[1]*r+o[3]*a+o[5]];t._originalTransform(e,s,n,i,r,a)};t.setTransform=function ctxSetTransform(e,s,n,i,r,a){this._transformMatrix=[e,s,n,i,r,a];t._originalSetTransform(e,s,n,i,r,a)};t.resetTransform=function ctxResetTransform(){this._transformMatrix=[1,0,0,1,0,0];t._originalResetTransform()};t.rotate=function ctxRotate(t){const e=Math.cos(t),s=Math.sin(t),n=this._transformMatrix;this._transformMatrix=[n[0]*e+n[2]*s,n[1]*e+n[3]*s,n[0]*-s+n[2]*e,n[1]*-s+n[3]*e,n[4],n[5]];this._originalRotate(t)}}}class CachedCanvases{constructor(t){this.canvasFactory=t;this.cache=Object.create(null)}getCanvas(t,e,s,n){let i;if(void 0!==this.cache[t]){i=this.cache[t];this.canvasFactory.reset(i,e,s);i.context.setTransform(1,0,0,1,0,0)}else{i=this.canvasFactory.create(e,s);this.cache[t]=i}n&&addContextCurrentTransform(i.context);return i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e);delete this.cache[t]}}}function drawImageAtIntegerCoords(t,e,s,n,i,r,a,o,l,c){const[h,d,u,p,g,f]=t.mozCurrentTransform;if(0===d&&0===u){const m=a*h+g,b=Math.round(m),_=o*p+f,A=Math.round(_),y=(a+l)*h+g,v=Math.abs(Math.round(y)-b)||1,S=(o+c)*p+f,x=Math.abs(Math.round(S)-A)||1;t.setTransform(Math.sign(h),0,0,Math.sign(p),b,A);t.drawImage(e,s,n,i,r,0,0,v,x);t.setTransform(h,d,u,p,g,f);return[v,x]}if(0===h&&0===p){const m=o*u+g,b=Math.round(m),_=a*d+f,A=Math.round(_),y=(o+c)*u+g,v=Math.abs(Math.round(y)-b)||1,S=(a+l)*d+f,x=Math.abs(Math.round(S)-A)||1;t.setTransform(0,Math.sign(d),Math.sign(u),0,b,A);t.drawImage(e,s,n,i,r,0,0,x,v);t.setTransform(h,d,u,p,g,f);return[x,v]}t.drawImage(e,s,n,i,r,a,o,l,c);return[Math.hypot(h,d)*l,Math.hypot(u,p)*c]}class CanvasExtraState{constructor(t,e){this.alphaIsShape=!1;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=n.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=n.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=n.TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=!1;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps=null;this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);t.clipBox=this.clipBox.slice();return t}setCurrentPoint(t,e){this.x=t;this.y=e}updatePathMinMax(t,e,s){[e,s]=n.Util.applyTransform([e,s],t);this.minX=Math.min(this.minX,e);this.minY=Math.min(this.minY,s);this.maxX=Math.max(this.maxX,e);this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,e){const s=n.Util.applyTransform(e,t),i=n.Util.applyTransform(e.slice(2),t);this.minX=Math.min(this.minX,s[0],i[0]);this.minY=Math.min(this.minY,s[1],i[1]);this.maxX=Math.max(this.maxX,s[0],i[0]);this.maxY=Math.max(this.maxY,s[1],i[1])}updateScalingPathMinMax(t,e){n.Util.scaleMinMax(t,e);this.minX=Math.min(this.minX,e[0]);this.maxX=Math.max(this.maxX,e[1]);this.minY=Math.min(this.minY,e[2]);this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,s,i,r,a,o,l,c,h){const d=n.Util.bezierBoundingBox(e,s,i,r,a,o,l,c);if(h){h[0]=Math.min(h[0],d[0],d[2]);h[1]=Math.max(h[1],d[0],d[2]);h[2]=Math.min(h[2],d[1],d[3]);h[3]=Math.max(h[3],d[1],d[3])}else this.updateRectMinMax(t,d)}getPathBoundingBox(t=r.PathType.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===r.PathType.STROKE){e||(0,n.unreachable)("Stroke bounding box must include transform.");const t=n.Util.singularValueDecompose2dScale(e),i=t[0]*this.lineWidth/2,r=t[1]*this.lineWidth/2;s[0]-=i;s[1]-=r;s[2]+=i;s[3]+=r}return s}updateClipFromPath(){const t=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t;this.minX=1/0;this.minY=1/0;this.maxX=0;this.maxY=0}getClippedPathBoundingBox(t=r.PathType.FILL,e=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function putBinaryImageData(t,e,s=null){if("undefined"!=typeof ImageData&&e instanceof ImageData){t.putImageData(e,0,0);return}const i=e.height,r=e.width,a=i%c,o=(i-a)/c,l=0===a?o:o+1,h=t.createImageData(r,c);let d,u=0;const p=e.data,g=h.data;let f,m,b,_,A,y,v,S;if(s)switch(s.length){case 1:A=s[0];y=s[0];v=s[0];S=s[0];break;case 4:A=s[0];y=s[1];v=s[2];S=s[3]}if(e.kind===n.ImageKind.GRAYSCALE_1BPP){const e=p.byteLength,s=new Uint32Array(g.buffer,0,g.byteLength>>2),i=s.length,_=r+7>>3;let A=4294967295,y=n.FeatureTest.isLittleEndian?4278190080:255;S&&255===S[0]&&0===S[255]&&([A,y]=[y,A]);for(f=0;f<l;f++){b=f<o?c:a;d=0;for(m=0;m<b;m++){const t=e-u;let n=0;const i=t>_?r:8*t-7,a=-8&i;let o=0,l=0;for(;n<a;n+=8){l=p[u++];s[d++]=128&l?A:y;s[d++]=64&l?A:y;s[d++]=32&l?A:y;s[d++]=16&l?A:y;s[d++]=8&l?A:y;s[d++]=4&l?A:y;s[d++]=2&l?A:y;s[d++]=1&l?A:y}for(;n<i;n++){if(0===o){l=p[u++];o=128}s[d++]=l&o?A:y;o>>=1}}for(;d<i;)s[d++]=0;t.putImageData(h,0,f*c)}}else if(e.kind===n.ImageKind.RGBA_32BPP){const e=!!(A||y||v);m=0;_=r*c*4;for(f=0;f<o;f++){g.set(p.subarray(u,u+_));u+=_;if(e)for(let t=0;t<_;t+=4){A&&(g[t+0]=A[g[t+0]]);y&&(g[t+1]=y[g[t+1]]);v&&(g[t+2]=v[g[t+2]])}t.putImageData(h,0,m);m+=c}if(f<l){_=r*a*4;g.set(p.subarray(u,u+_));if(e)for(let t=0;t<_;t+=4){A&&(g[t+0]=A[g[t+0]]);y&&(g[t+1]=y[g[t+1]]);v&&(g[t+2]=v[g[t+2]])}t.putImageData(h,0,m)}}else{if(e.kind!==n.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);{const e=!!(A||y||v);b=c;_=r*b;for(f=0;f<l;f++){if(f>=o){b=a;_=r*b}d=0;for(m=_;m--;){g[d++]=p[u++];g[d++]=p[u++];g[d++]=p[u++];g[d++]=255}if(e)for(let t=0;t<d;t+=4){A&&(g[t+0]=A[g[t+0]]);y&&(g[t+1]=y[g[t+1]]);v&&(g[t+2]=v[g[t+2]])}t.putImageData(h,0,f*c)}}}}function putBinaryImageMask(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const s=e.height,n=e.width,i=s%c,r=(s-i)/c,o=0===i?r:r+1,l=t.createImageData(n,c);let h=0;const d=e.data,u=l.data;for(let e=0;e<o;e++){const s=e<r?c:i;({srcPos:h}=(0,a.applyMaskImageData)({src:d,srcPos:h,dest:u,width:n,height:s}));t.putImageData(l,0,e*c)}}function copyCtxState(t,e){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let n=0,i=s.length;n<i;n++){const i=s[n];void 0!==t[i]&&(e[i]=t[i])}if(void 0!==t.setLineDash){e.setLineDash(t.getLineDash());e.lineDashOffset=t.lineDashOffset}}function resetCtxToDefault(t,e){t.strokeStyle=t.fillStyle=e||"#000000";t.fillRule="nonzero";t.globalAlpha=1;t.lineWidth=1;t.lineCap="butt";t.lineJoin="miter";t.miterLimit=10;t.globalCompositeOperation="source-over";t.font="10px sans-serif";if(void 0!==t.setLineDash){t.setLineDash([]);t.lineDashOffset=0}}function composeSMaskBackdrop(t,e,s,n){const i=t.length;for(let r=3;r<i;r+=4){const i=t[r];if(0===i){t[r-3]=e;t[r-2]=s;t[r-1]=n}else if(i<255){const a=255-i;t[r-3]=t[r-3]*i+e*a>>8;t[r-2]=t[r-2]*i+s*a>>8;t[r-1]=t[r-1]*i+n*a>>8}}}function composeSMaskAlpha(t,e,s){const n=t.length;for(let i=3;i<n;i+=4){const n=s?s[t[i]]:t[i];e[i]=e[i]*n*.00392156862745098|0}}function composeSMaskLuminosity(t,e,s){const n=t.length;for(let i=3;i<n;i+=4){const n=77*t[i-3]+152*t[i-2]+28*t[i-1];e[i]=s?e[i]*s[n>>8]>>8:e[i]*n>>16}}function composeSMask(t,e,s,n){const i=n[0],r=n[1],a=n[2]-i,o=n[3]-r;if(0!==a&&0!==o){!function genericComposeSMask(t,e,s,n,i,r,a,o,l,c,h){const d=!!r,u=d?r[0]:0,p=d?r[1]:0,g=d?r[2]:0;let f;f="Luminosity"===i?composeSMaskLuminosity:composeSMaskAlpha;const m=Math.min(n,Math.ceil(1048576/s));for(let i=0;i<n;i+=m){const r=Math.min(m,n-i),b=t.getImageData(o-c,i+(l-h),s,r),_=e.getImageData(o,i+l,s,r);d&&composeSMaskBackdrop(b.data,u,p,g);f(b.data,_.data,a);e.putImageData(_,o,i+l)}}(e.context,s,a,o,e.subtype,e.backdrop,e.transferMap,i,r,e.offsetX,e.offsetY);t.save();t.globalAlpha=1;t.globalCompositeOperation="source-over";t.setTransform(1,0,0,1,0,0);t.drawImage(s.canvas,0,0);t.restore()}}function getImageSmoothingEnabled(t,e){const s=n.Util.singularValueDecompose2dScale(t);s[0]=Math.fround(s[0]);s[1]=Math.fround(s[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==e?e:s[0]<=r||s[1]<=r}const h=["butt","round","square"],d=["miter","round","bevel"],u={},p={};class CanvasGraphics{constructor(t,e,s,n,i,r,a,o){this.ctx=t;this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.res=null;this.xobjs=null;this.commonObjs=e;this.objs=s;this.canvasFactory=n;this.imageLayer=i;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=!0;this.markedContentStack=[];this.optionalContentConfig=r;this.cachedCanvases=new CachedCanvases(this.canvasFactory);this.cachedPatterns=new Map;this.annotationCanvasMap=a;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this.backgroundColor=o?.background||null;this.foregroundColor=o?.foreground||null;t&&addContextCurrentTransform(t);this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:n=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=n||"#ffffff";this.ctx.save();if(this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const t=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const e=this.backgroundColor=this.ctx.fillStyle;let s=!0,n=o;this.ctx.fillStyle=o;n=this.ctx.fillStyle;s="string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n);if("#000000"===t&&"#ffffff"===e||t===e||!s)this.foregroundColor=this.backgroundColor=null;else{const[s,r,a]=(0,i.getRGB)(n),newComp=t=>(t/=255)<=.03928?t/12.92:((t+.055)/1.055)**2.4,o=Math.round(.2126*newComp(s)+.7152*newComp(r)+.0722*newComp(a));this.selectColor=(s,n,i)=>{const r=.2126*newComp(s)+.7152*newComp(n)+.0722*newComp(i);return Math.round(r)===o?e:t}}}this.ctx.fillStyle=this.backgroundColor||o;this.ctx.fillRect(0,0,r,a);this.ctx.restore();if(s){const t=this.cachedCanvases.getCanvas("transparent",r,a,!0);this.compositeCtx=this.ctx;this.transparentCanvas=t.canvas;this.ctx=t.context;this.ctx.save();this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save();resetCtxToDefault(this.ctx,this.foregroundColor);if(t){this.ctx.transform.apply(this.ctx,t);this.outputScaleX=t[0];this.outputScaleY=t[0]}this.ctx.transform.apply(this.ctx,e.transform);this.viewportScale=e.scale;this.baseTransform=this.ctx.mozCurrentTransform.slice();this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(t,e,s,i){const r=t.argsArray,a=t.fnArray;let o=e||0;const l=r.length;if(l===o)return o;const c=l-o>10&&"function"==typeof s,h=c?Date.now()+15:0;let d=0;const u=this.commonObjs,p=this.objs;let g;for(;;){if(void 0!==i&&o===i.nextBreakPoint){i.breakIt(o,s);return o}g=a[o];if(g!==n.OPS.dependency)this[g].apply(this,r[o]);else for(const t of r[o]){const e=t.startsWith("g_")?u:p;if(!e.has(t)){e.get(t,s);return o}}o++;if(o===l)return o;if(c&&++d>10){if(Date.now()>h){s();return o}d=0}}}#Q(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null}}endDrawing(){this.#Q();this.cachedCanvases.clear();this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear();this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(t,e){const s=t.width,n=t.height;let i,r,a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=s,c=n,h="prescale1";for(;a>2&&l>1||o>2&&c>1;){let e=l,s=c;if(a>2&&l>1){e=Math.ceil(l/2);a/=l/e}if(o>2&&c>1){s=Math.ceil(c/2);o/=c/s}i=this.cachedCanvases.getCanvas(h,e,s,!1);r=i.context;r.clearRect(0,0,e,s);r.drawImage(t,0,0,l,c,0,0,e,s);t=i.canvas;l=e;c=s;h="prescale1"===h?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:i}=t,a=this.current.fillColor,o=this.current.patternFill,l=e.mozCurrentTransform;let c,h,d,u;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer,s=l.slice(0,4);h=JSON.stringify(o?s:[s,a]);c=this._cachedBitmapsMap.get(e);if(!c){c=new Map;this._cachedBitmapsMap.set(e,c)}const n=c.get(h);if(n&&!o){return{canvas:n,offsetX:Math.round(Math.min(l[0],l[2])+l[4]),offsetY:Math.round(Math.min(l[1],l[3])+l[5])}}d=n}if(!d){u=this.cachedCanvases.getCanvas("maskCanvas",s,i,!1);putBinaryImageMask(u.context,t)}let p=n.Util.transform(l,[1/s,0,0,-1/i,0,0]);p=n.Util.transform(p,[1,0,0,1,0,-i]);const g=n.Util.applyTransform([0,0],p),f=n.Util.applyTransform([s,i],p),m=n.Util.normalizeRect([g[0],g[1],f[0],f[1]]),b=Math.round(m[2]-m[0])||1,_=Math.round(m[3]-m[1])||1,A=this.cachedCanvases.getCanvas("fillCanvas",b,_,!0),y=A.context,v=Math.min(g[0],f[0]),S=Math.min(g[1],f[1]);y.translate(-v,-S);y.transform.apply(y,p);if(!d){d=this._scaleImage(u.canvas,y.mozCurrentTransformInverse);d=d.img;c&&o&&c.set(h,d)}y.imageSmoothingEnabled=getImageSmoothingEnabled(y.mozCurrentTransform,t.interpolate);drawImageAtIntegerCoords(y,d,0,0,d.width,d.height,0,0,s,i);y.globalCompositeOperation="source-in";const x=n.Util.transform(y.mozCurrentTransformInverse,[1,0,0,1,-v,-S]);y.fillStyle=o?a.getPattern(e,this,x,r.PathType.FILL):a;y.fillRect(0,0,s,i);if(c&&!o){this.cachedCanvases.delete("fillCanvas");c.set(h,A.canvas)}return{canvas:A.canvas,offsetX:Math.round(v),offsetY:Math.round(S)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking=null);this.current.lineWidth=t;this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=h[t]}setLineJoin(t){this.ctx.lineJoin=d[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;if(void 0!==s.setLineDash){s.setLineDash(t);s.lineDashOffset=e}}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let e=0,s=t.length;e<s;e++){const s=t[e],n=s[0],i=s[1];switch(n){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=s[1];break;case"ca":this.current.fillAlpha=s[1];this.ctx.globalAlpha=s[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,t,e,!0);this.suspendedCtx=this.ctx;this.ctx=n.context;const i=this.ctx;i.setTransform.apply(i,this.suspendedCtx.mozCurrentTransform);copyCtxState(this.suspendedCtx,i);!function mirrorContextOperations(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save;t.__originalRestore=t.restore;t.__originalRotate=t.rotate;t.__originalScale=t.scale;t.__originalTranslate=t.translate;t.__originalTransform=t.transform;t.__originalSetTransform=t.setTransform;t.__originalResetTransform=t.resetTransform;t.__originalClip=t.clip;t.__originalMoveTo=t.moveTo;t.__originalLineTo=t.lineTo;t.__originalBezierCurveTo=t.bezierCurveTo;t.__originalRect=t.rect;t.__originalClosePath=t.closePath;t.__originalBeginPath=t.beginPath;t._removeMirroring=()=>{t.save=t.__originalSave;t.restore=t.__originalRestore;t.rotate=t.__originalRotate;t.scale=t.__originalScale;t.translate=t.__originalTranslate;t.transform=t.__originalTransform;t.setTransform=t.__originalSetTransform;t.resetTransform=t.__originalResetTransform;t.clip=t.__originalClip;t.moveTo=t.__originalMoveTo;t.lineTo=t.__originalLineTo;t.bezierCurveTo=t.__originalBezierCurveTo;t.rect=t.__originalRect;t.closePath=t.__originalClosePath;t.beginPath=t.__originalBeginPath;delete t._removeMirroring};t.save=function ctxSave(){e.save();this.__originalSave()};t.restore=function ctxRestore(){e.restore();this.__originalRestore()};t.translate=function ctxTranslate(t,s){e.translate(t,s);this.__originalTranslate(t,s)};t.scale=function ctxScale(t,s){e.scale(t,s);this.__originalScale(t,s)};t.transform=function ctxTransform(t,s,n,i,r,a){e.transform(t,s,n,i,r,a);this.__originalTransform(t,s,n,i,r,a)};t.setTransform=function ctxSetTransform(t,s,n,i,r,a){e.setTransform(t,s,n,i,r,a);this.__originalSetTransform(t,s,n,i,r,a)};t.resetTransform=function ctxResetTransform(){e.resetTransform();this.__originalResetTransform()};t.rotate=function ctxRotate(t){e.rotate(t);this.__originalRotate(t)};t.clip=function ctxRotate(t){e.clip(t);this.__originalClip(t)};t.moveTo=function(t,s){e.moveTo(t,s);this.__originalMoveTo(t,s)};t.lineTo=function(t,s){e.lineTo(t,s);this.__originalLineTo(t,s)};t.bezierCurveTo=function(t,s,n,i,r,a){e.bezierCurveTo(t,s,n,i,r,a);this.__originalBezierCurveTo(t,s,n,i,r,a)};t.rect=function(t,s,n,i){e.rect(t,s,n,i);this.__originalRect(t,s,n,i)};t.closePath=function(){e.closePath();this.__originalClosePath()};t.beginPath=function(){e.beginPath();this.__originalBeginPath()}}(i,this.suspendedCtx);this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;if(t){t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1]);t[2]=Math.ceil(t[2]);t[3]=Math.ceil(t[3])}else t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask;composeSMask(this.suspendedCtx,e,this.ctx,t);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore()}save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save()}else this.ctx.save();const t=this.current;this.stateStack.push(t);this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode();if(0!==this.stateStack.length){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx)}else this.ctx.restore();this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}}transform(t,e,s,n,i,r){this.ctx.transform(t,e,s,n,i,r);this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){const i=this.ctx,r=this.current;let a,o,l=r.x,c=r.y;const h=i.mozCurrentTransform,d=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],u=d?s.slice(0):null;for(let s=0,p=0,g=t.length;s<g;s++)switch(0|t[s]){case n.OPS.rectangle:l=e[p++];c=e[p++];const t=e[p++],s=e[p++],g=l+t,f=c+s;i.moveTo(l,c);if(0===t||0===s)i.lineTo(g,f);else{i.lineTo(g,c);i.lineTo(g,f);i.lineTo(l,f)}d||r.updateRectMinMax(h,[l,c,g,f]);i.closePath();break;case n.OPS.moveTo:l=e[p++];c=e[p++];i.moveTo(l,c);d||r.updatePathMinMax(h,l,c);break;case n.OPS.lineTo:l=e[p++];c=e[p++];i.lineTo(l,c);d||r.updatePathMinMax(h,l,c);break;case n.OPS.curveTo:a=l;o=c;l=e[p+4];c=e[p+5];i.bezierCurveTo(e[p],e[p+1],e[p+2],e[p+3],l,c);r.updateCurvePathMinMax(h,a,o,e[p],e[p+1],e[p+2],e[p+3],l,c,u);p+=6;break;case n.OPS.curveTo2:a=l;o=c;i.bezierCurveTo(l,c,e[p],e[p+1],e[p+2],e[p+3]);r.updateCurvePathMinMax(h,a,o,l,c,e[p],e[p+1],e[p+2],e[p+3],u);l=e[p+2];c=e[p+3];p+=4;break;case n.OPS.curveTo3:a=l;o=c;l=e[p+2];c=e[p+3];i.bezierCurveTo(e[p],e[p+1],l,c,l,c);r.updateCurvePathMinMax(h,a,o,e[p],e[p+1],l,c,l,c,u);p+=4;break;case n.OPS.closePath:i.closePath()}d&&r.updateScalingPathMinMax(h,u);r.setCurrentPoint(l,c)}closePath(){this.ctx.closePath()}stroke(t){t=void 0===t||t;const e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha;if(this.contentVisible)if("object"==typeof s&&s?.getPattern){e.save();e.strokeStyle=s.getPattern(e,this,e.mozCurrentTransformInverse,r.PathType.STROKE);this.rescaleAndStroke(!1);e.restore()}else this.rescaleAndStroke(!0);t&&this.consumePath(this.current.getClippedPathBoundingBox());e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath();this.stroke()}fill(t){t=void 0===t||t;const e=this.ctx,s=this.current.fillColor;let n=!1;if(this.current.patternFill){e.save();e.fillStyle=s.getPattern(e,this,e.mozCurrentTransformInverse,r.PathType.FILL);n=!0}const i=this.current.getClippedPathBoundingBox();if(this.contentVisible&&null!==i)if(this.pendingEOFill){e.fill("evenodd");this.pendingEOFill=!1}else e.fill();n&&e.restore();t&&this.consumePath(i)}eoFill(){this.pendingEOFill=!0;this.fill()}fillStroke(){this.fill(!1);this.stroke(!1);this.consumePath()}eoFillStroke(){this.pendingEOFill=!0;this.fillStroke()}closeFillStroke(){this.closePath();this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0;this.closePath();this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=u}eoClip(){this.pendingClip=p}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save();e.beginPath();for(const s of t){e.setTransform.apply(e,s.transform);e.translate(s.x,s.y);s.addToPath(e,s.fontSize)}e.restore();e.clip();e.beginPath();delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can\'t find font for ${t}`);i.fontMatrix=s.fontMatrix||n.FONT_IDENTITY_MATRIX;0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||(0,n.warn)("Invalid font matrix for font "+t);if(e<0){e=-e;i.fontDirection=-1}else i.fontDirection=1;this.current.font=s;this.current.fontSize=e;if(s.isType3Font)return;const r=s.loadedName||"sans-serif";let a="normal";s.black?a="900":s.bold&&(a="bold");const o=s.italic?"italic":"normal",l=`"${r}", ${s.fallbackName}`;let c=e;e<16?c=16:e>100&&(c=100);this.current.fontSizeScale=e/c;this.ctx.font=`${o} ${a} ${c}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t;this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e);this.moveText(t,e)}setTextMatrix(t,e,s,n,i,r){this.current.textMatrix=[t,e,s,n,i,r];this.current.textMatrixScale=Math.hypot(t,e);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,i){const r=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,h=l&n.TextRenderingMode.FILL_STROKE_MASK,d=!!(l&n.TextRenderingMode.ADD_TO_PATH_FLAG),u=a.patternFill&&!o.missingFile;let p;(o.disableFontFace||d||u)&&(p=o.getPathGenerator(this.commonObjs,t));if(o.disableFontFace||u){r.save();r.translate(e,s);r.beginPath();p(r,c);i&&r.setTransform.apply(r,i);h!==n.TextRenderingMode.FILL&&h!==n.TextRenderingMode.FILL_STROKE||r.fill();h!==n.TextRenderingMode.STROKE&&h!==n.TextRenderingMode.FILL_STROKE||r.stroke();r.restore()}else{h!==n.TextRenderingMode.FILL&&h!==n.TextRenderingMode.FILL_STROKE||r.fillText(t,e,s);h!==n.TextRenderingMode.STROKE&&h!==n.TextRenderingMode.FILL_STROKE||r.strokeText(t,e,s)}if(d){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:r.mozCurrentTransform,x:e,y:s,fontSize:c,addToPath:p})}}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);t.scale(1.5,1);t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let t=3;t<e.length;t+=4)if(e[t]>0&&e[t]<255){s=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(0===i)return;const a=this.ctx,o=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,d=e.textHScale*h,u=t.length,p=s.vertical,g=p?1:-1,f=s.defaultVMetrics,m=i*e.fontMatrix[0],b=e.textRenderingMode===n.TextRenderingMode.FILL&&!s.disableFontFace&&!e.patternFill;a.save();a.transform.apply(a,e.textMatrix);a.translate(e.x,e.y+e.textRise);h>0?a.scale(d,-1):a.scale(d,1);let _;if(e.patternFill){a.save();const t=e.fillColor.getPattern(a,this,a.mozCurrentTransformInverse,r.PathType.FILL);_=a.mozCurrentTransform;a.restore();a.fillStyle=t}let A=e.lineWidth;const y=e.textMatrixScale;if(0===y||0===A){const t=e.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;t!==n.TextRenderingMode.STROKE&&t!==n.TextRenderingMode.FILL_STROKE||(A=this.getSinglePixelWidth())}else A/=y;if(1!==o){a.scale(o,o);A/=o}a.lineWidth=A;let v,S=0;for(v=0;v<u;++v){const e=t[v];if("number"==typeof e){S+=g*e*i/1e3;continue}let n=!1;const r=(e.isSpace?c:0)+l,d=e.fontChar,u=e.accent;let A,y,x,E=e.width;if(p){const t=e.vmetric||f,s=-(e.vmetric?t[1]:.5*E)*m,n=t[2]*m;E=t?-t[0]:E;A=s/o;y=(S+n)/o}else{A=S/o;y=0}if(s.remeasure&&E>0){const t=1e3*a.measureText(d).width/i*o;if(E<t&&this.isFontSubpixelAAEnabled){const e=E/t;n=!0;a.save();a.scale(e,1);A/=e}else E!==t&&(A+=(E-t)/2e3*i/o)}if(this.contentVisible&&(e.isInFont||s.missingFile))if(b&&!u)a.fillText(d,A,y);else{this.paintChar(d,A,y,_);if(u){const t=A+i*u.offset.x/o,e=y-i*u.offset.y/o;this.paintChar(u.fontChar,t,e,_)}}x=p?E*m-r*h:E*m+r*h;S+=x;n&&a.restore()}p?e.y-=S:e.x+=S*d;a.restore();this.compose()}showType3Text(t){const e=this.ctx,s=this.current,i=s.font,r=s.fontSize,a=s.fontDirection,o=i.vertical?1:-1,l=s.charSpacing,c=s.wordSpacing,h=s.textHScale*a,d=s.fontMatrix||n.FONT_IDENTITY_MATRIX,u=t.length;let p,g,f,m;if(!(s.textRenderingMode===n.TextRenderingMode.INVISIBLE)&&0!==r){this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;e.save();e.transform.apply(e,s.textMatrix);e.translate(s.x,s.y);e.scale(h,a);for(p=0;p<u;++p){g=t[p];if("number"==typeof g){m=o*g*r/1e3;this.ctx.translate(m,0);s.x+=m*h;continue}const a=(g.isSpace?c:0)+l,u=i.charProcOperatorList[g.operatorListId];if(!u){(0,n.warn)(`Type3 character "${g.operatorListId}" is not available.`);continue}if(this.contentVisible){this.processingType3=g;this.save();e.scale(r,r);e.transform.apply(e,d);this.executeOperatorList(u);this.restore()}f=n.Util.applyTransform([g.width,0],d)[0]*r+a;e.translate(f,0);s.x+=f*h}e.restore();this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,n,i,r){this.ctx.rect(s,n,i-s,r-n);this.ctx.clip();this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const s=t[1],n=this.baseTransform||this.ctx.mozCurrentTransform.slice(),i={createCanvasGraphics:t=>new CanvasGraphics(t,this.commonObjs,this.objs,this.canvasFactory)};e=new r.TilingPattern(t,s,this.ctx,i,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=!0}setStrokeRGBColor(t,e,s){const i=this.selectColor?.(t,e,s)||n.Util.makeHexColor(t,e,s);this.ctx.strokeStyle=i;this.current.strokeColor=i}setFillRGBColor(t,e,s){const i=this.selectColor?.(t,e,s)||n.Util.makeHexColor(t,e,s);this.ctx.fillStyle=i;this.current.fillColor=i;this.current.patternFill=!1}_getPattern(t,e=null){let s;if(this.cachedPatterns.has(t))s=this.cachedPatterns.get(t);else{s=(0,r.getShadingPattern)(this.objs.get(t));this.cachedPatterns.set(t,s)}e&&(s.matrix=e);return s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,e.mozCurrentTransformInverse,r.PathType.SHADING);const i=e.mozCurrentTransformInverse;if(i){const t=e.canvas,s=t.width,r=t.height,a=n.Util.applyTransform([0,0],i),o=n.Util.applyTransform([0,r],i),l=n.Util.applyTransform([s,0],i),c=n.Util.applyTransform([s,r],i),h=Math.min(a[0],o[0],l[0],c[0]),d=Math.min(a[1],o[1],l[1],c[1]),u=Math.max(a[0],o[0],l[0],c[0]),p=Math.max(a[1],o[1],l[1],c[1]);this.ctx.fillRect(h,d,u-h,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox());this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible){this.save();this.baseTransformStack.push(this.baseTransform);Array.isArray(t)&&6===t.length&&this.transform.apply(this,t);this.baseTransform=this.ctx.mozCurrentTransform;if(e){const t=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],t,s);this.current.updateRectMinMax(this.ctx.mozCurrentTransform,e);this.clip();this.endPath()}}}paintFormXObjectEnd(){if(this.contentVisible){this.restore();this.baseTransform=this.baseTransformStack.pop()}}beginGroup(t){if(!this.contentVisible)return;this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null}const e=this.ctx;t.isolated||(0,n.info)("TODO: Support non-isolated groups.");t.knockout&&(0,n.warn)("Knockout groups not supported.");const s=e.mozCurrentTransform;t.matrix&&e.transform.apply(e,t.matrix);if(!t.bbox)throw new Error("Bounding box is required.");let i=n.Util.getAxialAlignedBoundingBox(t.bbox,e.mozCurrentTransform);const r=[0,0,e.canvas.width,e.canvas.height];i=n.Util.intersect(i,r)||[0,0,0,0];const a=Math.floor(i[0]),o=Math.floor(i[1]);let c=Math.max(Math.ceil(i[2])-a,1),h=Math.max(Math.ceil(i[3])-o,1),d=1,u=1;if(c>l){d=c/l;c=l}if(h>l){u=h/l;h=l}this.current.startNewPathAndClipBox([0,0,c,h]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(p,c,h,!0),f=g.context;f.scale(1/d,1/u);f.translate(-a,-o);f.transform.apply(f,s);if(t.smask)this.smaskStack.push({canvas:g.canvas,context:f,offsetX:a,offsetY:o,scaleX:d,scaleY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null});else{e.setTransform(1,0,0,1,0,0);e.translate(a,o);e.scale(d,u);e.save()}copyCtxState(e,f);this.ctx=f;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(e);this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();this.ctx=s;this.ctx.imageSmoothingEnabled=!1;if(t.smask){this.tempSMask=this.smaskStack.pop();this.restore()}else{this.ctx.restore();const t=this.ctx.mozCurrentTransform;this.restore();this.ctx.save();this.ctx.setTransform.apply(this.ctx,t);const s=n.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0);this.ctx.restore();this.compose(s)}}beginAnnotation(t,e,s,i,r){this.#Q();resetCtxToDefault(this.ctx,this.foregroundColor);this.ctx.save();this.save();this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform);if(Array.isArray(e)&&4===e.length){const i=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){(s=s.slice())[4]-=e[0];s[5]-=e[1];(e=e.slice())[0]=e[1]=0;e[2]=i;e[3]=a;const[r,o]=n.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:l}=this,c=Math.ceil(i*this.outputScaleX*l),h=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,h);const{canvas:d,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(t,d);this.annotationCanvas.savedCtx=this.ctx;this.ctx=u;addContextCurrentTransform(this.ctx);this.ctx.setTransform(r,0,0,-o,0,a*o);resetCtxToDefault(this.ctx,this.foregroundColor)}else{resetCtxToDefault(this.ctx,this.foregroundColor);this.ctx.rect(e[0],e[1],i,a);this.ctx.clip();this.endPath()}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.transform.apply(this,s);this.transform.apply(this,i)}endAnnotation(){if(this.annotationCanvas){this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas}}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const s=this.ctx,n=this.processingType3;if(n){void 0===n.compiled&&(n.compiled=function compileType3Glyph(t){const{width:e,height:s}=t;if(e>1e3||s>1e3)return null;const n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let r,a,l,c=new Uint8Array(i*(s+1));const h=e+7&-8;let d=new Uint8Array(h*s),u=0;for(const e of t.data){let t=128;for(;t>0;){d[u++]=e&t?0:255;t>>=1}}let p=0;u=0;if(0!==d[u]){c[0]=1;++p}for(a=1;a<e;a++){if(d[u]!==d[u+1]){c[a]=d[u]?2:1;++p}u++}if(0!==d[u]){c[a]=2;++p}for(r=1;r<s;r++){u=r*h;l=r*i;if(d[u-h]!==d[u]){c[l]=d[u]?1:8;++p}let t=(d[u]?4:0)+(d[u-h]?8:0);for(a=1;a<e;a++){t=(t>>2)+(d[u+1]?4:0)+(d[u-h+1]?8:0);if(n[t]){c[l+a]=n[t];++p}u++}if(d[u-h]!==d[u]){c[l+a]=d[u]?2:4;++p}if(p>1e3)return null}u=h*(s-1);l=r*i;if(0!==d[u]){c[l]=8;++p}for(a=1;a<e;a++){if(d[u]!==d[u+1]){c[l+a]=d[u]?4:8;++p}u++}if(0!==d[u]){c[l+a]=4;++p}if(p>1e3)return null;const g=new Int32Array([0,i,-1,0,-i,0,0,0,1]);let f,m,b;o.isNodeJS?m=[]:f=new Path2D;for(r=0;p&&r<=s;r++){let t=r*i;const s=t+e;for(;t<s&&!c[t];)t++;if(t===s)continue;f?f.moveTo(t%i,r):b=[t%i,r];const n=t;let a=c[t];do{const e=g[a];do{t+=e}while(!c[t]);const s=c[t];if(5!==s&&10!==s){a=s;c[t]=0}else{a=s&51*a>>4;c[t]&=a>>2|a<<2}f?f.lineTo(t%i,t/i|0):b.push(t%i,t/i|0);c[t]||--p}while(n!==t);f||m.push(b);--r}d=null;c=null;return function(t){t.save();t.scale(1/e,-1/s);t.translate(0,-s);if(f)t.fill(f);else{t.beginPath();for(const e of m){t.moveTo(e[0],e[1]);for(let s=2,n=e.length;s<n;s+=2)t.lineTo(e[s],e[s+1])}t.fill()}t.beginPath();t.restore()}}(t));if(n.compiled){n.compiled(s);return}}const i=this._createMaskCanvas(t),r=i.canvas;s.save();s.setTransform(1,0,0,1,0,0);s.drawImage(r,i.offsetX,i.offsetY);s.restore();this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,i=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const l=o.mozCurrentTransform;o.transform(e,s,i,r,0,0);const c=this._createMaskCanvas(t);o.setTransform(1,0,0,1,0,0);for(let t=0,h=a.length;t<h;t+=2){const h=n.Util.transform(l,[e,s,i,r,a[t],a[t+1]]),[d,u]=n.Util.applyTransform([0,0],h);o.drawImage(c.canvas,d,u)}o.restore();this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const i of t){const{data:t,width:a,height:o,transform:l}=i,c=this.cachedCanvases.getCanvas("maskCanvas",a,o,!1),h=c.context;h.save();putBinaryImageMask(h,this.getObject(t,i));h.globalCompositeOperation="source-in";h.fillStyle=n?s.getPattern(h,this,e.mozCurrentTransformInverse,r.PathType.FILL):s;h.fillRect(0,0,a,o);h.restore();e.save();e.transform.apply(e,l);e.scale(1,-1);drawImageAtIntegerCoords(e,c.canvas,0,0,a,o,0,-1,1,1);e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,n.warn)("Dependent image isn\'t ready yet")}paintImageXObjectRepeat(t,e,s,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){(0,n.warn)("Dependent image isn\'t ready yet");return}const a=r.width,o=r.height,l=[];for(let t=0,n=i.length;t<n;t+=2)l.push({transform:[e,0,0,s,i[t],i[t+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,n=this.ctx;this.save();n.scale(1/e,-1/s);let i;if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)i=t;else{const n=this.cachedCanvases.getCanvas("inlineImage",e,s,!1);putBinaryImageData(n.context,t,this.current.transferMaps);i=n.canvas}const r=this._scaleImage(i,n.mozCurrentTransformInverse);n.imageSmoothingEnabled=getImageSmoothingEnabled(n.mozCurrentTransform,t.interpolate);const[a,o]=drawImageAtIntegerCoords(n,r.img,0,0,r.paintWidth,r.paintHeight,0,-s,e,s);if(this.imageLayer){const e=this.getCanvasPosition(0,-s);this.imageLayer.appendImage({imgData:t,left:e[0],top:e[1],width:a,height:o})}this.compose();this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx,n=t.width,i=t.height,r=this.cachedCanvases.getCanvas("inlineImage",n,i,!1);putBinaryImageData(r.context,t,this.current.transferMaps);for(let a=0,o=e.length;a<o;a++){const o=e[a];s.save();s.transform.apply(s,o.transform);s.scale(1,-1);drawImageAtIntegerCoords(s,r.canvas,o.x,o.y,o.w,o.h,0,-1,1,1);if(this.imageLayer){const e=this.getCanvasPosition(o.x,o.y);this.imageLayer.appendImage({imgData:t,left:e[0],top:e[1],width:n,height:i})}s.restore()}this.compose()}paintSolidColorImageMask(){if(this.contentVisible){this.ctx.fillRect(0,0,1,1);this.compose()}}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0});this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath();this.pendingClip||this.compose(t);const s=this.ctx;if(this.pendingClip){e||(this.pendingClip===p?s.clip("evenodd"):s.clip());this.pendingClip=null}this.current.startNewPathAndClipBox(this.current.clipBox);s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=this.ctx.mozCurrentTransform;if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:t}=this.current,e=this.ctx.mozCurrentTransform;let s,n;if(0===e[1]&&0===e[2]){const i=Math.abs(e[0]),r=Math.abs(e[3]);if(0===t){s=1/i;n=1/r}else{const e=i*t,a=r*t;s=e<1?1/e:1;n=a<1?1/a:1}}else{const i=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[1]),a=Math.hypot(e[2],e[3]);if(0===t){s=a/i;n=r/i}else{const e=t*i;s=a>e?a/e:1;n=r>e?r/e:1}}this._cachedScaleForStroking=[s,n]}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:s}=this.current,[n,i]=this.getScaleForStroking();e.lineWidth=s||1;if(1===n&&1===i){e.stroke();return}let r,a,o;if(t){r=e.mozCurrentTransform.slice();a=e.getLineDash().slice();o=e.lineDashOffset}e.scale(n,i);const l=Math.max(n,i);e.setLineDash(e.getLineDash().map((t=>t/l)));e.lineDashOffset/=l;e.stroke();if(t){e.setTransform(...r);e.setLineDash(a);e.lineDashOffset=o}}getCanvasPosition(t,e){const s=this.ctx.mozCurrentTransform;return[s[0]*t+s[2]*e+s[4],s[1]*t+s[3]*e+s[5]]}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}e.CanvasGraphics=CanvasGraphics;for(const t in n.OPS)void 0!==CanvasGraphics.prototype[t]&&(CanvasGraphics.prototype[n.OPS[t]]=CanvasGraphics.prototype[t])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.TilingPattern=e.PathType=void 0;e.getShadingPattern=function getShadingPattern(t){switch(t[0]){case"RadialAxial":return new RadialAxialShadingPattern(t);case"Mesh":return new MeshShadingPattern(t);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${t[0]}`)};var n=s(1),i=s(3);const r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=r;function applyBoundingBox(t,e){if(!e||i.isNodeJS)return;const s=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],s,n);t.clip(r)}class BaseShadingPattern{constructor(){this.constructor===BaseShadingPattern&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(t){super();this._type=t[1];this._bbox=t[2];this._colorStops=t[3];this._p0=t[4];this._p1=t[5];this._r0=t[6];this._r1=t[7];this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const t of this._colorStops)e.addColorStop(t[0],t[1]);return e}getPattern(t,e,s,i){let a;if(i===r.STROKE||i===r.FILL){const r=e.current.getClippedPathBoundingBox(i,t.mozCurrentTransform)||[0,0,0,0],o=Math.ceil(r[2]-r[0])||1,l=Math.ceil(r[3]-r[1])||1,c=e.cachedCanvases.getCanvas("pattern",o,l,!0),h=c.context;h.clearRect(0,0,h.canvas.width,h.canvas.height);h.beginPath();h.rect(0,0,h.canvas.width,h.canvas.height);h.translate(-r[0],-r[1]);s=n.Util.transform(s,[1,0,0,1,r[0],r[1]]);h.transform.apply(h,e.baseTransform);this.matrix&&h.transform.apply(h,this.matrix);applyBoundingBox(h,this._bbox);h.fillStyle=this._createGradient(h);h.fill();a=t.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(s);try{a.setTransform(d)}catch(t){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${t?.message}".`)}}else{applyBoundingBox(t,this._bbox);a=this._createGradient(t)}return a}}function drawTriangle(t,e,s,n,i,r,a,o){const l=e.coords,c=e.colors,h=t.data,d=4*t.width;let u;if(l[s+1]>l[n+1]){u=s;s=n;n=u;u=r;r=a;a=u}if(l[n+1]>l[i+1]){u=n;n=i;i=u;u=a;a=o;o=u}if(l[s+1]>l[n+1]){u=s;s=n;n=u;u=r;r=a;a=u}const p=(l[s]+e.offsetX)*e.scaleX,g=(l[s+1]+e.offsetY)*e.scaleY,f=(l[n]+e.offsetX)*e.scaleX,m=(l[n+1]+e.offsetY)*e.scaleY,b=(l[i]+e.offsetX)*e.scaleX,_=(l[i+1]+e.offsetY)*e.scaleY;if(g>=_)return;const A=c[r],y=c[r+1],v=c[r+2],S=c[a],x=c[a+1],E=c[a+2],C=c[o],T=c[o+1],P=c[o+2],w=Math.round(g),k=Math.round(_);let F,M,R,D,I,O,L,N;for(let t=w;t<=k;t++){if(t<m){let e;e=t<g?0:(g-t)/(g-m);F=p-(p-f)*e;M=A-(A-S)*e;R=y-(y-x)*e;D=v-(v-E)*e}else{let e;e=t>_?1:m===_?0:(m-t)/(m-_);F=f-(f-b)*e;M=S-(S-C)*e;R=x-(x-T)*e;D=E-(E-P)*e}let e;e=t<g?0:t>_?1:(g-t)/(g-_);I=p-(p-b)*e;O=A-(A-C)*e;L=y-(y-T)*e;N=v-(v-P)*e;const s=Math.round(Math.min(F,I)),n=Math.round(Math.max(F,I));let i=d*t+4*s;for(let t=s;t<=n;t++){e=(F-t)/(F-I);e<0?e=0:e>1&&(e=1);h[i++]=M-(M-O)*e|0;h[i++]=R-(R-L)*e|0;h[i++]=D-(D-N)*e|0;h[i++]=255}}}function drawFigure(t,e,s){const n=e.coords,i=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,c=o-1;for(r=0;r<l;r++){let e=r*o;for(let r=0;r<c;r++,e++){drawTriangle(t,s,n[e],n[e+1],n[e+o],i[e],i[e+1],i[e+o]);drawTriangle(t,s,n[e+o+1],n[e+1],n[e+o],i[e+o+1],i[e+1],i[e+o])}}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)drawTriangle(t,s,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(t){super();this._coords=t[2];this._colors=t[3];this._figures=t[4];this._bounds=t[5];this._bbox=t[7];this._background=t[8];this.matrix=null}_createMeshCanvas(t,e,s){const n=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-n,a=Math.ceil(this._bounds[3])-i,o=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),c=r/o,h=a/l,d={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-i,scaleX:1/c,scaleY:1/h},u=o+4,p=l+4,g=s.getCanvas("mesh",u,p,!1),f=g.context,m=f.createImageData(o,l);if(e){const t=m.data;for(let s=0,n=t.length;s<n;s+=4){t[s]=e[0];t[s+1]=e[1];t[s+2]=e[2];t[s+3]=255}}for(const t of this._figures)drawFigure(m,t,d);f.putImageData(m,2,2);return{canvas:g.canvas,offsetX:n-2*c,offsetY:i-2*h,scaleX:c,scaleY:h}}getPattern(t,e,s,i){applyBoundingBox(t,this._bbox);let a;if(i===r.SHADING)a=n.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else{a=n.Util.singularValueDecompose2dScale(e.baseTransform);if(this.matrix){const t=n.Util.singularValueDecompose2dScale(this.matrix);a=[a[0]*t[0],a[1]*t[1]]}}const o=this._createMeshCanvas(a,i===r.SHADING?null:this._background,e.cachedCanvases);if(i!==r.SHADING){t.setTransform.apply(t,e.baseTransform);this.matrix&&t.transform.apply(t,this.matrix)}t.translate(o.offsetX,o.offsetY);t.scale(o.scaleX,o.scaleY);return t.createPattern(o.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}const a=1,o=2;class TilingPattern{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(t,e,s,n,i){this.operatorList=t[2];this.matrix=t[3]||[1,0,0,1,0,0];this.bbox=t[4];this.xstep=t[5];this.ystep=t[6];this.paintType=t[7];this.tilingType=t[8];this.color=e;this.ctx=s;this.canvasGraphicsFactory=n;this.baseTransform=i}createPatternCanvas(t){const e=this.operatorList,s=this.bbox,i=this.xstep,r=this.ystep,a=this.paintType,o=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+o);const h=s[0],d=s[1],u=s[2],p=s[3],g=n.Util.singularValueDecompose2dScale(this.matrix),f=n.Util.singularValueDecompose2dScale(this.baseTransform),m=[g[0]*f[0],g[1]*f[1]],b=this.getSizeAndScale(i,this.ctx.canvas.width,m[0]),_=this.getSizeAndScale(r,this.ctx.canvas.height,m[1]),A=t.cachedCanvases.getCanvas("pattern",b.size,_.size,!0),y=A.context,v=c.createCanvasGraphics(y);v.groupLevel=t.groupLevel;this.setFillAndStrokeStyleToContext(v,a,l);let S=h,x=d,E=u,C=p;if(h<0){S=0;E+=Math.abs(h)}if(d<0){x=0;C+=Math.abs(d)}y.translate(-b.scale*S,-_.scale*x);v.transform(b.scale,0,0,_.scale,0,0);y.save();this.clipBbox(v,S,x,E,C);v.baseTransform=v.ctx.mozCurrentTransform.slice();v.executeOperatorList(e);v.endDrawing();return{canvas:A.canvas,scaleX:b.scale,scaleY:_.scale,offsetX:S,offsetY:x}}getSizeAndScale(t,e,s){t=Math.abs(t);const n=Math.max(TilingPattern.MAX_PATTERN_SIZE,e);let i=Math.ceil(t*s);i>=n?i=n:s=i/t;return{scale:s,size:i}}clipBbox(t,e,s,n,i){const r=n-e,a=i-s;t.ctx.rect(e,s,r,a);t.current.updateRectMinMax(t.ctx.mozCurrentTransform,[e,s,n,i]);t.clip();t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const i=t.ctx,r=t.current;switch(e){case a:const t=this.ctx;i.fillStyle=t.fillStyle;i.strokeStyle=t.strokeStyle;r.fillColor=t.fillStyle;r.strokeColor=t.strokeStyle;break;case o:const l=n.Util.makeHexColor(s[0],s[1],s[2]);i.fillStyle=l;i.strokeStyle=l;r.fillColor=l;r.strokeColor=l;break;default:throw new n.FormatError(`Unsupported paint type: ${e}`)}}getPattern(t,e,s,i){let a=s;if(i!==r.SHADING){a=n.Util.transform(a,e.baseTransform);this.matrix&&(a=n.Util.transform(a,this.matrix))}const o=this.createPatternCanvas(e);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY);l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");try{c.setTransform(l)}catch(t){(0,n.warn)(`TilingPattern.getPattern: "${t?.message}".`)}return c}}e.TilingPattern=TilingPattern},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.applyMaskImageData=function applyMaskImageData({src:t,srcPos:e=0,dest:s,destPos:i=0,width:r,height:a,inverseDecode:o=!1}){const l=n.FeatureTest.isLittleEndian?4278190080:255,[c,h]=o?[0,l]:[l,0],d=r>>3,u=7&r,p=t.length;s=new Uint32Array(s.buffer);for(let n=0;n<a;n++){for(const n=e+d;e<n;e++){const n=e<p?t[e]:255;s[i++]=128&n?h:c;s[i++]=64&n?h:c;s[i++]=32&n?h:c;s[i++]=16&n?h:c;s[i++]=8&n?h:c;s[i++]=4&n?h:c;s[i++]=2&n?h:c;s[i++]=1&n?h:c}if(0===u)continue;const n=e<p?t[e++]:255;for(let t=0;t<u;t++)s[i++]=n&1<<7-t?h:c}return{srcPos:e,destPos:i}};var n=s(1)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s;s.workerPort=void 0===s.workerPort?null:s.workerPort;s.workerSrc=void 0===s.workerSrc?"":s.workerSrc},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.MessageHandler=void 0;var n=s(1);const i=1,r=2,a=1,o=2,l=3,c=4,h=5,d=6,u=7,p=8;function wrapReason(t){t instanceof Error||"object"==typeof t&&null!==t||(0,n.unreachable)(\'wrapReason: Expected "reason" to be a (possibly cloned) Error.\');switch(t.name){case"AbortException":return new n.AbortException(t.message);case"MissingPDFException":return new n.MissingPDFException(t.message);case"PasswordException":return new n.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new n.UnknownErrorException(t.message,t.details);default:return new n.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=class MessageHandler{constructor(t,e,s){this.sourceName=t;this.targetName=e;this.comObj=s;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream){this._processStreamMessage(e);return}if(e.callback){const t=e.callbackId,s=this.callbackCapabilities[t];if(!s)throw new Error(`Cannot resolve callback ${t}`);delete this.callbackCapabilities[t];if(e.callback===i)s.resolve(e.data);else{if(e.callback!==r)throw new Error("Unexpected callback case");s.reject(wrapReason(e.reason))}return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,a=e.sourceName;new Promise((function(t){t(n(e.data))})).then((function(n){s.postMessage({sourceName:t,targetName:a,callback:i,callbackId:e.callbackId,data:n})}),(function(n){s.postMessage({sourceName:t,targetName:a,callback:r,callbackId:e.callbackId,reason:wrapReason(n)})}))}else e.streamId?this._createStreamSink(e):n(e.data)};s.addEventListener("message",this._onComObjOnMessage)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const i=this.callbackId++,r=(0,n.createPromiseCapability)();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},s)}catch(t){r.reject(t)}return r.promise}sendWithStream(t,e,s,i){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:s=>{const a=(0,n.createPromiseCapability)();this.streamControllers[r]={controller:s,startCall:a,pullCall:null,cancelCall:null,isClosed:!1};c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:s.desiredSize},i);return a.promise},pull:t=>{const e=(0,n.createPromiseCapability)();this.streamControllers[r].pullCall=e;c.postMessage({sourceName:o,targetName:l,stream:d,streamId:r,desiredSize:t.desiredSize});return e.promise},cancel:t=>{(0,n.assert)(t instanceof Error,"cancel must have a valid reason");const e=(0,n.createPromiseCapability)();this.streamControllers[r].cancelCall=e;this.streamControllers[r].isClosed=!0;c.postMessage({sourceName:o,targetName:l,stream:a,streamId:r,reason:wrapReason(t)});return e.promise}},s)}_createStreamSink(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,a=this,o=this.actionHandler[t.action],d={enqueue(t,a=1,o){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=a;if(l>0&&this.desiredSize<=0){this.sinkCapability=(0,n.createPromiseCapability)();this.ready=this.sinkCapability.promise}r.postMessage({sourceName:s,targetName:i,stream:c,streamId:e,chunk:t},o)},close(){if(!this.isCancelled){this.isCancelled=!0;r.postMessage({sourceName:s,targetName:i,stream:l,streamId:e});delete a.streamSinks[e]}},error(t){(0,n.assert)(t instanceof Error,"error must have a valid reason");if(!this.isCancelled){this.isCancelled=!0;r.postMessage({sourceName:s,targetName:i,stream:h,streamId:e,reason:wrapReason(t)})}},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve();d.ready=d.sinkCapability.promise;this.streamSinks[e]=d;new Promise((function(e){e(o(t.data,d))})).then((function(){r.postMessage({sourceName:s,targetName:i,stream:p,streamId:e,success:!0})}),(function(t){r.postMessage({sourceName:s,targetName:i,stream:p,streamId:e,reason:wrapReason(t)})}))}_processStreamMessage(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,g=this.streamControllers[e],f=this.streamSinks[e];switch(t.stream){case p:t.success?g.startCall.resolve():g.startCall.reject(wrapReason(t.reason));break;case u:t.success?g.pullCall.resolve():g.pullCall.reject(wrapReason(t.reason));break;case d:if(!f){r.postMessage({sourceName:s,targetName:i,stream:u,streamId:e,success:!0});break}f.desiredSize<=0&&t.desiredSize>0&&f.sinkCapability.resolve();f.desiredSize=t.desiredSize;new Promise((function(t){t(f.onPull&&f.onPull())})).then((function(){r.postMessage({sourceName:s,targetName:i,stream:u,streamId:e,success:!0})}),(function(t){r.postMessage({sourceName:s,targetName:i,stream:u,streamId:e,reason:wrapReason(t)})}));break;case c:(0,n.assert)(g,"enqueue should have stream controller");if(g.isClosed)break;g.controller.enqueue(t.chunk);break;case l:(0,n.assert)(g,"close should have stream controller");if(g.isClosed)break;g.isClosed=!0;g.controller.close();this._deleteStreamController(g,e);break;case h:(0,n.assert)(g,"error should have stream controller");g.controller.error(wrapReason(t.reason));this._deleteStreamController(g,e);break;case o:t.success?g.cancelCall.resolve():g.cancelCall.reject(wrapReason(t.reason));this._deleteStreamController(g,e);break;case a:if(!f)break;new Promise((function(e){e(f.onCancel&&f.onCancel(wrapReason(t.reason)))})).then((function(){r.postMessage({sourceName:s,targetName:i,stream:o,streamId:e,success:!0})}),(function(t){r.postMessage({sourceName:s,targetName:i,stream:o,streamId:e,reason:wrapReason(t)})}));f.sinkCapability.reject(wrapReason(t.reason));f.isCancelled=!0;delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t,e){await Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]);delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.Metadata=void 0;var n=s(1);e.Metadata=class Metadata{#Z;#tt;constructor({parsedData:t,rawData:e}){this.#Z=t;this.#tt=e}getRaw(){return this.#tt}get(t){return this.#Z.get(t)??null}getAll(){return(0,n.objectFromMap)(this.#Z)}has(t){return this.#Z.has(t)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.OptionalContentConfig=void 0;var n=s(1);const i=Symbol("INTERNAL");class OptionalContentGroup{#et=!0;constructor(t,e){this.name=t;this.intent=e}get visible(){return this.#et}_setVisible(t,e){t!==i&&(0,n.unreachable)("Internal method `_setVisible` called.");this.#et=e}}e.OptionalContentConfig=class OptionalContentConfig{#st=!0;#nt=new Map;#it=null;#rt=null;constructor(t){this.name=null;this.creator=null;if(null!==t){this.name=t.name;this.creator=t.creator;this.#rt=t.order;for(const e of t.groups)this.#nt.set(e.id,new OptionalContentGroup(e.name,e.intent));if("OFF"===t.baseState)for(const t of this.#nt.values())t._setVisible(i,!1);for(const e of t.on)this.#nt.get(e)._setVisible(i,!0);for(const e of t.off)this.#nt.get(e)._setVisible(i,!1);this.#it=new Map;for(const[t,e]of this.#nt)this.#it.set(t,e.visible)}}#at(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let i=1;i<e;i++){const e=t[i];let r;if(Array.isArray(e))r=this.#at(e);else{if(!this.#nt.has(e)){(0,n.warn)(`Optional content group not found: ${e}`);return!0}r=this.#nt.get(e).visible}switch(s){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===s}isVisible(t){if(0===this.#nt.size)return!0;if(!t){(0,n.warn)("Optional content group not defined.");return!0}if("OCG"===t.type){if(!this.#nt.has(t.id)){(0,n.warn)(`Optional content group not found: ${t.id}`);return!0}return this.#nt.get(t.id).visible}if("OCMD"===t.type){if(t.expression)return this.#at(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this.#nt.has(e)){(0,n.warn)(`Optional content group not found: ${e}`);return!0}if(this.#nt.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this.#nt.has(e)){(0,n.warn)(`Optional content group not found: ${e}`);return!0}if(!this.#nt.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#nt.has(e)){(0,n.warn)(`Optional content group not found: ${e}`);return!0}if(!this.#nt.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this.#nt.has(e)){(0,n.warn)(`Optional content group not found: ${e}`);return!0}if(this.#nt.get(e).visible)return!1}return!0}(0,n.warn)(`Unknown optional content policy ${t.policy}.`);return!0}(0,n.warn)(`Unknown group type ${t.type}.`);return!0}setVisibility(t,e=!0){if(this.#nt.has(t)){this.#nt.get(t)._setVisible(i,!!e);this.#st=null}else(0,n.warn)(`Optional content group not found: ${t}`)}get hasInitialVisibility(){if(null!==this.#st)return this.#st;for(const[t,e]of this.#nt){const s=this.#it.get(t);if(e.visible!==s)return this.#st=!1}return this.#st=!0}getOrder(){return this.#nt.size?this.#rt?this.#rt.slice():[...this.#nt.keys()]:null}getGroups(){return this.#nt.size>0?(0,n.objectFromMap)(this.#nt):null}getGroup(t){return this.#nt.get(t)||null}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.PDFDataTransportStream=void 0;var n=s(1),i=s(4);e.PDFDataTransportStream=class PDFDataTransportStream{constructor(t,e){(0,n.assert)(e,\'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.\');this._queuedChunks=[];this._progressiveDone=t.progressiveDone||!1;this._contentDispositionFilename=t.contentDispositionFilename||null;const s=t.initialData;if(s?.length>0){const t=new Uint8Array(s).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=e;this._isStreamingSupported=!t.disableStream;this._isRangeSupported=!t.disableRange;this._contentLength=t.length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})}));this._pdfDataRangeTransport.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})}));this._pdfDataRangeTransport.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})}));this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()}));this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{const s=this._rangeReaders.some((function(s){if(s._begin!==t.begin)return!1;s._enqueue(e);return!0}));(0,n.assert)(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){if(void 0===t.total){const e=this._rangeReaders[0];e?.onProgress&&e.onProgress({loaded:t.loaded})}else{const e=this._fullRequestReader;e?.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone();this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;this._queuedChunks=null;return new PDFDataTransportStreamReader(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new PDFDataTransportStreamRangeReader(this,t,e);this._pdfDataRangeTransport.requestDataRange(t,e);this._rangeReaders.push(s);return s}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}};class PDFDataTransportStreamReader{constructor(t,e,s=!1,n=null){this._stream=t;this._done=s||!1;this._filename=(0,i.isPdfFile)(n)?n:null;this._queuedChunks=e||[];this._loaded=0;for(const t of this._queuedChunks)this._loaded+=t.byteLength;this._requests=[];this._headersReady=Promise.resolve();t._fullRequestReader=this;this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();this._requests.push(t);return t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(t,e,s){this._stream=t;this._begin=e;this._end=s;this._queuedChunk=null;this._requests=[];this._done=!1;this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0;this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;this._queuedChunk=null;return{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();this._requests.push(t);return t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0;this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.XfaText=void 0;class XfaText{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};!function walk(t){if(!t)return;let s=null;const n=t.name;if("#text"===n)s=t.value;else{if(!XfaText.shouldBuildText(n))return;t?.attributes?.textContent?s=t.attributes.textContent:t.value&&(s=t.value)}null!==s&&e.push({str:s});if(t.children)for(const e of t.children)walk(e)}(t);return s}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}e.XfaText=XfaText},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(5);const fetchData=function(t){return new Promise(((e,s)=>{require("fs").readFile(t,((t,n)=>{!t&&n?e(new Uint8Array(n)):s(new Error(t))}))}))};class NodeCanvasFactory extends n.BaseCanvasFactory{_createCanvas(t,e){return require("canvas").createCanvas(t,e)}}e.NodeCanvasFactory=NodeCanvasFactory;class NodeCMapReaderFactory extends n.BaseCMapReaderFactory{_fetchData(t,e){return fetchData(t).then((t=>({cMapData:t,compressionType:e})))}}e.NodeCMapReaderFactory=NodeCMapReaderFactory;class NodeStandardFontDataFactory extends n.BaseStandardFontDataFactory{_fetchData(t){return fetchData(t)}}e.NodeStandardFontDataFactory=NodeStandardFontDataFactory},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.AnnotationEditorLayer=void 0;var n=s(1),i=s(9),r=s(4),a=s(23),o=s(24);class AnnotationEditorLayer{#ot=!1;#lt=this.pointerup.bind(this);#ct=this.pointerdown.bind(this);#ht=new Map;#dt=!1;#ut=new WeakMap;#pt=new Map;#gt;#ft=new Set;static _initialized=!1;constructor(t){if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;a.FreeTextEditor.initialize(t.l10n);o.InkEditor.initialize(t.l10n);t.uiManager.registerEditorTypes([a.FreeTextEditor,o.InkEditor])}this.#gt=t.uiManager;this.annotationStorage=t.annotationStorage;this.pageIndex=t.pageIndex;this.div=t.div;this.#gt.addLayer(this)}get textLayerElements(){const t=this.div.parentNode.getElementsByClassName("textLayer").item(0);if(!t)return(0,n.shadow)(this,"textLayerElements",null);let e=this.#ut.get(t);if(e)return e;e=t.querySelectorAll(\'span[role="presentation"]\');if(0===e.length)return(0,n.shadow)(this,"textLayerElements",null);e=Array.from(e);e.sort(AnnotationEditorLayer.#mt);this.#ut.set(t,e);return e}get#bt(){return!!this.div.parentNode.querySelector(".textLayer .endOfContent")}updateToolbar(t){this.#gt.updateToolbar(t)}updateMode(t=this.#gt.getMode()){this.#_t();if(t===n.AnnotationEditorType.INK){this.addInkEditorIfNeeded(!1);this.disableClick()}else this.enableClick();this.#gt.unselectAll()}addInkEditorIfNeeded(t){if(!t&&this.#gt.getMode()!==n.AnnotationEditorType.INK)return;if(!t)for(const t of this.#ht.values())if(t.isEmpty()){t.setInBackground();return}this.#At({offsetX:0,offsetY:0}).setInBackground()}setEditingState(t){this.#gt.setEditingState(t)}addCommands(t){this.#gt.addCommands(t)}enable(){this.div.style.pointerEvents="auto";for(const t of this.#ht.values())t.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const t of this.#ht.values())t.disableEditing()}setActiveEditor(t){this.#gt.getActive()!==t&&this.#gt.setActiveEditor(t)}enableClick(){this.div.addEventListener("pointerdown",this.#ct);this.div.addEventListener("pointerup",this.#lt)}disableClick(){this.div.removeEventListener("pointerdown",this.#ct);this.div.removeEventListener("pointerup",this.#lt)}attach(t){this.#ht.set(t.id,t)}detach(t){this.#ht.delete(t.id);this.removePointerInTextLayer(t)}remove(t){this.#gt.removeEditor(t);this.detach(t);this.annotationStorage.removeKey(t.id);t.div.style.display="none";setTimeout((()=>{t.div.style.display="";t.div.remove();t.isAttachedToDOM=!1;document.activeElement===document.body&&this.#gt.focusMainContainer()}),0);this.#dt||this.addInkEditorIfNeeded(!1)}#yt(t){if(t.parent!==this){this.attach(t);t.pageIndex=this.pageIndex;t.parent?.detach(t);t.parent=this;if(t.div&&t.isAttachedToDOM){t.div.remove();this.div.append(t.div)}}}static#mt(t,e){const s=t.getBoundingClientRect(),n=e.getBoundingClientRect();if(s.y+s.height<=n.y)return-1;if(n.y+n.height<=s.y)return 1;return s.x+s.width/2-(n.x+n.width/2)}onTextLayerRendered(){this.#pt.clear();for(const t of this.#ft)t.isAttachedToDOM&&this.addPointerInTextLayer(t);this.#ft.clear()}removePointerInTextLayer(t){if(!this.#bt){this.#ft.delete(t);return}const{id:e}=t,s=this.#pt.get(e);if(!s)return;this.#pt.delete(e);let n=s.getAttribute("aria-owns");if(n?.includes(e)){n=n.split(" ").filter((t=>t!==e)).join(" ");if(n)s.setAttribute("aria-owns",n);else{s.removeAttribute("aria-owns");s.setAttribute("role","presentation")}}}addPointerInTextLayer(t){if(!this.#bt){this.#ft.add(t);return}this.removePointerInTextLayer(t);const e=this.textLayerElements;if(!e)return;const{contentDiv:s}=t,n=t.getIdForTextLayer(),i=(0,r.binarySearchFirstItem)(e,(t=>AnnotationEditorLayer.#mt(s,t)<0)),a=e[Math.max(0,i-1)],o=a.getAttribute("aria-owns");o?.includes(n)||a.setAttribute("aria-owns",o?`${o} ${n}`:n);a.removeAttribute("role");this.#pt.set(n,a)}moveDivInDOM(t){this.addPointerInTextLayer(t);const{div:e,contentDiv:s}=t;if(!this.div.hasChildNodes()){this.div.append(e);return}const n=Array.from(this.div.childNodes).filter((t=>t!==e));if(0===n.length)return;const i=(0,r.binarySearchFirstItem)(n,(t=>AnnotationEditorLayer.#mt(s,t)<0));0===i?n[0].before(e):n[i-1].after(e)}add(t){this.#yt(t);this.addToAnnotationStorage(t);this.#gt.addEditor(t);this.attach(t);if(!t.isAttachedToDOM){const e=t.render();this.div.append(e);t.isAttachedToDOM=!0}this.moveDivInDOM(t);t.onceAdded()}addToAnnotationStorage(t){t.isEmpty()||this.annotationStorage.has(t.id)||this.annotationStorage.setValue(t.id,t)}addOrRebuild(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}addANewEditor(t){this.addCommands({cmd:()=>{this.addOrRebuild(t)},undo:()=>{t.remove()},mustExec:!0})}addUndoableEditor(t){this.addCommands({cmd:()=>{this.addOrRebuild(t)},undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#gt.getId()}#vt(t){switch(this.#gt.getMode()){case n.AnnotationEditorType.FREETEXT:return new a.FreeTextEditor(t);case n.AnnotationEditorType.INK:return new o.InkEditor(t)}return null}deserialize(t){switch(t.annotationType){case n.AnnotationEditorType.FREETEXT:return a.FreeTextEditor.deserialize(t,this);case n.AnnotationEditorType.INK:return o.InkEditor.deserialize(t,this)}return null}#At(t){const e=this.getNextId(),s=this.#vt({parent:this,id:e,x:t.offsetX,y:t.offsetY});s&&this.add(s);return s}setSelected(t){this.#gt.setSelected(t)}toggleSelected(t){this.#gt.toggleSelected(t)}isSelected(t){return this.#gt.isSelected(t)}unselect(t){this.#gt.unselect(t)}pointerup(t){const e=i.KeyboardManager.platform.isMac;0!==t.button||t.ctrlKey&&e||t.target===this.div&&(this.#ot?this.#At(t):this.#ot=!0)}pointerdown(t){const e=i.KeyboardManager.platform.isMac;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;const s=this.#gt.getActive();this.#ot=!s||s.isEmpty()}drop(t){const e=t.dataTransfer.getData("text/plain"),s=this.#gt.getEditor(e);if(!s)return;t.preventDefault();t.dataTransfer.dropEffect="move";this.#yt(s);const n=this.div.getBoundingClientRect(),i=t.clientX-n.x,r=t.clientY-n.y;s.translate(i-s.startX,r-s.startY);this.moveDivInDOM(s);s.div.focus()}dragover(t){t.preventDefault()}destroy(){this.#gt.getActive()?.parent===this&&this.#gt.setActiveEditor(null);for(const t of this.#ht.values()){this.removePointerInTextLayer(t);t.isAttachedToDOM=!1;t.div.remove();t.parent=null}this.#pt.clear();this.div=null;this.#ht.clear();this.#ft.clear();this.#gt.removeLayer(this)}#_t(){this.#dt=!0;for(const t of this.#ht.values())t.isEmpty()&&t.remove();this.#dt=!1}render(t){this.viewport=t.viewport;(0,i.bindEvents)(this,this.div,["dragover","drop"]);this.setDimensions();for(const t of this.#gt.getEditors(this.pageIndex))this.add(t);this.updateMode()}update(t){this.viewport=t.viewport;this.setDimensions();this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[t,e,s,n]=this.viewport.viewBox;return[s-t,n-e]}get viewportBaseDimensions(){const{width:t,height:e,rotation:s}=this.viewport;return s%180==0?[t,e]:[e,t]}setDimensions(){const{width:t,height:e,rotation:s}=this.viewport,n=s%180!=0,i=Math.floor(t)+"px",r=Math.floor(e)+"px";this.div.style.width=n?r:i;this.div.style.height=n?i:r;this.div.setAttribute("data-main-rotation",s)}}e.AnnotationEditorLayer=AnnotationEditorLayer},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.FreeTextEditor=void 0;var n=s(1),i=s(9),r=s(8);class FreeTextEditor extends r.AnnotationEditor{#St=this.editorDivBlur.bind(this);#xt=this.editorDivFocus.bind(this);#Et=this.editorDivKeydown.bind(this);#Ct;#Tt="";#Pt="";#wt=!1;#kt;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],FreeTextEditor.prototype.commitOrRemove]]);constructor(t){super({...t,name:"freeTextEditor"});this.#Ct=t.color||FreeTextEditor._defaultColor||r.AnnotationEditor._defaultLineColor;this.#kt=t.fontSize||FreeTextEditor._defaultFontSize}static initialize(t){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map((e=>[e,t.get(e)])));const e=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(e.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case n.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=e;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=e}}updateParams(t,e){switch(t){case n.AnnotationEditorParamsType.FREETEXT_SIZE:this.#Ft(e);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:this.#Mt(e)}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,this.#kt],[n.AnnotationEditorParamsType.FREETEXT_COLOR,this.#Ct]]}#Ft(t){const setFontsize=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`;this.translate(0,-(t-this.#kt)*this.parent.scaleFactor);this.#kt=t;this.#Rt()},e=this.#kt;this.parent.addCommands({cmd:()=>{setFontsize(t)},undo:()=>{setFontsize(e)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Mt(t){const e=this.#Ct;this.parent.addCommands({cmd:()=>{this.#Ct=t;this.editorDiv.style.color=t},undo:()=>{this.#Ct=e;this.editorDiv.style.color=e},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){return[-FreeTextEditor._internalPadding*this.parent.scaleFactor,-(FreeTextEditor._internalPadding+this.#kt)*this.parent.scaleFactor]}rebuild(){super.rebuild();null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){if(!this.isInEditMode()){this.parent.setEditingState(!1);this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT);super.enableEditMode();this.overlayDiv.classList.remove("enabled");this.editorDiv.contentEditable=!0;this.div.draggable=!1;this.editorDiv.addEventListener("keydown",this.#Et);this.editorDiv.addEventListener("focus",this.#xt);this.editorDiv.addEventListener("blur",this.#St)}}disableEditMode(){if(this.isInEditMode()){this.parent.setEditingState(!0);super.disableEditMode();this.overlayDiv.classList.add("enabled");this.editorDiv.contentEditable=!1;this.div.draggable=!0;this.editorDiv.removeEventListener("keydown",this.#Et);this.editorDiv.removeEventListener("focus",this.#xt);this.editorDiv.removeEventListener("blur",this.#St);this.div.focus();this.isEditing=!1}}focusin(t){super.focusin(t);t.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){if(!this.width){this.enableEditMode();this.editorDiv.focus()}}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1;this.parent.setEditingState(!0);super.remove()}#Dt(){const t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;const e=[];for(let s=0,n=t.length;s<n;s++){const n=t[s].firstChild;"#text"===n?.nodeName?e.push(n.data):e.push("")}return e.join("\\n")}#Rt(){const[t,e]=this.parent.viewportBaseDimensions,s=this.div.getBoundingClientRect();this.width=s.width/t;this.height=s.height/e}commit(){super.commit();if(!this.#wt){this.#wt=!0;this.parent.addUndoableEditor(this)}this.disableEditMode();this.#Pt=this.editorDiv.innerHTML;this.#Tt=this.#Dt().trimEnd();this.#Rt()}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(t){this.enableEditMode();this.editorDiv.focus()}keydown(t){if(t.target===this.div&&"Enter"===t.key){this.enableEditMode();this.editorDiv.focus()}}editorDivKeydown(t){FreeTextEditor._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment");this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox");this.editorDiv.setAttribute("aria-multiline",!0)}getIdForTextLayer(){return this.editorDiv.id}render(){if(this.div)return this.div;let t,e;if(this.width){t=this.x;e=this.y}super.render();this.editorDiv=document.createElement("div");this.editorDiv.className="internal";this.editorDiv.setAttribute("id",`${this.id}-editor`);this.enableEditing();FreeTextEditor._l10nPromise.get("editor_free_text_aria_label").then((t=>this.editorDiv?.setAttribute("aria-label",t)));FreeTextEditor._l10nPromise.get("free_text_default_content").then((t=>this.editorDiv?.setAttribute("default-content",t)));this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;s.fontSize=`calc(${this.#kt}px * var(--scale-factor))`;s.color=this.#Ct;this.div.append(this.editorDiv);this.overlayDiv=document.createElement("div");this.overlayDiv.classList.add("overlay","enabled");this.div.append(this.overlayDiv);(0,i.bindEvents)(this,this.div,["dblclick","keydown"]);if(this.width){const[s,n]=this.parent.viewportBaseDimensions;this.setAt(t*s,e*n,this.width*s,this.height*n);this.editorDiv.innerHTML=this.#Pt;this.div.draggable=!0;this.editorDiv.contentEditable=!1}else{this.div.draggable=!1;this.editorDiv.contentEditable=!0}return this.div}get contentDiv(){return this.editorDiv}static deserialize(t,e){const s=super.deserialize(t,e);s.#kt=t.fontSize;s.#Ct=n.Util.makeHexColor(...t.color);s.#Tt=t.value;s.#Pt=t.value.split("\\n").map((t=>`<div>${t}</div>`)).join("");return s}serialize(){if(this.isEmpty())return null;const t=FreeTextEditor._internalPadding*this.parent.scaleFactor,e=this.getRect(t,t),s=r.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:s,fontSize:this.#kt,value:this.#Tt,pageIndex:this.parent.pageIndex,rect:e,rotation:this.rotation}}}e.FreeTextEditor=FreeTextEditor},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.InkEditor=void 0;Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return r.fitCurve}});var n=s(1),i=s(8),r=s(25),a=s(9);const o=16;class InkEditor extends i.AnnotationEditor{#It=0;#Ot=0;#Lt=0;#Nt=this.canvasPointermove.bind(this);#Bt=this.canvasPointerleave.bind(this);#jt=this.canvasPointerup.bind(this);#Ut=this.canvasPointerdown.bind(this);#qt=!1;#Wt=!1;#zt=null;#Ht=null;#Gt=0;#Vt=0;#Xt=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;constructor(t){super({...t,name:"inkEditor"});this.color=t.color||null;this.thickness=t.thickness||null;this.opacity=t.opacity||null;this.paths=[];this.bezierPath2D=[];this.currentPath=[];this.scaleFactor=1;this.translationX=this.translationY=0;this.x=0;this.y=0}static initialize(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map((e=>[e,t.get(e)])))}static updateDefaultParams(t,e){switch(t){case n.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=e;break;case n.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=e;break;case n.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=e/100}}updateParams(t,e){switch(t){case n.AnnotationEditorParamsType.INK_THICKNESS:this.#$t(e);break;case n.AnnotationEditorParamsType.INK_COLOR:this.#Mt(e);break;case n.AnnotationEditorParamsType.INK_OPACITY:this.#Yt(e)}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*InkEditor._defaultOpacity)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??InkEditor._defaultOpacity))]]}#$t(t){const e=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=t;this.#Kt()},undo:()=>{this.thickness=e;this.#Kt()},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#Mt(t){const e=this.color;this.parent.addCommands({cmd:()=>{this.color=t;this.#Jt()},undo:()=>{this.color=e;this.#Jt()},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#Yt(t){t/=100;const e=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=t;this.#Jt()},undo:()=>{this.opacity=e;this.#Jt()},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild();if(null!==this.div){if(!this.canvas){this.#Qt();this.#Zt()}if(!this.isAttachedToDOM){this.parent.add(this);this.#te()}this.#Kt()}}remove(){if(null!==this.canvas){this.isEmpty()||this.commit();this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;this.#Ht.disconnect();this.#Ht=null;super.remove()}}enableEditMode(){if(!this.#qt&&null!==this.canvas){super.enableEditMode();this.div.draggable=!1;this.canvas.addEventListener("pointerdown",this.#Ut);this.canvas.addEventListener("pointerup",this.#jt)}}disableEditMode(){if(this.isInEditMode()&&null!==this.canvas){super.disableEditMode();this.div.draggable=!this.isEmpty();this.div.classList.remove("editing");this.canvas.removeEventListener("pointerdown",this.#Ut);this.canvas.removeEventListener("pointerup",this.#jt)}}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#ee(){const{width:t,height:e,rotation:s}=this.parent.viewport;switch(s){case 90:return[0,t,t,e];case 180:return[t,e,t,e];case 270:return[e,0,t,e];default:return[0,0,t,e]}}#se(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor;this.ctx.lineCap="round";this.ctx.lineJoin="round";this.ctx.miterLimit=10;this.ctx.strokeStyle=`${this.color}${(0,a.opacityToHex)(this.opacity)}`}#ne(t,e){this.isEditing=!0;if(!this.#Wt){this.#Wt=!0;this.#te();this.thickness||=InkEditor._defaultThickness;this.color||=InkEditor._defaultColor||i.AnnotationEditor._defaultLineColor;this.opacity??=InkEditor._defaultOpacity}this.currentPath.push([t,e]);this.#zt=null;this.#se();this.ctx.beginPath();this.ctx.moveTo(t,e);this.#Xt=()=>{if(this.#Xt){if(this.#zt){if(this.isEmpty()){this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}else this.#Jt();this.ctx.lineTo(...this.#zt);this.#zt=null;this.ctx.stroke()}window.requestAnimationFrame(this.#Xt)}};window.requestAnimationFrame(this.#Xt)}#ie(t,e){const[s,n]=this.currentPath.at(-1);if(t!==s||e!==n){this.currentPath.push([t,e]);this.#zt=[t,e]}}#re(t,e){this.ctx.closePath();this.#Xt=null;t=Math.min(Math.max(t,0),this.canvas.width);e=Math.min(Math.max(e,0),this.canvas.height);const[s,n]=this.currentPath.at(-1);t===s&&e===n||this.currentPath.push([t,e]);let i;if(1!==this.currentPath.length)i=(0,r.fitCurve)(this.currentPath,30,null);else{const s=[t,e];i=[[s,s.slice(),s.slice(),s]]}const a=InkEditor.#ae(i);this.currentPath.length=0;this.parent.addCommands({cmd:()=>{this.paths.push(i);this.bezierPath2D.push(a);this.rebuild()},undo:()=>{this.paths.pop();this.bezierPath2D.pop();if(0===this.paths.length)this.remove();else{if(!this.canvas){this.#Qt();this.#Zt()}this.#Kt()}},mustExec:!0})}#Jt(){if(this.isEmpty()){this.#oe();return}this.#se();const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,t.width,t.height);this.#oe();for(const t of this.bezierPath2D)e.stroke(t)}commit(){if(!this.#qt){super.commit();this.isEditing=!1;this.disableEditMode();this.setInForeground();this.#qt=!0;this.div.classList.add("disabled");this.#Kt(!0);this.parent.addInkEditorIfNeeded(!0);this.parent.moveDivInDOM(this);this.div.focus()}}focusin(t){super.focusin(t);this.enableEditMode()}canvasPointerdown(t){if(0===t.button&&this.isInEditMode()&&!this.#qt){this.setInForeground();"mouse"!==t.type&&this.div.focus();t.stopPropagation();this.canvas.addEventListener("pointerleave",this.#Bt);this.canvas.addEventListener("pointermove",this.#Nt);this.#ne(t.offsetX,t.offsetY)}}canvasPointermove(t){t.stopPropagation();this.#ie(t.offsetX,t.offsetY)}canvasPointerup(t){if(0===t.button&&this.isInEditMode()&&0!==this.currentPath.length){t.stopPropagation();this.#le(t);this.setInBackground()}}canvasPointerleave(t){this.#le(t);this.setInBackground()}#le(t){this.#re(t.offsetX,t.offsetY);this.canvas.removeEventListener("pointerleave",this.#Bt);this.canvas.removeEventListener("pointermove",this.#Nt);this.parent.addToAnnotationStorage(this)}#Qt(){this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=0;this.canvas.className="inkEditorCanvas";InkEditor._l10nPromise.get("editor_ink_canvas_aria_label").then((t=>this.canvas?.setAttribute("aria-label",t)));this.div.append(this.canvas);this.ctx=this.canvas.getContext("2d")}#Zt(){this.#Ht=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)}));this.#Ht.observe(this.div)}render(){if(this.div)return this.div;let t,e;if(this.width){t=this.x;e=this.y}super.render();InkEditor._l10nPromise.get("editor_ink_aria_label").then((t=>this.div?.setAttribute("aria-label",t)));const[s,n,i,r]=this.#ee();this.setAt(s,n,0,0);this.setDims(i,r);this.#Qt();if(this.width){const[s,n]=this.parent.viewportBaseDimensions;this.setAt(t*s,e*n,this.width*s,this.height*n);this.#Wt=!0;this.#te();this.setDims(this.width*s,this.height*n);this.#Jt();this.#ce();this.div.classList.add("disabled")}else{this.div.classList.add("editing");this.enableEditMode()}this.#Zt();return this.div}#te(){if(!this.#Wt)return;const[t,e]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*t);this.canvas.height=Math.ceil(this.height*e);this.#oe()}setDimensions(t,e){const s=Math.round(t),n=Math.round(e);if(this.#Gt===s&&this.#Vt===n)return;this.#Gt=s;this.#Vt=n;this.canvas.style.visibility="hidden";if(this.#It&&Math.abs(this.#It-t/e)>.01){e=Math.ceil(t/this.#It);this.setDims(t,e)}const[i,r]=this.parent.viewportBaseDimensions;this.width=t/i;this.height=e/r;this.#qt&&this.#he(t,e);this.#te();this.#Jt();this.canvas.style.visibility="visible"}#he(t,e){const s=this.#de(),n=(t-s)/this.#Lt,i=(e-s)/this.#Ot;this.scaleFactor=Math.min(n,i)}#oe(){const t=this.#de()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#ae(t){const e=new Path2D;for(let s=0,n=t.length;s<n;s++){const[n,i,r,a]=t[s];0===s&&e.moveTo(...n);e.bezierCurveTo(i[0],i[1],r[0],r[1],a[0],a[1])}return e}#ue(t,e,s,n){const i=[],r=this.thickness/2;let a,o;for(const l of this.paths){a=[];o=[];for(let i=0,c=l.length;i<c;i++){const[c,h,d,u]=l[i],p=t*(c[0]+e)+r,g=n-t*(c[1]+s)-r,f=t*(h[0]+e)+r,m=n-t*(h[1]+s)-r,b=t*(d[0]+e)+r,_=n-t*(d[1]+s)-r,A=t*(u[0]+e)+r,y=n-t*(u[1]+s)-r;if(0===i){a.push(p,g);o.push(p,g)}a.push(f,m,b,_,A,y);this.#pe(p,g,f,m,b,_,A,y,4,o)}i.push({bezier:a,points:o})}return i}#pe(t,e,s,n,i,r,a,o,l,c){if(this.#ge(t,e,s,n,i,r,a,o))c.push(a,o);else{for(let h=1;h<l-1;h++){const d=h/l,u=1-d;let p=d*t+u*s,g=d*e+u*n,f=d*s+u*i,m=d*n+u*r;p=d*p+u*f;g=d*g+u*m;f=d*f+u*(d*i+u*a);m=d*m+u*(d*r+u*o);p=d*p+u*f;g=d*g+u*m;c.push(p,g)}c.push(a,o)}}#ge(t,e,s,n,i,r,a,o){const l=(3*s-2*t-a)**2,c=(3*n-2*e-o)**2,h=(3*i-t-2*a)**2,d=(3*r-e-2*o)**2;return Math.max(l,h)+Math.max(c,d)<=10}#fe(){let t=1/0,e=-1/0,s=1/0,i=-1/0;for(const r of this.paths)for(const[a,o,l,c]of r){const r=n.Util.bezierBoundingBox(...a,...o,...l,...c);t=Math.min(t,r[0]);s=Math.min(s,r[1]);e=Math.max(e,r[2]);i=Math.max(i,r[3])}return[t,s,e,i]}#de(){return this.#qt?Math.ceil(this.thickness*this.parent.scaleFactor):0}#Kt(t=!1){if(this.isEmpty())return;if(!this.#qt){this.#Jt();return}const e=this.#fe(),s=this.#de();this.#Lt=Math.max(o,e[2]-e[0]);this.#Ot=Math.max(o,e[3]-e[1]);const n=Math.ceil(s+this.#Lt*this.scaleFactor),i=Math.ceil(s+this.#Ot*this.scaleFactor),[r,a]=this.parent.viewportBaseDimensions;this.width=n/r;this.height=i/a;this.#It=n/i;this.#ce();const l=this.translationX,c=this.translationY;this.translationX=-e[0];this.translationY=-e[1];this.#te();this.#Jt();this.#Gt=n;this.#Vt=i;this.setDims(n,i);const h=t?s/this.scaleFactor/2:0;this.translate(l-this.translationX-h,c-this.translationY-h)}#ce(){const{style:t}=this.div;if(this.#It>=1){t.minHeight="16px";t.minWidth=`${Math.round(this.#It*o)}px`}else{t.minWidth="16px";t.minHeight=`${Math.round(o/this.#It)}px`}}static deserialize(t,e){const s=super.deserialize(t,e);s.thickness=t.thickness;s.color=n.Util.makeHexColor(...t.color);s.opacity=t.opacity;const[i,r]=e.pageDimensions,a=s.width*i,o=s.height*r,l=e.scaleFactor,c=t.thickness/2;s.#It=a/o;s.#qt=!0;s.#Gt=Math.round(a);s.#Vt=Math.round(o);for(const{bezier:e}of t.paths){const t=[];s.paths.push(t);let n=l*(e[0]-c),i=l*(o-e[1]-c);for(let s=2,r=e.length;s<r;s+=6){const r=l*(e[s]-c),a=l*(o-e[s+1]-c),h=l*(e[s+2]-c),d=l*(o-e[s+3]-c),u=l*(e[s+4]-c),p=l*(o-e[s+5]-c);t.push([[n,i],[r,a],[h,d],[u,p]]);n=u;i=p}const r=this.#ae(t);s.bezierPath2D.push(r)}const h=s.#fe();s.#Lt=h[2]-h[0];s.#Ot=h[3]-h[1];s.#he(a,o);return s}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=this.rotation%180==0?t[3]-t[1]:t[2]-t[0],s=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:this.#ue(this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,e),pageIndex:this.parent.pageIndex,rect:t,rotation:this.rotation}}}e.InkEditor=InkEditor},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.fitCurve=void 0;const n=s(26);e.fitCurve=n},t=>{function fitCubic(t,e,s,n,i){var r,a,o,l,c,h,d,u,p,g,f,m,b;if(2===t.length){m=maths.vectorLen(maths.subtract(t[0],t[1]))/3;return[r=[t[0],maths.addArrays(t[0],maths.mulItems(e,m)),maths.addArrays(t[1],maths.mulItems(s,m)),t[1]]]}a=function chordLengthParameterize(t){var e,s,n,i=[];t.forEach(((t,r)=>{e=r?s+maths.vectorLen(maths.subtract(t,n)):0;i.push(e);s=e;n=t}));return i=i.map((t=>t/s))}(t);[r,l,h]=generateAndReport(t,a,a,e,s,i);if(0===l||l<n)return[r];if(l<n*n){o=a;c=l;d=h;for(b=0;b<20;b++){o=reparameterize(r,t,o);[r,l,h]=generateAndReport(t,a,o,e,s,i);if(l<n)return[r];if(h===d){let t=l/c;if(t>.9999&&t<1.0001)break}c=l;d=h}}f=[];if((u=maths.subtract(t[h-1],t[h+1])).every((t=>0===t))){u=maths.subtract(t[h-1],t[h]);[u[0],u[1]]=[-u[1],u[0]]}p=maths.normalize(u);g=maths.mulItems(p,-1);return f=(f=f.concat(fitCubic(t.slice(0,h+1),e,p,n,i))).concat(fitCubic(t.slice(h),g,s,n,i))}function generateAndReport(t,e,s,n,i,r){var a,o,l;a=function generateBezier(t,e,s,n){var i,r,a,o,l,c,h,d,u,p,g,f,m,b,_,A,y,v=t[0],S=t[t.length-1];i=[v,null,null,S];r=maths.zeros_Xx2x2(e.length);for(m=0,b=e.length;m<b;m++){y=1-(A=e[m]);(a=r[m])[0]=maths.mulItems(s,3*A*(y*y));a[1]=maths.mulItems(n,3*y*(A*A))}o=[[0,0],[0,0]];l=[0,0];for(m=0,b=t.length;m<b;m++){A=e[m];a=r[m];o[0][0]+=maths.dot(a[0],a[0]);o[0][1]+=maths.dot(a[0],a[1]);o[1][0]+=maths.dot(a[0],a[1]);o[1][1]+=maths.dot(a[1],a[1]);_=maths.subtract(t[m],bezier.q([v,v,S,S],A));l[0]+=maths.dot(a[0],_);l[1]+=maths.dot(a[1],_)}c=o[0][0]*o[1][1]-o[1][0]*o[0][1];h=o[0][0]*l[1]-o[1][0]*l[0];d=l[0]*o[1][1]-l[1]*o[0][1];u=0===c?0:d/c;p=0===c?0:h/c;f=maths.vectorLen(maths.subtract(v,S));if(u<(g=1e-6*f)||p<g){i[1]=maths.addArrays(v,maths.mulItems(s,f/3));i[2]=maths.addArrays(S,maths.mulItems(n,f/3))}else{i[1]=maths.addArrays(v,maths.mulItems(s,u));i[2]=maths.addArrays(S,maths.mulItems(n,p))}return i}(t,s,n,i);[o,l]=function computeMaxError(t,e,s){var n,i,r,a,o,l,c,h;i=0;r=Math.floor(t.length/2);const d=mapTtoRelativeDistances(e,10);for(o=0,l=t.length;o<l;o++){c=t[o];h=find_t(e,s[o],d,10);if((n=(a=maths.subtract(bezier.q(e,h),c))[0]*a[0]+a[1]*a[1])>i){i=n;r=o}}return[i,r]}(t,a,e);r&&r({bez:a,points:t,params:e,maxErr:o,maxPoint:l});return[a,o,l]}function reparameterize(t,e,s){return s.map(((s,n)=>newtonRaphsonRootFind(t,e[n],s)))}function newtonRaphsonRootFind(t,e,s){var n=maths.subtract(bezier.q(t,s),e),i=bezier.qprime(t,s),r=maths.mulMatrix(n,i),a=maths.sum(maths.squareItems(i))+2*maths.mulMatrix(n,bezier.qprimeprime(t,s));return 0===a?s:s-r/a}var mapTtoRelativeDistances=function(t,e){for(var s,n=[0],i=t[0],r=0,a=1;a<=e;a++){s=bezier.q(t,a/e);r+=maths.vectorLen(maths.subtract(s,i));n.push(r);i=s}return n=n.map((t=>t/r))};function find_t(t,e,s,n){if(e<0)return 0;if(e>1)return 1;for(var i,r,a,o,l=1;l<=n;l++)if(e<=s[l]){a=(l-1)/n;r=l/n;o=(e-(i=s[l-1]))/(s[l]-i)*(r-a)+a;break}return o}function createTangent(t,e){return maths.normalize(maths.subtract(t,e))}class maths{static zeros_Xx2x2(t){for(var e=[];t--;)e.push([0,0]);return e}static mulItems(t,e){return t.map((t=>t*e))}static mulMatrix(t,e){return t.reduce(((t,s,n)=>t+s*e[n]),0)}static subtract(t,e){return t.map(((t,s)=>t-e[s]))}static addArrays(t,e){return t.map(((t,s)=>t+e[s]))}static addItems(t,e){return t.map((t=>t+e))}static sum(t){return t.reduce(((t,e)=>t+e))}static dot(t,e){return maths.mulMatrix(t,e)}static vectorLen(t){return Math.hypot(...t)}static divItems(t,e){return t.map((t=>t/e))}static squareItems(t){return t.map((t=>t*t))}static normalize(t){return this.divItems(t,this.vectorLen(t))}}class bezier{static q(t,e){var s=1-e,n=maths.mulItems(t[0],s*s*s),i=maths.mulItems(t[1],3*s*s*e),r=maths.mulItems(t[2],3*s*e*e),a=maths.mulItems(t[3],e*e*e);return maths.addArrays(maths.addArrays(n,i),maths.addArrays(r,a))}static qprime(t,e){var s=1-e,n=maths.mulItems(maths.subtract(t[1],t[0]),3*s*s),i=maths.mulItems(maths.subtract(t[2],t[1]),6*s*e),r=maths.mulItems(maths.subtract(t[3],t[2]),3*e*e);return maths.addArrays(maths.addArrays(n,i),r)}static qprimeprime(t,e){return maths.addArrays(maths.mulItems(maths.addArrays(maths.subtract(t[2],maths.mulItems(t[1],2)),t[0]),6*(1-e)),maths.mulItems(maths.addArrays(maths.subtract(t[3],maths.mulItems(t[2],2)),t[1]),6*e))}}t.exports=function fitCurve(t,e,s){if(!Array.isArray(t))throw new TypeError("First argument should be an array");t.forEach((e=>{if(!Array.isArray(e)||e.some((t=>"number"!=typeof t))||e.length!==t[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}));if((t=t.filter(((e,s)=>0===s||!e.every(((e,n)=>e===t[s-1][n]))))).length<2)return[];const n=t.length,i=createTangent(t[1],t[0]),r=createTangent(t[n-2],t[n-1]);return fitCubic(t,i,r,e,s)};t.exports.fitCubic=fitCubic;t.exports.createTangent=createTangent},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.AnnotationLayer=void 0;var n=s(1),i=s(4),r=s(7),a=s(28),o=s(29);const l=1e3,c=new WeakSet;function getRectDims(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class AnnotationElementFactory{static create(t){switch(t.data.annotationType){case n.AnnotationType.LINK:return new LinkAnnotationElement(t);case n.AnnotationType.TEXT:return new TextAnnotationElement(t);case n.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(t);case"Btn":return t.data.radioButton?new RadioButtonWidgetAnnotationElement(t):t.data.checkBox?new CheckboxWidgetAnnotationElement(t):new PushButtonWidgetAnnotationElement(t);case"Ch":return new ChoiceWidgetAnnotationElement(t)}return new WidgetAnnotationElement(t);case n.AnnotationType.POPUP:return new PopupAnnotationElement(t);case n.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(t);case n.AnnotationType.LINE:return new LineAnnotationElement(t);case n.AnnotationType.SQUARE:return new SquareAnnotationElement(t);case n.AnnotationType.CIRCLE:return new CircleAnnotationElement(t);case n.AnnotationType.POLYLINE:return new PolylineAnnotationElement(t);case n.AnnotationType.CARET:return new CaretAnnotationElement(t);case n.AnnotationType.INK:return new InkAnnotationElement(t);case n.AnnotationType.POLYGON:return new PolygonAnnotationElement(t);case n.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(t);case n.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(t);case n.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(t);case n.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(t);case n.AnnotationType.STAMP:return new StampAnnotationElement(t);case n.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(t);default:return new AnnotationElement(t)}}}class AnnotationElement{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=e;this.data=t.data;this.layer=t.layer;this.page=t.page;this.viewport=t.viewport;this.linkService=t.linkService;this.downloadManager=t.downloadManager;this.imageResourcesPath=t.imageResourcesPath;this.renderForms=t.renderForms;this.svgFactory=t.svgFactory;this.annotationStorage=t.annotationStorage;this.enableScripting=t.enableScripting;this.hasJSActions=t.hasJSActions;this._fieldObjects=t.fieldObjects;this._mouseState=t.mouseState;e&&(this.container=this._createContainer(s));n&&(this.quadrilaterals=this._createQuadrilaterals(s))}_createContainer(t=!1){const e=this.data,s=this.page,i=this.viewport,r=document.createElement("section"),{width:a,height:o}=getRectDims(e.rect),[l,c,h,d]=i.viewBox,u=h-l,p=d-c;r.setAttribute("data-annotation-id",e.id);const g=n.Util.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]);if(!t&&e.borderStyle.width>0){r.style.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,s=e.borderStyle.verticalCornerRadius;if(t>0||s>0){const e=`calc(${t}px * var(--scale-factor)) / calc(${s}px * var(--scale-factor))`;r.style.borderRadius=e}switch(e.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:r.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:r.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:r.style.borderBottomStyle="solid"}const i=e.borderColor||null;i?r.style.borderColor=n.Util.makeHexColor(0|i[0],0|i[1],0|i[2]):r.style.borderWidth=0}r.style.left=100*(g[0]-l)/u+"%";r.style.top=100*(g[1]-c)/p+"%";const{rotation:f}=e;if(e.hasOwnCanvas||0===f){r.style.width=100*a/u+"%";r.style.height=100*o/p+"%"}else this.setRotation(f,r);return r}setRotation(t,e=this.container){const[s,n,i,r]=this.viewport.viewBox,a=i-s,o=r-n,{width:l,height:c}=getRectDims(this.data.rect);let h,d;if(t%180==0){h=100*l/a;d=100*c/o}else{h=100*c/a;d=100*l/o}e.style.width=`${h}%`;e.style.height=`${d}%`;e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const setColor=(t,e,s)=>{const n=s.detail[t];s.target.style[e]=a.ColorConverters[`${n[0]}_HTML`](n.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:t=>{const e=t.detail.display%2==1;this.container.style.visibility=e?"hidden":"visible";this.annotationStorage.setValue(this.data.id,{hidden:e,print:0===t.detail.display||3===t.detail.display})},print:t=>{this.annotationStorage.setValue(this.data.id,{print:t.detail.print})},hidden:t=>{this.container.style.visibility=t.detail.hidden?"hidden":"visible";this.annotationStorage.setValue(this.data.id,{hidden:t.detail.hidden})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{setColor("bgColor","backgroundColor",t)},fillColor:t=>{setColor("fillColor","backgroundColor",t)},fgColor:t=>{setColor("fgColor","color",t)},textColor:t=>{setColor("textColor","color",t)},borderColor:t=>{setColor("borderColor","borderColor",t)},strokeColor:t=>{setColor("strokeColor","borderColor",t)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e);this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const n of Object.keys(e.detail)){const i=t[n]||s[n];i&&i(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[n,i]of Object.entries(e)){const r=s[n];if(r){r({detail:i,target:t});delete e[n]}}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const e=[],s=this.data.rect;for(const s of this.data.quadPoints){this.data.rect=[s[2].x,s[2].y,s[1].x,s[1].y];e.push(this._createContainer(t))}this.data.rect=s;return e}_createPopup(t,e){let s=this.container;if(this.quadrilaterals){t=t||this.quadrilaterals;s=this.quadrilaterals[0]}if(!t){(t=document.createElement("div")).className="popupTriggerArea";s.append(t)}const n=new PopupElement({container:s,trigger:t,color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,hideWrapper:!0}).render();n.style.left="100%";s.append(n)}_renderQuadrilaterals(t){for(const e of this.quadrilaterals)e.className=t;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:t,id:r,exportValues:a}of i){if(-1===t)continue;if(r===e)continue;const i="string"==typeof a?a:null,o=document.querySelector(`[data-element-id="${r}"]`);!o||c.has(o)?s.push({id:r,exportValue:i,domElement:o}):(0,n.warn)(`_getElementsByName - element not allowed: ${r}`)}return s}for(const n of document.getElementsByName(t)){const{id:t,exportValue:i}=n;t!==e&&(c.has(n)&&s.push({id:t,exportValue:i,domElement:n}))}return s}static get platform(){const t="undefined"!=typeof navigator?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class LinkAnnotationElement extends AnnotationElement{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0});this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let n=!1;if(t.url){e.addLinkAttributes(s,t.url,t.newWindow);n=!0}else if(t.action){this._bindNamedAction(s,t.action);n=!0}else if(t.dest){this._bindLink(s,t.dest);n=!0}else{if(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(s,t);n=!0}if(t.resetForm){this._bindResetFormAction(s,t.resetForm);n=!0}else if(this.isTooltipOnly&&!n){this._bindLink(s,"");n=!0}}if(this.quadrilaterals)return this._renderQuadrilaterals("linkAnnotation").map(((t,e)=>{const n=0===e?s:s.cloneNode();t.append(n);return t}));this.container.className="linkAnnotation";n&&this.container.append(s);return this.container}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e);t.onclick=()=>{e&&this.linkService.goToDestination(e);return!1};(e||""===e)&&(t.className="internalLink")}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl("");t.onclick=()=>{this.linkService.executeNamedAction(e);return!1};t.className="internalLink"}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const i=s.get(n);i&&(t[i]=()=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}});return!1})}t.onclick||(t.onclick=()=>!1);t.className="internalLink"}_bindResetFormAction(t,e){const s=t.onclick;s||(t.href=this.linkService.getAnchorUrl(""));t.className="internalLink";if(this._fieldObjects)t.onclick=()=>{s&&s();const{fields:t,refs:i,include:r}=e,a=[];if(0!==t.length||0!==i.length){const e=new Set(i);for(const s of t){const t=this._fieldObjects[s]||[];for(const{id:s}of t)e.add(s)}for(const t of Object.values(this._fieldObjects))for(const s of t)e.has(s.id)===r&&a.push(s)}else for(const t of Object.values(this._fieldObjects))a.push(...t);const o=this.annotationStorage,l=[];for(const t of a){const{id:e}=t;l.push(e);switch(t.type){case"text":{const s=t.defaultValue||"";o.setValue(e,{value:s});break}case"checkbox":case"radiobutton":{const s=t.defaultValue===t.exportValues;o.setValue(e,{value:s});break}case"combobox":case"listbox":{const s=t.defaultValue||"";o.setValue(e,{value:s});break}default:continue}const s=document.querySelector(`[data-element-id="${e}"]`);s&&(c.has(s)?s.dispatchEvent(new Event("resetform")):(0,n.warn)(`_bindResetFormAction - element not allowed: ${e}`))}this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}});return!1};else{(0,n.warn)(\'_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.\');s||(t.onclick=()=>!1)}}}class TextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";t.alt="[{{type}} Annotation]";t.dataset.l10nId="text_annotation_type";t.dataset.l10nArgs=JSON.stringify({type:this.data.name});this.data.hasPopup||this._createPopup(t,this.data);this.container.append(t);return this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){this.data.alternativeText&&(this.container.title=this.data.alternativeText);return this.container}_getKeyModifier(t){const{isWin:e,isMac:s}=AnnotationElement.platform;return e&&t.ctrlKey||s&&t.metaKey}_setEventListener(t,e,s,n){e.includes("mouse")?t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(t)}})}))}_setEventListeners(t,e,s){for(const[n,i]of e)("Action"===i||this.data.actions?.[i])&&this._setEventListener(t,n,i,s)}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":n.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,r=t.style;let a;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]),e=t/(Math.round(t/(n.LINE_FACTOR*i))||1);a=Math.min(i,Math.round(e/n.LINE_FACTOR))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]);a=Math.min(i,Math.round(t/n.LINE_FACTOR))}r.fontSize=`calc(${a}px * var(--scale-factor))`;r.color=n.Util.makeHexColor(s[0],s[1],s[2]);null!==this.data.textAlignment&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required");t.setAttribute("aria-required",e)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,s,n){const i=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id)){r.domElement&&(r.domElement[e]=s);i.setValue(r.id,{[n]:s})}}render(){const t=this.annotationStorage,e=this.data.id;this.container.className="textWidgetAnnotation";let s=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue}),i=n.formattedValue||n.value||"",r={userValue:i,formattedValue:null,valueOnFocus:""};if(this.data.multiLine){s=document.createElement("textarea");s.textContent=i;this.data.doNotScroll&&(s.style.overflowY="hidden")}else{s=document.createElement("input");s.type="text";s.setAttribute("value",i);this.data.doNotScroll&&(s.style.overflowX="hidden")}c.add(s);s.setAttribute("data-element-id",e);s.disabled=this.data.readOnly;s.name=this.data.fieldName;s.tabIndex=l;this._setRequired(s,this.data.required);s.addEventListener("input",(n=>{t.setValue(e,{value:n.target.value});this.setPropertyOnSiblings(s,"value",n.target.value,"value")}));s.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";s.value=r.userValue=e;r.formattedValue=null}));let blurListener=t=>{const{formattedValue:e}=r;null!=e&&(t.target.value=e);t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",(t=>{r.userValue&&(t.target.value=r.userValue);r.valueOnFocus=t.target.value}));s.addEventListener("updatefromsandbox",(s=>{const n={value(s){r.userValue=s.detail.value??"";t.setValue(e,{value:r.userValue.toString()});s.target.value=r.userValue},formattedValue(s){const{formattedValue:n}=s.detail;r.formattedValue=n;null!=n&&s.target!==document.activeElement&&(s.target.value=n);t.setValue(e,{formattedValue:n})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)}};this._dispatchEventFromSandbox(n,s)}));s.addEventListener("keydown",(t=>{let s=-1;"Escape"===t.key?s=0:"Enter"===t.key?s=2:"Tab"===t.key&&(s=3);if(-1===s)return;const{value:n}=t.target;if(r.valueOnFocus!==n){r.userValue=n;this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,willCommit:!0,commitKey:s,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})}}));const n=blurListener;blurListener=null;s.addEventListener("blur",(t=>{const{value:s}=t.target;r.userValue=s;this._mouseState.isDown&&r.valueOnFocus!==s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}});n(t)}));this.data.actions?.Keystroke&&s.addEventListener("beforeinput",(t=>{const{data:s,target:n}=t,{value:i,selectionStart:r,selectionEnd:a}=n;let o=r,l=a;switch(t.inputType){case"deleteWordBackward":{const t=i.substring(0,r).match(/\\w*[^\\w]*$/);t&&(o-=t[0].length);break}case"deleteWordForward":{const t=i.substring(r).match(/^[^\\w]*\\w*/);t&&(l+=t[0].length);break}case"deleteContentBackward":r===a&&(o-=1);break;case"deleteContentForward":r===a&&(l+=1)}t.preventDefault();this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,change:s||"",willCommit:!1,selStart:o,selEnd:l}})}));this._setEventListeners(s,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}blurListener&&s.addEventListener("blur",blurListener);null!==this.data.maxLen&&(s.maxLength=this.data.maxLen);if(this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;s.classList.add("comb");s.style.letterSpacing=`calc(${t}px * var(--scale-factor) - 1ch)`}}else{s=document.createElement("div");s.textContent=this.data.fieldValue;s.style.verticalAlign="middle";s.style.display="table-cell"}this._setTextStyle(s);this._setBackgroundColor(s);this._setDefaultPropertiesFromJS(s);this.container.append(s);return this.container}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;if("string"==typeof n){n="Off"!==n;t.setValue(s,{value:n})}this.container.className="buttonWidgetAnnotation checkBox";const i=document.createElement("input");c.add(i);i.setAttribute("data-element-id",s);i.disabled=e.readOnly;this._setRequired(i,this.data.required);i.type="checkbox";i.name=e.fieldName;n&&i.setAttribute("checked",!0);i.setAttribute("exportValue",e.exportValue);i.tabIndex=l;i.addEventListener("change",(n=>{const{name:i,checked:r}=n.target;for(const n of this._getElementsByName(i,s)){const s=r&&n.exportValue===e.exportValue;n.domElement&&(n.domElement.checked=s);t.setValue(n.id,{value:s})}t.setValue(s,{value:r})}));i.addEventListener("resetform",(t=>{const s=e.defaultFieldValue||"Off";t.target.checked=s===e.exportValue}));if(this.enableScripting&&this.hasJSActions){i.addEventListener("updatefromsandbox",(e=>{const n={value(e){e.target.checked="Off"!==e.detail.value;t.setValue(s,{value:e.target.checked})}};this._dispatchEventFromSandbox(n,e)}));this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}this._setBackgroundColor(i);this._setDefaultPropertiesFromJS(i);this.container.append(i);return this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof n){n=n!==e.buttonValue;t.setValue(s,{value:n})}const i=document.createElement("input");c.add(i);i.setAttribute("data-element-id",s);i.disabled=e.readOnly;this._setRequired(i,this.data.required);i.type="radio";i.name=e.fieldName;n&&i.setAttribute("checked",!0);i.tabIndex=l;i.addEventListener("change",(e=>{const{name:n,checked:i}=e.target;for(const e of this._getElementsByName(n,s))t.setValue(e.id,{value:!1});t.setValue(s,{value:i})}));i.addEventListener("resetform",(t=>{const s=e.defaultFieldValue;t.target.checked=null!=s&&s===e.buttonValue}));if(this.enableScripting&&this.hasJSActions){const n=e.buttonValue;i.addEventListener("updatefromsandbox",(e=>{const i={value:e=>{const i=n===e.detail.value;for(const n of this._getElementsByName(e.target.name)){const e=i&&n.id===s;n.domElement&&(n.domElement.checked=e);t.setValue(n.id,{value:e})}}};this._dispatchEventFromSandbox(i,e)}));this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}this._setBackgroundColor(i);this._setDefaultPropertiesFromJS(i);this.container.append(i);return this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.className="buttonWidgetAnnotation pushButton";this.data.alternativeText&&(t.title=this.data.alternativeText);const e=t.lastChild;if(this.enableScripting&&this.hasJSActions&&e){this._setDefaultPropertiesFromJS(e);e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))}return t}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");c.add(n);n.setAttribute("data-element-id",e);n.disabled=this.data.readOnly;this._setRequired(n,this.data.required);n.name=this.data.fieldName;n.tabIndex=l;let i=this.data.combo&&this.data.options.length>0;if(!this.data.combo){n.size=this.data.options.length;this.data.multiSelect&&(n.multiple=!0)}n.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const t of n.options)t.selected=t.value===e}));for(const t of this.data.options){const e=document.createElement("option");e.textContent=t.displayValue;e.value=t.exportValue;if(s.value.includes(t.exportValue)){e.setAttribute("selected",!0);i=!1}n.append(e)}let r=null;if(i){const t=document.createElement("option");t.value=" ";t.setAttribute("hidden",!0);t.setAttribute("selected",!0);n.prepend(t);r=()=>{t.remove();n.removeEventListener("input",r);r=null};n.addEventListener("input",r)}const getValue=(t,e)=>{const s=e?"value":"textContent",n=t.target.options;return t.target.multiple?Array.prototype.filter.call(n,(t=>t.selected)).map((t=>t[s])):-1===n.selectedIndex?null:n[n.selectedIndex][s]},getItems=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};if(this.enableScripting&&this.hasJSActions){n.addEventListener("updatefromsandbox",(s=>{const i={value(s){r?.();const i=s.detail.value,a=new Set(Array.isArray(i)?i:[i]);for(const t of n.options)t.selected=a.has(t.value);t.setValue(e,{value:getValue(s,!0)})},multipleSelection(t){n.multiple=!0},remove(s){const i=n.options,r=s.detail.remove;i[r].selected=!1;n.remove(r);if(i.length>0){-1===Array.prototype.findIndex.call(i,(t=>t.selected))&&(i[0].selected=!0)}t.setValue(e,{value:getValue(s,!0),items:getItems(s)})},clear(s){for(;0!==n.length;)n.remove(0);t.setValue(e,{value:null,items:[]})},insert(s){const{index:i,displayValue:r,exportValue:a}=s.detail.insert,o=n.children[i],l=document.createElement("option");l.textContent=r;l.value=a;o?o.before(l):n.append(l);t.setValue(e,{value:getValue(s,!0),items:getItems(s)})},items(s){const{items:i}=s.detail;for(;0!==n.length;)n.remove(0);for(const t of i){const{displayValue:e,exportValue:s}=t,i=document.createElement("option");i.textContent=e;i.value=s;n.append(i)}n.options.length>0&&(n.options[0].selected=!0);t.setValue(e,{value:getValue(s,!0),items:getItems(s)})},indices(s){const n=new Set(s.detail.indices);for(const t of s.target.options)t.selected=n.has(t.index);t.setValue(e,{value:getValue(s,!0)})},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(i,s)}));n.addEventListener("input",(s=>{const n=getValue(s,!0),i=getValue(s,!1);t.setValue(e,{value:n});this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,changeEx:n,willCommit:!0,commitKey:1,keyDown:!1}})}));this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(t=>t.target.checked))}else n.addEventListener("input",(function(s){t.setValue(e,{value:getValue(s,!0)})}));this.data.combo&&this._setTextStyle(n);this._setBackgroundColor(n);this._setDefaultPropertiesFromJS(n);this.container.append(n);return this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="popupAnnotation";if(["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const t=`[data-annotation-id="${this.data.parentId}"]`,e=this.layer.querySelectorAll(t);if(0===e.length)return this.container;const s=new PopupElement({container:this.container,trigger:Array.from(e),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),i=this.page,r=n.Util.normalizeRect([this.data.parentRect[0],i.view[3]-this.data.parentRect[1]+i.view[1],this.data.parentRect[2],i.view[3]-this.data.parentRect[3]+i.view[1]]),a=r[0]+this.data.parentRect[2]-this.data.parentRect[0],o=r[1],[l,c,h,d]=this.viewport.viewBox,u=h-l,p=d-c;this.container.style.left=100*(a-l)/u+"%";this.container.style.top=100*(o-c)/p+"%";this.container.append(s.render());return this.container}}class PopupElement{constructor(t){this.container=t.container;this.trigger=t.trigger;this.color=t.color;this.titleObj=t.titleObj;this.modificationDate=t.modificationDate;this.contentsObj=t.contentsObj;this.richText=t.richText;this.hideWrapper=t.hideWrapper||!1;this.pinned=!1}render(){const t=document.createElement("div");t.className="popupWrapper";this.hideElement=this.hideWrapper?t:this.container;this.hideElement.hidden=!0;const e=document.createElement("div");e.className="popup";const s=this.color;if(s){const t=.7*(255-s[0])+s[0],i=.7*(255-s[1])+s[1],r=.7*(255-s[2])+s[2];e.style.backgroundColor=n.Util.makeHexColor(0|t,0|i,0|r)}const r=document.createElement("h1");r.dir=this.titleObj.dir;r.textContent=this.titleObj.str;e.append(r);const a=i.PDFDateString.toDateObject(this.modificationDate);if(a){const t=document.createElement("span");t.className="popupDate";t.textContent="{{date}}, {{time}}";t.dataset.l10nId="annotation_date_string";t.dataset.l10nArgs=JSON.stringify({date:a.toLocaleDateString(),time:a.toLocaleTimeString()});e.append(t)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const t=this._formatContents(this.contentsObj);e.append(t)}else{o.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:e});e.lastChild.className="richText popupContent"}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const t of this.trigger){t.addEventListener("click",this._toggle.bind(this));t.addEventListener("mouseover",this._show.bind(this,!1));t.addEventListener("mouseout",this._hide.bind(this,!1))}e.addEventListener("click",this._hide.bind(this,!0));t.append(e);return t}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.className="popupContent";s.dir=e;const n=t.split(/(?:\\r\\n?|\\n)/);for(let t=0,e=n.length;t<e;++t){const i=n[t];s.append(document.createTextNode(i));t<e-1&&s.append(document.createElement("br"))}return s}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0);if(this.hideElement.hidden){this.hideElement.hidden=!1;this.container.style.zIndex+=1}}_hide(t=!0){t&&(this.pinned=!1);if(!this.hideElement.hidden&&!this.pinned){this.hideElement.hidden=!0;this.container.style.zIndex-=1}}}class FreeTextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="freeTextAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}class LineAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:e,height:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s,!0),i=this.svgFactory.createElement("svg:line");i.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]);i.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]);i.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]);i.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]);i.setAttribute("stroke-width",t.borderStyle.width||1);i.setAttribute("stroke","transparent");i.setAttribute("fill","transparent");n.append(i);this.container.append(n);this._createPopup(i,t);return this.container}}class SquareAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:e,height:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s,!0),i=t.borderStyle.width,r=this.svgFactory.createElement("svg:rect");r.setAttribute("x",i/2);r.setAttribute("y",i/2);r.setAttribute("width",e-i);r.setAttribute("height",s-i);r.setAttribute("stroke-width",i||1);r.setAttribute("stroke","transparent");r.setAttribute("fill","transparent");n.append(r);this.container.append(n);this._createPopup(r,t);return this.container}}class CircleAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:e,height:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s,!0),i=t.borderStyle.width,r=this.svgFactory.createElement("svg:ellipse");r.setAttribute("cx",e/2);r.setAttribute("cy",s/2);r.setAttribute("rx",e/2-i/2);r.setAttribute("ry",s/2-i/2);r.setAttribute("stroke-width",i||1);r.setAttribute("stroke","transparent");r.setAttribute("fill","transparent");n.append(r);this.container.append(n);this._createPopup(r,t);return this.container}}class PolylineAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0});this.containerClassName="polylineAnnotation";this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:e,height:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s,!0);let i=[];for(const e of t.vertices){const s=e.x-t.rect[0],n=t.rect[3]-e.y;i.push(s+","+n)}i=i.join(" ");const r=this.svgFactory.createElement(this.svgElementName);r.setAttribute("points",i);r.setAttribute("stroke-width",t.borderStyle.width||1);r.setAttribute("stroke","transparent");r.setAttribute("fill","transparent");n.append(r);this.container.append(n);this._createPopup(r,t);return this.container}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(t){super(t);this.containerClassName="polygonAnnotation";this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="caretAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}class InkAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0});this.containerClassName="inkAnnotation";this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:e,height:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s,!0);for(const e of t.inkLists){let s=[];for(const n of e){const e=n.x-t.rect[0],i=t.rect[3]-n.y;s.push(`${e},${i}`)}s=s.join(" ");const i=this.svgFactory.createElement(this.svgElementName);i.setAttribute("points",s);i.setAttribute("stroke-width",t.borderStyle.width||1);i.setAttribute("stroke","transparent");i.setAttribute("fill","transparent");this._createPopup(i,t);n.append(i)}this.container.append(n);return this.container}}class HighlightAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("highlightAnnotation");this.container.className="highlightAnnotation";return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("underlineAnnotation");this.container.className="underlineAnnotation";return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("squigglyAnnotation");this.container.className="squigglyAnnotation";return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("strikeoutAnnotation");this.container.className="strikeoutAnnotation";return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="stampAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}class FileAttachmentAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0});const{filename:e,content:s}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(e);this.content=s;this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:e,content:s})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");t.className="popupTriggerArea";t.addEventListener("dblclick",this._download.bind(this));!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(t,this.data);this.container.append(t);return this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}e.AnnotationLayer=class AnnotationLayer{static render(t){const{annotations:e,div:s,viewport:a}=t;this.#me(s,a);const o=[],l=[];for(const t of e){if(!t)continue;if(t.annotationType===n.AnnotationType.POPUP){l.push(t);continue}const{width:e,height:s}=getRectDims(t.rect);e<=0||s<=0||o.push(t)}l.length&&o.push(...l);for(const e of o){const n=AnnotationElementFactory.create({data:e,layer:s,page:t.page,viewport:a,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new i.DOMSVGFactory,annotationStorage:t.annotationStorage||new r.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(n.isRenderable){const t=n.render();e.hidden&&(t.style.visibility="hidden");if(Array.isArray(t))for(const e of t)s.append(e);else n instanceof PopupAnnotationElement?s.prepend(t):s.append(t)}}this.#be(s,t.annotationCanvasMap)}static update(t){const{annotationCanvasMap:e,div:s,viewport:n}=t;this.#me(s,n);this.#be(s,e);s.hidden=!1}static#me(t,{width:e,height:s,rotation:n}){const{style:i}=t,r=n%180!=0,a=Math.floor(e)+"px",o=Math.floor(s)+"px";i.width=r?o:a;i.height=r?a:o;t.setAttribute("data-main-rotation",n)}static#be(t,e){if(e){for(const[s,n]of e){const e=t.querySelector(`[data-annotation-id="${s}"]`);if(!e)continue;const{firstChild:i}=e;i?"CANVAS"===i.nodeName?i.replaceWith(n):i.before(n):e.append(n)}e.clear()}}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.ColorConverters=void 0;function makeColorComp(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}e.ColorConverters=class ColorConverters{static CMYK_G([t,e,s,n]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_HTML([t]){const e=makeColorComp(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_HTML([t,e,s]){return`#${makeColorComp(t)}${makeColorComp(e)}${makeColorComp(s)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([t,e,s,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n),1-Math.min(1,e+n)]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const n=1-t,i=1-e,r=1-s;return["CMYK",n,i,r,Math.min(n,i,r)]}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.XfaLayer=void 0;var n=s(20);e.XfaLayer=class XfaLayer{static setupStorage(t,e,s,n,i){const r=n.getValue(e,{value:null});switch(s.name){case"textarea":null!==r.value&&(t.textContent=r.value);if("print"===i)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===s.attributes.type||"checkbox"===s.attributes.type){r.value===s.attributes.xfaOn?t.setAttribute("checked",!0):r.value===s.attributes.xfaOff&&t.removeAttribute("checked");if("print"===i)break;t.addEventListener("change",(t=>{n.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{null!==r.value&&t.setAttribute("value",r.value);if("print"===i)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==r.value)for(const t of s.children)t.attributes.value===r.value&&(t.attributes.selected=!0);t.addEventListener("input",(t=>{const s=t.target.options,i=-1===s.selectedIndex?"":s[s.selectedIndex].value;n.setValue(e,{value:i})}))}}static setAttributes({html:t,element:e,storage:s=null,intent:n,linkService:i}){const{attributes:r}=e,a=t instanceof HTMLAnchorElement;"radio"===r.type&&(r.name=`${r.name}-${n}`);for(const[e,s]of Object.entries(r))if(null!=s)switch(e){case"class":s.length&&t.setAttribute(e,s.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",s);break;case"style":Object.assign(t.style,s);break;case"textContent":t.textContent=s;break;default:(!a||"href"!==e&&"newWindow"!==e)&&t.setAttribute(e,s)}a&&i.addLinkAttributes(t,r.href,r.newWindow);s&&r.dataId&&this.setupStorage(t,r.dataId,e,s)}static render(t){const e=t.annotationStorage,s=t.linkService,i=t.xfaHtml,r=t.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:s});const o=[[i,-1,a]],l=t.div;l.append(a);if(t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=e}"richText"!==r&&l.setAttribute("class","xfaLayer xfaFont");const c=[];for(;o.length>0;){const[t,i,a]=o.at(-1);if(i+1===t.children.length){o.pop();continue}const l=t.children[++o.at(-1)[1]];if(null===l)continue;const{name:h}=l;if("#text"===h){const t=document.createTextNode(l.value);c.push(t);a.append(t);continue}let d;d=l?.attributes?.xmlns?document.createElementNS(l.attributes.xmlns,h):document.createElement(h);a.append(d);l.attributes&&this.setAttributes({html:d,element:l,storage:e,intent:r,linkService:s});if(l.children&&l.children.length>0)o.push([l,-1,d]);else if(l.value){const t=document.createTextNode(l.value);n.XfaText.shouldBuildText(h)&&c.push(t);d.append(t)}}for(const t of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e;t.div.hidden=!1}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.TextLayerRenderTask=void 0;e.renderTextLayer=function renderTextLayer(t){const e=new TextLayerRenderTask({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});e._render(t.timeout);return e};var n=s(1),i=s(4);const r=30,a=new Map,o=/^\\s+$/g;function appendText(t,e,s,i){const l=document.createElement("span"),c=t._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};t._textDivs.push(l);const h=n.Util.transform(t._viewport.transform,e.transform);let d=Math.atan2(h[1],h[0]);const u=s[e.fontName];u.vertical&&(d+=Math.PI/2);const p=Math.hypot(h[2],h[3]),g=p*function getAscent(t,e){const s=a.get(t);if(s)return s;e.save();e.font=`30px ${t}`;const n=e.measureText("");let i=n.fontBoundingBoxAscent,o=Math.abs(n.fontBoundingBoxDescent);if(i){e.restore();const s=i/(i+o);a.set(t,s);return s}e.strokeStyle="red";e.clearRect(0,0,r,r);e.strokeText("g",0,0);let l=e.getImageData(0,0,r,r).data;o=0;for(let t=l.length-1-3;t>=0;t-=4)if(l[t]>0){o=Math.ceil(t/4/r);break}e.clearRect(0,0,r,r);e.strokeText("A",0,r);l=e.getImageData(0,0,r,r).data;i=0;for(let t=0,e=l.length;t<e;t+=4)if(l[t]>0){i=r-Math.floor(t/4/r);break}e.restore();if(i){const e=i/(i+o);a.set(t,e);return e}a.set(t,.8);return.8}(u.fontFamily,i);let f,m;if(0===d){f=h[4];m=h[5]-g}else{f=h[4]+g*Math.sin(d);m=h[5]-g*Math.cos(d)}l.style.left=`${f}px`;l.style.top=`${m}px`;l.style.fontSize=`${p}px`;l.style.fontFamily=u.fontFamily;c.fontSize=p;l.setAttribute("role","presentation");l.textContent=e.str;l.dir=e.dir;t._fontInspectorEnabled&&(l.dataset.fontName=e.fontName);0!==d&&(c.angle=d*(180/Math.PI));let b=!1;if(e.str.length>1||t._enhanceTextSelection&&o.test(e.str))b=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),s=Math.abs(e.transform[3]);t!==s&&Math.max(t,s)/Math.min(t,s)>1.5&&(b=!0)}b&&(u.vertical?c.canvasWidth=e.height*t._viewport.scale:c.canvasWidth=e.width*t._viewport.scale);t._textDivProperties.set(l,c);t._textContentStream&&t._layoutText(l);if(t._enhanceTextSelection&&c.hasText){let s=1,i=0;if(0!==d){s=Math.cos(d);i=Math.sin(d)}const r=(u.vertical?e.height:e.width)*t._viewport.scale,a=p;let o,c;if(0!==d){o=[s,i,-i,s,f,m];c=n.Util.getAxialAlignedBoundingBox([0,0,r,a],o)}else c=[f,m,f+r,m+a];t._bounds.push({left:c[0],top:c[1],right:c[2],bottom:c[3],div:l,size:[r,a],m:o})}}function render(t){if(t._canceled)return;const e=t._textDivs,s=t._capability,n=e.length;if(n>1e5){t._renderingDone=!0;s.resolve()}else{if(!t._textContentStream)for(let s=0;s<n;s++)t._layoutText(e[s]);t._renderingDone=!0;s.resolve()}}function findPositiveMin(t,e,s){let n=0;for(let i=0;i<s;i++){const s=t[e++];s>0&&(n=n?Math.min(s,n):s)}return n}function expand(t){const e=t._bounds,s=t._viewport,i=function expandBounds(t,e,s){const n=s.map((function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}}));expandBoundsLTR(t,n);const i=new Array(s.length);for(const t of n){const e=t.index;i[e]={left:t.x1New,top:0,right:t.x2New,bottom:0}}s.map((function(e,s){const r=i[s],a=n[s];a.x1=e.top;a.y1=t-r.right;a.x2=e.bottom;a.y2=t-r.left;a.index=s;a.x1New=void 0;a.x2New=void 0}));expandBoundsLTR(e,n);for(const t of n){const e=t.index;i[e].top=t.x1New;i[e].bottom=t.x2New}return i}(s.width,s.height,e);for(let s=0;s<i.length;s++){const r=e[s].div,a=t._textDivProperties.get(r);if(0===a.angle){a.paddingLeft=e[s].left-i[s].left;a.paddingTop=e[s].top-i[s].top;a.paddingRight=i[s].right-e[s].right;a.paddingBottom=i[s].bottom-e[s].bottom;t._textDivProperties.set(r,a);continue}const o=i[s],l=e[s],c=l.m,h=c[0],d=c[1],u=[[0,0],[0,l.size[1]],[l.size[0],0],l.size],p=new Float64Array(64);for(let t=0,e=u.length;t<e;t++){const e=n.Util.applyTransform(u[t],c);p[t+0]=h&&(o.left-e[0])/h;p[t+4]=d&&(o.top-e[1])/d;p[t+8]=h&&(o.right-e[0])/h;p[t+12]=d&&(o.bottom-e[1])/d;p[t+16]=d&&(o.left-e[0])/-d;p[t+20]=h&&(o.top-e[1])/h;p[t+24]=d&&(o.right-e[0])/-d;p[t+28]=h&&(o.bottom-e[1])/h;p[t+32]=h&&(o.left-e[0])/-h;p[t+36]=d&&(o.top-e[1])/-d;p[t+40]=h&&(o.right-e[0])/-h;p[t+44]=d&&(o.bottom-e[1])/-d;p[t+48]=d&&(o.left-e[0])/d;p[t+52]=h&&(o.top-e[1])/-h;p[t+56]=d&&(o.right-e[0])/d;p[t+60]=h&&(o.bottom-e[1])/-h}const g=1+Math.min(Math.abs(h),Math.abs(d));a.paddingLeft=findPositiveMin(p,32,16)/g;a.paddingTop=findPositiveMin(p,48,16)/g;a.paddingRight=findPositiveMin(p,0,16)/g;a.paddingBottom=findPositiveMin(p,16,16)/g;t._textDivProperties.set(r,a)}}function expandBoundsLTR(t,e){e.sort((function(t,e){return t.x1-e.x1||t.index-e.index}));const s=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const t of e){let e=0;for(;e<s.length&&s[e].end<=t.y1;)e++;let n,i,r=s.length-1;for(;r>=0&&s[r].start>=t.y2;)r--;let a,o,l=-1/0;for(a=e;a<=r;a++){n=s[a];i=n.boundary;let e;e=i.x2>t.x1?i.index>t.index?i.x1New:t.x1:void 0===i.x2New?(i.x2+t.x1)/2:i.x2New;e>l&&(l=e)}t.x1New=l;for(a=e;a<=r;a++){n=s[a];i=n.boundary;void 0===i.x2New?i.x2>t.x1?i.index>t.index&&(i.x2New=i.x2):i.x2New=l:i.x2New>l&&(i.x2New=Math.max(l,i.x2))}const c=[];let h=null;for(a=e;a<=r;a++){n=s[a];i=n.boundary;const e=i.x2>t.x2?i:t;if(h===e)c.at(-1).end=n.end;else{c.push({start:n.start,end:n.end,boundary:e});h=e}}if(s[e].start<t.y1){c[0].start=t.y1;c.unshift({start:s[e].start,end:t.y1,boundary:s[e].boundary})}if(t.y2<s[r].end){c.at(-1).end=t.y2;c.push({start:t.y2,end:s[r].end,boundary:s[r].boundary})}for(a=e;a<=r;a++){n=s[a];i=n.boundary;if(void 0!==i.x2New)continue;let t=!1;for(o=e-1;!t&&o>=0&&s[o].start>=i.y1;o--)t=s[o].boundary===i;for(o=r+1;!t&&o<s.length&&s[o].end<=i.y2;o++)t=s[o].boundary===i;for(o=0;!t&&o<c.length;o++)t=c[o].boundary===i;t||(i.x2New=l)}Array.prototype.splice.apply(s,[e,r-e+1,...c])}for(const e of s){const s=e.boundary;void 0===s.x2New&&(s.x2New=Math.max(t,s.x2))}}class TextLayerRenderTask{constructor({textContent:t,textContentStream:e,container:s,viewport:r,textDivs:a,textContentItemsStr:o,enhanceTextSelection:l}){l&&(0,i.deprecated)("The `enhanceTextSelection` functionality will be removed in the future.");this._textContent=t;this._textContentStream=e;this._container=s;this._document=s.ownerDocument;this._viewport=r;this._textDivs=a||[];this._textContentItemsStr=o||[];this._enhanceTextSelection=!!l;this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled;this._reader=null;this._layoutTextLastFontSize=null;this._layoutTextLastFontFamily=null;this._layoutTextCtx=null;this._textDivProperties=new WeakMap;this._renderingDone=!1;this._canceled=!1;this._capability=(0,n.createPromiseCapability)();this._renderTimer=null;this._bounds=[];this._devicePixelRatio=globalThis.devicePixelRatio||1;this._capability.promise.finally((()=>{this._enhanceTextSelection||(this._textDivProperties=null);if(this._layoutTextCtx){this._layoutTextCtx.canvas.width=0;this._layoutTextCtx.canvas.height=0;this._layoutTextCtx=null}})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0;if(this._reader){this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch((()=>{}));this._reader=null}if(null!==this._renderTimer){clearTimeout(this._renderTimer);this._renderTimer=null}this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(t,e){for(let s=0,n=t.length;s<n;s++)if(void 0!==t[s].str){this._textContentItemsStr.push(t[s].str);appendText(this,t[s],e,this._layoutTextCtx)}else if("beginMarkedContentProps"===t[s].type||"beginMarkedContent"===t[s].type){const e=this._container;this._container=document.createElement("span");this._container.classList.add("markedContent");null!==t[s].id&&this._container.setAttribute("id",`${t[s].id}`);e.append(this._container)}else"endMarkedContent"===t[s].type&&(this._container=this._container.parentNode)}_layoutText(t){const e=this._textDivProperties.get(t);let s="";if(0!==e.canvasWidth&&e.hasText){const{fontFamily:n}=t.style,{fontSize:i}=e;if(i!==this._layoutTextLastFontSize||n!==this._layoutTextLastFontFamily){this._layoutTextCtx.font=`${i*this._devicePixelRatio}px ${n}`;this._layoutTextLastFontSize=i;this._layoutTextLastFontFamily=n}const{width:r}=this._layoutTextCtx.measureText(t.textContent);if(r>0){const t=this._devicePixelRatio*e.canvasWidth/r;this._enhanceTextSelection&&(e.scale=t);s=`scaleX(${t})`}}0!==e.angle&&(s=`rotate(${e.angle}deg) ${s}`);if(s.length>0){this._enhanceTextSelection&&(e.originalTransform=s);t.style.transform=s}e.hasText&&this._container.append(t);if(e.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation");this._container.append(t)}}_render(t=0){const e=(0,n.createPromiseCapability)();let s=Object.create(null);const i=this._document.createElement("canvas");i.height=i.width=r;this._layoutTextCtx=i.getContext("2d",{alpha:!1});if(this._textContent){const t=this._textContent.items,s=this._textContent.styles;this._processItems(t,s);e.resolve()}else{if(!this._textContentStream)throw new Error(\'Neither "textContent" nor "textContentStream" parameters specified.\');{const pump=()=>{this._reader.read().then((({value:t,done:n})=>{if(n)e.resolve();else{Object.assign(s,t.styles);this._processItems(t.items,s);pump()}}),e.reject)};this._reader=this._textContentStream.getReader();pump()}}e.promise.then((()=>{s=null;t?this._renderTimer=setTimeout((()=>{render(this);this._renderTimer=null}),t):render(this)}),this._capability.reject)}expandTextDivs(t=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;if(null!==this._bounds){expand(this);this._bounds=null}const e=[],s=[];for(let n=0,i=this._textDivs.length;n<i;n++){const i=this._textDivs[n],r=this._textDivProperties.get(i);if(r.hasText)if(t){e.length=0;s.length=0;r.originalTransform&&e.push(r.originalTransform);if(r.paddingTop>0){s.push(`${r.paddingTop}px`);e.push(`translateY(${-r.paddingTop}px)`)}else s.push(0);r.paddingRight>0?s.push(r.paddingRight/r.scale+"px"):s.push(0);r.paddingBottom>0?s.push(`${r.paddingBottom}px`):s.push(0);if(r.paddingLeft>0){s.push(r.paddingLeft/r.scale+"px");e.push(`translateX(${-r.paddingLeft/r.scale}px)`)}else s.push(0);i.style.padding=s.join(" ");e.length&&(i.style.transform=e.join(" "))}else{i.style.padding=null;i.style.transform=r.originalTransform}}}}e.TextLayerRenderTask=TextLayerRenderTask},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.SVGGraphics=void 0;var n=s(4),i=s(1),r=s(3);let a=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=a;{const o={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},l="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",h=["butt","round","square"],d=["miter","round","bevel"],createObjectURL=function(t,e="",s=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!s)return URL.createObjectURL(new Blob([t],{type:e}));const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i=`data:${e};base64,`;for(let e=0,s=t.length;e<s;e+=3){const r=255&t[e],a=255&t[e+1],o=255&t[e+2];i+=n[r>>2]+n[(3&r)<<4|a>>4]+n[e+1<s?(15&a)<<2|o>>6:64]+n[e+2<s?63&o:64]}return i},u=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),e=new Int32Array(256);for(let t=0;t<256;t++){let s=t;for(let t=0;t<8;t++)s=1&s?3988292384^s>>1&2147483647:s>>1&2147483647;e[t]=s}function writePngChunk(t,s,n,i){let r=i;const a=s.length;n[r]=a>>24&255;n[r+1]=a>>16&255;n[r+2]=a>>8&255;n[r+3]=255&a;r+=4;n[r]=255&t.charCodeAt(0);n[r+1]=255&t.charCodeAt(1);n[r+2]=255&t.charCodeAt(2);n[r+3]=255&t.charCodeAt(3);r+=4;n.set(s,r);r+=s.length;const o=function crc32(t,s,n){let i=-1;for(let r=s;r<n;r++){const s=255&(i^t[r]);i=i>>>8^e[s]}return-1^i}(n,i+4,r);n[r]=o>>24&255;n[r+1]=o>>16&255;n[r+2]=o>>8&255;n[r+3]=255&o}function deflateSyncUncompressed(t){let e=t.length;const s=65535,n=Math.ceil(e/s),i=new Uint8Array(2+e+5*n+4);let r=0;i[r++]=120;i[r++]=156;let a=0;for(;e>s;){i[r++]=0;i[r++]=255;i[r++]=255;i[r++]=0;i[r++]=0;i.set(t.subarray(a,a+s),r);r+=s;a+=s;e-=s}i[r++]=1;i[r++]=255&e;i[r++]=e>>8&255;i[r++]=255&~e;i[r++]=(65535&~e)>>8&255;i.set(t.subarray(a),r);r+=t.length-a;const o=function adler32(t,e,s){let n=1,i=0;for(let r=e;r<s;++r){n=(n+(255&t[r]))%65521;i=(i+n)%65521}return i<<16|n}(t,0,t.length);i[r++]=o>>24&255;i[r++]=o>>16&255;i[r++]=o>>8&255;i[r++]=255&o;return i}function encode(e,s,n,a){const o=e.width,l=e.height;let c,h,d;const u=e.data;switch(s){case i.ImageKind.GRAYSCALE_1BPP:h=0;c=1;d=o+7>>3;break;case i.ImageKind.RGB_24BPP:h=2;c=8;d=3*o;break;case i.ImageKind.RGBA_32BPP:h=6;c=8;d=4*o;break;default:throw new Error("invalid format")}const p=new Uint8Array((1+d)*l);let g=0,f=0;for(let t=0;t<l;++t){p[g++]=0;p.set(u.subarray(f,f+d),g);f+=d;g+=d}if(s===i.ImageKind.GRAYSCALE_1BPP&&a){g=0;for(let t=0;t<l;t++){g++;for(let t=0;t<d;t++)p[g++]^=255}}const m=new Uint8Array([o>>24&255,o>>16&255,o>>8&255,255&o,l>>24&255,l>>16&255,l>>8&255,255&l,c,h,0,0,0]),b=function deflateSync(t){if(!r.isNodeJS)return deflateSyncUncompressed(t);try{let e;e=parseInt(process.versions.node)>=8?t:Buffer.from(t);const s=require("zlib").deflateSync(e,{level:9});return s instanceof Uint8Array?s:new Uint8Array(s)}catch(t){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return deflateSyncUncompressed(t)}(p),_=t.length+36+m.length+b.length,A=new Uint8Array(_);let y=0;A.set(t,y);y+=t.length;writePngChunk("IHDR",m,A,y);y+=12+m.length;writePngChunk("IDATA",b,A,y);y+=12+b.length;writePngChunk("IEND",new Uint8Array(0),A,y);return createObjectURL(A,"image/png",n)}return function convertImgDataToPng(t,e,s){return encode(t,void 0===t.kind?i.ImageKind.GRAYSCALE_1BPP:t.kind,e,s)}}();class SVGExtraState{constructor(){this.fontSizeScale=1;this.fontWeight=o.fontWeight;this.fontSize=0;this.textMatrix=i.IDENTITY_MATRIX;this.fontMatrix=i.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=i.TextRenderingMode.FILL;this.textMatrixScale=1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=o.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,e){this.x=t;this.y=e}}function opListToTree(t){let e=[];const s=[];for(const n of t)if("save"!==n.fn)"restore"===n.fn?e=s.pop():e.push(n);else{e.push({fnId:92,fn:"group",items:[]});s.push(e);e=e.at(-1).items}return e}function pf(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let s=e.length-1;if("0"!==e[s])return e;do{s--}while("0"===e[s]);return e.substring(0,"."===e[s]?s:s+1)}function pm(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${pf(t[0])} ${pf(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){return`rotate(${pf(180*Math.acos(t[0])/Math.PI)})`}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${pf(t[4])} ${pf(t[5])})`;return`matrix(${pf(t[0])} ${pf(t[1])} ${pf(t[2])} ${pf(t[3])} ${pf(t[4])} ${pf(t[5])})`}let p=0,g=0,f=0;e.SVGGraphics=a=class{constructor(t,e,s=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future.");this.svgFactory=new n.DOMSVGFactory;this.current=new SVGExtraState;this.transformMatrix=i.IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=t;this.objs=e;this.pendingClip=null;this.pendingEOFill=!1;this.embedFonts=!1;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!s;this._operatorIdMapping=[];for(const t in i.OPS)this._operatorIdMapping[i.OPS[t]]=t}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t);this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null}group(t){this.save();this.executeOpTree(t);this.restore()}loadDependencies(t){const e=t.fnArray,s=t.argsArray;for(let t=0,n=e.length;t<n;t++)if(e[t]===i.OPS.dependency)for(const e of s[t]){const t=e.startsWith("g_")?this.commonObjs:this.objs,s=new Promise((s=>{t.get(e,s)}));this.current.dependencies.push(s)}return Promise.all(this.current.dependencies)}transform(t,e,s,n,r,a){const o=[t,e,s,n,r,a];this.transformMatrix=i.Util.transform(this.transformMatrix,o);this.tgrp=null}getSVG(t,e){this.viewport=e;const s=this._initialize(e);return this.loadDependencies(t).then((()=>{this.transformMatrix=i.IDENTITY_MATRIX;this.executeOpTree(this.convertOpList(t));return s}))}convertOpList(t){const e=this._operatorIdMapping,s=t.argsArray,n=t.fnArray,i=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];i.push({fnId:r,fn:e[r],args:s[t]})}return opListToTree(i)}executeOpTree(t){for(const e of t){const t=e.fn,s=e.fnId,n=e.args;switch(0|s){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(n);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(n[0],n[1]);break;case i.OPS.setFont:this.setFont(n);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(n[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(n[0],n[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(n[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(n[0]);break;case i.OPS.setHScale:this.setHScale(n[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(n[0],n[1],n[2],n[3],n[4],n[5]);break;case i.OPS.setTextRise:this.setTextRise(n[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(n[0]);break;case i.OPS.setLineWidth:this.setLineWidth(n[0]);break;case i.OPS.setLineJoin:this.setLineJoin(n[0]);break;case i.OPS.setLineCap:this.setLineCap(n[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(n[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(n[0],n[1],n[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(n[0],n[1],n[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(n);break;case i.OPS.setFillColorN:this.setFillColorN(n);break;case i.OPS.shadingFill:this.shadingFill(n[0]);break;case i.OPS.setDash:this.setDash(n[0],n[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(n[0]);break;case i.OPS.setFlatness:this.setFlatness(n[0]);break;case i.OPS.setGState:this.setGState(n[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(n[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(n[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(n[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(n[0],n[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(n[0],n[1],n[2],n[3],n[4],n[5]);break;case i.OPS.constructPath:this.constructPath(n[0],n[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,i.warn)(`Unimplemented operator ${t}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,s,n,i,r){const a=this.current;a.textMatrix=a.lineMatrix=[t,e,s,n,i,r];a.textMatrixScale=Math.hypot(t,e);a.x=a.lineX=0;a.y=a.lineY=0;a.xcoords=[];a.ycoords=[];a.tspan=this.svgFactory.createElement("svg:tspan");a.tspan.setAttributeNS(null,"font-family",a.fontFamily);a.tspan.setAttributeNS(null,"font-size",`${pf(a.fontSize)}px`);a.tspan.setAttributeNS(null,"y",pf(-a.y));a.txtElement=this.svgFactory.createElement("svg:text");a.txtElement.append(a.tspan)}beginText(){const t=this.current;t.x=t.lineX=0;t.y=t.lineY=0;t.textMatrix=i.IDENTITY_MATRIX;t.lineMatrix=i.IDENTITY_MATRIX;t.textMatrixScale=1;t.tspan=this.svgFactory.createElement("svg:tspan");t.txtElement=this.svgFactory.createElement("svg:text");t.txtgrp=this.svgFactory.createElement("svg:g");t.xcoords=[];t.ycoords=[]}moveText(t,e){const s=this.current;s.x=s.lineX+=t;s.y=s.lineY+=e;s.xcoords=[];s.ycoords=[];s.tspan=this.svgFactory.createElement("svg:tspan");s.tspan.setAttributeNS(null,"font-family",s.fontFamily);s.tspan.setAttributeNS(null,"font-size",`${pf(s.fontSize)}px`);s.tspan.setAttributeNS(null,"y",pf(-s.y))}showText(t){const e=this.current,s=e.font,n=e.fontSize;if(0===n)return;const r=e.fontSizeScale,a=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,d=e.textHScale*h,u=s.vertical,p=u?1:-1,g=s.defaultVMetrics,f=n*e.fontMatrix[0];let m=0;for(const i of t){if(null===i){m+=h*c;continue}if("number"==typeof i){m+=p*i*n/1e3;continue}const t=(i.isSpace?c:0)+a,o=i.fontChar;let l,d,b,_=i.width;if(u){let t;const e=i.vmetric||g;t=i.vmetric?e[1]:.5*_;t=-t*f;const s=e[2]*f;_=e?-e[0]:_;l=t/r;d=(m+s)/r}else{l=m/r;d=0}if(i.isInFont||s.missingFile){e.xcoords.push(e.x+l);u&&e.ycoords.push(-e.y+d);e.tspan.textContent+=o}b=u?_*f-t*h:_*f+t*h;m+=b}e.tspan.setAttributeNS(null,"x",e.xcoords.map(pf).join(" "));u?e.tspan.setAttributeNS(null,"y",e.ycoords.map(pf).join(" ")):e.tspan.setAttributeNS(null,"y",pf(-e.y));u?e.y-=m:e.x+=m*d;e.tspan.setAttributeNS(null,"font-family",e.fontFamily);e.tspan.setAttributeNS(null,"font-size",`${pf(e.fontSize)}px`);e.fontStyle!==o.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle);e.fontWeight!==o.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const b=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(b===i.TextRenderingMode.FILL||b===i.TextRenderingMode.FILL_STROKE){e.fillColor!==o.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor);e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)}else e.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none");if(b===i.TextRenderingMode.STROKE||b===i.TextRenderingMode.FILL_STROKE){const t=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,t)}let _=e.textMatrix;if(0!==e.textRise){_=_.slice();_[5]+=e.textRise}e.txtElement.setAttributeNS(null,"transform",`${pm(_)} scale(${pf(d)}, -1)`);e.txtElement.setAttributeNS(l,"xml:space","preserve");e.txtElement.append(e.tspan);e.txtgrp.append(e.txtElement);this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e);this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error(\'addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.\');if(!this.cssStyle){this.cssStyle=this.svgFactory.createElement("svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.append(this.cssStyle)}const e=createObjectURL(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }\\n`}setFont(t){const e=this.current,s=this.commonObjs.get(t[0]);let n=t[1];e.font=s;if(this.embedFonts&&!s.missingFile&&!this.embeddedFonts[s.loadedName]){this.addFontStyle(s);this.embeddedFonts[s.loadedName]=s}e.fontMatrix=s.fontMatrix||i.FONT_IDENTITY_MATRIX;let r="normal";s.black?r="900":s.bold&&(r="bold");const a=s.italic?"italic":"normal";if(n<0){n=-n;e.fontDirection=-1}else e.fontDirection=1;e.fontSize=n;e.fontFamily=s.loadedName;e.fontWeight=r;e.fontStyle=a;e.tspan=this.svgFactory.createElement("svg:tspan");e.tspan.setAttributeNS(null,"y",pf(-e.y));e.xcoords=[];e.ycoords=[]}endText(){const t=this.current;if(t.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement?.hasChildNodes()){t.element=t.txtElement;this.clip("nonzero");this.endPath()}}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=h[t]}setLineJoin(t){this.current.lineJoin=d[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,s){this.current.strokeColor=i.Util.makeHexColor(t,e,s)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,s){this.current.fillColor=i.Util.makeHexColor(t,e,s);this.current.tspan=this.svgFactory.createElement("svg:tspan");this.current.xcoords=[];this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,s=this.viewport.height,n=i.Util.inverseTransform(this.transformMatrix),r=i.Util.applyTransform([0,0],n),a=i.Util.applyTransform([0,s],n),o=i.Util.applyTransform([e,0],n),l=i.Util.applyTransform([e,s],n),c=Math.min(r[0],a[0],o[0],l[0]),h=Math.min(r[1],a[1],o[1],l[1]),d=Math.max(r[0],a[0],o[0],l[0]),u=Math.max(r[1],a[1],o[1],l[1]),p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x",c);p.setAttributeNS(null,"y",h);p.setAttributeNS(null,"width",d-c);p.setAttributeNS(null,"height",u-h);p.setAttributeNS(null,"fill",this._makeShadingPattern(t));this.current.fillAlpha<1&&p.setAttributeNS(null,"fill-opacity",this.current.fillAlpha);this._ensureTransformGroup().append(p)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],s=t[2],n=t[3]||i.IDENTITY_MATRIX,[r,a,o,l]=t[4],c=t[5],h=t[6],d=t[7],u="shading"+f++,[p,g,m,b]=i.Util.normalizeRect([...i.Util.applyTransform([r,a],n),...i.Util.applyTransform([o,l],n)]),[_,A]=i.Util.singularValueDecompose2dScale(n),y=c*_,v=h*A,S=this.svgFactory.createElement("svg:pattern");S.setAttributeNS(null,"id",u);S.setAttributeNS(null,"patternUnits","userSpaceOnUse");S.setAttributeNS(null,"width",y);S.setAttributeNS(null,"height",v);S.setAttributeNS(null,"x",`${p}`);S.setAttributeNS(null,"y",`${g}`);const x=this.svg,E=this.transformMatrix,C=this.current.fillColor,T=this.current.strokeColor,P=this.svgFactory.create(m-p,b-g);this.svg=P;this.transformMatrix=n;if(2===d){const t=i.Util.makeHexColor(...e);this.current.fillColor=t;this.current.strokeColor=t}this.executeOpTree(this.convertOpList(s));this.svg=x;this.transformMatrix=E;this.current.fillColor=C;this.current.strokeColor=T;S.append(P.childNodes[0]);this.defs.append(S);return`url(#${u})`}_makeShadingPattern(t){"string"==typeof t&&(t=this.objs.get(t));switch(t[0]){case"RadialAxial":const e="shading"+f++,s=t[3];let n;switch(t[1]){case"axial":const s=t[4],i=t[5];n=this.svgFactory.createElement("svg:linearGradient");n.setAttributeNS(null,"id",e);n.setAttributeNS(null,"gradientUnits","userSpaceOnUse");n.setAttributeNS(null,"x1",s[0]);n.setAttributeNS(null,"y1",s[1]);n.setAttributeNS(null,"x2",i[0]);n.setAttributeNS(null,"y2",i[1]);break;case"radial":const r=t[4],a=t[5],o=t[6],l=t[7];n=this.svgFactory.createElement("svg:radialGradient");n.setAttributeNS(null,"id",e);n.setAttributeNS(null,"gradientUnits","userSpaceOnUse");n.setAttributeNS(null,"cx",a[0]);n.setAttributeNS(null,"cy",a[1]);n.setAttributeNS(null,"r",l);n.setAttributeNS(null,"fx",r[0]);n.setAttributeNS(null,"fy",r[1]);n.setAttributeNS(null,"fr",o);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const t of s){const e=this.svgFactory.createElement("svg:stop");e.setAttributeNS(null,"offset",t[0]);e.setAttributeNS(null,"stop-color",t[1]);n.append(e)}this.defs.append(n);return`url(#${e})`;case"Mesh":(0,i.warn)("Unimplemented pattern Mesh");return null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t;this.current.dashPhase=e}constructPath(t,e){const s=this.current;let n=s.x,r=s.y,a=[],o=0;for(const s of t)switch(0|s){case i.OPS.rectangle:n=e[o++];r=e[o++];const t=n+e[o++],s=r+e[o++];a.push("M",pf(n),pf(r),"L",pf(t),pf(r),"L",pf(t),pf(s),"L",pf(n),pf(s),"Z");break;case i.OPS.moveTo:n=e[o++];r=e[o++];a.push("M",pf(n),pf(r));break;case i.OPS.lineTo:n=e[o++];r=e[o++];a.push("L",pf(n),pf(r));break;case i.OPS.curveTo:n=e[o+4];r=e[o+5];a.push("C",pf(e[o]),pf(e[o+1]),pf(e[o+2]),pf(e[o+3]),pf(n),pf(r));o+=6;break;case i.OPS.curveTo2:a.push("C",pf(n),pf(r),pf(e[o]),pf(e[o+1]),pf(e[o+2]),pf(e[o+3]));n=e[o+2];r=e[o+3];o+=4;break;case i.OPS.curveTo3:n=e[o+2];r=e[o+3];a.push("C",pf(e[o]),pf(e[o+1]),pf(n),pf(r),pf(n),pf(r));o+=4;break;case i.OPS.closePath:a.push("Z")}a=a.join(" ");if(s.path&&t.length>0&&t[0]!==i.OPS.rectangle&&t[0]!==i.OPS.moveTo)a=s.path.getAttributeNS(null,"d")+a;else{s.path=this.svgFactory.createElement("svg:path");this._ensureTransformGroup().append(s.path)}s.path.setAttributeNS(null,"d",a);s.path.setAttributeNS(null,"fill","none");s.element=s.path;s.setCurrentPoint(n,r)}endPath(){const t=this.current;t.path=null;if(!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}const e="clippath"+p++,s=this.svgFactory.createElement("svg:clipPath");s.setAttributeNS(null,"id",e);s.setAttributeNS(null,"transform",pm(this.transformMatrix));const n=t.element.cloneNode(!0);"evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero");this.pendingClip=null;s.append(n);this.defs.append(s);if(t.activeClipUrl){t.clipGroup=null;for(const t of this.extraStack)t.clipGroup=null;s.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`;this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s);break;case"CA":this.setStrokeAlpha(s);break;case"ca":this.setFillAlpha(s);break;default:(0,i.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const t=this.current;if(t.element){t.element.setAttributeNS(null,"fill",t.fillColor);t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha);this.endPath()}}stroke(){const t=this.current;if(t.element){this._setStrokeAttributes(t.element);t.element.setAttributeNS(null,"fill","none");this.endPath()}}_setStrokeAttributes(t,e=1){const s=this.current;let n=s.dashArray;1!==e&&n.length>0&&(n=n.map((function(t){return e*t})));t.setAttributeNS(null,"stroke",s.strokeColor);t.setAttributeNS(null,"stroke-opacity",s.strokeAlpha);t.setAttributeNS(null,"stroke-miterlimit",pf(s.miterLimit));t.setAttributeNS(null,"stroke-linecap",s.lineCap);t.setAttributeNS(null,"stroke-linejoin",s.lineJoin);t.setAttributeNS(null,"stroke-width",pf(e*s.lineWidth)+"px");t.setAttributeNS(null,"stroke-dasharray",n.map(pf).join(" "));t.setAttributeNS(null,"stroke-dashoffset",pf(e*s.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fill()}fillStroke(){this.stroke();this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()}closeStroke(){this.closePath();this.stroke()}closeFillStroke(){this.closePath();this.fillStroke()}closeEOFillStroke(){this.closePath();this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0");t.setAttributeNS(null,"y","0");t.setAttributeNS(null,"width","1px");t.setAttributeNS(null,"height","1px");t.setAttributeNS(null,"fill",this.current.fillColor);this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,i.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){const s=t.width,n=t.height,i=u(t,this.forceDataSchema,!!e),r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0");r.setAttributeNS(null,"y","0");r.setAttributeNS(null,"width",pf(s));r.setAttributeNS(null,"height",pf(n));this.current.element=r;this.clip("nonzero");const a=this.svgFactory.createElement("svg:image");a.setAttributeNS(c,"xlink:href",i);a.setAttributeNS(null,"x","0");a.setAttributeNS(null,"y",pf(-n));a.setAttributeNS(null,"width",pf(s)+"px");a.setAttributeNS(null,"height",pf(n)+"px");a.setAttributeNS(null,"transform",`scale(${pf(1/s)} ${pf(-1/n)})`);e?e.append(a):this._ensureTransformGroup().append(a)}paintImageMaskXObject(t){const e=this.current,s=t.width,n=t.height,i=e.fillColor;e.maskId="mask"+g++;const r=this.svgFactory.createElement("svg:mask");r.setAttributeNS(null,"id",e.maskId);const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0");a.setAttributeNS(null,"y","0");a.setAttributeNS(null,"width",pf(s));a.setAttributeNS(null,"height",pf(n));a.setAttributeNS(null,"fill",i);a.setAttributeNS(null,"mask",`url(#${e.maskId})`);this.defs.append(r);this._ensureTransformGroup().append(a);this.paintInlineImageXObject(t,r)}paintFormXObjectBegin(t,e){Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]);if(e){const t=e[2]-e[0],s=e[3]-e[1],n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",e[0]);n.setAttributeNS(null,"y",e[1]);n.setAttributeNS(null,"width",pf(t));n.setAttributeNS(null,"height",pf(s));this.current.element=n;this.clip("nonzero");this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),s=this.svgFactory.createElement("svg:defs");e.append(s);this.defs=s;const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"transform",pm(t.transform));e.append(n);this.svg=n;return e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl);this.svg.append(t);this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){if(!this.tgrp){this.tgrp=this.svgFactory.createElement("svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix));this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)}return this.tgrp}}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.PDFNodeStream=void 0;var n=s(1),i=s(33);const r=require("fs"),a=require("http"),o=require("https"),l=require("url"),c=/^file:\\/\\/\\/[a-zA-Z]:\\//;e.PDFNodeStream=class PDFNodeStream{constructor(t){this.source=t;this.url=function parseUrl(t){const e=l.parse(t);if("file:"===e.protocol||e.host)return e;if(/^[a-z]:[/\\\\]/i.test(t))return l.parse(`file:///${t}`);e.host||(e.protocol="file:");return e}(t.url);this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol;this.isFsUrl="file:"===this.url.protocol;this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this);return this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,t,e):new PDFNodeStreamRangeReader(this,t,e);this._rangeRequestReaders.push(s);return s}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class BaseFullReader{constructor(t){this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;const e=t.source;this._contentLength=e.length;this._loaded=0;this._filename=null;this._disableRange=e.disableRange||!1;this._rangeChunkSize=e.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!e.disableStream;this._isRangeSupported=!e.disableRange;this._readableStream=null;this._readCapability=(0,n.createPromiseCapability)();this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;if(this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t){this._readCapability=(0,n.createPromiseCapability)();return this.read()}this._loaded+=t.length;this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t;this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t;t.on("readable",(()=>{this._readCapability.resolve()}));t.on("end",(()=>{t.destroy();this._done=!0;this._readCapability.resolve()}));t.on("error",(t=>{this._error(t)}));!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled"));this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor(t){this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=(0,n.createPromiseCapability)();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;if(this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t){this._readCapability=(0,n.createPromiseCapability)();return this.read()}this._loaded+=t.length;this.onProgress&&this.onProgress({loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t;this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t;t.on("readable",(()=>{this._readCapability.resolve()}));t.on("end",(()=>{t.destroy();this._done=!0;this._readCapability.resolve()}));t.on("error",(t=>{this._error(t)}));this._storedError&&this._readableStream.destroy(this._storedError)}}function createRequestOptions(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class PDFNodeStreamFullReader extends BaseFullReader{constructor(t){super(t);const handleResponse=e=>{if(404===e.statusCode){const t=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t;this._headersCapability.reject(t);return}this._headersCapability.resolve();this._setReadableStream(e);const getResponseHeader=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:s,suggestedLength:r}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s;this._contentLength=r||this._contentLength;this._filename=(0,i.extractFilenameFromHeader)(getResponseHeader)};this._request=null;"http:"===this._url.protocol?this._request=a.request(createRequestOptions(this._url,t.httpHeaders),handleResponse):this._request=o.request(createRequestOptions(this._url,t.httpHeaders),handleResponse);this._request.on("error",(t=>{this._storedError=t;this._headersCapability.reject(t)}));this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(t,e,s){super(t);this._httpHeaders={};for(const e in t.httpHeaders){const s=t.httpHeaders[e];void 0!==s&&(this._httpHeaders[e]=s)}this._httpHeaders.Range=`bytes=${e}-${s-1}`;const handleResponse=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t}};this._request=null;"http:"===this._url.protocol?this._request=a.request(createRequestOptions(this._url,this._httpHeaders),handleResponse):this._request=o.request(createRequestOptions(this._url,this._httpHeaders),handleResponse);this._request.on("error",(t=>{this._storedError=t}));this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(t){super(t);let e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(e=e.replace(/^\\//,""));r.lstat(e,((t,s)=>{if(t){"ENOENT"===t.code&&(t=new n.MissingPDFException(`Missing PDF "${e}".`));this._storedError=t;this._headersCapability.reject(t)}else{this._contentLength=s.size;this._setReadableStream(r.createReadStream(e));this._headersCapability.resolve()}}))}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(t,e,s){super(t);let n=decodeURIComponent(this._url.path);c.test(this._url.href)&&(n=n.replace(/^\\//,""));this._setReadableStream(r.createReadStream(n,{start:e,end:s-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.createResponseStatusError=function createResponseStatusError(t,e){if(404===t||0===t&&e.startsWith("file:"))return new n.MissingPDFException(\'Missing PDF "\'+e+\'".\');return new n.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)};e.extractFilenameFromHeader=function extractFilenameFromHeader(t){const e=t("Content-Disposition");if(e){let t=(0,i.getFilenameFromContentDispositionHeader)(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(t){}if((0,r.isPdfFile)(t))return t}return null};e.validateRangeRequestCapabilities=function validateRangeRequestCapabilities({getResponseHeader:t,isHttp:e,rangeChunkSize:s,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(t("Content-Length"),10);if(!Number.isInteger(r))return i;i.suggestedLength=r;if(r<=2*s)return i;if(n||!e)return i;if("bytes"!==t("Accept-Ranges"))return i;if("identity"!==(t("Content-Encoding")||"identity"))return i;i.allowRangeRequests=!0;return i};e.validateResponseStatus=function validateResponseStatus(t){return 200===t||206===t};var n=s(1),i=s(34),r=s(4)},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(t){let e=!0,s=toParamRegExp("filename\\\\*","i").exec(t);if(s){s=s[1];let t=rfc2616unquote(s);t=unescape(t);t=rfc5987decode(t);t=rfc2047decode(t);return fixupEncoding(t)}s=function rfc2231getparam(t){const e=[];let s;const n=toParamRegExp("filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)","ig");for(;null!==(s=n.exec(t));){let[,t,n,i]=s;t=parseInt(t,10);if(t in e){if(0===t)break}else e[t]=[n,i]}const i=[];for(let t=0;t<e.length&&t in e;++t){let[s,n]=e[t];n=rfc2616unquote(n);if(s){n=unescape(n);0===t&&(n=rfc5987decode(n))}i.push(n)}return i.join("")}(t);if(s){return fixupEncoding(rfc2047decode(s))}s=toParamRegExp("filename","i").exec(t);if(s){s=s[1];let t=rfc2616unquote(s);t=rfc2047decode(t);return fixupEncoding(t)}function toParamRegExp(t,e){return new RegExp("(?:^|;)\\\\s*"+t+\'\\\\s*=\\\\s*([^";\\\\s][^;\\\\s]*|"(?:[^"\\\\\\\\]|\\\\\\\\"?)+"?)\',e)}function textdecode(t,s){if(t){if(!/^[\\x00-\\xFF]+$/.test(s))return s;try{const i=new TextDecoder(t,{fatal:!0}),r=(0,n.stringToBytes)(s);s=i.decode(r);e=!1}catch(t){}}return s}function fixupEncoding(t){if(e&&/[\\x80-\\xff]/.test(t)){t=textdecode("utf-8",t);e&&(t=textdecode("iso-8859-1",t))}return t}function rfc2616unquote(t){if(t.startsWith(\'"\')){const e=t.slice(1).split(\'\\\\"\');for(let t=0;t<e.length;++t){const s=e[t].indexOf(\'"\');if(-1!==s){e[t]=e[t].slice(0,s);e.length=t+1}e[t]=e[t].replace(/\\\\(.)/g,"$1")}t=e.join(\'"\')}return t}function rfc5987decode(t){const e=t.indexOf("\'");if(-1===e)return t;return textdecode(t.slice(0,e),t.slice(e+1).replace(/^[^\']*\'/,""))}function rfc2047decode(t){return!t.startsWith("=?")||/[\\x00-\\x19\\x80-\\xff]/.test(t)?t:t.replace(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,(function(t,e,s,n){if("q"===s||"Q"===s)return textdecode(e,n=(n=n.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{n=atob(n)}catch(t){}return textdecode(e,n)}))}return""};var n=s(1)},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.PDFNetworkStream=void 0;var n=s(1),i=s(33);class NetworkManager{constructor(t,e={}){this.url=t;this.isHttp=/^https?:/i.test(t);this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null);this.withCredentials=e.withCredentials||!1;this.getXhr=e.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest};this.currXhrId=0;this.pendingRequests=Object.create(null)}requestRange(t,e,s){const n={begin:t,end:e};for(const t in s)n[t]=s[t];return this.request(n)}requestFull(t){return this.request(t)}request(t){const e=this.getXhr(),s=this.currXhrId++,n=this.pendingRequests[s]={xhr:e};e.open("GET",this.url);e.withCredentials=this.withCredentials;for(const t in this.httpHeaders){const s=this.httpHeaders[t];void 0!==s&&e.setRequestHeader(t,s)}if(this.isHttp&&"begin"in t&&"end"in t){e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`);n.expectedStatus=206}else n.expectedStatus=200;e.responseType="arraybuffer";t.onError&&(e.onerror=function(s){t.onError(e.status)});e.onreadystatechange=this.onStateChange.bind(this,s);e.onprogress=this.onProgress.bind(this,s);n.onHeadersReceived=t.onHeadersReceived;n.onDone=t.onDone;n.onError=t.onError;n.onProgress=t.onProgress;e.send(null);return s}onProgress(t,e){const s=this.pendingRequests[t];s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived){s.onHeadersReceived();delete s.onHeadersReceived}if(4!==i.readyState)return;if(!(t in this.pendingRequests))return;delete this.pendingRequests[t];if(0===i.status&&this.isHttp){s.onError?.(i.status);return}const r=i.status||200;if(!(200===r&&206===s.expectedStatus)&&r!==s.expectedStatus){s.onError?.(i.status);return}const a=function getArrayBuffer(t){const e=t.response;return"string"!=typeof e?e:(0,n.stringToBytes)(e).buffer}(i);if(206===r){const t=i.getResponseHeader("Content-Range"),e=/bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(t);s.onDone({begin:parseInt(e[1],10),chunk:a})}else a?s.onDone({begin:0,chunk:a}):s.onError?.(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t];e.abort()}}e.PDFNetworkStream=class PDFNetworkStream{constructor(t){this._source=t;this._manager=new NetworkManager(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials});this._rangeChunkSize=t.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source);return this._fullRequestReader}getRangeReader(t,e){const s=new PDFNetworkStreamRangeRequestReader(this._manager,t,e);s.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(s);return s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class PDFNetworkStreamFullRequestReader{constructor(t,e){this._manager=t;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url;this._fullRequestId=t.requestFull(s);this._headersReceivedCapability=(0,n.createPromiseCapability)();this._disableRange=e.disableRange||!1;this._contentLength=e.length;this._rangeChunkSize=e.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!1;this._isRangeSupported=!1;this._cachedChunks=[];this._requests=[];this._done=!1;this._storedError=void 0;this._filename=null;this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),getResponseHeader=t=>e.getResponseHeader(t),{allowRangeRequests:s,suggestedLength:n}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0);this._contentLength=n||this._contentLength;this._filename=(0,i.extractFilenameFromHeader)(getResponseHeader);this._isRangeSupported&&this._manager.abortRequest(t);this._headersReceivedCapability.resolve()}_onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);this._done=!0;if(!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=(0,i.createResponseStatusError)(t,this._url);this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0;this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();this._requests.push(t);return t.promise}cancel(t){this._done=!0;this._headersReceivedCapability.reject(t);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0;this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId);this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(t,e,s){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url;this._requestId=t.requestRange(e,s,n);this._requests=[];this._queuedChunk=null;this._done=!1;this._storedError=void 0;this.onProgress=null;this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunk=e;this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0;this._close()}_onError(t){this._storedError=(0,i.createResponseStatusError)(t,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0;this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;this._queuedChunk=null;return{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();this._requests.push(t);return t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0;this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId);this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.PDFFetchStream=void 0;var n=s(1),i=s(33);function createFetchOptions(t,e,s){return{method:"GET",headers:t,signal:s?.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function createHeaders(t){const e=new Headers;for(const s in t){const n=t[s];void 0!==n&&e.append(s,n)}return e}e.PDFFetchStream=class PDFFetchStream{constructor(t){this.source=t;this.isHttp=/^https?:/i.test(t.url);this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new PDFFetchStreamReader(this);return this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new PDFFetchStreamRangeReader(this,t,e);this._rangeRequestReaders.push(s);return s}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class PDFFetchStreamReader{constructor(t){this._stream=t;this._reader=null;this._loaded=0;this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1;this._contentLength=e.length;this._headersCapability=(0,n.createPromiseCapability)();this._disableRange=e.disableRange||!1;this._rangeChunkSize=e.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);"undefined"!=typeof AbortController&&(this._abortController=new AbortController);this._isStreamingSupported=!e.disableStream;this._isRangeSupported=!e.disableRange;this._headers=createHeaders(this._stream.httpHeaders);const s=e.url;fetch(s,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,i.validateResponseStatus)(t.status))throw(0,i.createResponseStatusError)(t.status,s);this._reader=t.body.getReader();this._headersCapability.resolve();const getResponseHeader=e=>t.headers.get(e),{allowRangeRequests:e,suggestedLength:r}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=e;this._contentLength=r||this._contentLength;this._filename=(0,i.extractFilenameFromHeader)(getResponseHeader);!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject);this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();if(e)return{value:t,done:e};this._loaded+=t.byteLength;this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._reader&&this._reader.cancel(t);this._abortController&&this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(t,e,s){this._stream=t;this._reader=null;this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1;this._readCapability=(0,n.createPromiseCapability)();this._isStreamingSupported=!r.disableStream;"undefined"!=typeof AbortController&&(this._abortController=new AbortController);this._headers=createHeaders(this._stream.httpHeaders);this._headers.append("Range",`bytes=${e}-${s-1}`);const a=r.url;fetch(a,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,i.validateResponseStatus)(t.status))throw(0,i.createResponseStatusError)(t.status,a);this._readCapability.resolve();this._reader=t.body.getReader()})).catch(this._readCapability.reject);this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();if(e)return{value:t,done:e};this._loaded+=t.byteLength;this.onProgress&&this.onProgress({loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._reader&&this._reader.cancel(t);this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};__webpack_modules__[t](s,s.exports,__w_pdfjs_require__);return s.exports}var __webpack_exports__={};(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0});Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return i.AnnotationEditorLayer}});Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}});Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}});Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return r.AnnotationEditorUIManager}});Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return a.AnnotationLayer}});Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}});Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}});Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return o.GlobalWorkerOptions}});Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}});Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return n.LoopbackPort}});Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}});Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}});Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}});Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}});Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}});Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}});Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}});Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}});Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}});Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return h.SVGGraphics}});Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}});Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}});Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}});Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}});Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}});Object.defineProperty(t,"binarySearchFirstItem",{enumerable:!0,get:function(){return s.binarySearchFirstItem}});Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}});Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}});Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}});Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}});Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}});Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}});Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}});Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}});Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return s.loadScript}});Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}});Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}});Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(4),n=__w_pdfjs_require__(6),i=__w_pdfjs_require__(22),r=__w_pdfjs_require__(9),a=__w_pdfjs_require__(27),o=__w_pdfjs_require__(15),l=__w_pdfjs_require__(3),c=__w_pdfjs_require__(30),h=__w_pdfjs_require__(31),d=__w_pdfjs_require__(29);if(l.isNodeJS){const{PDFNodeStream:t}=__w_pdfjs_require__(32);(0,n.setPDFNetworkStreamFactory)((e=>new t(e)))}else{const{PDFNetworkStream:t}=__w_pdfjs_require__(35),{PDFFetchStream:e}=__w_pdfjs_require__(36);(0,n.setPDFNetworkStreamFactory)((n=>(0,s.isValidFetchUrl)(n.url)?new e(n):new t(n)))}})();return __webpack_exports__})()));',document.body.appendChild(t),"pdfjsLib"in window||(t.remove(),t=document.createElement("script"),t.innerHTML='!function webpackUniversalModuleDefinition(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],r):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=r():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=r()}(globalThis,(()=>(()=>{var __webpack_modules__=[,(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.UNSUPPORTED_FEATURES=r.TextRenderingMode=r.StreamType=r.RenderingIntentFlag=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FontType=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMode=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0;r.arrayByteLength=arrayByteLength;r.arraysToBytes=function arraysToBytes(t){var r=t.length;if(1===r&&t[0]instanceof Uint8Array)return t[0];for(var a=0,i=0;i<r;i++)a+=arrayByteLength(t[i]);for(var o=0,l=new Uint8Array(a),c=0;c<r;c++){var u=t[c];u instanceof Uint8Array||(u="string"==typeof u?stringToBytes(u):new Uint8Array(u));var d=u.byteLength;l.set(u,o);o+=d}return l};r.assert=function assert(t,r){t||unreachable(r)};r.bytesToString=function bytesToString(t){"object"===_typeof(t)&&null!==t&&void 0!==t.length||unreachable("Invalid argument for bytesToString");var r=t.length,a=8192;if(r<a)return String.fromCharCode.apply(null,t);for(var i=[],o=0;o<r;o+=a){var l=Math.min(o+a,r),c=t.subarray(o,l);i.push(String.fromCharCode.apply(null,c))}return i.join("")};r.createPromiseCapability=function createPromiseCapability(){var t=Object.create(null),r=!1;Object.defineProperty(t,"settled",{get:function get(){return r}});t.promise=new Promise((function(a,i){t.resolve=function(t){r=!0;a(t)};t.reject=function(t){r=!0;i(t)}}));return t};r.createValidAbsoluteUrl=function createValidAbsoluteUrl(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(a&&"string"==typeof t){if(a.addDefaultProtocol&&t.startsWith("www.")){var i=t.match(/\\./g);i&&i.length>=2&&(t="http://".concat(t))}if(a.tryConvertEncoding)try{t=stringToUTF8String(t)}catch(t){}}var o=r?new URL(t,r):new URL(t);if(_isValidProtocol(o))return o}catch(t){}return null};r.escapeString=function escapeString(t){return t.replace(/([()\\\\\\n\\r])/g,(function(t){return"\\n"===t?"\\\\n":"\\r"===t?"\\\\r":"\\\\".concat(t)}))};r.getModificationDate=function getModificationDate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,r=[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")];return r.join("")};r.getVerbosityLevel=function getVerbosityLevel(){return o};r.info=function info(t){o>=i.INFOS&&console.log("Info: ".concat(t))};r.isArrayBuffer=function isArrayBuffer(t){return"object"===_typeof(t)&&null!==t&&void 0!==t.byteLength};r.isArrayEqual=function isArrayEqual(t,r){if(t.length!==r.length)return!1;for(var a=0,i=t.length;a<i;a++)if(t[a]!==r[a])return!1;return!0};r.isAscii=function isAscii(t){return/^[\\x00-\\x7F]*$/.test(t)};r.objectFromMap=function objectFromMap(t){var r,a=Object.create(null),i=function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}(t);try{for(i.s();!(r=i.n()).done;){var o=(u=r.value,d=2,function _arrayWithHoles(t){if(Array.isArray(t))return t}(u)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(u,d)||_unsupportedIterableToArray(u,d)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],c=o[1];a[l]=c}}catch(t){i.e(t)}finally{i.f()}var u,d;return a};r.objectSize=function objectSize(t){return Object.keys(t).length};r.setVerbosityLevel=function setVerbosityLevel(t){Number.isInteger(t)&&(o=t)};r.shadow=shadow;r.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)};r.stringToBytes=stringToBytes;r.stringToPDFString=function stringToPDFString(t){if(t[0]>="ï"){var r;"þ"===t[0]&&"ÿ"===t[1]?r="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?r="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(r="utf-8");if(r)try{var a=new TextDecoder(r,{fatal:!0}),i=stringToBytes(t);return a.decode(i)}catch(t){warn(\'stringToPDFString: "\'.concat(t,\'".\'))}}for(var o=[],l=0,c=t.length;l<c;l++){var u=b[t.charCodeAt(l)];o.push(u?String.fromCharCode(u):t.charAt(l))}return o.join("")};r.stringToUTF16BEString=function stringToUTF16BEString(t){for(var r=["þÿ"],a=0,i=t.length;a<i;a++){var o=t.charCodeAt(a);r.push(String.fromCharCode(o>>8&255),String.fromCharCode(255&o))}return r.join("")};r.stringToUTF8String=stringToUTF8String;r.unreachable=unreachable;r.utf8StringToString=function utf8StringToString(t){return unescape(encodeURIComponent(t))};r.warn=warn;a(2);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}r.IDENTITY_MATRIX=[1,0,0,1,0,0];r.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];r.LINE_FACTOR=1.35;r.LINE_DESCENT_FACTOR=.35;r.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};r.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};r.AnnotationEditorPrefix="pdfjs_internal_editor_";r.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};r.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};r.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};r.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReplyType={GROUP:"Group",REPLY:"R"};r.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};r.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};r.PageActionEventType={O:"PageOpen",C:"PageClose"};r.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};r.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var i={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=i;r.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};r.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};r.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var o=i.WARNINGS;function warn(t){o>=i.WARNINGS&&console.log("Warning: ".concat(t))}function unreachable(t){throw new Error(t)}function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function shadow(t,r,a){Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!1});return a}var l=function BaseExceptionClosure(){function BaseException(t,r){this.constructor===BaseException&&unreachable("Cannot initialize BaseException.");this.message=t;this.name=r}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();r.BaseException=l;var c=function(t){_inherits(PasswordException,t);var r=_createSuper(PasswordException);function PasswordException(t,a){var i;_classCallCheck(this,PasswordException);(i=r.call(this,t,"PasswordException")).code=a;return i}return _createClass(PasswordException)}(l);r.PasswordException=c;var u=function(t){_inherits(UnknownErrorException,t);var r=_createSuper(UnknownErrorException);function UnknownErrorException(t,a){var i;_classCallCheck(this,UnknownErrorException);(i=r.call(this,t,"UnknownErrorException")).details=a;return i}return _createClass(UnknownErrorException)}(l);r.UnknownErrorException=u;var d=function(t){_inherits(InvalidPDFException,t);var r=_createSuper(InvalidPDFException);function InvalidPDFException(t){_classCallCheck(this,InvalidPDFException);return r.call(this,t,"InvalidPDFException")}return _createClass(InvalidPDFException)}(l);r.InvalidPDFException=d;var h=function(t){_inherits(MissingPDFException,t);var r=_createSuper(MissingPDFException);function MissingPDFException(t){_classCallCheck(this,MissingPDFException);return r.call(this,t,"MissingPDFException")}return _createClass(MissingPDFException)}(l);r.MissingPDFException=h;var p=function(t){_inherits(UnexpectedResponseException,t);var r=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(t,a){var i;_classCallCheck(this,UnexpectedResponseException);(i=r.call(this,t,"UnexpectedResponseException")).status=a;return i}return _createClass(UnexpectedResponseException)}(l);r.UnexpectedResponseException=p;var v=function(t){_inherits(FormatError,t);var r=_createSuper(FormatError);function FormatError(t){_classCallCheck(this,FormatError);return r.call(this,t,"FormatError")}return _createClass(FormatError)}(l);r.FormatError=v;var y=function(t){_inherits(AbortException,t);var r=_createSuper(AbortException);function AbortException(t){_classCallCheck(this,AbortException);return r.call(this,t,"AbortException")}return _createClass(AbortException)}(l);r.AbortException=y;function stringToBytes(t){"string"!=typeof t&&unreachable("Invalid argument for stringToBytes");for(var r=t.length,a=new Uint8Array(r),i=0;i<r;++i)a[i]=255&t.charCodeAt(i);return a}function arrayByteLength(t){if(void 0!==t.length)return t.length;if(void 0!==t.byteLength)return t.byteLength;unreachable("Invalid argument for arrayByteLength")}var g=function(){function FeatureTest(){_classCallCheck(this,FeatureTest)}_createClass(FeatureTest,null,[{key:"isLittleEndian",get:function get(){return shadow(this,"isLittleEndian",function isLittleEndian(){var t=new Uint8Array(4);t[0]=1;return 1===new Uint32Array(t.buffer,0,1)[0]}())}},{key:"isEvalSupported",get:function get(){return shadow(this,"isEvalSupported",function isEvalSupported(){try{new Function("");return!0}catch(t){return!1}}())}},{key:"isOffscreenCanvasSupported",get:function get(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}}]);return FeatureTest}();r.FeatureTest=g;var _=_toConsumableArray(Array(256).keys()).map((function(t){return t.toString(16).padStart(2,"0")})),m=function(){function Util(){_classCallCheck(this,Util)}_createClass(Util,null,[{key:"makeHexColor",value:function makeHexColor(t,r,a){return"#".concat(_[t]).concat(_[r]).concat(_[a])}},{key:"scaleMinMax",value:function scaleMinMax(t,r){var a;if(t[0]){if(t[0]<0){a=r[0];r[0]=r[1];r[1]=a}r[0]*=t[0];r[1]*=t[0];if(t[3]<0){a=r[2];r[2]=r[3];r[3]=a}r[2]*=t[3];r[3]*=t[3]}else{a=r[0];r[0]=r[2];r[2]=a;a=r[1];r[1]=r[3];r[3]=a;if(t[1]<0){a=r[2];r[2]=r[3];r[3]=a}r[2]*=t[1];r[3]*=t[1];if(t[2]<0){a=r[0];r[0]=r[1];r[1]=a}r[0]*=t[2];r[1]*=t[2]}r[0]+=t[4];r[1]+=t[4];r[2]+=t[5];r[3]+=t[5]}},{key:"transform",value:function transform(t,r){return[t[0]*r[0]+t[2]*r[1],t[1]*r[0]+t[3]*r[1],t[0]*r[2]+t[2]*r[3],t[1]*r[2]+t[3]*r[3],t[0]*r[4]+t[2]*r[5]+t[4],t[1]*r[4]+t[3]*r[5]+t[5]]}},{key:"applyTransform",value:function applyTransform(t,r){return[t[0]*r[0]+t[1]*r[2]+r[4],t[0]*r[1]+t[1]*r[3]+r[5]]}},{key:"applyInverseTransform",value:function applyInverseTransform(t,r){var a=r[0]*r[3]-r[1]*r[2];return[(t[0]*r[3]-t[1]*r[2]+r[2]*r[5]-r[4]*r[3])/a,(-t[0]*r[1]+t[1]*r[0]+r[4]*r[1]-r[5]*r[0])/a]}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(t,r){var a=Util.applyTransform(t,r),i=Util.applyTransform(t.slice(2,4),r),o=Util.applyTransform([t[0],t[3]],r),l=Util.applyTransform([t[2],t[1]],r);return[Math.min(a[0],i[0],o[0],l[0]),Math.min(a[1],i[1],o[1],l[1]),Math.max(a[0],i[0],o[0],l[0]),Math.max(a[1],i[1],o[1],l[1])]}},{key:"inverseTransform",value:function inverseTransform(t){var r=t[0]*t[3]-t[1]*t[2];return[t[3]/r,-t[1]/r,-t[2]/r,t[0]/r,(t[2]*t[5]-t[4]*t[3])/r,(t[4]*t[1]-t[5]*t[0])/r]}},{key:"apply3dTransform",value:function apply3dTransform(t,r){return[t[0]*r[0]+t[1]*r[1]+t[2]*r[2],t[3]*r[0]+t[4]*r[1]+t[5]*r[2],t[6]*r[0]+t[7]*r[1]+t[8]*r[2]]}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(t){var r=[t[0],t[2],t[1],t[3]],a=t[0]*r[0]+t[1]*r[2],i=t[0]*r[1]+t[1]*r[3],o=t[2]*r[0]+t[3]*r[2],l=t[2]*r[1]+t[3]*r[3],c=(a+l)/2,u=Math.sqrt(Math.pow(a+l,2)-4*(a*l-o*i))/2,d=c+u||1,h=c-u||1;return[Math.sqrt(d),Math.sqrt(h)]}},{key:"normalizeRect",value:function normalizeRect(t){var r=t.slice(0);if(t[0]>t[2]){r[0]=t[2];r[2]=t[0]}if(t[1]>t[3]){r[1]=t[3];r[3]=t[1]}return r}},{key:"intersect",value:function intersect(t,r){var a=Math.max(Math.min(t[0],t[2]),Math.min(r[0],r[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(r[0],r[2]));if(a>i)return null;var o=Math.max(Math.min(t[1],t[3]),Math.min(r[1],r[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(r[1],r[3]));return o>l?null:[a,o,i,l]}},{key:"bezierBoundingBox",value:function bezierBoundingBox(t,r,a,i,o,l,c,u){for(var d,h,p,v,y,g,_,m,b=[],A=[[],[]],k=0;k<2;++k){if(0===k){h=6*t-12*a+6*o;d=-3*t+9*a-9*o+3*c;p=3*a-3*t}else{h=6*r-12*i+6*l;d=-3*r+9*i-9*l+3*u;p=3*i-3*r}if(Math.abs(d)<1e-12){if(Math.abs(h)<1e-12)continue;0<(v=-p/h)&&v<1&&b.push(v)}else{_=h*h-4*p*d;m=Math.sqrt(_);if(!(_<0)){0<(y=(-h+m)/(2*d))&&y<1&&b.push(y);0<(g=(-h-m)/(2*d))&&g<1&&b.push(g)}}}for(var P,S=b.length,w=S;S--;){P=1-(v=b[S]);A[0][S]=P*P*P*t+3*P*P*v*a+3*P*v*v*o+v*v*v*c;A[1][S]=P*P*P*r+3*P*P*v*i+3*P*v*v*l+v*v*v*u}A[0][w]=t;A[1][w]=r;A[0][w+1]=c;A[1][w+1]=u;A[0].length=A[1].length=w+2;return[Math.min.apply(Math,_toConsumableArray(A[0])),Math.min.apply(Math,_toConsumableArray(A[1])),Math.max.apply(Math,_toConsumableArray(A[0])),Math.max.apply(Math,_toConsumableArray(A[1]))]}}]);return Util}();r.Util=m;var b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(t){return decodeURIComponent(escape(t))}},(t,r,a)=>{"use strict";var i=a(3);if(!globalThis._pdfjsCompatibilityChecked){globalThis._pdfjsCompatibilityChecked=!0;!function checkNodeBtoa(){!globalThis.btoa&&i.isNodeJS&&(globalThis.btoa=function(t){return Buffer.from(t,"binary").toString("base64")})}();!function checkNodeAtob(){!globalThis.atob&&i.isNodeJS&&(globalThis.atob=function(t){return Buffer.from(t,"base64").toString("binary")})}();!function checkDOMMatrix(){!globalThis.DOMMatrix&&i.isNodeJS&&(globalThis.DOMMatrix=require("dommatrix/dist/dommatrix.js"))}();!function checkReadableStream(){!globalThis.ReadableStream&&i.isNodeJS&&(globalThis.ReadableStream=require("web-streams-polyfill/dist/ponyfill.js").ReadableStream)}();!function checkArrayAt(){Array.prototype.at||a(4)}();!function checkTypedArrayAt(){Uint8Array.prototype.at||a(76)}();!function checkStructuredClone(){globalThis.structuredClone||a(86)}()}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.isNodeJS=void 0;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var a=!("object"!==("undefined"==typeof process?"undefined":_typeof(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);r.isNodeJS=a},(t,r,a)=>{a(5);var i=a(75);t.exports=i("Array","at")},(t,r,a)=>{"use strict";var i=a(6),o=a(41),l=a(65),c=a(63),u=a(70);i({target:"Array",proto:!0},{at:function at(t){var r=o(this),a=l(r),i=c(t),u=i>=0?i:a+i;return u<0||u>=a?void 0:r[u]}});u("at")},(t,r,a)=>{var i=a(7),o=a(8).f,l=a(45),c=a(49),u=a(39),d=a(57),h=a(69);t.exports=function(t,r){var a,p,v,y,g,_=t.target,m=t.global,b=t.stat;if(a=m?i:b?i[_]||u(_,{}):(i[_]||{}).prototype)for(p in r){y=r[p];v=t.dontCallGetSet?(g=o(a,p))&&g.value:a[p];if(!h(m?p:_+(b?".":"#")+p,t.forced)&&void 0!==v){if(typeof y==typeof v)continue;d(y,v)}(t.sham||v&&v.sham)&&l(y,"sham",!0);c(a,p,y,t)}}},t=>{var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||function(){return this}()||Function("return this")()},(t,r,a)=>{var i=a(9),o=a(11),l=a(13),c=a(14),u=a(15),d=a(20),h=a(40),p=a(43),v=Object.getOwnPropertyDescriptor;r.f=i?v:function getOwnPropertyDescriptor(t,r){t=u(t);r=d(r);if(p)try{return v(t,r)}catch(t){}if(h(t,r))return c(!o(l.f,t,r),t[r])}},(t,r,a)=>{var i=a(10);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},(t,r,a)=>{var i=a(12),o=Function.prototype.call;t.exports=i?o.bind(o):function(){return o.apply(o,arguments)}},(t,r,a)=>{var i=a(10);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},(t,r)=>{"use strict";var a={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!a.call({1:2},1);r.f=o?function propertyIsEnumerable(t){var r=i(this,t);return!!r&&r.enumerable}:a},t=>{t.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},(t,r,a)=>{var i=a(16),o=a(19);t.exports=function(t){return i(o(t))}},(t,r,a)=>{var i=a(17),o=a(10),l=a(18),c=Object,u=i("".split);t.exports=o((function(){return!c("z").propertyIsEnumerable(0)}))?function(t){return"String"==l(t)?u(t,""):c(t)}:c},(t,r,a)=>{var i=a(12),o=Function.prototype,l=o.bind,c=o.call,u=i&&l.bind(c,c);t.exports=i?function(t){return t&&u(t)}:function(t){return t&&function(){return c.apply(t,arguments)}}},(t,r,a)=>{var i=a(17),o=i({}.toString),l=i("".slice);t.exports=function(t){return l(o(t),8,-1)}},t=>{var r=TypeError;t.exports=function(t){if(null==t)throw r("Can\'t call method on "+t);return t}},(t,r,a)=>{var i=a(21),o=a(24);t.exports=function(t){var r=i(t,"string");return o(r)?r:r+""}},(t,r,a)=>{var i=a(11),o=a(22),l=a(24),c=a(31),u=a(34),d=a(35),h=TypeError,p=d("toPrimitive");t.exports=function(t,r){if(!o(t)||l(t))return t;var a,d=c(t,p);if(d){void 0===r&&(r="default");a=i(d,t,r);if(!o(a)||l(a))return a;throw h("Can\'t convert object to primitive value")}void 0===r&&(r="number");return u(t,r)}},(t,r,a)=>{var i=a(23);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},t=>{t.exports=function(t){return"function"==typeof t}},(t,r,a)=>{var i=a(25),o=a(23),l=a(26),c=a(27),u=Object;t.exports=c?function(t){return"symbol"==typeof t}:function(t){var r=i("Symbol");return o(r)&&l(r.prototype,u(t))}},(t,r,a)=>{var i=a(7),o=a(23),aFunction=function(t){return o(t)?t:void 0};t.exports=function(t,r){return arguments.length<2?aFunction(i[t]):i[t]&&i[t][r]}},(t,r,a)=>{var i=a(17);t.exports=i({}.isPrototypeOf)},(t,r,a)=>{var i=a(28);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(t,r,a)=>{var i=a(29),o=a(10);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},(t,r,a)=>{var i,o,l=a(7),c=a(30),u=l.process,d=l.Deno,h=u&&u.versions||d&&d.version,p=h&&h.v8;p&&(o=(i=p.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1]));!o&&c&&(!(i=c.match(/Edge\\/(\\d+)/))||i[1]>=74)&&(i=c.match(/Chrome\\/(\\d+)/))&&(o=+i[1]);t.exports=o},(t,r,a)=>{var i=a(25);t.exports=i("navigator","userAgent")||""},(t,r,a)=>{var i=a(32);t.exports=function(t,r){var a=t[r];return null==a?void 0:i(a)}},(t,r,a)=>{var i=a(23),o=a(33),l=TypeError;t.exports=function(t){if(i(t))return t;throw l(o(t)+" is not a function")}},t=>{var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},(t,r,a)=>{var i=a(11),o=a(23),l=a(22),c=TypeError;t.exports=function(t,r){var a,u;if("string"===r&&o(a=t.toString)&&!l(u=i(a,t)))return u;if(o(a=t.valueOf)&&!l(u=i(a,t)))return u;if("string"!==r&&o(a=t.toString)&&!l(u=i(a,t)))return u;throw c("Can\'t convert object to primitive value")}},(t,r,a)=>{var i=a(7),o=a(36),l=a(40),c=a(42),u=a(28),d=a(27),h=o("wks"),p=i.Symbol,v=p&&p.for,y=d?p:p&&p.withoutSetter||c;t.exports=function(t){if(!l(h,t)||!u&&"string"!=typeof h[t]){var r="Symbol."+t;u&&l(p,t)?h[t]=p[t]:h[t]=d&&v?v(r):y(r)}return h[t]}},(t,r,a)=>{var i=a(37),o=a(38);(t.exports=function(t,r){return o[t]||(o[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.23.5",mode:i?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.5/LICENSE",source:"https://github.com/zloirock/core-js"})},t=>{t.exports=!1},(t,r,a)=>{var i=a(7),o=a(39),l="__core-js_shared__",c=i[l]||o(l,{});t.exports=c},(t,r,a)=>{var i=a(7),o=Object.defineProperty;t.exports=function(t,r){try{o(i,t,{value:r,configurable:!0,writable:!0})}catch(a){i[t]=r}return r}},(t,r,a)=>{var i=a(17),o=a(41),l=i({}.hasOwnProperty);t.exports=Object.hasOwn||function hasOwn(t,r){return l(o(t),r)}},(t,r,a)=>{var i=a(19),o=Object;t.exports=function(t){return o(i(t))}},(t,r,a)=>{var i=a(17),o=0,l=Math.random(),c=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+c(++o+l,36)}},(t,r,a)=>{var i=a(9),o=a(10),l=a(44);t.exports=!i&&!o((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}))},(t,r,a)=>{var i=a(7),o=a(22),l=i.document,c=o(l)&&o(l.createElement);t.exports=function(t){return c?l.createElement(t):{}}},(t,r,a)=>{var i=a(9),o=a(46),l=a(14);t.exports=i?function(t,r,a){return o.f(t,r,l(1,a))}:function(t,r,a){t[r]=a;return t}},(t,r,a)=>{var i=a(9),o=a(43),l=a(47),c=a(48),u=a(20),d=TypeError,h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,v="enumerable",y="configurable",g="writable";r.f=i?l?function defineProperty(t,r,a){c(t);r=u(r);c(a);if("function"==typeof t&&"prototype"===r&&"value"in a&&g in a&&!a.writable){var i=p(t,r);if(i&&i.writable){t[r]=a.value;a={configurable:y in a?a.configurable:i.configurable,enumerable:v in a?a.enumerable:i.enumerable,writable:!1}}}return h(t,r,a)}:h:function defineProperty(t,r,a){c(t);r=u(r);c(a);if(o)try{return h(t,r,a)}catch(t){}if("get"in a||"set"in a)throw d("Accessors not supported");"value"in a&&(t[r]=a.value);return t}},(t,r,a)=>{var i=a(9),o=a(10);t.exports=i&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},(t,r,a)=>{var i=a(22),o=String,l=TypeError;t.exports=function(t){if(i(t))return t;throw l(o(t)+" is not an object")}},(t,r,a)=>{var i=a(23),o=a(46),l=a(50),c=a(39);t.exports=function(t,r,a,u){u||(u={});var d=u.enumerable,h=void 0!==u.name?u.name:r;i(a)&&l(a,h,u);if(u.global)d?t[r]=a:c(r,a);else{try{u.unsafe?t[r]&&(d=!0):delete t[r]}catch(t){}d?t[r]=a:o.f(t,r,{value:a,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return t}},(t,r,a)=>{var i=a(10),o=a(23),l=a(40),c=a(9),u=a(51).CONFIGURABLE,d=a(52),h=a(53),p=h.enforce,v=h.get,y=Object.defineProperty,g=c&&!i((function(){return 8!==y((function(){}),"length",{value:8}).length})),_=String(String).split("String"),m=t.exports=function(t,r,a){"Symbol("===String(r).slice(0,7)&&(r="["+String(r).replace(/^Symbol\\(([^)]*)\\)/,"$1")+"]");a&&a.getter&&(r="get "+r);a&&a.setter&&(r="set "+r);(!l(t,"name")||u&&t.name!==r)&&(c?y(t,"name",{value:r,configurable:!0}):t.name=r);g&&a&&l(a,"arity")&&t.length!==a.arity&&y(t,"length",{value:a.arity});try{a&&l(a,"constructor")&&a.constructor?c&&y(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var i=p(t);l(i,"source")||(i.source=_.join("string"==typeof r?r:""));return t};Function.prototype.toString=m((function toString(){return o(this)&&v(this).source||d(this)}),"toString")},(t,r,a)=>{var i=a(9),o=a(40),l=Function.prototype,c=i&&Object.getOwnPropertyDescriptor,u=o(l,"name"),d=u&&"something"===function something(){}.name,h=u&&(!i||i&&c(l,"name").configurable);t.exports={EXISTS:u,PROPER:d,CONFIGURABLE:h}},(t,r,a)=>{var i=a(17),o=a(23),l=a(38),c=i(Function.toString);o(l.inspectSource)||(l.inspectSource=function(t){return c(t)});t.exports=l.inspectSource},(t,r,a)=>{var i,o,l,c=a(54),u=a(7),d=a(17),h=a(22),p=a(45),v=a(40),y=a(38),g=a(55),_=a(56),m="Object already initialized",b=u.TypeError,A=u.WeakMap;if(c||y.state){var k=y.state||(y.state=new A),P=d(k.get),S=d(k.has),w=d(k.set);i=function(t,r){if(S(k,t))throw new b(m);r.facade=t;w(k,t,r);return r};o=function(t){return P(k,t)||{}};l=function(t){return S(k,t)}}else{var x=g("state");_[x]=!0;i=function(t,r){if(v(t,x))throw new b(m);r.facade=t;p(t,x,r);return r};o=function(t){return v(t,x)?t[x]:{}};l=function(t){return v(t,x)}}t.exports={set:i,get:o,has:l,enforce:function(t){return l(t)?o(t):i(t,{})},getterFor:function(t){return function(r){var a;if(!h(r)||(a=o(r)).type!==t)throw b("Incompatible receiver, "+t+" required");return a}}}},(t,r,a)=>{var i=a(7),o=a(23),l=a(52),c=i.WeakMap;t.exports=o(c)&&/native code/.test(l(c))},(t,r,a)=>{var i=a(36),o=a(42),l=i("keys");t.exports=function(t){return l[t]||(l[t]=o(t))}},t=>{t.exports={}},(t,r,a)=>{var i=a(40),o=a(58),l=a(8),c=a(46);t.exports=function(t,r,a){for(var u=o(r),d=c.f,h=l.f,p=0;p<u.length;p++){var v=u[p];i(t,v)||a&&i(a,v)||d(t,v,h(r,v))}}},(t,r,a)=>{var i=a(25),o=a(17),l=a(59),c=a(68),u=a(48),d=o([].concat);t.exports=i("Reflect","ownKeys")||function ownKeys(t){var r=l.f(u(t)),a=c.f;return a?d(r,a(t)):r}},(t,r,a)=>{var i=a(60),o=a(67).concat("length","prototype");r.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return i(t,o)}},(t,r,a)=>{var i=a(17),o=a(40),l=a(15),c=a(61).indexOf,u=a(56),d=i([].push);t.exports=function(t,r){var a,i=l(t),h=0,p=[];for(a in i)!o(u,a)&&o(i,a)&&d(p,a);for(;r.length>h;)o(i,a=r[h++])&&(~c(p,a)||d(p,a));return p}},(t,r,a)=>{var i=a(15),o=a(62),l=a(65),createMethod=function(t){return function(r,a,c){var u,d=i(r),h=l(d),p=o(c,h);if(t&&a!=a){for(;h>p;)if((u=d[p++])!=u)return!0}else for(;h>p;p++)if((t||p in d)&&d[p]===a)return t||p||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(t,r,a)=>{var i=a(63),o=Math.max,l=Math.min;t.exports=function(t,r){var a=i(t);return a<0?o(a+r,0):l(a,r)}},(t,r,a)=>{var i=a(64);t.exports=function(t){var r=+t;return r!=r||0===r?0:i(r)}},t=>{var r=Math.ceil,a=Math.floor;t.exports=Math.trunc||function trunc(t){var i=+t;return(i>0?a:r)(i)}},(t,r,a)=>{var i=a(66);t.exports=function(t){return i(t.length)}},(t,r,a)=>{var i=a(63),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(t,r)=>{r.f=Object.getOwnPropertySymbols},(t,r,a)=>{var i=a(10),o=a(23),l=/#|\\.prototype\\./,isForced=function(t,r){var a=u[c(t)];return a==h||a!=d&&(o(r)?i(r):!!r)},c=isForced.normalize=function(t){return String(t).replace(l,".").toLowerCase()},u=isForced.data={},d=isForced.NATIVE="N",h=isForced.POLYFILL="P";t.exports=isForced},(t,r,a)=>{var i=a(35),o=a(71),l=a(46).f,c=i("unscopables"),u=Array.prototype;null==u[c]&&l(u,c,{configurable:!0,value:o(null)});t.exports=function(t){u[c][t]=!0}},(t,r,a)=>{var i,o=a(48),l=a(72),c=a(67),u=a(56),d=a(74),h=a(44),p=a(55),v=p("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return"<script>"+t+"</"+"script>"},NullProtoObjectViaActiveX=function(t){t.write(scriptTag(""));t.close();var r=t.parentWindow.Object;t=null;return r},NullProtoObject=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}NullProtoObject="undefined"!=typeof document?document.domain&&i?NullProtoObjectViaActiveX(i):function(){var t,r=h("iframe");r.style.display="none";d.appendChild(r);r.src=String("javascript:");(t=r.contentWindow.document).open();t.write(scriptTag("document.F=Object"));t.close();return t.F}():NullProtoObjectViaActiveX(i);for(var t=c.length;t--;)delete NullProtoObject.prototype[c[t]];return NullProtoObject()};u[v]=!0;t.exports=Object.create||function create(t,r){var a;if(null!==t){EmptyConstructor.prototype=o(t);a=new EmptyConstructor;EmptyConstructor.prototype=null;a[v]=t}else a=NullProtoObject();return void 0===r?a:l.f(a,r)}},(t,r,a)=>{var i=a(9),o=a(47),l=a(46),c=a(48),u=a(15),d=a(73);r.f=i&&!o?Object.defineProperties:function defineProperties(t,r){c(t);for(var a,i=u(r),o=d(r),h=o.length,p=0;h>p;)l.f(t,a=o[p++],i[a]);return t}},(t,r,a)=>{var i=a(60),o=a(67);t.exports=Object.keys||function keys(t){return i(t,o)}},(t,r,a)=>{var i=a(25);t.exports=i("document","documentElement")},(t,r,a)=>{var i=a(7),o=a(17);t.exports=function(t,r){return o(i[t].prototype[r])}},(t,r,a)=>{a(77)},(t,r,a)=>{"use strict";var i=a(78),o=a(65),l=a(63),c=i.aTypedArray;(0,i.exportTypedArrayMethod)("at",(function at(t){var r=c(this),a=o(r),i=l(t),u=i>=0?i:a+i;return u<0||u>=a?void 0:r[u]}))},(t,r,a)=>{"use strict";var i,o,l,c=a(79),u=a(9),d=a(7),h=a(23),p=a(22),v=a(40),y=a(80),g=a(33),_=a(45),m=a(49),b=a(46).f,A=a(26),k=a(82),P=a(84),S=a(35),w=a(42),x=a(53),C=x.enforce,T=x.get,E=d.Int8Array,I=E&&E.prototype,O=d.Uint8ClampedArray,M=O&&O.prototype,R=E&&k(E),D=I&&k(I),L=Object.prototype,G=d.TypeError,j=S("toStringTag"),N=w("TYPED_ARRAY_TAG"),B="TypedArrayConstructor",W=c&&!!P&&"Opera"!==y(d.opera),U=!1,H={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},z={BigInt64Array:8,BigUint64Array:8},getTypedArrayConstructor=function(t){var r=k(t);if(p(r)){var a=T(r);return a&&v(a,B)?a.TypedArrayConstructor:getTypedArrayConstructor(r)}},isTypedArray=function(t){if(!p(t))return!1;var r=y(t);return v(H,r)||v(z,r)};for(i in H)(l=(o=d[i])&&o.prototype)?C(l).TypedArrayConstructor=o:W=!1;for(i in z)(l=(o=d[i])&&o.prototype)&&(C(l).TypedArrayConstructor=o);if(!W||!h(R)||R===Function.prototype){R=function TypedArray(){throw G("Incorrect invocation")};if(W)for(i in H)d[i]&&P(d[i],R)}if(!W||!D||D===L){D=R.prototype;if(W)for(i in H)d[i]&&P(d[i].prototype,D)}W&&k(M)!==D&&P(M,D);if(u&&!v(D,j)){U=!0;b(D,j,{get:function(){return p(this)?this[N]:void 0}});for(i in H)d[i]&&_(d[i],N,i)}t.exports={NATIVE_ARRAY_BUFFER_VIEWS:W,TYPED_ARRAY_TAG:U&&N,aTypedArray:function(t){if(isTypedArray(t))return t;throw G("Target is not a typed array")},aTypedArrayConstructor:function(t){if(h(t)&&(!P||A(R,t)))return t;throw G(g(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,r,a,i){if(u){if(a)for(var o in H){var l=d[o];if(l&&v(l.prototype,t))try{delete l.prototype[t]}catch(a){try{l.prototype[t]=r}catch(t){}}}D[t]&&!a||m(D,t,a?r:W&&I[t]||r,i)}},exportTypedArrayStaticMethod:function(t,r,a){var i,o;if(u){if(P){if(a)for(i in H)if((o=d[i])&&v(o,t))try{delete o[t]}catch(t){}if(R[t]&&!a)return;try{return m(R,t,a?r:W&&R[t]||r)}catch(t){}}for(i in H)!(o=d[i])||o[t]&&!a||m(o,t,r)}},getTypedArrayConstructor:getTypedArrayConstructor,isView:function isView(t){if(!p(t))return!1;var r=y(t);return"DataView"===r||v(H,r)||v(z,r)},isTypedArray:isTypedArray,TypedArray:R,TypedArrayPrototype:D}},t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(t,r,a)=>{var i=a(81),o=a(23),l=a(18),c=a(35)("toStringTag"),u=Object,d="Arguments"==l(function(){return arguments}());t.exports=i?l:function(t){var r,a,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=function(t,r){try{return t[r]}catch(t){}}(r=u(t),c))?a:d?l(r):"Object"==(i=l(r))&&o(r.callee)?"Arguments":i}},(t,r,a)=>{var i={};i[a(35)("toStringTag")]="z";t.exports="[object z]"===String(i)},(t,r,a)=>{var i=a(40),o=a(23),l=a(41),c=a(55),u=a(83),d=c("IE_PROTO"),h=Object,p=h.prototype;t.exports=u?h.getPrototypeOf:function(t){var r=l(t);if(i(r,d))return r[d];var a=r.constructor;return o(a)&&r instanceof a?a.prototype:r instanceof h?p:null}},(t,r,a)=>{var i=a(10);t.exports=!i((function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F)!==F.prototype}))},(t,r,a)=>{var i=a(17),o=a(48),l=a(85);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,a={};try{(t=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(a,[]);r=a instanceof Array}catch(t){}return function setPrototypeOf(a,i){o(a);l(i);r?t(a,i):a.__proto__=i;return a}}():void 0)},(t,r,a)=>{var i=a(23),o=String,l=TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw l("Can\'t set "+o(t)+" as a prototype")}},(t,r,a)=>{a(87);a(93);a(95);a(117);a(119);var i=a(128);t.exports=i.structuredClone},(t,r,a)=>{"use strict";var i=a(15),o=a(70),l=a(88),c=a(53),u=a(46).f,d=a(89),h=a(37),p=a(9),v="Array Iterator",y=c.set,g=c.getterFor(v);t.exports=d(Array,"Array",(function(t,r){y(this,{type:v,target:i(t),index:0,kind:r})}),(function(){var t=g(this),r=t.target,a=t.kind,i=t.index++;if(!r||i>=r.length){t.target=void 0;return{value:void 0,done:!0}}return"keys"==a?{value:i,done:!1}:"values"==a?{value:r[i],done:!1}:{value:[i,r[i]],done:!1}}),"values");var _=l.Arguments=l.Array;o("keys");o("values");o("entries");if(!h&&p&&"values"!==_.name)try{u(_,"name",{value:"values"})}catch(t){}},t=>{t.exports={}},(t,r,a)=>{"use strict";var i=a(6),o=a(11),l=a(37),c=a(51),u=a(23),d=a(90),h=a(82),p=a(84),v=a(92),y=a(45),g=a(49),_=a(35),m=a(88),b=a(91),A=c.PROPER,k=c.CONFIGURABLE,P=b.IteratorPrototype,S=b.BUGGY_SAFARI_ITERATORS,w=_("iterator"),x="keys",C="values",T="entries",returnThis=function(){return this};t.exports=function(t,r,a,c,_,b,E){d(a,r,c);var I,O,M,getIterationMethod=function(t){if(t===_&&j)return j;if(!S&&t in L)return L[t];switch(t){case x:return function keys(){return new a(this,t)};case C:return function values(){return new a(this,t)};case T:return function entries(){return new a(this,t)}}return function(){return new a(this)}},R=r+" Iterator",D=!1,L=t.prototype,G=L[w]||L["@@iterator"]||_&&L[_],j=!S&&G||getIterationMethod(_),N="Array"==r&&L.entries||G;if(N&&(I=h(N.call(new t)))!==Object.prototype&&I.next){l||h(I)===P||(p?p(I,P):u(I[w])||g(I,w,returnThis));v(I,R,!0,!0);l&&(m[R]=returnThis)}if(A&&_==C&&G&&G.name!==C)if(!l&&k)y(L,"name",C);else{D=!0;j=function values(){return o(G,this)}}if(_){O={values:getIterationMethod(C),keys:b?j:getIterationMethod(x),entries:getIterationMethod(T)};if(E)for(M in O)(S||D||!(M in L))&&g(L,M,O[M]);else i({target:r,proto:!0,forced:S||D},O)}l&&!E||L[w]===j||g(L,w,j,{name:_});m[r]=j;return O}},(t,r,a)=>{"use strict";var i=a(91).IteratorPrototype,o=a(71),l=a(14),c=a(92),u=a(88),returnThis=function(){return this};t.exports=function(t,r,a,d){var h=r+" Iterator";t.prototype=o(i,{next:l(+!d,a)});c(t,h,!1,!0);u[h]=returnThis;return t}},(t,r,a)=>{"use strict";var i,o,l,c=a(10),u=a(23),d=a(71),h=a(82),p=a(49),v=a(35),y=a(37),g=v("iterator"),_=!1;[].keys&&("next"in(l=[].keys())?(o=h(h(l)))!==Object.prototype&&(i=o):_=!0);null==i||c((function(){var t={};return i[g].call(t)!==t}))?i={}:y&&(i=d(i));u(i[g])||p(i,g,(function(){return this}));t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:_}},(t,r,a)=>{var i=a(46).f,o=a(40),l=a(35)("toStringTag");t.exports=function(t,r,a){t&&!a&&(t=t.prototype);t&&!o(t,l)&&i(t,l,{configurable:!0,value:r})}},(t,r,a)=>{var i=a(81),o=a(49),l=a(94);i||o(Object.prototype,"toString",l,{unsafe:!0})},(t,r,a)=>{"use strict";var i=a(81),o=a(80);t.exports=i?{}.toString:function toString(){return"[object "+o(this)+"]"}},(t,r,a)=>{a(96)},(t,r,a)=>{"use strict";a(97)("Map",(function(t){return function Map(){return t(this,arguments.length?arguments[0]:void 0)}}),a(114))},(t,r,a)=>{"use strict";var i=a(6),o=a(7),l=a(17),c=a(69),u=a(49),d=a(98),h=a(105),p=a(111),v=a(23),y=a(22),g=a(10),_=a(112),m=a(92),b=a(113);t.exports=function(t,r,a){var A=-1!==t.indexOf("Map"),k=-1!==t.indexOf("Weak"),P=A?"set":"add",S=o[t],w=S&&S.prototype,x=S,C={},fixMethod=function(t){var r=l(w[t]);u(w,t,"add"==t?function add(t){r(this,0===t?0:t);return this}:"delete"==t?function(t){return!(k&&!y(t))&&r(this,0===t?0:t)}:"get"==t?function get(t){return k&&!y(t)?void 0:r(this,0===t?0:t)}:"has"==t?function has(t){return!(k&&!y(t))&&r(this,0===t?0:t)}:function set(t,a){r(this,0===t?0:t,a);return this})};if(c(t,!v(S)||!(k||w.forEach&&!g((function(){(new S).entries().next()}))))){x=a.getConstructor(r,t,A,P);d.enable()}else if(c(t,!0)){var T=new x,E=T[P](k?{}:-0,1)!=T,I=g((function(){T.has(1)})),O=_((function(t){new S(t)})),M=!k&&g((function(){for(var t=new S,r=5;r--;)t[P](r,r);return!t.has(-0)}));if(!O){(x=r((function(t,r){p(t,w);var a=b(new S,t,x);null!=r&&h(r,a[P],{that:a,AS_ENTRIES:A});return a}))).prototype=w;w.constructor=x}if(I||M){fixMethod("delete");fixMethod("has");A&&fixMethod("get")}(M||E)&&fixMethod(P);k&&w.clear&&delete w.clear}C[t]=x;i({global:!0,constructor:!0,forced:x!=S},C);m(x,t);k||a.setStrong(x,t,A);return x}},(t,r,a)=>{var i=a(6),o=a(17),l=a(56),c=a(22),u=a(40),d=a(46).f,h=a(59),p=a(99),v=a(102),y=a(42),g=a(104),_=!1,m=y("meta"),b=0,setMetadata=function(t){d(t,m,{value:{objectID:"O"+b++,weakData:{}}})},A=t.exports={enable:function(){A.enable=function(){};_=!0;var t=h.f,r=o([].splice),a={};a[m]=1;if(t(a).length){h.f=function(a){for(var i=t(a),o=0,l=i.length;o<l;o++)if(i[o]===m){r(i,o,1);break}return i};i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f})}},fastKey:function(t,r){if(!c(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!u(t,m)){if(!v(t))return"F";if(!r)return"E";setMetadata(t)}return t[m].objectID},getWeakData:function(t,r){if(!u(t,m)){if(!v(t))return!0;if(!r)return!1;setMetadata(t)}return t[m].weakData},onFreeze:function(t){g&&_&&v(t)&&!u(t,m)&&setMetadata(t);return t}};l[m]=!0},(t,r,a)=>{var i=a(18),o=a(15),l=a(59).f,c=a(100),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function getOwnPropertyNames(t){return u&&"Window"==i(t)?function(t){try{return l(t)}catch(t){return c(u)}}(t):l(o(t))}},(t,r,a)=>{var i=a(62),o=a(65),l=a(101),c=Array,u=Math.max;t.exports=function(t,r,a){for(var d=o(t),h=i(r,d),p=i(void 0===a?d:a,d),v=c(u(p-h,0)),y=0;h<p;h++,y++)l(v,y,t[h]);v.length=y;return v}},(t,r,a)=>{"use strict";var i=a(20),o=a(46),l=a(14);t.exports=function(t,r,a){var c=i(r);c in t?o.f(t,c,l(0,a)):t[c]=a}},(t,r,a)=>{var i=a(10),o=a(22),l=a(18),c=a(103),u=Object.isExtensible,d=i((function(){u(1)}));t.exports=d||c?function isExtensible(t){return!!o(t)&&((!c||"ArrayBuffer"!=l(t))&&(!u||u(t)))}:u},(t,r,a)=>{var i=a(10);t.exports=i((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},(t,r,a)=>{var i=a(10);t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},(t,r,a)=>{var i=a(106),o=a(11),l=a(48),c=a(33),u=a(107),d=a(65),h=a(26),p=a(108),v=a(109),y=a(110),g=TypeError,Result=function(t,r){this.stopped=t;this.result=r},_=Result.prototype;t.exports=function(t,r,a){var m,b,A,k,P,S,w,x=a&&a.that,C=!(!a||!a.AS_ENTRIES),T=!(!a||!a.IS_RECORD),E=!(!a||!a.IS_ITERATOR),I=!(!a||!a.INTERRUPTED),O=i(r,x),stop=function(t){m&&y(m,"normal",t);return new Result(!0,t)},callFn=function(t){if(C){l(t);return I?O(t[0],t[1],stop):O(t[0],t[1])}return I?O(t,stop):O(t)};if(T)m=t.iterator;else if(E)m=t;else{if(!(b=v(t)))throw g(c(t)+" is not iterable");if(u(b)){for(A=0,k=d(t);k>A;A++)if((P=callFn(t[A]))&&h(_,P))return P;return new Result(!1)}m=p(t,b)}S=T?t.next:m.next;for(;!(w=o(S,m)).done;){try{P=callFn(w.value)}catch(t){y(m,"throw",t)}if("object"==typeof P&&P&&h(_,P))return P}return new Result(!1)}},(t,r,a)=>{var i=a(17),o=a(32),l=a(12),c=i(i.bind);t.exports=function(t,r){o(t);return void 0===r?t:l?c(t,r):function(){return t.apply(r,arguments)}}},(t,r,a)=>{var i=a(35),o=a(88),l=i("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[l]===t)}},(t,r,a)=>{var i=a(11),o=a(32),l=a(48),c=a(33),u=a(109),d=TypeError;t.exports=function(t,r){var a=arguments.length<2?u(t):r;if(o(a))return l(i(a,t));throw d(c(t)+" is not iterable")}},(t,r,a)=>{var i=a(80),o=a(31),l=a(88),c=a(35)("iterator");t.exports=function(t){if(null!=t)return o(t,c)||o(t,"@@iterator")||l[i(t)]}},(t,r,a)=>{var i=a(11),o=a(48),l=a(31);t.exports=function(t,r,a){var c,u;o(t);try{if(!(c=l(t,"return"))){if("throw"===r)throw a;return a}c=i(c,t)}catch(t){u=!0;c=t}if("throw"===r)throw a;if(u)throw c;o(c);return a}},(t,r,a)=>{var i=a(26),o=TypeError;t.exports=function(t,r){if(i(r,t))return t;throw o("Incorrect invocation")}},(t,r,a)=>{var i=a(35)("iterator"),o=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){o=!0}};c[i]=function(){return this};Array.from(c,(function(){throw 2}))}catch(t){}t.exports=function(t,r){if(!r&&!o)return!1;var a=!1;try{var l={};l[i]=function(){return{next:function(){return{done:a=!0}}}};t(l)}catch(t){}return a}},(t,r,a)=>{var i=a(23),o=a(22),l=a(84);t.exports=function(t,r,a){var c,u;l&&i(c=r.constructor)&&c!==a&&o(u=c.prototype)&&u!==a.prototype&&l(t,u);return t}},(t,r,a)=>{"use strict";var i=a(46).f,o=a(71),l=a(115),c=a(106),u=a(111),d=a(105),h=a(89),p=a(116),v=a(9),y=a(98).fastKey,g=a(53),_=g.set,m=g.getterFor;t.exports={getConstructor:function(t,r,a,h){var p=t((function(t,i){u(t,g);_(t,{type:r,index:o(null),first:void 0,last:void 0,size:0});v||(t.size=0);null!=i&&d(i,t[h],{that:t,AS_ENTRIES:a})})),g=p.prototype,b=m(r),define=function(t,r,a){var i,o,l=b(t),c=getEntry(t,r);if(c)c.value=a;else{l.last=c={index:o=y(r,!0),key:r,value:a,previous:i=l.last,next:void 0,removed:!1};l.first||(l.first=c);i&&(i.next=c);v?l.size++:t.size++;"F"!==o&&(l.index[o]=c)}return t},getEntry=function(t,r){var a,i=b(t),o=y(r);if("F"!==o)return i.index[o];for(a=i.first;a;a=a.next)if(a.key==r)return a};l(g,{clear:function clear(){for(var t=b(this),r=t.index,a=t.first;a;){a.removed=!0;a.previous&&(a.previous=a.previous.next=void 0);delete r[a.index];a=a.next}t.first=t.last=void 0;v?t.size=0:this.size=0},delete:function(t){var r=this,a=b(r),i=getEntry(r,t);if(i){var o=i.next,l=i.previous;delete a.index[i.index];i.removed=!0;l&&(l.next=o);o&&(o.previous=l);a.first==i&&(a.first=o);a.last==i&&(a.last=l);v?a.size--:r.size--}return!!i},forEach:function forEach(t){for(var r,a=b(this),i=c(t,arguments.length>1?arguments[1]:void 0);r=r?r.next:a.first;){i(r.value,r.key,this);for(;r&&r.removed;)r=r.previous}},has:function has(t){return!!getEntry(this,t)}});l(g,a?{get:function get(t){var r=getEntry(this,t);return r&&r.value},set:function set(t,r){return define(this,0===t?0:t,r)}}:{add:function add(t){return define(this,t=0===t?0:t,t)}});v&&i(g,"size",{get:function(){return b(this).size}});return p},setStrong:function(t,r,a){var i=r+" Iterator",o=m(r),l=m(i);h(t,r,(function(t,r){_(this,{type:i,target:t,state:o(t),kind:r,last:void 0})}),(function(){for(var t=l(this),r=t.kind,a=t.last;a&&a.removed;)a=a.previous;if(!t.target||!(t.last=a=a?a.next:t.state.first)){t.target=void 0;return{value:void 0,done:!0}}return"keys"==r?{value:a.key,done:!1}:"values"==r?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}}),a?"entries":"values",!a,!0);p(r)}}},(t,r,a)=>{var i=a(49);t.exports=function(t,r,a){for(var o in r)i(t,o,r[o],a);return t}},(t,r,a)=>{"use strict";var i=a(25),o=a(46),l=a(35),c=a(9),u=l("species");t.exports=function(t){var r=i(t),a=o.f;c&&r&&!r[u]&&a(r,u,{configurable:!0,get:function(){return this}})}},(t,r,a)=>{a(118)},(t,r,a)=>{"use strict";a(97)("Set",(function(t){return function Set(){return t(this,arguments.length?arguments[0]:void 0)}}),a(114))},(t,r,a)=>{var i,o=a(37),l=a(6),c=a(7),u=a(25),d=a(17),h=a(10),p=a(42),v=a(23),y=a(120),g=a(22),_=a(24),m=a(105),b=a(48),A=a(80),k=a(40),P=a(101),S=a(45),w=a(65),x=a(121),C=a(122),T=a(124),E=a(29),I=a(125),O=a(126),M=a(127),R=c.Object,D=c.Date,L=c.Error,G=c.EvalError,j=c.RangeError,N=c.ReferenceError,B=c.SyntaxError,W=c.TypeError,U=c.URIError,H=c.PerformanceMark,z=c.WebAssembly,V=z&&z.CompileError||L,X=z&&z.LinkError||L,Y=z&&z.RuntimeError||L,K=u("DOMException"),J=u("Set"),Q=u("Map"),$=Q.prototype,Z=d($.has),ee=d($.get),te=d($.set),re=d(J.prototype.add),ne=u("Object","keys"),ae=d([].push),ie=d((!0).valueOf),oe=d(1..valueOf),se=d("".valueOf),le=d(D.prototype.getTime),ce=p("structuredClone"),ue="DataCloneError",de="Transferring",checkBasicSemantic=function(t){return!h((function(){var r=new c.Set([7]),a=t(r),i=t(R(7));return a==r||!a.has(7)||"object"!=typeof i||7!=i}))&&t},checkErrorsCloning=function(t,r){return!h((function(){var a=new r,i=t({a:a,b:a});return!(i&&i.a===i.b&&i.a instanceof r&&i.a.stack===a.stack)}))},he=c.structuredClone,fe=o||!checkErrorsCloning(he,L)||!checkErrorsCloning(he,K)||!(i=he,!h((function(){var t=i(new c.AggregateError([1],ce,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=ce||3!=t.cause}))),pe=!he&&checkBasicSemantic((function(t){return new H(ce,{detail:t}).detail})),ve=checkBasicSemantic(he)||pe,throwUncloneable=function(t){throw new K("Uncloneable type: "+t,ue)},throwUnpolyfillable=function(t,r){throw new K((r||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",ue)},structuredCloneInternal=function(t,r){_(t)&&throwUncloneable("Symbol");if(!g(t))return t;if(r){if(Z(r,t))return ee(r,t)}else r=new Q;var a,i,o,l,d,h,p,m,b,x,E=A(t),I=!1;switch(E){case"Array":o=[];I=!0;break;case"Object":o={};I=!0;break;case"Map":o=new Q;I=!0;break;case"Set":o=new J;I=!0;break;case"RegExp":o=new RegExp(t.source,C(t));break;case"Error":switch(i=t.name){case"AggregateError":o=u("AggregateError")([]);break;case"EvalError":o=G();break;case"RangeError":o=j();break;case"ReferenceError":o=N();break;case"SyntaxError":o=B();break;case"TypeError":o=W();break;case"URIError":o=U();break;case"CompileError":o=V();break;case"LinkError":o=X();break;case"RuntimeError":o=Y();break;default:o=L()}I=!0;break;case"DOMException":o=new K(t.message,t.name);I=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":a=c[E];g(a)||throwUnpolyfillable(E);o=new a(structuredCloneInternal(t.buffer,r),t.byteOffset,"DataView"===E?t.byteLength:t.length);break;case"DOMQuad":try{o=new DOMQuad(structuredCloneInternal(t.p1,r),structuredCloneInternal(t.p2,r),structuredCloneInternal(t.p3,r),structuredCloneInternal(t.p4,r))}catch(r){ve?o=ve(t):throwUnpolyfillable(E)}break;case"FileList":a=c.DataTransfer;if(y(a)){l=new a;for(d=0,h=w(t);d<h;d++)l.items.add(structuredCloneInternal(t[d],r));o=l.files}else ve?o=ve(t):throwUnpolyfillable(E);break;case"ImageData":try{o=new ImageData(structuredCloneInternal(t.data,r),t.width,t.height,{colorSpace:t.colorSpace})}catch(r){ve?o=ve(t):throwUnpolyfillable(E)}break;default:if(ve)o=ve(t);else switch(E){case"BigInt":o=R(t.valueOf());break;case"Boolean":o=R(ie(t));break;case"Number":o=R(oe(t));break;case"String":o=R(se(t));break;case"Date":o=new D(le(t));break;case"ArrayBuffer":(a=c.DataView)||"function"==typeof t.slice||throwUnpolyfillable(E);try{if("function"==typeof t.slice)o=t.slice(0);else{h=t.byteLength;o=new ArrayBuffer(h);b=new a(t);x=new a(o);for(d=0;d<h;d++)x.setUint8(d,b.getUint8(d))}}catch(t){throw new K("ArrayBuffer is detached",ue)}break;case"SharedArrayBuffer":o=t;break;case"Blob":try{o=t.slice(0,t.size,t.type)}catch(t){throwUnpolyfillable(E)}break;case"DOMPoint":case"DOMPointReadOnly":a=c[E];try{o=a.fromPoint?a.fromPoint(t):new a(t.x,t.y,t.z,t.w)}catch(t){throwUnpolyfillable(E)}break;case"DOMRect":case"DOMRectReadOnly":a=c[E];try{o=a.fromRect?a.fromRect(t):new a(t.x,t.y,t.width,t.height)}catch(t){throwUnpolyfillable(E)}break;case"DOMMatrix":case"DOMMatrixReadOnly":a=c[E];try{o=a.fromMatrix?a.fromMatrix(t):new a(t)}catch(t){throwUnpolyfillable(E)}break;case"AudioData":case"VideoFrame":v(t.clone)||throwUnpolyfillable(E);try{o=t.clone()}catch(t){throwUncloneable(E)}break;case"File":try{o=new File([t],t.name,t)}catch(t){throwUnpolyfillable(E)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(E);default:throwUncloneable(E)}}te(r,t,o);if(I)switch(E){case"Array":case"Object":p=ne(t);for(d=0,h=w(p);d<h;d++){m=p[d];P(o,m,structuredCloneInternal(t[m],r))}break;case"Map":t.forEach((function(t,a){te(o,structuredCloneInternal(a,r),structuredCloneInternal(t,r))}));break;case"Set":t.forEach((function(t){re(o,structuredCloneInternal(t,r))}));break;case"Error":S(o,"message",structuredCloneInternal(t.message,r));k(t,"cause")&&S(o,"cause",structuredCloneInternal(t.cause,r));"AggregateError"==i&&(o.errors=structuredCloneInternal(t.errors,r));case"DOMException":T&&S(o,"stack",structuredCloneInternal(t.stack,r))}return o},ye=he&&!h((function(){if(O&&E>92||M&&E>94||I&&E>97)return!1;var t=new ArrayBuffer(8),r=he(t,{transfer:[t]});return 0!=t.byteLength||8!=r.byteLength})),tryToTransfer=function(t,r){if(!g(t))throw W("Transfer option cannot be converted to a sequence");var a=[];m(t,(function(t){ae(a,b(t))}));var i,o,l,u,d,h,p=0,_=w(a);if(ye){u=he(a,{transfer:a});for(;p<_;)te(r,a[p],u[p++])}else for(;p<_;){i=a[p++];if(Z(r,i))throw new K("Duplicate transferable",ue);switch(o=A(i)){case"ImageBitmap":l=c.OffscreenCanvas;y(l)||throwUnpolyfillable(o,de);try{(h=new l(i.width,i.height)).getContext("bitmaprenderer").transferFromImageBitmap(i);d=h.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":v(i.clone)&&v(i.close)||throwUnpolyfillable(o,de);try{d=i.clone();i.close()}catch(t){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(o,de)}if(void 0===d)throw new K("This object cannot be transferred: "+o,ue);te(r,i,d)}};l({global:!0,enumerable:!0,sham:!ye,forced:fe},{structuredClone:function structuredClone(t){var r,a=x(arguments.length,1)>1&&null!=arguments[1]?b(arguments[1]):void 0,i=a?a.transfer:void 0;if(void 0!==i){r=new Q;tryToTransfer(i,r)}return structuredCloneInternal(t,r)}})},(t,r,a)=>{var i=a(17),o=a(10),l=a(23),c=a(80),u=a(25),d=a(52),noop=function(){},h=[],p=u("Reflect","construct"),v=/^\\s*(?:class|function)\\b/,y=i(v.exec),g=!v.exec(noop),_=function isConstructor(t){if(!l(t))return!1;try{p(noop,h,t);return!0}catch(t){return!1}},m=function isConstructor(t){if(!l(t))return!1;switch(c(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!y(v,d(t))}catch(t){return!0}};m.sham=!0;t.exports=!p||o((function(){var t;return _(_.call)||!_(Object)||!_((function(){t=!0}))||t}))?m:_},t=>{var r=TypeError;t.exports=function(t,a){if(t<a)throw r("Not enough arguments");return t}},(t,r,a)=>{var i=a(11),o=a(40),l=a(26),c=a(123),u=RegExp.prototype;t.exports=function(t){var r=t.flags;return void 0!==r||"flags"in u||o(t,"flags")||!l(u,t)?r:i(c,t)}},(t,r,a)=>{"use strict";var i=a(48);t.exports=function(){var t=i(this),r="";t.hasIndices&&(r+="d");t.global&&(r+="g");t.ignoreCase&&(r+="i");t.multiline&&(r+="m");t.dotAll&&(r+="s");t.unicode&&(r+="u");t.unicodeSets&&(r+="v");t.sticky&&(r+="y");return r}},(t,r,a)=>{var i=a(10),o=a(14);t.exports=!i((function(){var t=Error("a");if(!("stack"in t))return!0;Object.defineProperty(t,"stack",o(1,7));return 7!==t.stack}))},t=>{t.exports="object"==typeof window&&"object"!=typeof Deno},t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(t,r,a)=>{var i=a(18),o=a(7);t.exports="process"==i(o.process)},(t,r,a)=>{var i=a(7);t.exports=i},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.StatTimer=r.RenderingCancelledException=r.PixelsPerInch=r.PageViewport=r.PDFDateString=r.DOMStandardFontDataFactory=r.DOMSVGFactory=r.DOMCanvasFactory=r.DOMCMapReaderFactory=void 0;r.binarySearchFirstItem=function binarySearchFirstItem(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=a,o=t.length-1;if(o<0||!r(t[o]))return t.length;if(r(t[i]))return i;for(;i<o;){var l=i+o>>1,c=t[l];r(c)?o=l:i=l+1}return i};r.deprecated=function deprecated(t){console.log("Deprecated API usage: "+t)};r.getColorValues=function getColorValues(t){var r=document.createElement("span");r.style.visibility="hidden";document.body.append(r);var a,i=_createForOfIteratorHelper(t.keys());try{for(i.s();!(a=i.n()).done;){var o=a.value;r.style.color=o;var l=window.getComputedStyle(r).color;t.set(o,getRGB(l))}}catch(t){i.e(t)}finally{i.f()}r.remove()};r.getFilenameFromUrl=function getFilenameFromUrl(t){var r=t.indexOf("#"),a=t.indexOf("?"),i=Math.min(r>0?r:t.length,a>0?a:t.length);return t.substring(t.lastIndexOf("/",i)+1,i)};r.getPdfFilenameFromUrl=function getPdfFilenameFromUrl(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return r;if(isDataScheme(t)){(0,o.warn)(\'getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.\');return r}var a=/^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i,l=a.exec(t),c=i.exec(l[1])||i.exec(l[2])||i.exec(l[3]);if(c&&(c=c[0]).includes("%"))try{c=i.exec(decodeURIComponent(c))[0]}catch(t){}return c||r};r.getRGB=getRGB;r.getXfaPageViewport=function getXfaPageViewport(t,r){var a=r.scale,i=void 0===a?1:a,o=r.rotation,l=void 0===o?0:o,c=t.attributes.style,u=c.width,d=c.height,h=[0,0,parseInt(u),parseInt(d)];return new p({viewBox:h,scale:i,rotation:l})};r.isDataScheme=isDataScheme;r.isPdfFile=function isPdfFile(t){return"string"==typeof t&&/\\.pdf$/i.test(t)};r.isValidFetchUrl=isValidFetchUrl;r.loadScript=function loadScript(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(a,i){var o=document.createElement("script");o.src=t;o.onload=function(t){r&&o.remove();a(t)};o.onerror=function(){i(new Error("Cannot load script at: ".concat(o.src)))};(document.head||document.documentElement).append(o)}))};var i=a(130),o=a(1);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),c=new Context(i||[]);return l._invoke=function(t,r,a){var i="suspendedStart";return function(o,l){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw l;return doneResult()}for(a.method=o,a.arg=l;;){var c=a.delegate;if(c){var d=maybeInvokeDelegate(c,a);if(d){if(d===u)continue;return d}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var h=tryCatch(t,r,a);if("normal"===h.type){if(i=a.done?"completed":"suspendedYield",h.arg===u)continue;return{value:h.arg,done:a.done}}"throw"===h.type&&(i="completed",a.method="throw",a.arg=h.arg)}}}(t,a,c),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&a.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,o,l,c){var u=tryCatch(t[i],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&a.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var i;this._invoke=function(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,a,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var a=t.iterator[r.method];if(void 0===a){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return u}var i=tryCatch(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,u;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,u):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,l=function next(){for(;++i<t.length;)if(a.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return l.next=l}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(v),define(v,c,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,i){return l.type="throw",l.arg=t,r.next=a,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),u},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),u}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),d=u.value}catch(t){a(t);return}u.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperty(t,r,a){r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a;return t}var l=_createClass((function PixelsPerInch(){_classCallCheck(this,PixelsPerInch)}));r.PixelsPerInch=l;_defineProperty(l,"CSS",96);_defineProperty(l,"PDF",72);_defineProperty(l,"PDF_TO_CSS_UNITS",l.CSS/l.PDF);var c=function(t){_inherits(DOMCanvasFactory,t);var r=_createSuper(DOMCanvasFactory);function DOMCanvasFactory(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.ownerDocument,o=void 0===i?globalThis.document:i;_classCallCheck(this,DOMCanvasFactory);(t=r.call(this))._document=o;return t}_createClass(DOMCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(t,r){var a=this._document.createElement("canvas");a.width=t;a.height=r;return a}}]);return DOMCanvasFactory}(i.BaseCanvasFactory);r.DOMCanvasFactory=c;function fetchData(t){return _fetchData.apply(this,arguments)}function _fetchData(){_fetchData=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,a,i=arguments;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:r=i.length>1&&void 0!==i[1]&&i[1];if(!isValidFetchUrl(t,document.baseURI)){l.next=21;break}l.next=4;return fetch(t);case 4:if((a=l.sent).ok){l.next=7;break}throw new Error(a.statusText);case 7:if(!r){l.next=15;break}l.t1=Uint8Array;l.next=11;return a.arrayBuffer();case 11:l.t2=l.sent;l.t0=new l.t1(l.t2);l.next=20;break;case 15:l.t3=o.stringToBytes;l.next=18;return a.text();case 18:l.t4=l.sent;l.t0=(0,l.t3)(l.t4);case 20:return l.abrupt("return",l.t0);case 21:return l.abrupt("return",new Promise((function(a,i){var l=new XMLHttpRequest;l.open("GET",t,!0);r&&(l.responseType="arraybuffer");l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE){if(200===l.status||0===l.status){var t;r&&l.response?t=new Uint8Array(l.response):!r&&l.responseText&&(t=(0,o.stringToBytes)(l.responseText));if(t){a(t);return}}i(new Error(l.statusText))}};l.send(null)})));case 22:case"end":return l.stop()}}),_callee)})));return _fetchData.apply(this,arguments)}var u=function(t){_inherits(DOMCMapReaderFactory,t);var r=_createSuper(DOMCMapReaderFactory);function DOMCMapReaderFactory(){_classCallCheck(this,DOMCMapReaderFactory);return r.apply(this,arguments)}_createClass(DOMCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(t,r){return fetchData(t,this.isCompressed).then((function(t){return{cMapData:t,compressionType:r}}))}}]);return DOMCMapReaderFactory}(i.BaseCMapReaderFactory);r.DOMCMapReaderFactory=u;var d=function(t){_inherits(DOMStandardFontDataFactory,t);var r=_createSuper(DOMStandardFontDataFactory);function DOMStandardFontDataFactory(){_classCallCheck(this,DOMStandardFontDataFactory);return r.apply(this,arguments)}_createClass(DOMStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(t){return fetchData(t,!0)}}]);return DOMStandardFontDataFactory}(i.BaseStandardFontDataFactory);r.DOMStandardFontDataFactory=d;var h=function(t){_inherits(DOMSVGFactory,t);var r=_createSuper(DOMSVGFactory);function DOMSVGFactory(){_classCallCheck(this,DOMSVGFactory);return r.apply(this,arguments)}_createClass(DOMSVGFactory,[{key:"_createSVG",value:function _createSVG(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}}]);return DOMSVGFactory}(i.BaseSVGFactory);r.DOMSVGFactory=h;var p=function(){function PageViewport(t){var r=t.viewBox,a=t.scale,i=t.rotation,o=t.offsetX,l=void 0===o?0:o,c=t.offsetY,u=void 0===c?0:c,d=t.dontFlip,h=void 0!==d&&d;_classCallCheck(this,PageViewport);this.viewBox=r;this.scale=a;this.rotation=i;this.offsetX=l;this.offsetY=u;var p,v,y,g,_,m,b,A,k=(r[2]+r[0])/2,P=(r[3]+r[1])/2;(i%=360)<0&&(i+=360);switch(i){case 180:p=-1;v=0;y=0;g=1;break;case 90:p=0;v=1;y=1;g=0;break;case 270:p=0;v=-1;y=-1;g=0;break;case 0:p=1;v=0;y=0;g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}if(h){y=-y;g=-g}if(0===p){_=Math.abs(P-r[1])*a+l;m=Math.abs(k-r[0])*a+u;b=Math.abs(r[3]-r[1])*a;A=Math.abs(r[2]-r[0])*a}else{_=Math.abs(k-r[0])*a+l;m=Math.abs(P-r[1])*a+u;b=Math.abs(r[2]-r[0])*a;A=Math.abs(r[3]-r[1])*a}this.transform=[p*a,v*a,y*a,g*a,_-p*a*k-y*a*P,m-v*a*k-g*a*P];this.width=b;this.height=A}_createClass(PageViewport,[{key:"clone",value:function clone(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,a=void 0===r?this.scale:r,i=t.rotation,o=void 0===i?this.rotation:i,l=t.offsetX,c=void 0===l?this.offsetX:l,u=t.offsetY,d=void 0===u?this.offsetY:u,h=t.dontFlip,p=void 0!==h&&h;return new PageViewport({viewBox:this.viewBox.slice(),scale:a,rotation:o,offsetX:c,offsetY:d,dontFlip:p})}},{key:"convertToViewportPoint",value:function convertToViewportPoint(t,r){return o.Util.applyTransform([t,r],this.transform)}},{key:"convertToViewportRectangle",value:function convertToViewportRectangle(t){var r=o.Util.applyTransform([t[0],t[1]],this.transform),a=o.Util.applyTransform([t[2],t[3]],this.transform);return[r[0],r[1],a[0],a[1]]}},{key:"convertToPdfPoint",value:function convertToPdfPoint(t,r){return o.Util.applyInverseTransform([t,r],this.transform)}}]);return PageViewport}();r.PageViewport=p;var v=function(t){_inherits(RenderingCancelledException,t);var r=_createSuper(RenderingCancelledException);function RenderingCancelledException(t,a){var i;_classCallCheck(this,RenderingCancelledException);(i=r.call(this,t,"RenderingCancelledException")).type=a;return i}return _createClass(RenderingCancelledException)}(o.BaseException);r.RenderingCancelledException=v;function isDataScheme(t){for(var r=t.length,a=0;a<r&&""===t[a].trim();)a++;return"data:"===t.substring(a,a+5).toLowerCase()}var y,g=function(){function StatTimer(){_classCallCheck(this,StatTimer);this.started=Object.create(null);this.times=[]}_createClass(StatTimer,[{key:"time",value:function time(t){t in this.started&&(0,o.warn)("Timer is already running for ".concat(t));this.started[t]=Date.now()}},{key:"timeEnd",value:function timeEnd(t){t in this.started||(0,o.warn)("Timer has not been started for ".concat(t));this.times.push({name:t,start:this.started[t],end:Date.now()});delete this.started[t]}},{key:"toString",value:function toString(){var t,r=[],a=0,i=_createForOfIteratorHelper(this.times);try{for(i.s();!(t=i.n()).done;){var o=t.value.name;o.length>a&&(a=o.length)}}catch(t){i.e(t)}finally{i.f()}var l,c=_createForOfIteratorHelper(this.times);try{for(c.s();!(l=c.n()).done;){var u=l.value,d=u.end-u.start;r.push("".concat(u.name.padEnd(a)," ").concat(d,"ms\\n"))}}catch(t){c.e(t)}finally{c.f()}return r.join("")}}]);return StatTimer}();r.StatTimer=g;function isValidFetchUrl(t,r){try{var a=(r?new URL(t,r):new URL(t)).protocol;return"http:"===a||"https:"===a}catch(t){return!1}}var _=function(){function PDFDateString(){_classCallCheck(this,PDFDateString)}_createClass(PDFDateString,null,[{key:"toDateObject",value:function toDateObject(t){if(!t||"string"!=typeof t)return null;y||(y=new RegExp("^D:(\\\\d{4})(\\\\d{2})?(\\\\d{2})?(\\\\d{2})?(\\\\d{2})?(\\\\d{2})?([Z|+|-])?(\\\\d{2})?\'?(\\\\d{2})?\'?"));var r=y.exec(t);if(!r)return null;var a=parseInt(r[1],10),i=parseInt(r[2],10);i=i>=1&&i<=12?i-1:0;var o=parseInt(r[3],10);o=o>=1&&o<=31?o:1;var l=parseInt(r[4],10);l=l>=0&&l<=23?l:0;var c=parseInt(r[5],10);c=c>=0&&c<=59?c:0;var u=parseInt(r[6],10);u=u>=0&&u<=59?u:0;var d=r[7]||"Z",h=parseInt(r[8],10);h=h>=0&&h<=23?h:0;var p=parseInt(r[9],10)||0;p=p>=0&&p<=59?p:0;if("-"===d){l+=h;c+=p}else if("+"===d){l-=h;c-=p}return new Date(Date.UTC(a,i,o,l,c,u))}}]);return PDFDateString}();r.PDFDateString=_;function getRGB(t){if(t.startsWith("#")){var r=parseInt(t.slice(1),16);return[(16711680&r)>>16,(65280&r)>>8,255&r]}if(t.startsWith("rgb("))return t.slice(4,-1).split(",").map((function(t){return parseInt(t)}));if(t.startsWith("rgba("))return t.slice(5,-1).split(",").map((function(t){return parseInt(t)})).slice(0,3);(0,o.warn)(\'Not a valid color format: "\'.concat(t,\'"\'));return[0,0,0]}},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.BaseStandardFontDataFactory=r.BaseSVGFactory=r.BaseCanvasFactory=r.BaseCMapReaderFactory=void 0;var i=a(1);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),c=new Context(i||[]);return l._invoke=function(t,r,a){var i="suspendedStart";return function(o,l){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw l;return doneResult()}for(a.method=o,a.arg=l;;){var c=a.delegate;if(c){var d=maybeInvokeDelegate(c,a);if(d){if(d===u)continue;return d}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var h=tryCatch(t,r,a);if("normal"===h.type){if(i=a.done?"completed":"suspendedYield",h.arg===u)continue;return{value:h.arg,done:a.done}}"throw"===h.type&&(i="completed",a.method="throw",a.arg=h.arg)}}}(t,a,c),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&a.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,o,l,c){var u=tryCatch(t[i],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&a.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var i;this._invoke=function(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,a,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var a=t.iterator[r.method];if(void 0===a){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return u}var i=tryCatch(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,u;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,u):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,l=function next(){for(;++i<t.length;)if(a.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return l.next=l}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(v),define(v,c,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,i){return l.type="throw",l.arg=t,r.next=a,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),u},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),u}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),d=u.value}catch(t){a(t);return}u.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}var o=function(){function BaseCanvasFactory(){_classCallCheck(this,BaseCanvasFactory);this.constructor===BaseCanvasFactory&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}_createClass(BaseCanvasFactory,[{key:"create",value:function create(t,r){if(t<=0||r<=0)throw new Error("Invalid canvas size");var a=this._createCanvas(t,r);return{canvas:a,context:a.getContext("2d")}}},{key:"reset",value:function reset(t,r,a){if(!t.canvas)throw new Error("Canvas is not specified");if(r<=0||a<=0)throw new Error("Invalid canvas size");t.canvas.width=r;t.canvas.height=a}},{key:"destroy",value:function destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0;t.canvas.height=0;t.canvas=null;t.context=null}},{key:"_createCanvas",value:function _createCanvas(t,r){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}]);return BaseCanvasFactory}();r.BaseCanvasFactory=o;var l=function(){function BaseCMapReaderFactory(t){var r=t.baseUrl,a=void 0===r?null:r,o=t.isCompressed,l=void 0!==o&&o;_classCallCheck(this,BaseCMapReaderFactory);this.constructor===BaseCMapReaderFactory&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory.");this.baseUrl=a;this.isCompressed=l}_createClass(BaseCMapReaderFactory,[{key:"fetch",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,a,o,l=this;return _regeneratorRuntime().wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:r=t.name;if(this.baseUrl){c.next=3;break}throw new Error(\'The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.\');case 3:if(r){c.next=5;break}throw new Error("CMap name must be specified.");case 5:a=this.baseUrl+r+(this.isCompressed?".bcmap":"");o=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return c.abrupt("return",this._fetchData(a,o).catch((function(t){throw new Error("Unable to load ".concat(l.isCompressed?"binary ":"","CMap at: ").concat(a))})));case 8:case"end":return c.stop()}}),_callee,this)}))),function fetch(r){return t.apply(this,arguments)})},{key:"_fetchData",value:function _fetchData(t,r){(0,i.unreachable)("Abstract method `_fetchData` called.")}}]);var t;return BaseCMapReaderFactory}();r.BaseCMapReaderFactory=l;var c=function(){function BaseStandardFontDataFactory(t){var r=t.baseUrl,a=void 0===r?null:r;_classCallCheck(this,BaseStandardFontDataFactory);this.constructor===BaseStandardFontDataFactory&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory.");this.baseUrl=a}_createClass(BaseStandardFontDataFactory,[{key:"fetch",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){var r,a;return _regeneratorRuntime().wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:r=t.filename;if(this.baseUrl){i.next=3;break}throw new Error(\'The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.\');case 3:if(r){i.next=5;break}throw new Error("Font filename must be specified.");case 5:a="".concat(this.baseUrl).concat(r);return i.abrupt("return",this._fetchData(a).catch((function(t){throw new Error("Unable to load font data at: ".concat(a))})));case 7:case"end":return i.stop()}}),_callee2,this)}))),function fetch(r){return t.apply(this,arguments)})},{key:"_fetchData",value:function _fetchData(t){(0,i.unreachable)("Abstract method `_fetchData` called.")}}]);var t;return BaseStandardFontDataFactory}();r.BaseStandardFontDataFactory=c;var u=function(){function BaseSVGFactory(){_classCallCheck(this,BaseSVGFactory);this.constructor===BaseSVGFactory&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}_createClass(BaseSVGFactory,[{key:"create",value:function create(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||r<=0)throw new Error("Invalid SVG dimensions");var i=this._createSVG("svg:svg");i.setAttribute("version","1.1");if(!a){i.setAttribute("width","".concat(t,"px"));i.setAttribute("height","".concat(r,"px"))}i.setAttribute("preserveAspectRatio","none");i.setAttribute("viewBox","0 0 ".concat(t," ").concat(r));return i}},{key:"createElement",value:function createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}},{key:"_createSVG",value:function _createSVG(t){(0,i.unreachable)("Abstract method `_createSVG` called.")}}]);return BaseSVGFactory}();r.BaseSVGFactory=u},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0;exports.getDocument=getDocument;exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory;exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(132),_display_utils=__w_pdfjs_require__(129),_font_loader=__w_pdfjs_require__(136),_canvas=__w_pdfjs_require__(137),_worker_options=__w_pdfjs_require__(140),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(141),_metadata=__w_pdfjs_require__(142),_optional_content_config=__w_pdfjs_require__(143),_transport_stream=__w_pdfjs_require__(144),_xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateMethodGet(t,r,a){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return a}function _classPrivateFieldInitSpec(t,r,a){_checkPrivateRedeclaration(t,r);r.set(t,a)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,a){_classApplyDescriptorSet(t,_classExtractFieldDescriptor(t,r,"set"),a);return a}function _classPrivateFieldGet(t,r){return _classApplyDescriptorGet(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,a){if(!r.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return r.get(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),c=new Context(i||[]);return l._invoke=function(t,r,a){var i="suspendedStart";return function(o,l){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw l;return doneResult()}for(a.method=o,a.arg=l;;){var c=a.delegate;if(c){var d=maybeInvokeDelegate(c,a);if(d){if(d===u)continue;return d}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var h=tryCatch(t,r,a);if("normal"===h.type){if(i=a.done?"completed":"suspendedYield",h.arg===u)continue;return{value:h.arg,done:a.done}}"throw"===h.type&&(i="completed",a.method="throw",a.arg=h.arg)}}}(t,a,c),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&a.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,o,l,c){var u=tryCatch(t[i],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&a.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var i;this._invoke=function(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,a,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var a=t.iterator[r.method];if(void 0===a){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return u}var i=tryCatch(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,u;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,u):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,l=function next(){for(;++i<t.length;)if(a.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return l.next=l}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(v),define(v,c,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,i){return l.type="throw",l.arg=t,r.next=a,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),u},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),u}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classStaticPrivateFieldSpecSet(t,r,a,i){_classCheckPrivateStaticAccess(t,r);_classCheckPrivateStaticFieldDescriptor(a,"set");_classApplyDescriptorSet(t,a,i);return i}function _classApplyDescriptorSet(t,r,a){if(r.set)r.set.call(t,a);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=a}}function _classStaticPrivateFieldSpecGet(t,r,a){_classCheckPrivateStaticAccess(t,r);_classCheckPrivateStaticFieldDescriptor(a,"get");return _classApplyDescriptorGet(t,a)}function _classCheckPrivateStaticFieldDescriptor(t,r){if(void 0===t)throw new TypeError("attempted to "+r+" private static field before its declaration")}function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(t,r){return r.get?r.get.call(t):r.value}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),d=u.value}catch(t){a(t);return}u.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_unsupportedIterableToArray(t,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;if(_is_node.isNodeJS){var _require=__w_pdfjs_require__(146),NodeCanvasFactory=_require.NodeCanvasFactory,NodeCMapReaderFactory=_require.NodeCMapReaderFactory,NodeStandardFontDataFactory=_require.NodeStandardFontDataFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){var r,a=new PDFDocumentLoadingTask;if("string"==typeof t||t instanceof URL)r={url:t};else if((0,_util.isArrayBuffer)(t))r={data:t};else if(t instanceof PDFDataRangeTransport)r={range:t};else{if("object"!==_typeof(t))throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=t}var i=Object.create(null),o=null,l=null;for(var c in r){var u=r[c];switch(c){case"url":if("undefined"!=typeof window)try{i[c]=new URL(u,window.location).href;continue}catch(t){(0,_util.warn)(\'Cannot create valid URL: "\'.concat(t,\'".\'))}else if("string"==typeof u||u instanceof URL){i[c]=u.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":o=u;continue;case"worker":l=u;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&u instanceof Buffer)i[c]=new Uint8Array(u);else{if(u instanceof Uint8Array)break;if("string"==typeof u)i[c]=(0,_util.stringToBytes)(u);else if("object"!==_typeof(u)||null===u||isNaN(u.length)){if(!(0,_util.isArrayBuffer)(u))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");i[c]=new Uint8Array(u)}else i[c]=new Uint8Array(u)}continue}i[c]=u}i.CMapReaderFactory=i.CMapReaderFactory||DefaultCMapReaderFactory;i.StandardFontDataFactory=i.StandardFontDataFactory||DefaultStandardFontDataFactory;i.ignoreErrors=!0!==i.stopAtErrors;i.fontExtraProperties=!0===i.fontExtraProperties;i.pdfBug=!0===i.pdfBug;i.enableXfa=!0===i.enableXfa;(!Number.isInteger(i.rangeChunkSize)||i.rangeChunkSize<1)&&(i.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE);("string"!=typeof i.docBaseUrl||(0,_display_utils.isDataScheme)(i.docBaseUrl))&&(i.docBaseUrl=null);(!Number.isInteger(i.maxImageSize)||i.maxImageSize<-1)&&(i.maxImageSize=-1);"string"!=typeof i.cMapUrl&&(i.cMapUrl=null);"string"!=typeof i.standardFontDataUrl&&(i.standardFontDataUrl=null);"boolean"!=typeof i.useWorkerFetch&&(i.useWorkerFetch=i.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&i.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory);"boolean"!=typeof i.isEvalSupported&&(i.isEvalSupported=!0);"boolean"!=typeof i.disableFontFace&&(i.disableFontFace=_is_node.isNodeJS);"boolean"!=typeof i.useSystemFonts&&(i.useSystemFonts=!_is_node.isNodeJS&&!i.disableFontFace);"object"===_typeof(i.ownerDocument)&&null!==i.ownerDocument||(i.ownerDocument=globalThis.document);"boolean"!=typeof i.disableRange&&(i.disableRange=!1);"boolean"!=typeof i.disableStream&&(i.disableStream=!1);"boolean"!=typeof i.disableAutoFetch&&(i.disableAutoFetch=!1);(0,_util.setVerbosityLevel)(i.verbosity);if(!l){var d={verbosity:i.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};l=d.port?PDFWorker.fromPort(d):new PDFWorker(d);a._worker=l}var h=a.docId;l.promise.then((function(){if(a.destroyed)throw new Error("Loading aborted");var t=_fetchDocument(l,i,o,h),r=new Promise((function(t){var r;o?r=new _transport_stream.PDFDataTransportStream({length:i.length,initialData:i.initialData,progressiveDone:i.progressiveDone,contentDispositionFilename:i.contentDispositionFilename,disableRange:i.disableRange,disableStream:i.disableStream},o):i.data||(r=createPDFNetworkStream({url:i.url,length:i.length,httpHeaders:i.httpHeaders,withCredentials:i.withCredentials,rangeChunkSize:i.rangeChunkSize,disableRange:i.disableRange,disableStream:i.disableStream}));t(r)}));return Promise.all([t,r]).then((function(t){var r=_slicedToArray(t,2),o=r[0],c=r[1];if(a.destroyed)throw new Error("Loading aborted");var u=new _message_handler.MessageHandler(h,o,l.port),d=new WorkerTransport(u,a,c,i);a._transport=d;u.send("Ready",null)}))})).catch(a._capability.reject);return a}function _fetchDocument(t,r,a,i){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(t,r,a,i){var o;return _regeneratorRuntime().wrap((function _callee7$(l){for(;;)switch(l.prev=l.next){case 0:if(!t.destroyed){l.next=2;break}throw new Error("Worker was destroyed");case 2:if(a){r.length=a.length;r.initialData=a.initialData;r.progressiveDone=a.progressiveDone;r.contentDispositionFilename=a.contentDispositionFilename}l.next=5;return t.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.15.349",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties,enableXfa:r.enableXfa,useSystemFonts:r.useSystemFonts,cMapUrl:r.useWorkerFetch?r.cMapUrl:null,standardFontDataUrl:r.useWorkerFetch?r.standardFontDataUrl:null});case 5:o=l.sent;r.data&&(r.data=null);if(!t.destroyed){l.next=9;break}throw new Error("Worker was destroyed");case 9:return l.abrupt("return",o);case 10:case"end":return l.stop()}}),_callee7)})))).apply(this,arguments)}var PDFDocumentLoadingTask=function(){function PDFDocumentLoadingTask(){var t,r;_classCallCheck(this,PDFDocumentLoadingTask);this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId="d".concat((_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(t=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),r=t++,t)),r));this.destroyed=!1;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null}_createClass(PDFDocumentLoadingTask,[{key:"promise",get:function get(){return this._capability.promise}},{key:"destroy",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:this.destroyed=!0;r.next=3;return null===(t=this._transport)||void 0===t?void 0:t.destroy();case 3:this._transport=null;if(this._worker){this._worker.destroy();this._worker=null}case 5:case"end":return r.stop()}}),_callee,this)}))),function destroy(){return t.apply(this,arguments)})}]);var t;return PDFDocumentLoadingTask}();exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0},PDFDataRangeTransport=function(){function PDFDataRangeTransport(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,PDFDataRangeTransport);this.length=t;this.initialData=r;this.progressiveDone=a;this.contentDispositionFilename=i;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=(0,_util.createPromiseCapability)()}_createClass(PDFDataRangeTransport,[{key:"addRangeListener",value:function addRangeListener(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function addProgressListener(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function onDataRange(t,r){var a,i=_createForOfIteratorHelper(this._rangeListeners);try{for(i.s();!(a=i.n()).done;){(0,a.value)(t,r)}}catch(t){i.e(t)}finally{i.f()}}},{key:"onDataProgress",value:function onDataProgress(t,r){var a=this;this._readyCapability.promise.then((function(){var i,o=_createForOfIteratorHelper(a._progressListeners);try{for(o.s();!(i=o.n()).done;){(0,i.value)(t,r)}}catch(t){o.e(t)}finally{o.f()}}))}},{key:"onDataProgressiveRead",value:function onDataProgressiveRead(t){var r=this;this._readyCapability.promise.then((function(){var a,i=_createForOfIteratorHelper(r._progressiveReadListeners);try{for(i.s();!(a=i.n()).done;){(0,a.value)(t)}}catch(t){i.e(t)}finally{i.f()}}))}},{key:"onDataProgressiveDone",value:function onDataProgressiveDone(){var t=this;this._readyCapability.promise.then((function(){var r,a=_createForOfIteratorHelper(t._progressiveDoneListeners);try{for(a.s();!(r=a.n()).done;){(0,r.value)()}}catch(t){a.e(t)}finally{a.f()}}))}},{key:"transportReady",value:function transportReady(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function requestDataRange(t,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function abort(){}}]);return PDFDataRangeTransport}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function PDFDocumentProxy(t,r){var a,i=this;_classCallCheck(this,PDFDocumentProxy);this._pdfInfo=t;this._transport=r;Object.defineProperty(this,"fingerprint",{get:function get(){(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead.");return this.fingerprints[0]}});Object.defineProperty(this,"getStats",{value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead.");return t.abrupt("return",i.stats||{streamTypes:{},fontTypes:{}});case 2:case"end":return t.stop()}}),_callee2)}))),function value(){return a.apply(this,arguments)})})}_createClass(PDFDocumentProxy,[{key:"annotationStorage",get:function get(){return this._transport.annotationStorage}},{key:"numPages",get:function get(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function get(){return this._pdfInfo.fingerprints}},{key:"stats",get:function get(){return this._transport.stats}},{key:"isPureXfa",get:function get(){return!!this._transport._htmlForXfa}},{key:"allXfaHtml",get:function get(){return this._transport._htmlForXfa}},{key:"getPage",value:function getPage(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function getPageIndex(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function getDestinations(){return this._transport.getDestinations()}},{key:"getDestination",value:function getDestination(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function getPageLabels(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function getPageLayout(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function getPageMode(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function getOpenAction(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function getAttachments(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function getJavaScript(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function getJSActions(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function getOutline(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function getPermissions(){return this._transport.getPermissions()}},{key:"getMetadata",value:function getMetadata(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function getMarkInfo(){return this._transport.getMarkInfo()}},{key:"getData",value:function getData(){return this._transport.getData()}},{key:"getDownloadInfo",value:function getDownloadInfo(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function destroy(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function get(){return this._transport.loadingParams}},{key:"loadingTask",get:function get(){return this._transport.loadingTask}},{key:"saveDocument",value:function saveDocument(){this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");return this._transport.saveDocument()}},{key:"getFieldObjects",value:function getFieldObjects(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function hasJSActions(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}]);return PDFDocumentProxy}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function PDFPageProxy(t,r,a,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,PDFPageProxy);this._pageIndex=t;this._pageInfo=r;this._ownerDocument=i;this._transport=a;this._stats=o?new _display_utils.StatTimer:null;this._pdfBug=o;this.commonObjs=a.commonObjs;this.objs=new PDFObjects;this._bitmaps=new Set;this.cleanupAfterRender=!1;this.pendingCleanup=!1;this._intentStates=new Map;this._annotationPromises=new Map;this.destroyed=!1}_createClass(PDFPageProxy,[{key:"pageNumber",get:function get(){return this._pageIndex+1}},{key:"rotate",get:function get(){return this._pageInfo.rotate}},{key:"ref",get:function get(){return this._pageInfo.ref}},{key:"userUnit",get:function get(){return this._pageInfo.userUnit}},{key:"view",get:function get(){return this._pageInfo.view}},{key:"getViewport",value:function getViewport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,a=t.rotation,i=void 0===a?this.rotate:a,o=t.offsetX,l=void 0===o?0:o,c=t.offsetY,u=void 0===c?0:c,d=t.dontFlip,h=void 0!==d&&d;return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:i,offsetX:l,offsetY:u,dontFlip:h})}},{key:"getAnnotations",value:function getAnnotations(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.intent,a=void 0===r?"display":r,i=this._transport.getRenderingIntent(a),o=this._annotationPromises.get(i.cacheKey);if(!o){o=this._transport.getAnnotations(this._pageIndex,i.renderingIntent);this._annotationPromises.set(i.cacheKey,o);o=o.then((function(t){var r,a=_createForOfIteratorHelper(t);try{var i=function _loop(){var t=r.value;void 0!==t.titleObj&&Object.defineProperty(t,"title",{get:function get(){(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead.");return t.titleObj.str}});void 0!==t.contentsObj&&Object.defineProperty(t,"contents",{get:function get(){(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead.");return t.contentsObj.str}})};for(a.s();!(r=a.n()).done;)i()}catch(t){a.e(t)}finally{a.f()}return t}))}return o}},{key:"getJSActions",value:function getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var t;return _regeneratorRuntime().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(null===(t=this._transport._htmlForXfa)||void 0===t?void 0:t.children[this._pageIndex])||null);case 1:case"end":return r.stop()}}),_callee3,this)}))),function getXfa(){return t.apply(this,arguments)})},{key:"render",value:function render(t){var r,a,i,o=this,l=t.canvasContext,c=t.viewport,u=t.intent,d=void 0===u?"display":u,h=t.annotationMode,p=void 0===h?_util.AnnotationMode.ENABLE:h,v=t.transform,y=void 0===v?null:v,g=t.imageLayer,_=void 0===g?null:g,m=t.canvasFactory,b=void 0===m?null:m,A=t.background,k=void 0===A?null:A,P=t.optionalContentConfigPromise,S=void 0===P?null:P,w=t.annotationCanvasMap,x=void 0===w?null:w,C=t.pageColors,T=void 0===C?null:C,E=t.printAnnotationStorage,I=void 0===E?null:E;if(void 0!==(null===(r=arguments[0])||void 0===r?void 0:r.renderInteractiveForms)){(0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead.");!0===arguments[0].renderInteractiveForms&&p===_util.AnnotationMode.ENABLE&&(p=_util.AnnotationMode.ENABLE_FORMS)}if(void 0!==(null===(a=arguments[0])||void 0===a?void 0:a.includeAnnotationStorage)){(0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead.");!0===arguments[0].includeAnnotationStorage&&p===_util.AnnotationMode.ENABLE&&(p=_util.AnnotationMode.ENABLE_STORAGE)}this._stats&&this._stats.time("Overall");var O=this._transport.getRenderingIntent(d,p,I);this.pendingCleanup=!1;S||(S=this._transport.getOptionalContentConfig());var M=this._intentStates.get(O.cacheKey);if(!M){M=Object.create(null);this._intentStates.set(O.cacheKey,M)}if(M.streamReaderCancelTimeout){clearTimeout(M.streamReaderCancelTimeout);M.streamReaderCancelTimeout=null}var R=b||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),D=!!(O.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!M.displayReadyCapability){M.displayReadyCapability=(0,_util.createPromiseCapability)();M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};this._stats&&this._stats.time("Page Request");this._pumpOperatorList(O)}var L=function complete(t){M.renderTasks.delete(G);(o.cleanupAfterRender||D)&&(o.pendingCleanup=!0);o._tryCleanup();if(t){G.capability.reject(t);o._abortOperatorList({intentState:M,reason:t instanceof Error?t:new Error(t)})}else G.capability.resolve();if(o._stats){o._stats.timeEnd("Rendering");o._stats.timeEnd("Overall")}},G=new InternalRenderTask({callback:L,params:{canvasContext:l,viewport:c,transform:y,imageLayer:_,background:k},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:x,operatorList:M.operatorList,pageIndex:this._pageIndex,canvasFactory:R,useRequestAnimationFrame:!D,pdfBug:this._pdfBug,pageColors:T});((i=M).renderTasks||(i.renderTasks=new Set)).add(G);var j=G.task;Promise.all([M.displayReadyCapability.promise,S]).then((function(t){var r=_slicedToArray(t,2),a=r[0],i=r[1];if(o.pendingCleanup)L();else{o._stats&&o._stats.time("Rendering");G.initializeGraphics({transparency:a,optionalContentConfig:i});G.operatorListChanged()}})).catch(L);return j}},{key:"getOperatorList",value:function getOperatorList(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.intent,a=void 0===r?"display":r,i=t.annotationMode,o=void 0===i?_util.AnnotationMode.ENABLE:i,l=t.printAnnotationStorage,c=void 0===l?null:l;function operatorListChanged(){if(h.operatorList.lastChunk){h.opListReadCapability.resolve(h.operatorList);h.renderTasks.delete(u)}}var u,d=this._transport.getRenderingIntent(a,o,c,!0),h=this._intentStates.get(d.cacheKey);if(!h){h=Object.create(null);this._intentStates.set(d.cacheKey,h)}if(!h.opListReadCapability){var p;(u=Object.create(null)).operatorListChanged=operatorListChanged;h.opListReadCapability=(0,_util.createPromiseCapability)();((p=h).renderTasks||(p.renderTasks=new Set)).add(u);h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};this._stats&&this._stats.time("Page Request");this._pumpOperatorList(d)}return h.opListReadCapability.promise}},{key:"streamTextContent",value:function streamTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.disableCombineTextItems,a=void 0!==r&&r,i=t.includeMarkedContent,o=void 0!==i&&i,l=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==a,includeMarkedContent:!0===o},{highWaterMark:l,size:function size(t){return t.items.length}})}},{key:"getTextContent",value:function getTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((function(t){return _xfa_text.XfaText.textContent(t)}));var r=this.streamTextContent(t);return new Promise((function(t,a){var i=r.getReader(),o={items:[],styles:Object.create(null)};!function pump(){i.read().then((function(r){var a,i=r.value;if(r.done)t(o);else{Object.assign(o.styles,i.styles);(a=o.items).push.apply(a,_toConsumableArray(i.items));pump()}}),a)}()}))}},{key:"getStructTree",value:function getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function _destroy(){this.destroyed=!0;var t,r=[],a=_createForOfIteratorHelper(this._intentStates.values());try{for(a.s();!(t=a.n()).done;){var i=t.value;this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0});if(!i.opListReadCapability){var o,l=_createForOfIteratorHelper(i.renderTasks);try{for(l.s();!(o=l.n()).done;){var c=o.value;r.push(c.completed);c.cancel()}}catch(t){l.e(t)}finally{l.f()}}}}catch(t){a.e(t)}finally{a.f()}this.objs.clear();var u,d=_createForOfIteratorHelper(this._bitmaps);try{for(d.s();!(u=d.n()).done;){u.value.close()}}catch(t){d.e(t)}finally{d.f()}this._bitmaps.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;this.pendingCleanup=!1;return Promise.all(r)}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup=!0;return this._tryCleanup(t)}},{key:"_tryCleanup",value:function _tryCleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;var r,a=_createForOfIteratorHelper(this._intentStates.values());try{for(a.s();!(r=a.n()).done;){var i=r.value,o=i.renderTasks,l=i.operatorList;if(o.size>0||!l.lastChunk)return!1}}catch(t){a.e(t)}finally{a.f()}this._intentStates.clear();this.objs.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;t&&this._stats&&(this._stats=new _display_utils.StatTimer);var c,u=_createForOfIteratorHelper(this._bitmaps);try{for(u.s();!(c=u.n()).done;){var d=c.value;d.close()}}catch(t){u.e(t)}finally{u.f()}this._bitmaps.clear();this.pendingCleanup=!1;return!0}},{key:"_startRenderPage",value:function _startRenderPage(t,r){var a=this._intentStates.get(r);if(a){this._stats&&this._stats.timeEnd("Page Request");a.displayReadyCapability&&a.displayReadyCapability.resolve(t)}}},{key:"_renderPageChunk",value:function _renderPageChunk(t,r){for(var a=0,i=t.length;a<i;a++){r.operatorList.fnArray.push(t.fnArray[a]);r.operatorList.argsArray.push(t.argsArray[a])}r.operatorList.lastChunk=t.lastChunk;r.operatorList.separateAnnots=t.separateAnnots;var o,l=_createForOfIteratorHelper(r.renderTasks);try{for(l.s();!(o=l.n()).done;){o.value.operatorListChanged()}}catch(t){l.e(t)}finally{l.f()}t.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function _pumpOperatorList(t){var r=this,a=t.renderingIntent,i=t.cacheKey,o=t.annotationStorageMap,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:i,annotationStorage:o}).getReader(),c=this._intentStates.get(i);c.streamReader=l;!function pump(){l.read().then((function(t){var a=t.value;if(t.done)c.streamReader=null;else if(!r._transport.destroyed){r._renderPageChunk(a,c);pump()}}),(function(t){c.streamReader=null;if(!r._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;var a,i=_createForOfIteratorHelper(c.renderTasks);try{for(i.s();!(a=i.n()).done;){a.value.operatorListChanged()}}catch(t){i.e(t)}finally{i.f()}r._tryCleanup()}if(c.displayReadyCapability)c.displayReadyCapability.reject(t);else{if(!c.opListReadCapability)throw t;c.opListReadCapability.reject(t)}}}))}()}},{key:"_abortOperatorList",value:function _abortOperatorList(t){var r=this,a=t.intentState,i=t.reason,o=t.force,l=void 0!==o&&o;if(a.streamReader){if(!l){if(a.renderTasks.size>0)return;if(i instanceof _display_utils.RenderingCancelledException){a.streamReaderCancelTimeout=setTimeout((function(){r._abortOperatorList({intentState:a,reason:i,force:!0});a.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT);return}}a.streamReader.cancel(new _util.AbortException(i.message)).catch((function(){}));a.streamReader=null;if(!this._transport.destroyed){var c,u=_createForOfIteratorHelper(this._intentStates);try{for(u.s();!(c=u.n()).done;){var d=_slicedToArray(c.value,2),h=d[0];if(d[1]===a){this._intentStates.delete(h);break}}}catch(t){u.e(t)}finally{u.f()}this.cleanup()}}}},{key:"stats",get:function get(){return this._stats}}]);var t;return PDFPageProxy}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function LoopbackPort(){_classCallCheck(this,LoopbackPort);this._listeners=[];this._deferred=Promise.resolve()}_createClass(LoopbackPort,[{key:"postMessage",value:function postMessage(t,r){var a=this,i={data:structuredClone(t,r)};this._deferred.then((function(){var t,r=_createForOfIteratorHelper(a._listeners);try{for(r.s();!(t=r.n()).done;){t.value.call(a,i)}}catch(t){r.e(t)}finally{r.f()}}))}},{key:"addEventListener",value:function addEventListener(t,r){this._listeners.push(r)}},{key:"removeEventListener",value:function removeEventListener(t,r){var a=this._listeners.indexOf(r);this._listeners.splice(a,1)}},{key:"terminate",value:function terminate(){this._listeners.length=0}}]);return LoopbackPort}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;if(_is_node.isNodeJS&&"function"==typeof require){PDFWorkerUtil.isWorkerDisabled=!0;PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js"}else if("object"===("undefined"==typeof document?"undefined":_typeof(document))){var _document,_document$currentScri,pdfjsFilePath=null===(_document=document)||void 0===_document||null===(_document$currentScri=_document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\\.(?:min\\.)?js)(\\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,r){var a;try{if(!(a=new URL(t)).origin||"null"===a.origin)return!1}catch(t){return!1}var i=new URL(r,a);return a.origin===i.origin};PDFWorkerUtil.createCDNWrapper=function(t){var r=\'importScripts("\'.concat(t,\'");\');return URL.createObjectURL(new Blob([r]))};var PDFWorker=function(){function PDFWorker(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,a=void 0===r?null:r,i=t.port,o=void 0===i?null:i,l=t.verbosity,c=void 0===l?(0,_util.getVerbosityLevel)():l;_classCallCheck(this,PDFWorker);if(o&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(o))throw new Error("Cannot use more than one PDFWorker per port.");this.name=a;this.destroyed=!1;this.verbosity=c;this._readyCapability=(0,_util.createPromiseCapability)();this._port=null;this._webWorker=null;this._messageHandler=null;if(o){_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(o,this);this._initializeFromPort(o)}else this._initialize()}_createClass(PDFWorker,[{key:"promise",get:function get(){return this._readyCapability.promise}},{key:"port",get:function get(){return this._port}},{key:"messageHandler",get:function get(){return this._messageHandler}},{key:"_initializeFromPort",value:function _initializeFromPort(t){this._port=t;this._messageHandler=new _message_handler.MessageHandler("main","worker",t);this._messageHandler.on("ready",(function(){}));this._readyCapability.resolve()}},{key:"_initialize",value:function _initialize(){var t=this;if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var r=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));var a=new Worker(r),i=new _message_handler.MessageHandler("main","worker",a),o=function terminateEarly(){a.removeEventListener("error",l);i.destroy();a.terminate();t.destroyed?t._readyCapability.reject(new Error("Worker was destroyed")):t._setupFakeWorker()},l=function onWorkerError(){t._webWorker||o()};a.addEventListener("error",l);i.on("test",(function(r){a.removeEventListener("error",l);if(t.destroyed)o();else if(r){t._messageHandler=i;t._port=a;t._webWorker=a;t._readyCapability.resolve();i.send("configure",{verbosity:t.verbosity})}else{t._setupFakeWorker();i.destroy();a.terminate()}}));i.on("ready",(function(r){a.removeEventListener("error",l);if(t.destroyed)o();else try{c()}catch(r){t._setupFakeWorker()}}));var c=function sendTest(){var t=new Uint8Array;i.send("test",t,[t.buffer])};c();return}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function _setupFakeWorker(){var t=this;if(!PDFWorkerUtil.isWorkerDisabled){(0,_util.warn)("Setting up fake worker.");PDFWorkerUtil.isWorkerDisabled=!0}PDFWorker._setupFakeWorkerGlobal.then((function(r){if(t.destroyed)t._readyCapability.reject(new Error("Worker was destroyed"));else{var a=new LoopbackPort;t._port=a;var i="fake".concat(PDFWorkerUtil.fakeWorkerId++),o=new _message_handler.MessageHandler(i+"_worker",i,a);r.setup(o,a);var l=new _message_handler.MessageHandler(i,i+"_worker",a);t._messageHandler=l;t._readyCapability.resolve();l.send("configure",{verbosity:t.verbosity})}})).catch((function(r){t._readyCapability.reject(new Error(\'Setting up fake worker failed: "\'.concat(r.message,\'".\')))}))}},{key:"destroy",value:function destroy(){this.destroyed=!0;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null}}}],[{key:"fromPort",value:function fromPort(t){if(null==t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(t.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(t.port):new PDFWorker(t)}},{key:"workerSrc",get:function get(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc){_is_node.isNodeJS||(0,_display_utils.deprecated)(\'No "GlobalWorkerOptions.workerSrc" specified.\');return PDFWorkerUtil.fallbackWorkerSrc}throw new Error(\'No "GlobalWorkerOptions.workerSrc" specified.\')}},{key:"_mainThreadWorkerMessageHandler",get:function get(){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(t){return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this11=this,loader=function(){var _ref15=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var mainWorkerMessageHandler,worker;return _regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:mainWorkerMessageHandler=_this11._mainThreadWorkerMessageHandler;if(!mainWorkerMessageHandler){_context4.next=3;break}return _context4.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||"function"!=typeof require){_context4.next=6;break}worker=eval("require")(_this11.workerSrc);return _context4.abrupt("return",worker.WorkerMessageHandler);case 6:_context4.next=8;return(0,_display_utils.loadScript)(_this11.workerSrc);case 8:return _context4.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context4.stop()}}),_callee4)})));return function loader(){return _ref15.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}]);return PDFWorker}();exports.PDFWorker=PDFWorker;var _workerPorts={writable:!0,value:new WeakMap};PDFWorker.getWorkerSrc=function(){(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead.");return this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap,WorkerTransport=function(){function WorkerTransport(t,r,a,i){_classCallCheck(this,WorkerTransport);_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null});_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null});this.messageHandler=t;this.loadingTask=r;this.commonObjs=new PDFObjects;this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:i.ownerDocument,styleElement:i.styleElement});this._params=i;if(!i.useWorkerFetch){this.CMapReaderFactory=new i.CMapReaderFactory({baseUrl:i.cMapUrl,isCompressed:i.cMapPacked});this.StandardFontDataFactory=new i.StandardFontDataFactory({baseUrl:i.standardFontDataUrl})}this.destroyed=!1;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=a;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler()}_createClass(WorkerTransport,[{key:"annotationStorage",get:function get(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"stats",get:function get(){return _classPrivateFieldGet(this,_docStats)}},{key:"getRenderingIntent",value:function getRenderingIntent(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=_util.RenderingIntentFlag.DISPLAY,l=null;switch(t){case"any":o=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":o=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(t))}switch(r){case _util.AnnotationMode.DISABLE:o+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:o+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:var c=(o+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE)&_util.RenderingIntentFlag.PRINT&&a instanceof _annotation_storage.PrintAnnotationStorage?a:this.annotationStorage;l=c.serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(r))}i&&(o+=_util.RenderingIntentFlag.OPLIST);return{renderingIntent:o,cacheKey:"".concat(o,"_").concat(_annotation_storage.AnnotationStorage.getHash(l)),annotationStorageMap:l}}},{key:"destroy",value:function destroy(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=(0,_util.createPromiseCapability)();this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var r,a=[],i=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());try{for(i.s();!(r=i.n()).done;){var o=r.value;a.push(o._destroy())}}catch(t){i.e(t)}finally{i.f()}_classPrivateFieldGet(this,_pageCache).clear();_classPrivateFieldGet(this,_pagePromises).clear();this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var l=this.messageHandler.sendWithPromise("Terminate",null);a.push(l);Promise.all(a).then((function(){t.commonObjs.clear();t.fontLoader.clear();_classPrivateFieldSet(t,_metadataPromise,null);t._getFieldObjectsPromise=null;t._hasJSActionsPromise=null;t._networkStream&&t._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated."));if(t.messageHandler){t.messageHandler.destroy();t.messageHandler=null}t.destroyCapability.resolve()}),this.destroyCapability.reject);return this.destroyCapability.promise}},{key:"setupMessageHandler",value:function setupMessageHandler(){var t=this,r=this.messageHandler,a=this.loadingTask;r.on("GetReader",(function(r,a){(0,_util.assert)(t._networkStream,"GetReader - no `IPDFStream` instance available.");t._fullReader=t._networkStream.getFullReader();t._fullReader.onProgress=function(r){t._lastProgress={loaded:r.loaded,total:r.total}};a.onPull=function(){t._fullReader.read().then((function(t){var r=t.value;if(t.done)a.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(r),"GetReader - expected an ArrayBuffer.");a.enqueue(new Uint8Array(r),1,[r])}})).catch((function(t){a.error(t)}))};a.onCancel=function(r){t._fullReader.cancel(r);a.ready.catch((function(r){if(!t.destroyed)throw r}))}}));r.on("ReaderHeadersReady",(function(r){var i=(0,_util.createPromiseCapability)(),o=t._fullReader;o.headersReady.then((function(){if(!o.isStreamingSupported||!o.isRangeSupported){if(t._lastProgress){var r;null===(r=a.onProgress)||void 0===r||r.call(a,t._lastProgress)}o.onProgress=function(t){var r;null===(r=a.onProgress)||void 0===r||r.call(a,{loaded:t.loaded,total:t.total})}}i.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})}),i.reject);return i.promise}));r.on("GetRangeReader",(function(r,a){(0,_util.assert)(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var i=t._networkStream.getRangeReader(r.begin,r.end);if(i){a.onPull=function(){i.read().then((function(t){var r=t.value;if(t.done)a.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(r),"GetRangeReader - expected an ArrayBuffer.");a.enqueue(new Uint8Array(r),1,[r])}})).catch((function(t){a.error(t)}))};a.onCancel=function(r){i.cancel(r);a.ready.catch((function(r){if(!t.destroyed)throw r}))}}else a.close()}));r.on("GetDoc",(function(r){var i=r.pdfInfo;t._numPages=i.numPages;t._htmlForXfa=i.htmlForXfa;delete i.htmlForXfa;a._capability.resolve(new PDFDocumentProxy(i,t))}));r.on("DocException",(function(t){var r;switch(t.name){case"PasswordException":r=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":r=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":r=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":r=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":r=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}a._capability.reject(r)}));r.on("PasswordRequest",(function(r){t._passwordCapability=(0,_util.createPromiseCapability)();if(a.onPassword){try{a.onPassword((function updatePassword(r){r instanceof Error?t._passwordCapability.reject(r):t._passwordCapability.resolve({password:r})}),r.code)}catch(r){t._passwordCapability.reject(r)}}else t._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return t._passwordCapability.promise}));r.on("DataLoaded",(function(r){var i;null===(i=a.onProgress)||void 0===i||i.call(a,{loaded:r.length,total:r.length});t.downloadInfoCapability.resolve(r)}));r.on("StartRenderPage",(function(r){if(!t.destroyed){_classPrivateFieldGet(t,_pageCache).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}}));r.on("commonobj",(function(a){var i,o=_slicedToArray(a,3),l=o[0],c=o[1],u=o[2];if(!t.destroyed&&!t.commonObjs.has(l))switch(c){case"Font":var d=t._params;if("error"in u){var h=u.error;(0,_util.warn)("Error during font loading: ".concat(h));t.commonObjs.resolve(l,h);break}var p=null;d.pdfBug&&null!==(i=globalThis.FontInspector)&&void 0!==i&&i.enabled&&(p={registerFont:function registerFont(t,r){globalThis.FontInspector.fontAdded(t,r)}});var v=new _font_loader.FontFaceObject(u,{isEvalSupported:d.isEvalSupported,disableFontFace:d.disableFontFace,ignoreErrors:d.ignoreErrors,onUnsupportedFeature:t._onUnsupportedFeature.bind(t),fontRegistry:p});t.fontLoader.bind(v).catch((function(t){return r.sendWithPromise("FontFallback",{id:l})})).finally((function(){!d.fontExtraProperties&&v.data&&(v.data=null);t.commonObjs.resolve(l,v)}));break;case"FontPath":case"Image":t.commonObjs.resolve(l,u);break;default:throw new Error("Got unknown common object type ".concat(c))}}));r.on("obj",(function(r){var a=_slicedToArray(r,4),i=a[0],o=a[1],l=a[2],c=a[3];if(!t.destroyed){var u=_classPrivateFieldGet(t,_pageCache).get(o);if(!u.objs.has(i))switch(l){case"Image":u.objs.resolve(i,c);if(c){var d;if(c.bitmap){var h=c.bitmap;d=c.width*c.height*4;u._bitmaps.add(h)}else{var p;d=(null===(p=c.data)||void 0===p?void 0:p.length)||0}d>8e6&&(u.cleanupAfterRender=!0)}break;case"Pattern":u.objs.resolve(i,c);break;default:throw new Error("Got unknown object type ".concat(l))}}}));r.on("DocProgress",(function(r){var i;t.destroyed||null===(i=a.onProgress)||void 0===i||i.call(a,{loaded:r.loaded,total:r.total})}));r.on("DocStats",(function(r){t.destroyed||_classPrivateFieldSet(t,_docStats,Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}));r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this));r.on("FetchBuiltInCMap",(function(r){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.CMapReaderFactory?t.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}));r.on("FetchStandardFontData",(function(r){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.StandardFontDataFactory?t.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))}))}},{key:"_onUnsupportedFeature",value:function _onUnsupportedFeature(t){var r,a,i=t.featureId;this.destroyed||null===(r=(a=this.loadingTask).onUnsupportedFeature)||void 0===r||r.call(a,i)}},{key:"getData",value:function getData(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function getPage(t){var r=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));var a=t-1,i=_classPrivateFieldGet(this,_pagePromises).get(a);if(i)return i;var o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:a}).then((function(t){if(r.destroyed)throw new Error("Transport destroyed");var i=new PDFPageProxy(a,t,r,r._params.ownerDocument,r._params.pdfBug);_classPrivateFieldGet(r,_pageCache).set(a,i);return i}));_classPrivateFieldGet(this,_pagePromises).set(a,o);return o}},{key:"getPageIndex",value:function getPageIndex(t){return"object"!==_typeof(t)||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}},{key:"getAnnotations",value:function getAnnotations(t,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:r})}},{key:"saveDocument",value:function saveDocument(){var t,r,a=this;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(t=null===(r=this._fullReader)||void 0===r?void 0:r.filename)&&void 0!==t?t:null}).finally((function(){a.annotationStorage.resetModified()}))}},{key:"getFieldObjects",value:function getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}},{key:"hasJSActions",value:function hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((function(t){return new _optional_content_config.OptionalContentConfig(t)}))}},{key:"getPermissions",value:function getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function getMetadata(){var t=this;return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then((function(r){var a,i,o,l;return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:null!==(a=null===(i=t._fullReader)||void 0===i?void 0:i.filename)&&void 0!==a?a:null,contentLength:null!==(o=null===(l=t._fullReader)||void 0===l?void 0:l.contentLength)&&void 0!==o?o:null}})))}},{key:"getMarkInfo",value:function getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){var t,r,a,i,o=arguments;return _regeneratorRuntime().wrap((function _callee5$(l){for(;;)switch(l.prev=l.next){case 0:t=o.length>0&&void 0!==o[0]&&o[0];l.next=3;return this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){l.next=5;break}return l.abrupt("return");case 5:r=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());l.prev=6;r.s();case 8:if((a=r.n()).done){l.next=15;break}if((i=a.value).cleanup()){l.next=13;break}throw new Error("startCleanup: Page ".concat(i.pageNumber," is currently rendering."));case 13:l.next=8;break;case 15:l.next=20;break;case 17:l.prev=17;l.t0=l.catch(6);r.e(l.t0);case 20:l.prev=20;r.f();return l.finish(20);case 23:this.commonObjs.clear();t||this.fontLoader.clear();_classPrivateFieldSet(this,_metadataPromise,null);this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null;case 28:case"end":return l.stop()}}),_callee5,this,[[6,17,20,23]])}))),function startCleanup(){return t.apply(this,arguments)})},{key:"loadingParams",get:function get(){var t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}]);var t;return WorkerTransport}(),_objs=new WeakMap,_ensureObj=new WeakSet,PDFObjects=function(){function PDFObjects(){_classCallCheck(this,PDFObjects);_classPrivateMethodInitSpec(this,_ensureObj);_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}_createClass(PDFObjects,[{key:"get",value:function get(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r){var a=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);a.capability.promise.then((function(){return r(a.data)}));return null}var i=_classPrivateFieldGet(this,_objs)[t];if(null==i||!i.capability.settled)throw new Error("Requesting object that isn\'t resolved yet ".concat(t,"."));return i.data}},{key:"has",value:function has(t){var r=_classPrivateFieldGet(this,_objs)[t];return(null==r?void 0:r.capability.settled)||!1}},{key:"resolve",value:function resolve(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);a.data=r;a.capability.resolve()}},{key:"clear",value:function clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}]);return PDFObjects}();function _ensureObj2(t){var r=_classPrivateFieldGet(this,_objs)[t];return r||(_classPrivateFieldGet(this,_objs)[t]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap,RenderTask=function(){function RenderTask(t){_classCallCheck(this,RenderTask);_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null});_classPrivateFieldSet(this,_internalRenderTask,t);this.onContinue=null}_createClass(RenderTask,[{key:"promise",get:function get(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}},{key:"cancel",value:function cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}},{key:"separateAnnots",get:function get(){var t=_classPrivateFieldGet(this,_internalRenderTask).operatorList.separateAnnots;if(!t)return!1;var r=_classPrivateFieldGet(this,_internalRenderTask).annotationCanvasMap;return t.form||t.canvas&&(null==r?void 0:r.size)>0}}]);return RenderTask}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){function InternalRenderTask(t){var r=t.callback,a=t.params,i=t.objs,o=t.commonObjs,l=t.annotationCanvasMap,c=t.operatorList,u=t.pageIndex,d=t.canvasFactory,h=t.useRequestAnimationFrame,p=void 0!==h&&h,v=t.pdfBug,y=void 0!==v&&v,g=t.pageColors,_=void 0===g?null:g;_classCallCheck(this,InternalRenderTask);this.callback=r;this.params=a;this.objs=i;this.commonObjs=o;this.annotationCanvasMap=l;this.operatorListIdx=null;this.operatorList=c;this._pageIndex=u;this.canvasFactory=d;this._pdfBug=y;this.pageColors=_;this.running=!1;this.graphicsReadyCallback=null;this.graphicsReady=!1;this._useRequestAnimationFrame=!0===p&&"undefined"!=typeof window;this.cancelled=!1;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=a.canvasContext.canvas}_createClass(InternalRenderTask,[{key:"completed",get:function get(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function initializeGraphics(t){var r,a=t.transparency,i=void 0!==a&&a,o=t.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}if(this._pdfBug&&null!==(r=globalThis.StepperManager)&&void 0!==r&&r.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}var l=this.params,c=l.canvasContext,u=l.viewport,d=l.transform,h=l.imageLayer,p=l.background;this.gfx=new _canvas.CanvasGraphics(c,this.commonObjs,this.objs,this.canvasFactory,h,o,this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform:d,viewport:u,transparency:i,background:p});this.operatorListIdx=0;this.graphicsReady=!0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function cancel(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1;this.cancelled=!0;this.gfx&&this.gfx.endDrawing();this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);this.callback(t||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function operatorListChanged(){if(this.graphicsReady){this.stepper&&this.stepper.updateOperatorList(this.operatorList);this.running||this._continue()}else this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function _continue(){this.running=!0;this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function _scheduleNext(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){t._nextBound().catch(t._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(){return _regeneratorRuntime().wrap((function _callee6$(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cancelled){t.next=2;break}return t.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=!1;if(this.operatorList.lastChunk){this.gfx.endDrawing();this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);this.callback()}}case 4:case"end":return t.stop()}}),_callee6,this)}))),function _next(){return t.apply(this,arguments)})}]);var t;return InternalRenderTask}(),_canvasInUse={writable:!0,value:new WeakSet},version="2.15.349";exports.version=version;var build="b8aa9c622";exports.build=build},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PrintAnnotationStorage=r.AnnotationStorage=void 0;var i=a(1),o=a(133),l=a(135);function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateFieldSet(t,r,a){!function _classApplyDescriptorSet(t,r,a){if(r.set)r.set.call(t,a);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=a}}(t,_classExtractFieldDescriptor(t,r,"set"),a);return a}function _classExtractFieldDescriptor(t,r,a){if(!r.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return r.get(t)}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}var c=new WeakSet,u=function(){function AnnotationStorage(){_classCallCheck(this,AnnotationStorage);!function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}(this,c);this._storage=new Map;this._modified=!1;this.onSetModified=null;this.onResetModified=null}_createClass(AnnotationStorage,[{key:"getValue",value:function getValue(t,r){var a=this._storage.get(t);return void 0===a?r:Object.assign(r,a)}},{key:"getRawValue",value:function getRawValue(t){return this._storage.get(t)}},{key:"removeKey",value:function removeKey(t){this._storage.delete(t);0===this._storage.size&&this.resetModified()}},{key:"setValue",value:function setValue(t,r){var a=this._storage.get(t),i=!1;if(void 0!==a)for(var o=0,l=Object.entries(r);o<l.length;o++){var u=_slicedToArray(l[o],2),d=u[0],h=u[1];if(a[d]!==h){i=!0;a[d]=h}}else{i=!0;this._storage.set(t,r)}i&&function _classPrivateMethodGet(t,r,a){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return a}(this,c,_setModified2).call(this)}},{key:"has",value:function has(t){return this._storage.has(t)}},{key:"getAll",value:function getAll(){return this._storage.size>0?(0,i.objectFromMap)(this._storage):null}},{key:"size",get:function get(){return this._storage.size}},{key:"resetModified",value:function resetModified(){if(this._modified){this._modified=!1;"function"==typeof this.onResetModified&&this.onResetModified()}}},{key:"print",get:function get(){return new h(this)}},{key:"serializable",get:function get(){if(0===this._storage.size)return null;var t,r=new Map,a=_createForOfIteratorHelper(this._storage);try{for(a.s();!(t=a.n()).done;){var i=_slicedToArray(t.value,2),l=i[0],c=i[1],u=c instanceof o.AnnotationEditor?c.serialize():c;u&&r.set(l,u)}}catch(t){a.e(t)}finally{a.f()}return r}}],[{key:"getHash",value:function getHash(t){if(!t)return"";var r,a=new l.MurmurHash3_64,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=_slicedToArray(r.value,2),c=o[0],u=o[1];a.update("".concat(c,":").concat(JSON.stringify(u)))}}catch(t){i.e(t)}finally{i.f()}return a.hexdigest()}}]);return AnnotationStorage}();r.AnnotationStorage=u;function _setModified2(){if(!this._modified){this._modified=!0;"function"==typeof this.onSetModified&&this.onSetModified()}}var d=new WeakMap,h=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(PrintAnnotationStorage,t);var r=_createSuper(PrintAnnotationStorage);function PrintAnnotationStorage(t){var a;_classCallCheck(this,PrintAnnotationStorage);!function _classPrivateFieldInitSpec(t,r,a){_checkPrivateRedeclaration(t,r);r.set(t,a)}(_assertThisInitialized(a=r.call(this)),d,{writable:!0,value:null});_classPrivateFieldSet(_assertThisInitialized(a),d,structuredClone(t.serializable));return a}_createClass(PrintAnnotationStorage,[{key:"print",get:function get(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function get(){return function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){return r.get?r.get.call(t):r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}(this,d)}}]);return PrintAnnotationStorage}(u);r.PrintAnnotationStorage=h},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationEditor=void 0;var i=a(134),o=a(1);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _defineProperty(t,r,a){r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a;return t}function _classPrivateFieldInitSpec(t,r,a){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,a)}function _classPrivateFieldSet(t,r,a){!function _classApplyDescriptorSet(t,r,a){if(r.set)r.set.call(t,a);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=a}}(t,_classExtractFieldDescriptor(t,r,"set"),a);return a}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,a){if(!r.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return r.get(t)}var l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=function(){function AnnotationEditor(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationEditor);_classPrivateFieldInitSpec(this,l,{writable:!0,value:this.focusin.bind(this)});_classPrivateFieldInitSpec(this,c,{writable:!0,value:this.focusout.bind(this)});_classPrivateFieldInitSpec(this,u,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,d,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,h,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,p,{writable:!0,value:AnnotationEditor._zIndex++});this.constructor===AnnotationEditor&&(0,o.unreachable)("Cannot initialize AnnotationEditor.");this.parent=t.parent;this.id=t.id;this.width=this.height=null;this.pageIndex=t.parent.pageIndex;this.name=t.name;this.div=null;var r=_slicedToArray(this.parent.viewportBaseDimensions,2),a=r[0],i=r[1];this.x=t.x/a;this.y=t.y/i;this.rotation=this.parent.viewport.rotation;this.isAttachedToDOM=!1}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(AnnotationEditor,[{key:"setInBackground",value:function setInBackground(){this.div.style.zIndex=0}},{key:"setInForeground",value:function setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,p)}},{key:"focusin",value:function focusin(t){_classPrivateFieldGet(this,u)?_classPrivateFieldSet(this,u,!1):this.parent.setSelected(this)}},{key:"focusout",value:function focusout(t){if(this.isAttachedToDOM){var r=t.relatedTarget;if(null==r||!r.closest("#".concat(this.id))){t.preventDefault();this.parent.isMultipleSelection||this.commitOrRemove()}}}},{key:"commitOrRemove",value:function commitOrRemove(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function commit(){this.parent.addToAnnotationStorage(this)}},{key:"dragstart",value:function dragstart(t){var r=this.parent.div.getBoundingClientRect();this.startX=t.clientX-r.x;this.startY=t.clientY-r.y;t.dataTransfer.setData("text/plain",this.id);t.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function setAt(t,r,a,i){var o=_slicedToArray(this.parent.viewportBaseDimensions,2),l=o[0],c=o[1],u=_slicedToArray(this.screenToPageTranslation(a,i),2);a=u[0];i=u[1];this.x=(t+a)/l;this.y=(r+i)/c;this.div.style.left="".concat(100*this.x,"%");this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function translate(t,r){var a=_slicedToArray(this.parent.viewportBaseDimensions,2),i=a[0],o=a[1],l=_slicedToArray(this.screenToPageTranslation(t,r),2);t=l[0];r=l[1];this.x+=t/i;this.y+=r/o;this.div.style.left="".concat(100*this.x,"%");this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function screenToPageTranslation(t,r){switch(this.parent.viewport.rotation){case 90:return[r,-t];case 180:return[-t,-r];case 270:return[-r,t];default:return[t,r]}}},{key:"setDims",value:function setDims(t,r){var a=_slicedToArray(this.parent.viewportBaseDimensions,2),i=a[0],o=a[1];this.div.style.width="".concat(100*t/i,"%");this.div.style.height="".concat(100*r/o,"%")}},{key:"getInitialTranslation",value:function getInitialTranslation(){return[0,0]}},{key:"render",value:function render(){this.div=document.createElement("div");this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute("id",this.id);this.div.setAttribute("tabIndex",0);this.setInForeground();this.div.addEventListener("focusin",_classPrivateFieldGet(this,l));this.div.addEventListener("focusout",_classPrivateFieldGet(this,c));var t=_slicedToArray(this.getInitialTranslation(),2),r=t[0],a=t[1];this.translate(r,a);(0,i.bindEvents)(this,this.div,["dragstart","pointerdown"]);return this.div}},{key:"pointerdown",value:function pointerdown(t){var r=i.KeyboardManager.platform.isMac;if(0!==t.button||t.ctrlKey&&r)t.preventDefault();else{t.ctrlKey&&!r||t.shiftKey||t.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this);_classPrivateFieldSet(this,u,!0)}}},{key:"getRect",value:function getRect(t,r){var a=_slicedToArray(this.parent.viewportBaseDimensions,2),i=a[0],o=a[1],l=_slicedToArray(this.parent.pageDimensions,2),c=l[0],u=l[1],d=c*t/i,h=u*r/o,p=this.x*c,v=this.y*u,y=this.width*c,g=this.height*u;switch(this.rotation){case 0:return[p+d,u-v-h-g,p+d+y,u-v-h];case 90:return[p+h,u-v+d,p+h+g,u-v+d+y];case 180:return[p-d-y,u-v+h,p-d,u-v+h+g];case 270:return[p-h-g,u-v-d-y,p-h,u-v-d];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function getRectInCurrentCoords(t,r){var a=_slicedToArray(t,4),i=a[0],o=a[1],l=a[2],c=a[3],u=l-i,d=c-o;switch(this.rotation){case 0:return[i,r-c,u,d];case 90:return[i,r-o,d,u];case 180:return[l,r-o,u,d];case 270:return[l,r-c,d,u];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function onceAdded(){}},{key:"isEmpty",value:function isEmpty(){return!1}},{key:"enableEditMode",value:function enableEditMode(){_classPrivateFieldSet(this,h,!0)}},{key:"disableEditMode",value:function disableEditMode(){_classPrivateFieldSet(this,h,!1)}},{key:"isInEditMode",value:function isInEditMode(){return _classPrivateFieldGet(this,h)}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return!1}},{key:"needsToBeRebuilt",value:function needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function rebuild(){var t;null===(t=this.div)||void 0===t||t.addEventListener("focusin",_classPrivateFieldGet(this,l))}},{key:"serialize",value:function serialize(){(0,o.unreachable)("An editor must be serializable")}},{key:"remove",value:function remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,l));this.div.removeEventListener("focusout",_classPrivateFieldGet(this,c));this.isEmpty()||this.commit();this.parent.remove(this)}},{key:"select",value:function select(){var t;null===(t=this.div)||void 0===t||t.classList.add("selectedEditor")}},{key:"unselect",value:function unselect(){var t;null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor")}},{key:"updateParams",value:function updateParams(t,r){}},{key:"disableEditing",value:function disableEditing(){}},{key:"enableEditing",value:function enableEditing(){}},{key:"getIdForTextLayer",value:function getIdForTextLayer(){return this.id}},{key:"propertiesToUpdate",get:function get(){return{}}},{key:"contentDiv",get:function get(){return this.div}},{key:"isEditing",get:function get(){return _classPrivateFieldGet(this,d)},set:function set(t){_classPrivateFieldSet(this,d,t);if(t){this.parent.setSelected(this);this.parent.setActiveEditor(this)}else this.parent.setActiveEditor(null)}}],[{key:"_defaultLineColor",get:function get(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deserialize",value:function deserialize(t,r){var a=new this.prototype.constructor({parent:r,id:r.getNextId()});a.rotation=t.rotation;var i=_slicedToArray(r.pageDimensions,2),o=i[0],l=i[1],c=_slicedToArray(a.getRectInCurrentCoords(t.rect,l),4),u=c[0],d=c[1],h=c[2],p=c[3];a.x=u/o;a.y=d/l;a.width=h/o;a.height=p/l;return a}}]);return AnnotationEditor}();r.AnnotationEditor=v;_defineProperty(v,"_colorManager",new i.ColorManager);_defineProperty(v,"_zIndex",1)},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.KeyboardManager=r.CommandManager=r.ColorManager=r.AnnotationEditorUIManager=void 0;r.bindEvents=function bindEvents(t,r,a){var i,o=_createForOfIteratorHelper(a);try{for(o.s();!(i=o.n()).done;){var l=i.value;r.addEventListener(l,t[l].bind(t))}}catch(t){o.e(t)}finally{o.f()}};r.opacityToHex=function opacityToHex(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")};var i=a(1),o=a(129);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _defineProperty(t,r,a){r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a;return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateMethodGet(t,r,a){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateFieldInitSpec(t,r,a){_checkPrivateRedeclaration(t,r);r.set(t,a)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,a){!function _classApplyDescriptorSet(t,r,a){if(r.set)r.set.call(t,a);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=a}}(t,_classExtractFieldDescriptor(t,r,"set"),a);return a}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,a){if(!r.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return r.get(t)}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}var l=new WeakMap,c=function(){function IdManager(){_classCallCheck(this,IdManager);_classPrivateFieldInitSpec(this,l,{writable:!0,value:0})}_createClass(IdManager,[{key:"getId",value:function getId(){var t,r;return"".concat(i.AnnotationEditorPrefix).concat((_classPrivateFieldSet(this,l,(t=_classPrivateFieldGet(this,l),r=t++,t)),r))}}]);return IdManager}(),u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=function(){function CommandManager(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;_classCallCheck(this,CommandManager);_classPrivateFieldInitSpec(this,u,{writable:!0,value:[]});_classPrivateFieldInitSpec(this,d,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,h,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,p,{writable:!0,value:-1});_classPrivateFieldSet(this,h,t)}_createClass(CommandManager,[{key:"add",value:function add(t){var r=t.cmd,a=t.undo,i=t.mustExec,o=t.type,l=void 0===o?NaN:o,c=t.overwriteIfSameType,v=void 0!==c&&c,y=t.keepUndo,g=void 0!==y&&y;i&&r();if(!_classPrivateFieldGet(this,d)){var _={cmd:r,undo:a,type:l};if(-1!==_classPrivateFieldGet(this,p))if(v&&_classPrivateFieldGet(this,u)[_classPrivateFieldGet(this,p)].type===l){g&&(_.undo=_classPrivateFieldGet(this,u)[_classPrivateFieldGet(this,p)].undo);_classPrivateFieldGet(this,u)[_classPrivateFieldGet(this,p)]=_}else{var m=_classPrivateFieldGet(this,p)+1;if(m===_classPrivateFieldGet(this,h))_classPrivateFieldGet(this,u).splice(0,1);else{_classPrivateFieldSet(this,p,m);m<_classPrivateFieldGet(this,u).length&&_classPrivateFieldGet(this,u).splice(m)}_classPrivateFieldGet(this,u).push(_)}else{_classPrivateFieldGet(this,u).length>0&&(_classPrivateFieldGet(this,u).length=0);_classPrivateFieldSet(this,p,0);_classPrivateFieldGet(this,u).push(_)}}}},{key:"undo",value:function undo(){if(-1!==_classPrivateFieldGet(this,p)){_classPrivateFieldSet(this,d,!0);_classPrivateFieldGet(this,u)[_classPrivateFieldGet(this,p)].undo();_classPrivateFieldSet(this,d,!1);_classPrivateFieldSet(this,p,_classPrivateFieldGet(this,p)-1)}}},{key:"redo",value:function redo(){if(_classPrivateFieldGet(this,p)<_classPrivateFieldGet(this,u).length-1){_classPrivateFieldSet(this,p,_classPrivateFieldGet(this,p)+1);_classPrivateFieldSet(this,d,!0);_classPrivateFieldGet(this,u)[_classPrivateFieldGet(this,p)].cmd();_classPrivateFieldSet(this,d,!1)}}},{key:"hasSomethingToUndo",value:function hasSomethingToUndo(){return-1!==_classPrivateFieldGet(this,p)}},{key:"hasSomethingToRedo",value:function hasSomethingToRedo(){return _classPrivateFieldGet(this,p)<_classPrivateFieldGet(this,u).length-1}},{key:"destroy",value:function destroy(){_classPrivateFieldSet(this,u,null)}}]);return CommandManager}();r.CommandManager=v;var y=new WeakSet,g=function(){function KeyboardManager(t){_classCallCheck(this,KeyboardManager);_classPrivateMethodInitSpec(this,y);this.buffer=[];this.callbacks=new Map;this.allKeys=new Set;var r,a=KeyboardManager.platform.isMac,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o,l=_slicedToArray(r.value,2),c=l[0],u=l[1],d=_createForOfIteratorHelper(c);try{for(d.s();!(o=d.n()).done;){var h=o.value,p=h.startsWith("mac+");if(a&&p){this.callbacks.set(h.slice(4),u);this.allKeys.add(h.split("+").at(-1))}else if(!a&&!p){this.callbacks.set(h,u);this.allKeys.add(h.split("+").at(-1))}}}catch(t){d.e(t)}finally{d.f()}}}catch(t){i.e(t)}finally{i.f()}}_createClass(KeyboardManager,[{key:"exec",value:function exec(t,r){if(this.allKeys.has(r.key)){var a=this.callbacks.get(_classPrivateMethodGet(this,y,_serialize2).call(this,r));if(a){a.bind(t)();r.stopPropagation();r.preventDefault()}}}}],[{key:"platform",get:function get(){var t="undefined"!=typeof navigator?navigator.platform:"";return(0,i.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]);return KeyboardManager}();r.KeyboardManager=g;function _serialize2(t){t.altKey&&this.buffer.push("alt");t.ctrlKey&&this.buffer.push("ctrl");t.metaKey&&this.buffer.push("meta");t.shiftKey&&this.buffer.push("shift");this.buffer.push(t.key);var r=this.buffer.join("+");this.buffer.length=0;return r}var _=new WeakMap,m=function(){function ClipboardManager(){_classCallCheck(this,ClipboardManager);_classPrivateFieldInitSpec(this,_,{writable:!0,value:null})}_createClass(ClipboardManager,[{key:"copy",value:function copy(t){if(t){Array.isArray(t)?_classPrivateFieldSet(this,_,t.map((function(t){return t.serialize()}))):_classPrivateFieldSet(this,_,[t.serialize()]);_classPrivateFieldSet(this,_,_classPrivateFieldGet(this,_).filter((function(t){return!!t})));0===_classPrivateFieldGet(this,_).length&&_classPrivateFieldSet(this,_,null)}}},{key:"paste",value:function paste(){return _classPrivateFieldGet(this,_)}},{key:"isEmpty",value:function isEmpty(){return null===_classPrivateFieldGet(this,_)}},{key:"destroy",value:function destroy(){_classPrivateFieldSet(this,_,null)}}]);return ClipboardManager}(),b=function(){function ColorManager(){_classCallCheck(this,ColorManager)}_createClass(ColorManager,[{key:"_colors",get:function get(){var t=new Map([["CanvasText",null],["Canvas",null]]);(0,o.getColorValues)(t);return(0,i.shadow)(this,"_colors",t)}},{key:"convert",value:function convert(t){var r=(0,o.getRGB)(t);if(!window.matchMedia("(forced-colors: active)").matches)return r;var a,i=_createForOfIteratorHelper(this._colors);try{for(i.s();!(a=i.n()).done;){var l=_slicedToArray(a.value,2),c=l[0];if(l[1].every((function(t,a){return t===r[a]})))return ColorManager._colorsMapping.get(c)}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"getHexCode",value:function getHexCode(t){var r=this._colors.get(t);return r?i.Util.makeHexColor.apply(i.Util,_toConsumableArray(r)):t}}]);return ColorManager}();r.ColorManager=b;_defineProperty(b,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var A=new WeakMap,k=new WeakMap,P=new WeakMap,S=new WeakMap,w=new WeakMap,x=new WeakMap,C=new WeakMap,T=new WeakMap,E=new WeakMap,I=new WeakMap,O=new WeakMap,M=new WeakMap,R=new WeakMap,D=new WeakMap,L=new WeakMap,G=new WeakMap,j=new WeakMap,N=new WeakMap,B=new WeakSet,W=new WeakSet,U=new WeakSet,H=new WeakSet,z=new WeakSet,V=new WeakSet,X=new WeakSet,Y=new WeakSet,K=new WeakSet,J=function(){function AnnotationEditorUIManager(t,r){_classCallCheck(this,AnnotationEditorUIManager);_classPrivateMethodInitSpec(this,K);_classPrivateMethodInitSpec(this,Y);_classPrivateMethodInitSpec(this,X);_classPrivateMethodInitSpec(this,V);_classPrivateMethodInitSpec(this,z);_classPrivateMethodInitSpec(this,H);_classPrivateMethodInitSpec(this,U);_classPrivateMethodInitSpec(this,W);_classPrivateMethodInitSpec(this,B);_classPrivateFieldInitSpec(this,A,{writable:!0,value:null});_classPrivateFieldInitSpec(this,k,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,P,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,S,{writable:!0,value:new m});_classPrivateFieldInitSpec(this,w,{writable:!0,value:new v});_classPrivateFieldInitSpec(this,x,{writable:!0,value:0});_classPrivateFieldInitSpec(this,C,{writable:!0,value:null});_classPrivateFieldInitSpec(this,T,{writable:!0,value:null});_classPrivateFieldInitSpec(this,E,{writable:!0,value:new c});_classPrivateFieldInitSpec(this,I,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,O,{writable:!0,value:i.AnnotationEditorType.NONE});_classPrivateFieldInitSpec(this,M,{writable:!0,value:new Set});_classPrivateFieldInitSpec(this,R,{writable:!0,value:this.keydown.bind(this)});_classPrivateFieldInitSpec(this,D,{writable:!0,value:this.onEditingAction.bind(this)});_classPrivateFieldInitSpec(this,L,{writable:!0,value:this.onPageChanging.bind(this)});_classPrivateFieldInitSpec(this,G,{writable:!0,value:this.onTextLayerRendered.bind(this)});_classPrivateFieldInitSpec(this,j,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}});_classPrivateFieldInitSpec(this,N,{writable:!0,value:null});_classPrivateFieldSet(this,N,t);_classPrivateFieldSet(this,T,r);_classPrivateFieldGet(this,T)._on("editingaction",_classPrivateFieldGet(this,D));_classPrivateFieldGet(this,T)._on("pagechanging",_classPrivateFieldGet(this,L));_classPrivateFieldGet(this,T)._on("textlayerrendered",_classPrivateFieldGet(this,G))}_createClass(AnnotationEditorUIManager,[{key:"destroy",value:function destroy(){_classPrivateMethodGet(this,W,_removeKeyboardManager2).call(this);_classPrivateFieldGet(this,T)._off("editingaction",_classPrivateFieldGet(this,D));_classPrivateFieldGet(this,T)._off("pagechanging",_classPrivateFieldGet(this,L));_classPrivateFieldGet(this,T)._off("textlayerrendered",_classPrivateFieldGet(this,G));var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,P).values());try{for(r.s();!(t=r.n()).done;){t.value.destroy()}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldGet(this,P).clear();_classPrivateFieldGet(this,k).clear();_classPrivateFieldSet(this,A,null);_classPrivateFieldGet(this,M).clear();_classPrivateFieldGet(this,S).destroy();_classPrivateFieldGet(this,w).destroy()}},{key:"onPageChanging",value:function onPageChanging(t){var r=t.pageNumber;_classPrivateFieldSet(this,x,r-1)}},{key:"onTextLayerRendered",value:function onTextLayerRendered(t){var r=t.pageNumber-1,a=_classPrivateFieldGet(this,P).get(r);null==a||a.onTextLayerRendered()}},{key:"focusMainContainer",value:function focusMainContainer(){_classPrivateFieldGet(this,N).focus()}},{key:"keydown",value:function keydown(t){var r;null!==(r=this.getActive())&&void 0!==r&&r.shouldGetKeyboardEvents()||AnnotationEditorUIManager._keyboardManager.exec(this,t)}},{key:"onEditingAction",value:function onEditingAction(t){["undo","redo","cut","copy","paste","delete","selectAll"].includes(t.name)&&this[t.name]()}},{key:"setEditingState",value:function setEditingState(t){if(t){_classPrivateMethodGet(this,B,_addKeyboardManager2).call(this);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{isEditing:_classPrivateFieldGet(this,O)!==i.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,Y,_isEmpty2).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,w).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,w).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:_classPrivateFieldGet(this,S).isEmpty()})}else{_classPrivateMethodGet(this,W,_removeKeyboardManager2).call(this);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{isEditing:!1})}}},{key:"registerEditorTypes",value:function registerEditorTypes(t){_classPrivateFieldSet(this,C,t);var r,a=_createForOfIteratorHelper(_classPrivateFieldGet(this,C));try{for(a.s();!(r=a.n()).done;){var i=r.value;_classPrivateMethodGet(this,H,_dispatchUpdateUI2).call(this,i.defaultPropertiesToUpdate)}}catch(t){a.e(t)}finally{a.f()}}},{key:"getId",value:function getId(){return _classPrivateFieldGet(this,E).getId()}},{key:"addLayer",value:function addLayer(t){_classPrivateFieldGet(this,P).set(t.pageIndex,t);_classPrivateFieldGet(this,I)?t.enable():t.disable()}},{key:"removeLayer",value:function removeLayer(t){_classPrivateFieldGet(this,P).delete(t.pageIndex)}},{key:"updateMode",value:function updateMode(t){_classPrivateFieldSet(this,O,t);if(t===i.AnnotationEditorType.NONE){this.setEditingState(!1);_classPrivateMethodGet(this,V,_disableAll2).call(this)}else{this.setEditingState(!0);_classPrivateMethodGet(this,z,_enableAll2).call(this);var r,a=_createForOfIteratorHelper(_classPrivateFieldGet(this,P).values());try{for(a.s();!(r=a.n()).done;){r.value.updateMode(t)}}catch(t){a.e(t)}finally{a.f()}}}},{key:"updateToolbar",value:function updateToolbar(t){t!==_classPrivateFieldGet(this,O)&&_classPrivateFieldGet(this,T).dispatch("switchannotationeditormode",{source:this,mode:t})}},{key:"updateParams",value:function updateParams(t,r){var a,i=_createForOfIteratorHelper(_classPrivateFieldGet(this,M));try{for(i.s();!(a=i.n()).done;){a.value.updateParams(t,r)}}catch(t){i.e(t)}finally{i.f()}var o,l=_createForOfIteratorHelper(_classPrivateFieldGet(this,C));try{for(l.s();!(o=l.n()).done;){o.value.updateDefaultParams(t,r)}}catch(t){l.e(t)}finally{l.f()}}},{key:"getEditors",value:function getEditors(t){var r,a=[],i=_createForOfIteratorHelper(_classPrivateFieldGet(this,k).values());try{for(i.s();!(r=i.n()).done;){var o=r.value;o.pageIndex===t&&a.push(o)}}catch(t){i.e(t)}finally{i.f()}return a}},{key:"getEditor",value:function getEditor(t){return _classPrivateFieldGet(this,k).get(t)}},{key:"addEditor",value:function addEditor(t){_classPrivateFieldGet(this,k).set(t.id,t)}},{key:"removeEditor",value:function removeEditor(t){_classPrivateFieldGet(this,k).delete(t.id);this.unselect(t)}},{key:"setActiveEditor",value:function setActiveEditor(t){if(_classPrivateFieldGet(this,A)!==t){_classPrivateFieldSet(this,A,t);t&&_classPrivateMethodGet(this,H,_dispatchUpdateUI2).call(this,t.propertiesToUpdate)}}},{key:"toggleSelected",value:function toggleSelected(t){if(_classPrivateFieldGet(this,M).has(t)){_classPrivateFieldGet(this,M).delete(t);t.unselect();_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}else{_classPrivateFieldGet(this,M).add(t);t.select();_classPrivateMethodGet(this,H,_dispatchUpdateUI2).call(this,t.propertiesToUpdate);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}}},{key:"setSelected",value:function setSelected(t){var r,a=_createForOfIteratorHelper(_classPrivateFieldGet(this,M));try{for(a.s();!(r=a.n()).done;){var i=r.value;i!==t&&i.unselect()}}catch(t){a.e(t)}finally{a.f()}_classPrivateFieldGet(this,M).clear();_classPrivateFieldGet(this,M).add(t);t.select();_classPrivateMethodGet(this,H,_dispatchUpdateUI2).call(this,t.propertiesToUpdate);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function isSelected(t){return _classPrivateFieldGet(this,M).has(t)}},{key:"unselect",value:function unselect(t){t.unselect();_classPrivateFieldGet(this,M).delete(t);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function get(){return 0!==_classPrivateFieldGet(this,M).size}},{key:"undo",value:function undo(){_classPrivateFieldGet(this,w).undo();_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,w).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet(this,Y,_isEmpty2).call(this)})}},{key:"redo",value:function redo(){_classPrivateFieldGet(this,w).redo();_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(this,w).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,Y,_isEmpty2).call(this)})}},{key:"addCommands",value:function addCommands(t){_classPrivateFieldGet(this,w).add(t);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet(this,Y,_isEmpty2).call(this)})}},{key:"delete",value:function _delete(){var t=this;_classPrivateFieldGet(this,A)&&_classPrivateFieldGet(this,A).commitOrRemove();if(this.hasSelection){var r=_toConsumableArray(_classPrivateFieldGet(this,M));this.addCommands({cmd:function cmd(){var t,a=_createForOfIteratorHelper(r);try{for(a.s();!(t=a.n()).done;){t.value.remove()}}catch(t){a.e(t)}finally{a.f()}},undo:function undo(){var a,i=_createForOfIteratorHelper(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;_classPrivateMethodGet(t,X,_addEditorToLayer2).call(t,o)}}catch(t){i.e(t)}finally{i.f()}},mustExec:!0})}}},{key:"copy",value:function copy(){_classPrivateFieldGet(this,A)&&_classPrivateFieldGet(this,A).commitOrRemove();if(this.hasSelection){var t,r=[],a=_createForOfIteratorHelper(_classPrivateFieldGet(this,M));try{for(a.s();!(t=a.n()).done;){var i=t.value;i.isEmpty()||r.push(i)}}catch(t){a.e(t)}finally{a.f()}if(0===r.length)return;_classPrivateFieldGet(this,S).copy(r);_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasEmptyClipboard:!1})}}},{key:"cut",value:function cut(){this.copy();this.delete()}},{key:"paste",value:function paste(){var t=this;if(!_classPrivateFieldGet(this,S).isEmpty()){this.unselectAll();var r=_classPrivateFieldGet(this,P).get(_classPrivateFieldGet(this,x)),a=_classPrivateFieldGet(this,S).paste().map((function(t){return r.deserialize(t)}));this.addCommands({cmd:function cmd(){var r,i=_createForOfIteratorHelper(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;_classPrivateMethodGet(t,X,_addEditorToLayer2).call(t,o)}}catch(t){i.e(t)}finally{i.f()}_classPrivateMethodGet(t,K,_selectEditors2).call(t,a)},undo:function undo(){var t,r=_createForOfIteratorHelper(a);try{for(r.s();!(t=r.n()).done;){t.value.remove()}}catch(t){r.e(t)}finally{r.f()}},mustExec:!0})}}},{key:"selectAll",value:function selectAll(){var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,M));try{for(r.s();!(t=r.n()).done;){t.value.commit()}}catch(t){r.e(t)}finally{r.f()}_classPrivateMethodGet(this,K,_selectEditors2).call(this,_classPrivateFieldGet(this,k).values())}},{key:"unselectAll",value:function unselectAll(){if(_classPrivateFieldGet(this,A))_classPrivateFieldGet(this,A).commitOrRemove();else if(0!==_classPrivateMethodGet(this,K,_selectEditors2).size){var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,M));try{for(r.s();!(t=r.n()).done;){t.value.unselect()}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldGet(this,M).clear();_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!1})}}},{key:"isActive",value:function isActive(t){return _classPrivateFieldGet(this,A)===t}},{key:"getActive",value:function getActive(){return _classPrivateFieldGet(this,A)}},{key:"getMode",value:function getMode(){return _classPrivateFieldGet(this,O)}}]);return AnnotationEditorUIManager}();r.AnnotationEditorUIManager=J;function _addKeyboardManager2(){_classPrivateFieldGet(this,N).addEventListener("keydown",_classPrivateFieldGet(this,R))}function _removeKeyboardManager2(){_classPrivateFieldGet(this,N).removeEventListener("keydown",_classPrivateFieldGet(this,R))}function _dispatchUpdateStates2(t){var r=this;Object.entries(t).some((function(t){var a=_slicedToArray(t,2),i=a[0],o=a[1];return _classPrivateFieldGet(r,j)[i]!==o}))&&_classPrivateFieldGet(this,T).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(this,j),t)})}function _dispatchUpdateUI2(t){_classPrivateFieldGet(this,T).dispatch("annotationeditorparamschanged",{source:this,details:t})}function _enableAll2(){if(!_classPrivateFieldGet(this,I)){_classPrivateFieldSet(this,I,!0);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,P).values());try{for(r.s();!(t=r.n()).done;){t.value.enable()}}catch(t){r.e(t)}finally{r.f()}}}function _disableAll2(){this.unselectAll();if(_classPrivateFieldGet(this,I)){_classPrivateFieldSet(this,I,!1);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,P).values());try{for(r.s();!(t=r.n()).done;){t.value.disable()}}catch(t){r.e(t)}finally{r.f()}}}function _addEditorToLayer2(t){var r=_classPrivateFieldGet(this,P).get(t.pageIndex);r?r.addOrRebuild(t):this.addEditor(t)}function _isEmpty2(){if(0===_classPrivateFieldGet(this,k).size)return!0;if(1===_classPrivateFieldGet(this,k).size){var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,k).values());try{for(r.s();!(t=r.n()).done;){return t.value.isEmpty()}}catch(t){r.e(t)}finally{r.f()}}return!1}function _selectEditors2(t){_classPrivateFieldGet(this,M).clear();var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(!i.isEmpty()){_classPrivateFieldGet(this,M).add(i);i.select()}}}catch(t){a.e(t)}finally{a.f()}_classPrivateMethodGet(this,U,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}_defineProperty(J,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],J.prototype.selectAll],[["ctrl+c","mac+meta+c"],J.prototype.copy],[["ctrl+v","mac+meta+v"],J.prototype.paste],[["ctrl+x","mac+meta+x"],J.prototype.cut],[["ctrl+z","mac+meta+z"],J.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],J.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],J.prototype.delete],[["Escape","mac+Escape"],J.prototype.unselectAll]]))},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.MurmurHash3_64=void 0;var i=a(1);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o=3285377520,l=4294901760,c=65535,u=function(){function MurmurHash3_64(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MurmurHash3_64);this.h1=t?4294967295&t:o;this.h2=t?4294967295&t:o}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(MurmurHash3_64,[{key:"update",value:function update(t){var r,a;if("string"==typeof t){r=new Uint8Array(2*t.length);a=0;for(var o=0,u=t.length;o<u;o++){var d=t.charCodeAt(o);if(d<=255)r[a++]=d;else{r[a++]=d>>>8;r[a++]=255&d}}}else{if(!(0,i.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");a=(r=t.slice()).byteLength}for(var h=a>>2,p=a-4*h,v=new Uint32Array(r.buffer,0,h),y=0,g=0,_=this.h1,m=this.h2,b=3432918353,A=461845907,k=11601,P=13715,S=0;S<h;S++)1&S?_=5*(_=(_^=y=(y=(y=(y=v[S])*b&l|y*k&c)<<15|y>>>17)*A&l|y*P&c)<<13|_>>>19)+3864292196:m=5*(m=(m^=g=(g=(g=(g=v[S])*b&l|g*k&c)<<15|g>>>17)*A&l|g*P&c)<<13|m>>>19)+3864292196;y=0;switch(p){case 3:y^=r[4*h+2]<<16;case 2:y^=r[4*h+1]<<8;case 1:y=(y=(y=(y^=r[4*h])*b&l|y*k&c)<<15|y>>>17)*A&l|y*P&c;1&h?_^=y:m^=y}this.h1=_;this.h2=m}},{key:"hexdigest",value:function hexdigest(){var t=this.h1,r=this.h2;t=3981806797*(t^=r>>>1)&l|36045*t&c;t=444984403*(t^=(r=4283543511*r&l|(2950163797*(r<<16|t>>>16)&l)>>>16)>>>1)&l|60499*t&c;var a=((t^=(r=3301882366*r&l|(3120437893*(r<<16|t>>>16)&l)>>>16)>>>1)>>>0).toString(16),i=(r>>>0).toString(16);return a.padStart(8,"0")+i.padStart(8,"0")}}]);return MurmurHash3_64}();r.MurmurHash3_64=u},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.FontLoader=r.FontFaceObject=void 0;var i=a(1);function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),c=new Context(i||[]);return l._invoke=function(t,r,a){var i="suspendedStart";return function(o,l){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw l;return doneResult()}for(a.method=o,a.arg=l;;){var c=a.delegate;if(c){var d=maybeInvokeDelegate(c,a);if(d){if(d===u)continue;return d}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var h=tryCatch(t,r,a);if("normal"===h.type){if(i=a.done?"completed":"suspendedYield",h.arg===u)continue;return{value:h.arg,done:a.done}}"throw"===h.type&&(i="completed",a.method="throw",a.arg=h.arg)}}}(t,a,c),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&a.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,o,l,c){var u=tryCatch(t[i],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&a.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var i;this._invoke=function(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,a,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var a=t.iterator[r.method];if(void 0===a){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return u}var i=tryCatch(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,u;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,u):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,l=function next(){for(;++i<t.length;)if(a.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return l.next=l}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(v),define(v,c,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,i){return l.type="throw",l.arg=t,r.next=a,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),u},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),u}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),d=u.value}catch(t){a(t);return}u.done?r(d):Promise.resolve(d).then(i,o)}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}var o,l=function(){function BaseFontLoader(t){var r=t.docId,a=t.onUnsupportedFeature,o=t.ownerDocument,l=void 0===o?globalThis.document:o;t.styleElement;_classCallCheck(this,BaseFontLoader);this.constructor===BaseFontLoader&&(0,i.unreachable)("Cannot initialize BaseFontLoader.");this.docId=r;this._onUnsupportedFeature=a;this._document=l;this.nativeFontFaces=[];this.styleElement=null}_createClass(BaseFontLoader,[{key:"addNativeFontFace",value:function addNativeFontFace(t){this.nativeFontFaces.push(t);this._document.fonts.add(t)}},{key:"insertRule",value:function insertRule(t){var r=this.styleElement;if(!r){(r=this.styleElement=this._document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId);this._document.documentElement.getElementsByTagName("head")[0].append(r)}var a=r.sheet;a.insertRule(t,a.cssRules.length)}},{key:"clear",value:function clear(){var t,r=_createForOfIteratorHelper(this.nativeFontFaces);try{for(r.s();!(t=r.n()).done;){var a=t.value;this._document.fonts.delete(a)}}catch(t){r.e(t)}finally{r.f()}this.nativeFontFaces.length=0;if(this.styleElement){this.styleElement.remove();this.styleElement=null}}},{key:"bind",value:(t=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t){var r,a,o=this;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:if(!t.attached&&!t.missingFile){l.next=2;break}return l.abrupt("return");case 2:t.attached=!0;if(!this.isFontLoadingAPISupported){l.next=19;break}if(!(r=t.createNativeFontFace())){l.next=18;break}this.addNativeFontFace(r);l.prev=7;l.next=10;return r.loaded;case 10:l.next=18;break;case 12:l.prev=12;l.t0=l.catch(7);this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative});(0,i.warn)("Failed to load font \'".concat(r.family,"\': \'").concat(l.t0,"\'."));t.disableFontFace=!0;throw l.t0;case 18:return l.abrupt("return");case 19:if(!(a=t.createFontFaceRule())){l.next=26;break}this.insertRule(a);if(!this.isSyncFontLoadingSupported){l.next=24;break}return l.abrupt("return");case 24:l.next=26;return new Promise((function(r){var i=o._queueLoadingCallback(r);o._prepareFontLoadEvent([a],[t],i)}));case 26:case"end":return l.stop()}}),_callee,this,[[7,12]])}))),function bind(r){return t.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){(0,i.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function get(){var t,r=!(null===(t=this._document)||void 0===t||!t.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",r)}},{key:"isSyncFontLoadingSupported",get:function get(){(0,i.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function get(){(0,i.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,r,a){(0,i.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]);var t;return BaseFontLoader}();r.FontLoader=o;r.FontLoader=o=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(GenericFontLoader,t);var r=_createSuper(GenericFontLoader);function GenericFontLoader(t){var a;_classCallCheck(this,GenericFontLoader);(a=r.call(this,t)).loadingContext={requests:[],nextRequestId:0};a.loadTestFontId=0;return a}_createClass(GenericFontLoader,[{key:"isSyncFontLoadingSupported",get:function get(){var t=!1;if("undefined"==typeof navigator)t=!0;else{var r=/Mozilla\\/5.0.*?rv:(\\d+).*? Gecko/.exec(navigator.userAgent);(null==r?void 0:r[1])>=14&&(t=!0)}return(0,i.shadow)(this,"isSyncFontLoadingSupported",t)}},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){var r=this.loadingContext,a={id:"pdfjs-font-loading-".concat(r.nextRequestId++),done:!1,complete:function completeRequest(){(0,i.assert)(!a.done,"completeRequest() cannot be called twice.");a.done=!0;for(;r.requests.length>0&&r.requests[0].done;){var t=r.requests.shift();setTimeout(t.callback,0)}},callback:t};r.requests.push(a);return a}},{key:"_loadTestFont",get:function get(){return(0,i.shadow)(this,"_loadTestFont",function getLoadTestFont(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")}())}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,r,a){function int32(t,r){return t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|255&t.charCodeAt(r+3)}function spliceString(t,r,a,i){return t.substring(0,r)+i+t.substring(r+a)}var o,l,c=this._document.createElement("canvas");c.width=1;c.height=1;var u=c.getContext("2d"),d=0;var h="lt".concat(Date.now()).concat(this.loadTestFontId++),p=this._loadTestFont,v=1482184792,y=int32(p=spliceString(p,976,h.length,h),16);for(o=0,l=h.length-3;o<l;o+=4)y=y-v+int32(h,o)|0;o<h.length&&(y=y-v+int32(h+"XXX",o)|0);p=spliceString(p,16,4,(0,i.string32)(y));var g="url(data:font/opentype;base64,".concat(btoa(p),");"),_=\'@font-face {font-family:"\'.concat(h,\'";src:\').concat(g,"}");this.insertRule(_);var m,b=[],A=_createForOfIteratorHelper(r);try{for(A.s();!(m=A.n()).done;){var k=m.value;b.push(k.loadedName)}}catch(t){A.e(t)}finally{A.f()}b.push(h);var P=this._document.createElement("div");P.style.visibility="hidden";P.style.width=P.style.height="10px";P.style.position="absolute";P.style.top=P.style.left="0px";for(var S=0,w=b;S<w.length;S++){var x=w[S],C=this._document.createElement("span");C.textContent="Hi";C.style.fontFamily=x;P.append(C)}this._document.body.append(P);!function isFontReady(t,r){if(++d>30){(0,i.warn)("Load test font never loaded.");r()}else{u.font="30px "+t;u.fillText(".",0,20);u.getImageData(0,0,1,1).data[3]>0?r():setTimeout(isFontReady.bind(null,t,r))}}(h,(function(){P.remove();a.complete()}))}}]);return GenericFontLoader}(l);var c=function(){function FontFaceObject(t,r){var a=r.isEvalSupported,i=void 0===a||a,o=r.disableFontFace,l=void 0!==o&&o,c=r.ignoreErrors,u=void 0!==c&&c,d=r.onUnsupportedFeature,h=r.fontRegistry,p=void 0===h?null:h;_classCallCheck(this,FontFaceObject);this.compiledGlyphs=Object.create(null);for(var v in t)this[v]=t[v];this.isEvalSupported=!1!==i;this.disableFontFace=!0===l;this.ignoreErrors=!0===u;this._onUnsupportedFeature=d;this.fontRegistry=p}_createClass(FontFaceObject,[{key:"createNativeFontFace",value:function createNativeFontFace(){if(!this.data||this.disableFontFace)return null;var t;if(this.cssFontInfo){var r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg"));t=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}else t=new FontFace(this.loadedName,this.data,{});this.fontRegistry&&this.fontRegistry.registerFont(this);return t}},{key:"createFontFaceRule",value:function createFontFaceRule(){if(!this.data||this.disableFontFace)return null;var t,r=(0,i.bytesToString)(this.data),a="url(data:".concat(this.mimetype,";base64,").concat(btoa(r),");");if(this.cssFontInfo){var o="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(o+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;"));t=\'@font-face {font-family:"\'.concat(this.cssFontInfo.fontFamily,\'";\').concat(o,"src:").concat(a,"}")}else t=\'@font-face {font-family:"\'.concat(this.loadedName,\'";src:\').concat(a,"}");this.fontRegistry&&this.fontRegistry.registerFont(this,a);return t}},{key:"getPathGenerator",value:function getPathGenerator(t,r){if(void 0!==this.compiledGlyphs[r])return this.compiledGlyphs[r];var a;try{a=t.get(this.loadedName+"_path_"+r)}catch(t){if(!this.ignoreErrors)throw t;this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath});(0,i.warn)(\'getPathGenerator - ignoring character: "\'.concat(t,\'".\'));return this.compiledGlyphs[r]=function(t,r){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){var o,l=[],c=_createForOfIteratorHelper(a);try{for(c.s();!(o=c.n()).done;){var u=o.value,d=void 0!==u.args?u.args.join(","):"";l.push("c.",u.cmd,"(",d,");\\n")}}catch(t){c.e(t)}finally{c.f()}return this.compiledGlyphs[r]=new Function("c","size",l.join(""))}return this.compiledGlyphs[r]=function(t,r){var i,o=_createForOfIteratorHelper(a);try{for(o.s();!(i=o.n()).done;){var l=i.value;"scale"===l.cmd&&(l.args=[r,-r]);t[l.cmd].apply(t,l.args)}}catch(t){o.e(t)}finally{o.f()}}}}]);return FontFaceObject}();r.FontFaceObject=c},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.CanvasGraphics=void 0;var i=a(1),o=a(129),l=a(138),c=a(139),u=a(3);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classPrivateMethodInitSpec(t,r){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.add(t)}function _classPrivateMethodGet(t,r,a){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return a}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}var d=4096,h=16;function addContextCurrentTransform(t){t._transformStack&&(t._transformStack=[]);if(!t.mozCurrentTransform){t._originalSave=t.save;t._originalRestore=t.restore;t._originalRotate=t.rotate;t._originalScale=t.scale;t._originalTranslate=t.translate;t._originalTransform=t.transform;t._originalSetTransform=t.setTransform;t._originalResetTransform=t.resetTransform;t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0];t._transformStack=[];try{var r=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"lineWidth");t._setLineWidth=r.set;t._getLineWidth=r.get;Object.defineProperty(t,"lineWidth",{set:function setLineWidth(t){this._setLineWidth(1.000001*t)},get:function getLineWidth(){return this._getLineWidth()}})}catch(t){}Object.defineProperty(t,"mozCurrentTransform",{get:function getCurrentTransform(){return this._transformMatrix}});Object.defineProperty(t,"mozCurrentTransformInverse",{get:function getCurrentTransformInverse(){var t=_slicedToArray(this._transformMatrix,6),r=t[0],a=t[1],i=t[2],o=t[3],l=t[4],c=t[5],u=r*o-a*i,d=a*i-r*o;return[o/u,a/d,i/d,r/u,(o*l-i*c)/d,(a*l-r*c)/u]}});t.save=function ctxSave(){var t=this._transformMatrix;this._transformStack.push(t);this._transformMatrix=t.slice(0,6);this._originalSave()};t.restore=function ctxRestore(){0===this._transformStack.length&&(0,i.warn)("Tried to restore a ctx when the stack was already empty.");var t=this._transformStack.pop();if(t){this._transformMatrix=t;this._originalRestore()}};t.translate=function ctxTranslate(t,r){var a=this._transformMatrix;a[4]=a[0]*t+a[2]*r+a[4];a[5]=a[1]*t+a[3]*r+a[5];this._originalTranslate(t,r)};t.scale=function ctxScale(t,r){var a=this._transformMatrix;a[0]*=t;a[1]*=t;a[2]*=r;a[3]*=r;this._originalScale(t,r)};t.transform=function ctxTransform(r,a,i,o,l,c){var u=this._transformMatrix;this._transformMatrix=[u[0]*r+u[2]*a,u[1]*r+u[3]*a,u[0]*i+u[2]*o,u[1]*i+u[3]*o,u[0]*l+u[2]*c+u[4],u[1]*l+u[3]*c+u[5]];t._originalTransform(r,a,i,o,l,c)};t.setTransform=function ctxSetTransform(r,a,i,o,l,c){this._transformMatrix=[r,a,i,o,l,c];t._originalSetTransform(r,a,i,o,l,c)};t.resetTransform=function ctxResetTransform(){this._transformMatrix=[1,0,0,1,0,0];t._originalResetTransform()};t.rotate=function ctxRotate(t){var r=Math.cos(t),a=Math.sin(t),i=this._transformMatrix;this._transformMatrix=[i[0]*r+i[2]*a,i[1]*r+i[3]*a,i[0]*-a+i[2]*r,i[1]*-a+i[3]*r,i[4],i[5]];this._originalRotate(t)}}}var p=function(){function CachedCanvases(t){_classCallCheck(this,CachedCanvases);this.canvasFactory=t;this.cache=Object.create(null)}_createClass(CachedCanvases,[{key:"getCanvas",value:function getCanvas(t,r,a,i){var o;if(void 0!==this.cache[t]){o=this.cache[t];this.canvasFactory.reset(o,r,a);o.context.setTransform(1,0,0,1,0,0)}else{o=this.canvasFactory.create(r,a);this.cache[t]=o}i&&addContextCurrentTransform(o.context);return o}},{key:"delete",value:function _delete(t){delete this.cache[t]}},{key:"clear",value:function clear(){for(var t in this.cache){var r=this.cache[t];this.canvasFactory.destroy(r);delete this.cache[t]}}}]);return CachedCanvases}();function drawImageAtIntegerCoords(t,r,a,i,o,l,c,u,d,h){var p=_slicedToArray(t.mozCurrentTransform,6),v=p[0],y=p[1],g=p[2],_=p[3],m=p[4],b=p[5];if(0===y&&0===g){var A=c*v+m,k=Math.round(A),P=u*_+b,S=Math.round(P),w=(c+d)*v+m,x=Math.abs(Math.round(w)-k)||1,C=(u+h)*_+b,T=Math.abs(Math.round(C)-S)||1;t.setTransform(Math.sign(v),0,0,Math.sign(_),k,S);t.drawImage(r,a,i,o,l,0,0,x,T);t.setTransform(v,y,g,_,m,b);return[x,T]}if(0===v&&0===_){var E=u*g+m,I=Math.round(E),O=c*y+b,M=Math.round(O),R=(u+h)*g+m,D=Math.abs(Math.round(R)-I)||1,L=(c+d)*y+b,G=Math.abs(Math.round(L)-M)||1;t.setTransform(0,Math.sign(y),Math.sign(g),0,I,M);t.drawImage(r,a,i,o,l,0,0,G,D);t.setTransform(v,y,g,_,m,b);return[G,D]}t.drawImage(r,a,i,o,l,c,u,d,h);return[Math.hypot(v,y)*d,Math.hypot(g,_)*h]}var v=function(){function CanvasExtraState(t,r){_classCallCheck(this,CanvasExtraState);this.alphaIsShape=!1;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=i.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=i.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=i.TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=!1;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps=null;this.startNewPathAndClipBox([0,0,t,r])}_createClass(CanvasExtraState,[{key:"clone",value:function clone(){var clone=Object.create(this);clone.clipBox=this.clipBox.slice();return clone}},{key:"setCurrentPoint",value:function setCurrentPoint(t,r){this.x=t;this.y=r}},{key:"updatePathMinMax",value:function updatePathMinMax(t,r,a){var o=_slicedToArray(i.Util.applyTransform([r,a],t),2);r=o[0];a=o[1];this.minX=Math.min(this.minX,r);this.minY=Math.min(this.minY,a);this.maxX=Math.max(this.maxX,r);this.maxY=Math.max(this.maxY,a)}},{key:"updateRectMinMax",value:function updateRectMinMax(t,r){var a=i.Util.applyTransform(r,t),o=i.Util.applyTransform(r.slice(2),t);this.minX=Math.min(this.minX,a[0],o[0]);this.minY=Math.min(this.minY,a[1],o[1]);this.maxX=Math.max(this.maxX,a[0],o[0]);this.maxY=Math.max(this.maxY,a[1],o[1])}},{key:"updateScalingPathMinMax",value:function updateScalingPathMinMax(t,r){i.Util.scaleMinMax(t,r);this.minX=Math.min(this.minX,r[0]);this.maxX=Math.max(this.maxX,r[1]);this.minY=Math.min(this.minY,r[2]);this.maxY=Math.max(this.maxY,r[3])}},{key:"updateCurvePathMinMax",value:function updateCurvePathMinMax(t,r,a,o,l,c,u,d,h,p){var v=i.Util.bezierBoundingBox(r,a,o,l,c,u,d,h);if(p){p[0]=Math.min(p[0],v[0],v[2]);p[1]=Math.max(p[1],v[0],v[2]);p[2]=Math.min(p[2],v[1],v[3]);p[3]=Math.max(p[3],v[1],v[3])}else this.updateRectMinMax(t,v)}},{key:"getPathBoundingBox",value:function getPathBoundingBox(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.PathType.FILL,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=[this.minX,this.minY,this.maxX,this.maxY];if(t===l.PathType.STROKE){r||(0,i.unreachable)("Stroke bounding box must include transform.");var o=i.Util.singularValueDecompose2dScale(r),c=o[0]*this.lineWidth/2,u=o[1]*this.lineWidth/2;a[0]-=c;a[1]-=u;a[2]+=c;a[3]+=u}return a}},{key:"updateClipFromPath",value:function updateClipFromPath(){var t=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}},{key:"isEmptyClip",value:function isEmptyClip(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function startNewPathAndClipBox(t){this.clipBox=t;this.minX=1/0;this.minY=1/0;this.maxX=0;this.maxY=0}},{key:"getClippedPathBoundingBox",value:function getClippedPathBoundingBox(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.PathType.FILL,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.Util.intersect(this.clipBox,this.getPathBoundingBox(t,r))}}]);return CanvasExtraState}();function putBinaryImageData(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&r instanceof ImageData)t.putImageData(r,0,0);else{var o,l,c,u,d,p,v,y,g,_=r.height,m=r.width,b=_%h,A=(_-b)/h,k=0===b?A:A+1,P=t.createImageData(m,h),S=0,w=r.data,x=P.data;if(a)switch(a.length){case 1:p=a[0];v=a[0];y=a[0];g=a[0];break;case 4:p=a[0];v=a[1];y=a[2];g=a[3]}if(r.kind===i.ImageKind.GRAYSCALE_1BPP){var C=w.byteLength,T=new Uint32Array(x.buffer,0,x.byteLength>>2),E=T.length,I=m+7>>3,O=4294967295,M=i.FeatureTest.isLittleEndian?4278190080:255;if(g&&255===g[0]&&0===g[255]){var R=[M,O];O=R[0];M=R[1]}for(l=0;l<k;l++){u=l<A?h:b;o=0;for(c=0;c<u;c++){for(var D=C-S,L=0,G=D>I?m:8*D-7,j=-8&G,N=0,B=0;L<j;L+=8){B=w[S++];T[o++]=128&B?O:M;T[o++]=64&B?O:M;T[o++]=32&B?O:M;T[o++]=16&B?O:M;T[o++]=8&B?O:M;T[o++]=4&B?O:M;T[o++]=2&B?O:M;T[o++]=1&B?O:M}for(;L<G;L++){if(0===N){B=w[S++];N=128}T[o++]=B&N?O:M;N>>=1}}for(;o<E;)T[o++]=0;t.putImageData(P,0,l*h)}}else if(r.kind===i.ImageKind.RGBA_32BPP){var W=!!(p||v||y);c=0;d=m*h*4;for(l=0;l<A;l++){x.set(w.subarray(S,S+d));S+=d;if(W)for(var U=0;U<d;U+=4){p&&(x[U+0]=p[x[U+0]]);v&&(x[U+1]=v[x[U+1]]);y&&(x[U+2]=y[x[U+2]])}t.putImageData(P,0,c);c+=h}if(l<k){d=m*b*4;x.set(w.subarray(S,S+d));if(W)for(var H=0;H<d;H+=4){p&&(x[H+0]=p[x[H+0]]);v&&(x[H+1]=v[x[H+1]]);y&&(x[H+2]=y[x[H+2]])}t.putImageData(P,0,c)}}else{if(r.kind!==i.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(r.kind));var z=!!(p||v||y);d=m*(u=h);for(l=0;l<k;l++){l>=A&&(d=m*(u=b));o=0;for(c=d;c--;){x[o++]=w[S++];x[o++]=w[S++];x[o++]=w[S++];x[o++]=255}if(z)for(var V=0;V<o;V+=4){p&&(x[V+0]=p[x[V+0]]);v&&(x[V+1]=v[x[V+1]]);y&&(x[V+2]=y[x[V+2]])}t.putImageData(P,0,l*h)}}}}function putBinaryImageMask(t,r){if(r.bitmap)t.drawImage(r.bitmap,0,0);else for(var a=r.height,i=r.width,o=a%h,l=(a-o)/h,u=0===o?l:l+1,d=t.createImageData(i,h),p=0,v=r.data,y=d.data,g=0;g<u;g++){var _=g<l?h:o;p=(0,c.applyMaskImageData)({src:v,srcPos:p,dest:y,width:i,height:_}).srcPos;t.putImageData(d,0,g*h)}}function copyCtxState(t,r){for(var a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],i=0,o=a.length;i<o;i++){var l=a[i];void 0!==t[l]&&(r[l]=t[l])}if(void 0!==t.setLineDash){r.setLineDash(t.getLineDash());r.lineDashOffset=t.lineDashOffset}}function resetCtxToDefault(t,r){t.strokeStyle=t.fillStyle=r||"#000000";t.fillRule="nonzero";t.globalAlpha=1;t.lineWidth=1;t.lineCap="butt";t.lineJoin="miter";t.miterLimit=10;t.globalCompositeOperation="source-over";t.font="10px sans-serif";if(void 0!==t.setLineDash){t.setLineDash([]);t.lineDashOffset=0}}function composeSMaskBackdrop(t,r,a,i){for(var o=t.length,l=3;l<o;l+=4){var c=t[l];if(0===c){t[l-3]=r;t[l-2]=a;t[l-1]=i}else if(c<255){var u=255-c;t[l-3]=t[l-3]*c+r*u>>8;t[l-2]=t[l-2]*c+a*u>>8;t[l-1]=t[l-1]*c+i*u>>8}}}function composeSMaskAlpha(t,r,a){for(var i=t.length,o=3;o<i;o+=4){var l=a?a[t[o]]:t[o];r[o]=r[o]*l*.00392156862745098|0}}function composeSMaskLuminosity(t,r,a){for(var i=t.length,o=3;o<i;o+=4){var l=77*t[o-3]+152*t[o-2]+28*t[o-1];r[o]=a?r[o]*a[l>>8]>>8:r[o]*l>>16}}function composeSMask(t,r,a,i){var o=i[0],l=i[1],c=i[2]-o,u=i[3]-l;if(0!==c&&0!==u){!function genericComposeSMask(t,r,a,i,o,l,c,u,d,h,p){var v,y=!!l,g=y?l[0]:0,_=y?l[1]:0,m=y?l[2]:0;v="Luminosity"===o?composeSMaskLuminosity:composeSMaskAlpha;for(var b=Math.min(i,Math.ceil(1048576/a)),A=0;A<i;A+=b){var k=Math.min(b,i-A),P=t.getImageData(u-h,A+(d-p),a,k),S=r.getImageData(u,A+d,a,k);y&&composeSMaskBackdrop(P.data,g,_,m);v(P.data,S.data,c);r.putImageData(S,u,A+d)}}(r.context,a,c,u,r.subtype,r.backdrop,r.transferMap,o,l,r.offsetX,r.offsetY);t.save();t.globalAlpha=1;t.globalCompositeOperation="source-over";t.setTransform(1,0,0,1,0,0);t.drawImage(a.canvas,0,0);t.restore()}}function getImageSmoothingEnabled(t,r){var a=i.Util.singularValueDecompose2dScale(t);a[0]=Math.fround(a[0]);a[1]=Math.fround(a[1]);var l=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==r?r:a[0]<=l||a[1]<=l}var y=["butt","round","square"],g=["miter","round","bevel"],_={},m={},b=new WeakSet,A=function(){function CanvasGraphics(t,r,a,i,o,l,c,u){_classCallCheck(this,CanvasGraphics);_classPrivateMethodInitSpec(this,b);this.ctx=t;this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.res=null;this.xobjs=null;this.commonObjs=r;this.objs=a;this.canvasFactory=i;this.imageLayer=o;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=!0;this.markedContentStack=[];this.optionalContentConfig=l;this.cachedCanvases=new p(this.canvasFactory);this.cachedPatterns=new Map;this.annotationCanvasMap=c;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this.backgroundColor=(null==u?void 0:u.background)||null;this.foregroundColor=(null==u?void 0:u.foreground)||null;t&&addContextCurrentTransform(t);this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map}_createClass(CanvasGraphics,[{key:"getObject",value:function getObject(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):r}},{key:"beginDrawing",value:function beginDrawing(t){var r=t.transform,a=t.viewport,i=t.transparency,l=void 0!==i&&i,c=t.background,u=void 0===c?null:c,d=this.ctx.canvas.width,h=this.ctx.canvas.height,p=u||"#ffffff";this.ctx.save();if(this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;var v=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;var y,g,_=this.backgroundColor=this.ctx.fillStyle;this.ctx.fillStyle=p;y="string"==typeof(g=this.ctx.fillStyle)&&/^#[0-9A-Fa-f]{6}$/.test(g);if("#000000"===v&&"#ffffff"===_||v===_||!y)this.foregroundColor=this.backgroundColor=null;else{var m=_slicedToArray((0,o.getRGB)(g),3),b=m[0],A=m[1],k=m[2],P=function newComp(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)},S=Math.round(.2126*P(b)+.7152*P(A)+.0722*P(k));this.selectColor=function(t,r,a){var i=.2126*P(t)+.7152*P(r)+.0722*P(a);return Math.round(i)===S?_:v}}}this.ctx.fillStyle=this.backgroundColor||p;this.ctx.fillRect(0,0,d,h);this.ctx.restore();if(l){var w=this.cachedCanvases.getCanvas("transparent",d,h,!0);this.compositeCtx=this.ctx;this.transparentCanvas=w.canvas;this.ctx=w.context;this.ctx.save();this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save();resetCtxToDefault(this.ctx,this.foregroundColor);if(r){this.ctx.transform.apply(this.ctx,r);this.outputScaleX=r[0];this.outputScaleY=r[0]}this.ctx.transform.apply(this.ctx,a.transform);this.viewportScale=a.scale;this.baseTransform=this.ctx.mozCurrentTransform.slice();this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function executeOperatorList(t,r,a,o){var l=t.argsArray,c=t.fnArray,u=r||0,d=l.length;if(d===u)return u;for(var h,p=d-u>10&&"function"==typeof a,v=p?Date.now()+15:0,y=0,g=this.commonObjs,_=this.objs;;){if(void 0!==o&&u===o.nextBreakPoint){o.breakIt(u,a);return u}if((h=c[u])!==i.OPS.dependency)this[h].apply(this,l[u]);else{var m,b=_createForOfIteratorHelper(l[u]);try{for(b.s();!(m=b.n()).done;){var A=m.value,k=A.startsWith("g_")?g:_;if(!k.has(A)){k.get(A,a);return u}}}catch(t){b.e(t)}finally{b.f()}}if(++u===d)return u;if(p&&++y>10){if(Date.now()>v){a();return u}y=0}}}},{key:"endDrawing",value:function endDrawing(){_classPrivateMethodGet(this,b,_restoreInitialState2).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();var t,r=_createForOfIteratorHelper(this._cachedBitmapsMap.values());try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=_createForOfIteratorHelper(i.values());try{for(o.s();!(a=o.n()).done;){var l=a.value;"undefined"!=typeof HTMLCanvasElement&&l instanceof HTMLCanvasElement&&(l.width=l.height=0)}}catch(t){o.e(t)}finally{o.f()}i.clear()}}catch(t){r.e(t)}finally{r.f()}this._cachedBitmapsMap.clear();this.imageLayer&&this.imageLayer.endLayout()}},{key:"_scaleImage",value:function _scaleImage(t,r){for(var a,i,o=t.width,l=t.height,c=Math.max(Math.hypot(r[0],r[1]),1),u=Math.max(Math.hypot(r[2],r[3]),1),d=o,h=l,p="prescale1";c>2&&d>1||u>2&&h>1;){var v=d,y=h;c>2&&d>1&&(c/=d/(v=Math.ceil(d/2)));u>2&&h>1&&(u/=h/(y=Math.ceil(h/2)));(i=(a=this.cachedCanvases.getCanvas(p,v,y,!1)).context).clearRect(0,0,v,y);i.drawImage(t,0,0,d,h,0,0,v,y);t=a.canvas;d=v;h=y;p="prescale1"===p?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:h}}},{key:"_createMaskCanvas",value:function _createMaskCanvas(t){var r,a,o,c,u=this.ctx,d=t.width,h=t.height,p=this.current.fillColor,v=this.current.patternFill,y=u.mozCurrentTransform;if((t.bitmap||t.data)&&t.count>1){var g=t.bitmap||t.data.buffer,_=y.slice(0,4);a=JSON.stringify(v?_:[_,p]);if(!(r=this._cachedBitmapsMap.get(g))){r=new Map;this._cachedBitmapsMap.set(g,r)}var m=r.get(a);if(m&&!v){return{canvas:m,offsetX:Math.round(Math.min(y[0],y[2])+y[4]),offsetY:Math.round(Math.min(y[1],y[3])+y[5])}}o=m}o||putBinaryImageMask((c=this.cachedCanvases.getCanvas("maskCanvas",d,h,!1)).context,t);var b=i.Util.transform(y,[1/d,0,0,-1/h,0,0]);b=i.Util.transform(b,[1,0,0,1,0,-h]);var A=i.Util.applyTransform([0,0],b),k=i.Util.applyTransform([d,h],b),P=i.Util.normalizeRect([A[0],A[1],k[0],k[1]]),S=Math.round(P[2]-P[0])||1,w=Math.round(P[3]-P[1])||1,x=this.cachedCanvases.getCanvas("fillCanvas",S,w,!0),C=x.context,T=Math.min(A[0],k[0]),E=Math.min(A[1],k[1]);C.translate(-T,-E);C.transform.apply(C,b);if(!o){o=(o=this._scaleImage(c.canvas,C.mozCurrentTransformInverse)).img;r&&v&&r.set(a,o)}C.imageSmoothingEnabled=getImageSmoothingEnabled(C.mozCurrentTransform,t.interpolate);drawImageAtIntegerCoords(C,o,0,0,o.width,o.height,0,0,d,h);C.globalCompositeOperation="source-in";var I=i.Util.transform(C.mozCurrentTransformInverse,[1,0,0,1,-T,-E]);C.fillStyle=v?p.getPattern(u,this,I,l.PathType.FILL):p;C.fillRect(0,0,d,h);if(r&&!v){this.cachedCanvases.delete("fillCanvas");r.set(a,x.canvas)}return{canvas:x.canvas,offsetX:Math.round(T),offsetY:Math.round(E)}}},{key:"setLineWidth",value:function setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking=null);this.current.lineWidth=t;this.ctx.lineWidth=t}},{key:"setLineCap",value:function setLineCap(t){this.ctx.lineCap=y[t]}},{key:"setLineJoin",value:function setLineJoin(t){this.ctx.lineJoin=g[t]}},{key:"setMiterLimit",value:function setMiterLimit(t){this.ctx.miterLimit=t}},{key:"setDash",value:function setDash(t,r){var a=this.ctx;if(void 0!==a.setLineDash){a.setLineDash(t);a.lineDashOffset=r}}},{key:"setRenderingIntent",value:function setRenderingIntent(t){}},{key:"setFlatness",value:function setFlatness(t){}},{key:"setGState",value:function setGState(t){for(var r=0,a=t.length;r<a;r++){var i=t[r],o=i[0],l=i[1];switch(o){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l[0],l[1]);break;case"CA":this.current.strokeAlpha=i[1];break;case"ca":this.current.fillAlpha=i[1];this.ctx.globalAlpha=i[1];break;case"BM":this.ctx.globalCompositeOperation=l;break;case"SMask":this.current.activeSMask=l?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case"TR":this.current.transferMaps=l}}}},{key:"inSMaskMode",get:function get(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function checkSMaskState(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,r=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(a,t,r,!0);this.suspendedCtx=this.ctx;this.ctx=i.context;var o=this.ctx;o.setTransform.apply(o,this.suspendedCtx.mozCurrentTransform);copyCtxState(this.suspendedCtx,o);!function mirrorContextOperations(t,r){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save;t.__originalRestore=t.restore;t.__originalRotate=t.rotate;t.__originalScale=t.scale;t.__originalTranslate=t.translate;t.__originalTransform=t.transform;t.__originalSetTransform=t.setTransform;t.__originalResetTransform=t.resetTransform;t.__originalClip=t.clip;t.__originalMoveTo=t.moveTo;t.__originalLineTo=t.lineTo;t.__originalBezierCurveTo=t.bezierCurveTo;t.__originalRect=t.rect;t.__originalClosePath=t.closePath;t.__originalBeginPath=t.beginPath;t._removeMirroring=function(){t.save=t.__originalSave;t.restore=t.__originalRestore;t.rotate=t.__originalRotate;t.scale=t.__originalScale;t.translate=t.__originalTranslate;t.transform=t.__originalTransform;t.setTransform=t.__originalSetTransform;t.resetTransform=t.__originalResetTransform;t.clip=t.__originalClip;t.moveTo=t.__originalMoveTo;t.lineTo=t.__originalLineTo;t.bezierCurveTo=t.__originalBezierCurveTo;t.rect=t.__originalRect;t.closePath=t.__originalClosePath;t.beginPath=t.__originalBeginPath;delete t._removeMirroring};t.save=function ctxSave(){r.save();this.__originalSave()};t.restore=function ctxRestore(){r.restore();this.__originalRestore()};t.translate=function ctxTranslate(t,a){r.translate(t,a);this.__originalTranslate(t,a)};t.scale=function ctxScale(t,a){r.scale(t,a);this.__originalScale(t,a)};t.transform=function ctxTransform(t,a,i,o,l,c){r.transform(t,a,i,o,l,c);this.__originalTransform(t,a,i,o,l,c)};t.setTransform=function ctxSetTransform(t,a,i,o,l,c){r.setTransform(t,a,i,o,l,c);this.__originalSetTransform(t,a,i,o,l,c)};t.resetTransform=function ctxResetTransform(){r.resetTransform();this.__originalResetTransform()};t.rotate=function ctxRotate(t){r.rotate(t);this.__originalRotate(t)};t.clip=function ctxRotate(t){r.clip(t);this.__originalClip(t)};t.moveTo=function(t,a){r.moveTo(t,a);this.__originalMoveTo(t,a)};t.lineTo=function(t,a){r.lineTo(t,a);this.__originalLineTo(t,a)};t.bezierCurveTo=function(t,a,i,o,l,c){r.bezierCurveTo(t,a,i,o,l,c);this.__originalBezierCurveTo(t,a,i,o,l,c)};t.rect=function(t,a,i,o){r.rect(t,a,i,o);this.__originalRect(t,a,i,o)};t.closePath=function(){r.closePath();this.__originalClosePath()};t.beginPath=function(){r.beginPath();this.__originalBeginPath()}}(o,this.suspendedCtx);this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null}},{key:"compose",value:function compose(t){if(this.current.activeSMask){if(t){t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1]);t[2]=Math.ceil(t[2]);t[3]=Math.ceil(t[3])}else t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var r=this.current.activeSMask;composeSMask(this.suspendedCtx,r,this.ctx,t);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore()}}},{key:"save",value:function save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save()}else this.ctx.save();var t=this.current;this.stateStack.push(t);this.current=t.clone()}},{key:"restore",value:function restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode();if(0!==this.stateStack.length){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx)}else this.ctx.restore();this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}}},{key:"transform",value:function transform(t,r,a,i,o,l){this.ctx.transform(t,r,a,i,o,l);this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function constructPath(t,r,a){for(var o,l,c=this.ctx,u=this.current,d=u.x,h=u.y,p=c.mozCurrentTransform,v=0===p[0]&&0===p[3]||0===p[1]&&0===p[2],y=v?a.slice(0):null,g=0,_=0,m=t.length;g<m;g++)switch(0|t[g]){case i.OPS.rectangle:d=r[_++];h=r[_++];var b=r[_++],A=r[_++],k=d+b,P=h+A;c.moveTo(d,h);if(0===b||0===A)c.lineTo(k,P);else{c.lineTo(k,h);c.lineTo(k,P);c.lineTo(d,P)}v||u.updateRectMinMax(p,[d,h,k,P]);c.closePath();break;case i.OPS.moveTo:d=r[_++];h=r[_++];c.moveTo(d,h);v||u.updatePathMinMax(p,d,h);break;case i.OPS.lineTo:d=r[_++];h=r[_++];c.lineTo(d,h);v||u.updatePathMinMax(p,d,h);break;case i.OPS.curveTo:o=d;l=h;d=r[_+4];h=r[_+5];c.bezierCurveTo(r[_],r[_+1],r[_+2],r[_+3],d,h);u.updateCurvePathMinMax(p,o,l,r[_],r[_+1],r[_+2],r[_+3],d,h,y);_+=6;break;case i.OPS.curveTo2:o=d;l=h;c.bezierCurveTo(d,h,r[_],r[_+1],r[_+2],r[_+3]);u.updateCurvePathMinMax(p,o,l,d,h,r[_],r[_+1],r[_+2],r[_+3],y);d=r[_+2];h=r[_+3];_+=4;break;case i.OPS.curveTo3:o=d;l=h;d=r[_+2];h=r[_+3];c.bezierCurveTo(r[_],r[_+1],d,h,d,h);u.updateCurvePathMinMax(p,o,l,r[_],r[_+1],d,h,d,h,y);_+=4;break;case i.OPS.closePath:c.closePath()}v&&u.updateScalingPathMinMax(p,y);u.setCurrentPoint(d,h)}},{key:"closePath",value:function closePath(){this.ctx.closePath()}},{key:"stroke",value:function stroke(t){t=void 0===t||t;var r=this.ctx,a=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha;if(this.contentVisible)if("object"===_typeof(a)&&null!=a&&a.getPattern){r.save();r.strokeStyle=a.getPattern(r,this,r.mozCurrentTransformInverse,l.PathType.STROKE);this.rescaleAndStroke(!1);r.restore()}else this.rescaleAndStroke(!0);t&&this.consumePath(this.current.getClippedPathBoundingBox());r.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke()}},{key:"fill",value:function fill(t){t=void 0===t||t;var r=this.ctx,a=this.current.fillColor,i=!1;if(this.current.patternFill){r.save();r.fillStyle=a.getPattern(r,this,r.mozCurrentTransformInverse,l.PathType.FILL);i=!0}var o=this.current.getClippedPathBoundingBox();if(this.contentVisible&&null!==o)if(this.pendingEOFill){r.fill("evenodd");this.pendingEOFill=!1}else r.fill();i&&r.restore();t&&this.consumePath(o)}},{key:"eoFill",value:function eoFill(){this.pendingEOFill=!0;this.fill()}},{key:"fillStroke",value:function fillStroke(){this.fill(!1);this.stroke(!1);this.consumePath()}},{key:"eoFillStroke",value:function eoFillStroke(){this.pendingEOFill=!0;this.fillStroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.pendingEOFill=!0;this.closePath();this.fillStroke()}},{key:"endPath",value:function endPath(){this.consumePath()}},{key:"clip",value:function clip(){this.pendingClip=_}},{key:"eoClip",value:function eoClip(){this.pendingClip=m}},{key:"beginText",value:function beginText(){this.current.textMatrix=i.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}},{key:"endText",value:function endText(){var t=this.pendingTextPaths,r=this.ctx;if(void 0!==t){r.save();r.beginPath();var a,i=_createForOfIteratorHelper(t);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.setTransform.apply(r,o.transform);r.translate(o.x,o.y);o.addToPath(r,o.fontSize)}}catch(t){i.e(t)}finally{i.f()}r.restore();r.clip();r.beginPath();delete this.pendingTextPaths}else r.beginPath()}},{key:"setCharSpacing",value:function setCharSpacing(t){this.current.charSpacing=t}},{key:"setWordSpacing",value:function setWordSpacing(t){this.current.wordSpacing=t}},{key:"setHScale",value:function setHScale(t){this.current.textHScale=t/100}},{key:"setLeading",value:function setLeading(t){this.current.leading=-t}},{key:"setFont",value:function setFont(t,r){var a=this.commonObjs.get(t),o=this.current;if(!a)throw new Error("Can\'t find font for ".concat(t));o.fontMatrix=a.fontMatrix||i.FONT_IDENTITY_MATRIX;0!==o.fontMatrix[0]&&0!==o.fontMatrix[3]||(0,i.warn)("Invalid font matrix for font "+t);if(r<0){r=-r;o.fontDirection=-1}else o.fontDirection=1;this.current.font=a;this.current.fontSize=r;if(!a.isType3Font){var l=a.loadedName||"sans-serif",c="normal";a.black?c="900":a.bold&&(c="bold");var u=a.italic?"italic":"normal",d=\'"\'.concat(l,\'", \').concat(a.fallbackName),h=r;r<16?h=16:r>100&&(h=100);this.current.fontSizeScale=r/h;this.ctx.font="".concat(u," ").concat(c," ").concat(h,"px ").concat(d)}}},{key:"setTextRenderingMode",value:function setTextRenderingMode(t){this.current.textRenderingMode=t}},{key:"setTextRise",value:function setTextRise(t){this.current.textRise=t}},{key:"moveText",value:function moveText(t,r){this.current.x=this.current.lineX+=t;this.current.y=this.current.lineY+=r}},{key:"setLeadingMoveText",value:function setLeadingMoveText(t,r){this.setLeading(-r);this.moveText(t,r)}},{key:"setTextMatrix",value:function setTextMatrix(t,r,a,i,o,l){this.current.textMatrix=[t,r,a,i,o,l];this.current.textMatrixScale=Math.hypot(t,r);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function paintChar(t,r,a,o){var l,c=this.ctx,u=this.current,d=u.font,h=u.textRenderingMode,p=u.fontSize/u.fontSizeScale,v=h&i.TextRenderingMode.FILL_STROKE_MASK,y=!!(h&i.TextRenderingMode.ADD_TO_PATH_FLAG),g=u.patternFill&&!d.missingFile;(d.disableFontFace||y||g)&&(l=d.getPathGenerator(this.commonObjs,t));if(d.disableFontFace||g){c.save();c.translate(r,a);c.beginPath();l(c,p);o&&c.setTransform.apply(c,o);v!==i.TextRenderingMode.FILL&&v!==i.TextRenderingMode.FILL_STROKE||c.fill();v!==i.TextRenderingMode.STROKE&&v!==i.TextRenderingMode.FILL_STROKE||c.stroke();c.restore()}else{v!==i.TextRenderingMode.FILL&&v!==i.TextRenderingMode.FILL_STROKE||c.fillText(t,r,a);v!==i.TextRenderingMode.STROKE&&v!==i.TextRenderingMode.FILL_STROKE||c.strokeText(t,r,a)}if(y){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:c.mozCurrentTransform,x:r,y:a,fontSize:p,addToPath:l})}}},{key:"isFontSubpixelAAEnabled",get:function get(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1).context;t.scale(1.5,1);t.fillText("I",0,10);for(var r=t.getImageData(0,0,10,10).data,a=!1,o=3;o<r.length;o+=4)if(r[o]>0&&r[o]<255){a=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",a)}},{key:"showText",value:function showText(t){var r=this.current,a=r.font;if(a.isType3Font)return this.showType3Text(t);var o=r.fontSize;if(0!==o){var c,u=this.ctx,d=r.fontSizeScale,h=r.charSpacing,p=r.wordSpacing,v=r.fontDirection,y=r.textHScale*v,g=t.length,_=a.vertical,m=_?1:-1,b=a.defaultVMetrics,A=o*r.fontMatrix[0],k=r.textRenderingMode===i.TextRenderingMode.FILL&&!a.disableFontFace&&!r.patternFill;u.save();u.transform.apply(u,r.textMatrix);u.translate(r.x,r.y+r.textRise);v>0?u.scale(y,-1):u.scale(y,1);if(r.patternFill){u.save();var P=r.fillColor.getPattern(u,this,u.mozCurrentTransformInverse,l.PathType.FILL);c=u.mozCurrentTransform;u.restore();u.fillStyle=P}var S=r.lineWidth,w=r.textMatrixScale;if(0===w||0===S){var x=r.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;x!==i.TextRenderingMode.STROKE&&x!==i.TextRenderingMode.FILL_STROKE||(S=this.getSinglePixelWidth())}else S/=w;if(1!==d){u.scale(d,d);S/=d}u.lineWidth=S;var C,T=0;for(C=0;C<g;++C){var E=t[C];if("number"!=typeof E){var I=!1,O=(E.isSpace?p:0)+h,M=E.fontChar,R=E.accent,D=void 0,L=void 0,G=E.width;if(_){var j=E.vmetric||b,N=-(E.vmetric?j[1]:.5*G)*A,B=j[2]*A;G=j?-j[0]:G;D=N/d;L=(T+B)/d}else{D=T/d;L=0}if(a.remeasure&&G>0){var W=1e3*u.measureText(M).width/o*d;if(G<W&&this.isFontSubpixelAAEnabled){var U=G/W;I=!0;u.save();u.scale(U,1);D/=U}else G!==W&&(D+=(G-W)/2e3*o/d)}if(this.contentVisible&&(E.isInFont||a.missingFile))if(k&&!R)u.fillText(M,D,L);else{this.paintChar(M,D,L,c);if(R){var H=D+o*R.offset.x/d,z=L-o*R.offset.y/d;this.paintChar(R.fontChar,H,z,c)}}T+=_?G*A-O*v:G*A+O*v;I&&u.restore()}else T+=m*E*o/1e3}_?r.y-=T:r.x+=T*y;u.restore();this.compose()}}},{key:"showType3Text",value:function showType3Text(t){var r,a,o,l,c=this.ctx,u=this.current,d=u.font,h=u.fontSize,p=u.fontDirection,v=d.vertical?1:-1,y=u.charSpacing,g=u.wordSpacing,_=u.textHScale*p,m=u.fontMatrix||i.FONT_IDENTITY_MATRIX,b=t.length;if(!(u.textRenderingMode===i.TextRenderingMode.INVISIBLE)&&0!==h){this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;c.save();c.transform.apply(c,u.textMatrix);c.translate(u.x,u.y);c.scale(_,p);for(r=0;r<b;++r)if("number"!=typeof(a=t[r])){var A=(a.isSpace?g:0)+y,k=d.charProcOperatorList[a.operatorListId];if(k){if(this.contentVisible){this.processingType3=a;this.save();c.scale(h,h);c.transform.apply(c,m);this.executeOperatorList(k);this.restore()}o=i.Util.applyTransform([a.width,0],m)[0]*h+A;c.translate(o,0);u.x+=o*_}else(0,i.warn)(\'Type3 character "\'.concat(a.operatorListId,\'" is not available.\'))}else{l=v*a*h/1e3;this.ctx.translate(l,0);u.x+=l*_}c.restore();this.processingType3=null}}},{key:"setCharWidth",value:function setCharWidth(t,r){}},{key:"setCharWidthAndBounds",value:function setCharWidthAndBounds(t,r,a,i,o,l){this.ctx.rect(a,i,o-a,l-i);this.ctx.clip();this.endPath()}},{key:"getColorN_Pattern",value:function getColorN_Pattern(t){var r,a=this;if("TilingPattern"===t[0]){var i=t[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice(),c={createCanvasGraphics:function createCanvasGraphics(t){return new CanvasGraphics(t,a.commonObjs,a.objs,a.canvasFactory)}};r=new l.TilingPattern(t,i,this.ctx,c,o)}else r=this._getPattern(t[1],t[2]);return r}},{key:"setStrokeColorN",value:function setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(t,r,a){var o,l=(null===(o=this.selectColor)||void 0===o?void 0:o.call(this,t,r,a))||i.Util.makeHexColor(t,r,a);this.ctx.strokeStyle=l;this.current.strokeColor=l}},{key:"setFillRGBColor",value:function setFillRGBColor(t,r,a){var o,l=(null===(o=this.selectColor)||void 0===o?void 0:o.call(this,t,r,a))||i.Util.makeHexColor(t,r,a);this.ctx.fillStyle=l;this.current.fillColor=l;this.current.patternFill=!1}},{key:"_getPattern",value:function _getPattern(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.cachedPatterns.has(t))r=this.cachedPatterns.get(t);else{r=(0,l.getShadingPattern)(this.objs.get(t));this.cachedPatterns.set(t,r)}a&&(r.matrix=a);return r}},{key:"shadingFill",value:function shadingFill(t){if(this.contentVisible){var r=this.ctx;this.save();var a=this._getPattern(t);r.fillStyle=a.getPattern(r,this,r.mozCurrentTransformInverse,l.PathType.SHADING);var o=r.mozCurrentTransformInverse;if(o){var c=r.canvas,u=c.width,d=c.height,h=i.Util.applyTransform([0,0],o),p=i.Util.applyTransform([0,d],o),v=i.Util.applyTransform([u,0],o),y=i.Util.applyTransform([u,d],o),g=Math.min(h[0],p[0],v[0],y[0]),_=Math.min(h[1],p[1],v[1],y[1]),m=Math.max(h[0],p[0],v[0],y[0]),b=Math.max(h[1],p[1],v[1],y[1]);this.ctx.fillRect(g,_,m-g,b-_)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox());this.restore()}}},{key:"beginInlineImage",value:function beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function beginImageData(){(0,i.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(t,r){if(this.contentVisible){this.save();this.baseTransformStack.push(this.baseTransform);Array.isArray(t)&&6===t.length&&this.transform.apply(this,t);this.baseTransform=this.ctx.mozCurrentTransform;if(r){var a=r[2]-r[0],i=r[3]-r[1];this.ctx.rect(r[0],r[1],a,i);this.current.updateRectMinMax(this.ctx.mozCurrentTransform,r);this.clip();this.endPath()}}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){if(this.contentVisible){this.restore();this.baseTransform=this.baseTransformStack.pop()}}},{key:"beginGroup",value:function beginGroup(t){if(this.contentVisible){this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null}var r=this.ctx;t.isolated||(0,i.info)("TODO: Support non-isolated groups.");t.knockout&&(0,i.warn)("Knockout groups not supported.");var a=r.mozCurrentTransform;t.matrix&&r.transform.apply(r,t.matrix);if(!t.bbox)throw new Error("Bounding box is required.");var o=i.Util.getAxialAlignedBoundingBox(t.bbox,r.mozCurrentTransform),l=[0,0,r.canvas.width,r.canvas.height];o=i.Util.intersect(o,l)||[0,0,0,0];var c=Math.floor(o[0]),u=Math.floor(o[1]),h=Math.max(Math.ceil(o[2])-c,1),p=Math.max(Math.ceil(o[3])-u,1),v=1,y=1;if(h>d){v=h/d;h=d}if(p>d){y=p/d;p=d}this.current.startNewPathAndClipBox([0,0,h,p]);var g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);var _=this.cachedCanvases.getCanvas(g,h,p,!0),m=_.context;m.scale(1/v,1/y);m.translate(-c,-u);m.transform.apply(m,a);if(t.smask)this.smaskStack.push({canvas:_.canvas,context:m,offsetX:c,offsetY:u,scaleX:v,scaleY:y,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null});else{r.setTransform(1,0,0,1,0,0);r.translate(c,u);r.scale(v,y);r.save()}copyCtxState(r,m);this.ctx=m;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(r);this.groupLevel++}}},{key:"endGroup",value:function endGroup(t){if(this.contentVisible){this.groupLevel--;var r=this.ctx,a=this.groupStack.pop();this.ctx=a;this.ctx.imageSmoothingEnabled=!1;if(t.smask){this.tempSMask=this.smaskStack.pop();this.restore()}else{this.ctx.restore();var o=this.ctx.mozCurrentTransform;this.restore();this.ctx.save();this.ctx.setTransform.apply(this.ctx,o);var l=i.Util.getAxialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],o);this.ctx.drawImage(r.canvas,0,0);this.ctx.restore();this.compose(l)}}}},{key:"beginAnnotation",value:function beginAnnotation(t,r,a,o,l){_classPrivateMethodGet(this,b,_restoreInitialState2).call(this);resetCtxToDefault(this.ctx,this.foregroundColor);this.ctx.save();this.save();this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform);if(Array.isArray(r)&&4===r.length){var c=r[2]-r[0],u=r[3]-r[1];if(l&&this.annotationCanvasMap){(a=a.slice())[4]-=r[0];a[5]-=r[1];(r=r.slice())[0]=r[1]=0;r[2]=c;r[3]=u;var d=_slicedToArray(i.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),2),h=d[0],p=d[1],y=this.viewportScale,g=Math.ceil(c*this.outputScaleX*y),_=Math.ceil(u*this.outputScaleY*y);this.annotationCanvas=this.canvasFactory.create(g,_);var m=this.annotationCanvas,A=m.canvas,k=m.context;this.annotationCanvasMap.set(t,A);this.annotationCanvas.savedCtx=this.ctx;this.ctx=k;addContextCurrentTransform(this.ctx);this.ctx.setTransform(h,0,0,-p,0,u*p);resetCtxToDefault(this.ctx,this.foregroundColor)}else{resetCtxToDefault(this.ctx,this.foregroundColor);this.ctx.rect(r[0],r[1],c,u);this.ctx.clip();this.endPath()}}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height);this.transform.apply(this,a);this.transform.apply(this,o)}},{key:"endAnnotation",value:function endAnnotation(){if(this.annotationCanvas){this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas}}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(t){if(this.contentVisible){var r=t.count;(t=this.getObject(t.data,t)).count=r;var a=this.ctx,i=this.processingType3;if(i){void 0===i.compiled&&(i.compiled=function compileType3Glyph(t){var r=t.width,a=t.height;if(r>1e3||a>1e3)return null;var i,o,l,c,d=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),h=r+1,p=new Uint8Array(h*(a+1)),v=r+7&-8,y=new Uint8Array(v*a),g=0,_=_createForOfIteratorHelper(t.data);try{for(_.s();!(c=_.n()).done;)for(var m=c.value,b=128;b>0;){y[g++]=m&b?0:255;b>>=1}}catch(t){_.e(t)}finally{_.f()}var A=0;if(0!==y[g=0]){p[0]=1;++A}for(o=1;o<r;o++){if(y[g]!==y[g+1]){p[o]=y[g]?2:1;++A}g++}if(0!==y[g]){p[o]=2;++A}for(i=1;i<a;i++){l=i*h;if(y[(g=i*v)-v]!==y[g]){p[l]=y[g]?1:8;++A}var k=(y[g]?4:0)+(y[g-v]?8:0);for(o=1;o<r;o++){if(d[k=(k>>2)+(y[g+1]?4:0)+(y[g-v+1]?8:0)]){p[l+o]=d[k];++A}g++}if(y[g-v]!==y[g]){p[l+o]=y[g]?2:4;++A}if(A>1e3)return null}l=i*h;if(0!==y[g=v*(a-1)]){p[l]=8;++A}for(o=1;o<r;o++){if(y[g]!==y[g+1]){p[l+o]=y[g]?4:8;++A}g++}if(0!==y[g]){p[l+o]=4;++A}if(A>1e3)return null;var P,S,w,x=new Int32Array([0,h,-1,0,-h,0,0,0,1]);u.isNodeJS?S=[]:P=new Path2D;for(i=0;A&&i<=a;i++){for(var C=i*h,T=C+r;C<T&&!p[C];)C++;if(C!==T){P?P.moveTo(C%h,i):w=[C%h,i];var E=C,I=p[C];do{var O=x[I];do{C+=O}while(!p[C]);var M=p[C];if(5!==M&&10!==M){I=M;p[C]=0}else{I=M&51*I>>4;p[C]&=I>>2|I<<2}P?P.lineTo(C%h,C/h|0):w.push(C%h,C/h|0);p[C]||--A}while(E!==C);P||S.push(w);--i}}y=null;p=null;return function drawOutline(t){t.save();t.scale(1/r,-1/a);t.translate(0,-a);if(P)t.fill(P);else{t.beginPath();var i,o=_createForOfIteratorHelper(S);try{for(o.s();!(i=o.n()).done;){var l=i.value;t.moveTo(l[0],l[1]);for(var c=2,u=l.length;c<u;c+=2)t.lineTo(l[c],l[c+1])}}catch(t){o.e(t)}finally{o.f()}t.fill()}t.beginPath();t.restore()}}(t));if(i.compiled){i.compiled(a);return}}var o=this._createMaskCanvas(t),l=o.canvas;a.save();a.setTransform(1,0,0,1,0,0);a.drawImage(l,o.offsetX,o.offsetY);a.restore();this.compose()}}},{key:"paintImageMaskXObjectRepeat",value:function paintImageMaskXObjectRepeat(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){t=this.getObject(t.data,t);var u=this.ctx;u.save();var d=u.mozCurrentTransform;u.transform(r,a,o,l,0,0);var h=this._createMaskCanvas(t);u.setTransform(1,0,0,1,0,0);for(var p=0,v=c.length;p<v;p+=2){var y=i.Util.transform(d,[r,a,o,l,c[p],c[p+1]]),g=i.Util.applyTransform([0,0],y),_=_slicedToArray(g,2),m=_[0],b=_[1];u.drawImage(h.canvas,m,b)}u.restore();this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function paintImageMaskXObjectGroup(t){if(this.contentVisible){var r,a=this.ctx,i=this.current.fillColor,o=this.current.patternFill,c=_createForOfIteratorHelper(t);try{for(c.s();!(r=c.n()).done;){var u=r.value,d=u.data,h=u.width,p=u.height,v=u.transform,y=this.cachedCanvases.getCanvas("maskCanvas",h,p,!1),g=y.context;g.save();putBinaryImageMask(g,this.getObject(d,u));g.globalCompositeOperation="source-in";g.fillStyle=o?i.getPattern(g,this,a.mozCurrentTransformInverse,l.PathType.FILL):i;g.fillRect(0,0,h,p);g.restore();a.save();a.transform.apply(a,v);a.scale(1,-1);drawImageAtIntegerCoords(a,y.canvas,0,0,h,p,0,-1,1,1);a.restore()}}catch(t){c.e(t)}finally{c.f()}this.compose()}}},{key:"paintImageXObject",value:function paintImageXObject(t){if(this.contentVisible){var r=this.getObject(t);r?this.paintInlineImageXObject(r):(0,i.warn)("Dependent image isn\'t ready yet")}}},{key:"paintImageXObjectRepeat",value:function paintImageXObjectRepeat(t,r,a,o){if(this.contentVisible){var l=this.getObject(t);if(l){for(var c=l.width,u=l.height,d=[],h=0,p=o.length;h<p;h+=2)d.push({transform:[r,0,0,a,o[h],o[h+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(l,d)}else(0,i.warn)("Dependent image isn\'t ready yet")}}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(t){if(this.contentVisible){var r,a=t.width,i=t.height,o=this.ctx;this.save();o.scale(1/a,-1/i);if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)r=t;else{var l=this.cachedCanvases.getCanvas("inlineImage",a,i,!1);putBinaryImageData(l.context,t,this.current.transferMaps);r=l.canvas}var c=this._scaleImage(r,o.mozCurrentTransformInverse);o.imageSmoothingEnabled=getImageSmoothingEnabled(o.mozCurrentTransform,t.interpolate);var u=_slicedToArray(drawImageAtIntegerCoords(o,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,a,i),2),d=u[0],h=u[1];if(this.imageLayer){var p=this.getCanvasPosition(0,-i);this.imageLayer.appendImage({imgData:t,left:p[0],top:p[1],width:d,height:h})}this.compose();this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function paintInlineImageXObjectGroup(t,r){if(this.contentVisible){var a=this.ctx,i=t.width,o=t.height,l=this.cachedCanvases.getCanvas("inlineImage",i,o,!1);putBinaryImageData(l.context,t,this.current.transferMaps);for(var c=0,u=r.length;c<u;c++){var d=r[c];a.save();a.transform.apply(a,d.transform);a.scale(1,-1);drawImageAtIntegerCoords(a,l.canvas,d.x,d.y,d.w,d.h,0,-1,1,1);if(this.imageLayer){var h=this.getCanvasPosition(d.x,d.y);this.imageLayer.appendImage({imgData:t,left:h[0],top:h[1],width:i,height:o})}a.restore()}this.compose()}}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){if(this.contentVisible){this.ctx.fillRect(0,0,1,1);this.compose()}}},{key:"markPoint",value:function markPoint(t){}},{key:"markPointProps",value:function markPointProps(t,r){}},{key:"beginMarkedContent",value:function beginMarkedContent(t){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function beginMarkedContentProps(t,r){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0});this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function beginCompat(){}},{key:"endCompat",value:function endCompat(){}},{key:"consumePath",value:function consumePath(t){var r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath();this.pendingClip||this.compose(t);var a=this.ctx;if(this.pendingClip){r||(this.pendingClip===m?a.clip("evenodd"):a.clip());this.pendingClip=null}this.current.startNewPathAndClipBox(this.current.clipBox);a.beginPath()}},{key:"getSinglePixelWidth",value:function getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){var t=this.ctx.mozCurrentTransform;if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{var r=Math.abs(t[0]*t[3]-t[2]*t[1]),a=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(a,i)/r}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function getScaleForStroking(){if(!this._cachedScaleForStroking){var t,r,a=this.current.lineWidth,i=this.ctx.mozCurrentTransform;if(0===i[1]&&0===i[2]){var o=Math.abs(i[0]),l=Math.abs(i[3]);if(0===a){t=1/o;r=1/l}else{var c=o*a,u=l*a;t=c<1?1/c:1;r=u<1?1/u:1}}else{var d=Math.abs(i[0]*i[3]-i[2]*i[1]),h=Math.hypot(i[0],i[1]),p=Math.hypot(i[2],i[3]);if(0===a){t=p/d;r=h/d}else{var v=a*d;t=p>v?p/v:1;r=h>v?h/v:1}}this._cachedScaleForStroking=[t,r]}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function rescaleAndStroke(t){var r=this.ctx,a=this.current.lineWidth,i=_slicedToArray(this.getScaleForStroking(),2),o=i[0],l=i[1];r.lineWidth=a||1;if(1!==o||1!==l){var c,u,d;if(t){c=r.mozCurrentTransform.slice();u=r.getLineDash().slice();d=r.lineDashOffset}r.scale(o,l);var h=Math.max(o,l);r.setLineDash(r.getLineDash().map((function(t){return t/h})));r.lineDashOffset/=h;r.stroke();if(t){r.setTransform.apply(r,_toConsumableArray(c));r.setLineDash(u);r.lineDashOffset=d}}else r.stroke()}},{key:"getCanvasPosition",value:function getCanvasPosition(t,r){var a=this.ctx.mozCurrentTransform;return[a[0]*t+a[2]*r+a[4],a[1]*t+a[3]*r+a[5]]}},{key:"isContentVisible",value:function isContentVisible(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}]);return CanvasGraphics}();r.CanvasGraphics=A;function _restoreInitialState2(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null}}for(var k in i.OPS)void 0!==A.prototype[k]&&(A.prototype[i.OPS[k]]=A.prototype[k])},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.TilingPattern=r.PathType=void 0;r.getShadingPattern=function getShadingPattern(t){switch(t[0]){case"RadialAxial":return new u(t);case"Mesh":return new d(t);case"Dummy":return new h}throw new Error("Unknown IR type: ".concat(t[0]))};var i=a(1),o=a(3);function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}var l={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};r.PathType=l;function applyBoundingBox(t,r){if(r&&!o.isNodeJS){var a=r[2]-r[0],i=r[3]-r[1],l=new Path2D;l.rect(r[0],r[1],a,i);t.clip(l)}}var c=function(){function BaseShadingPattern(){_classCallCheck(this,BaseShadingPattern);this.constructor===BaseShadingPattern&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}_createClass(BaseShadingPattern,[{key:"getPattern",value:function getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}]);return BaseShadingPattern}(),u=function(t){_inherits(RadialAxialShadingPattern,t);var r=_createSuper(RadialAxialShadingPattern);function RadialAxialShadingPattern(t){var a;_classCallCheck(this,RadialAxialShadingPattern);(a=r.call(this))._type=t[1];a._bbox=t[2];a._colorStops=t[3];a._p0=t[4];a._p1=t[5];a._r0=t[6];a._r1=t[7];a.matrix=null;return a}_createClass(RadialAxialShadingPattern,[{key:"_createGradient",value:function _createGradient(t){var r;"axial"===this._type?r=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(r=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var a,i=_createForOfIteratorHelper(this._colorStops);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.addColorStop(o[0],o[1])}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"getPattern",value:function getPattern(t,r,a,o){var c;if(o===l.STROKE||o===l.FILL){var u=r.current.getClippedPathBoundingBox(o,t.mozCurrentTransform)||[0,0,0,0],d=Math.ceil(u[2]-u[0])||1,h=Math.ceil(u[3]-u[1])||1,p=r.cachedCanvases.getCanvas("pattern",d,h,!0),v=p.context;v.clearRect(0,0,v.canvas.width,v.canvas.height);v.beginPath();v.rect(0,0,v.canvas.width,v.canvas.height);v.translate(-u[0],-u[1]);a=i.Util.transform(a,[1,0,0,1,u[0],u[1]]);v.transform.apply(v,r.baseTransform);this.matrix&&v.transform.apply(v,this.matrix);applyBoundingBox(v,this._bbox);v.fillStyle=this._createGradient(v);v.fill();c=t.createPattern(p.canvas,"no-repeat");var y=new DOMMatrix(a);try{c.setTransform(y)}catch(t){(0,i.warn)(\'RadialAxialShadingPattern.getPattern: "\'.concat(null==t?void 0:t.message,\'".\'))}}else{applyBoundingBox(t,this._bbox);c=this._createGradient(t)}return c}}]);return RadialAxialShadingPattern}(c);function drawTriangle(t,r,a,i,o,l,c,u){var d,h=r.coords,p=r.colors,v=t.data,y=4*t.width;if(h[a+1]>h[i+1]){d=a;a=i;i=d;d=l;l=c;c=d}if(h[i+1]>h[o+1]){d=i;i=o;o=d;d=c;c=u;u=d}if(h[a+1]>h[i+1]){d=a;a=i;i=d;d=l;l=c;c=d}var g=(h[a]+r.offsetX)*r.scaleX,_=(h[a+1]+r.offsetY)*r.scaleY,m=(h[i]+r.offsetX)*r.scaleX,b=(h[i+1]+r.offsetY)*r.scaleY,A=(h[o]+r.offsetX)*r.scaleX,k=(h[o+1]+r.offsetY)*r.scaleY;if(!(_>=k))for(var P,S,w,x,C,T,E,I,O=p[l],M=p[l+1],R=p[l+2],D=p[c],L=p[c+1],G=p[c+2],j=p[u],N=p[u+1],B=p[u+2],W=Math.round(_),U=Math.round(k),H=W;H<=U;H++){if(H<b){var z=void 0;P=g-(g-m)*(z=H<_?0:(_-H)/(_-b));S=O-(O-D)*z;w=M-(M-L)*z;x=R-(R-G)*z}else{var V=void 0;P=m-(m-A)*(V=H>k?1:b===k?0:(b-H)/(b-k));S=D-(D-j)*V;w=L-(L-N)*V;x=G-(G-B)*V}var X=void 0;C=g-(g-A)*(X=H<_?0:H>k?1:(_-H)/(_-k));T=O-(O-j)*X;E=M-(M-N)*X;I=R-(R-B)*X;for(var Y=Math.round(Math.min(P,C)),K=Math.round(Math.max(P,C)),J=y*H+4*Y,Q=Y;Q<=K;Q++){(X=(P-Q)/(P-C))<0?X=0:X>1&&(X=1);v[J++]=S-(S-T)*X|0;v[J++]=w-(w-E)*X|0;v[J++]=x-(x-I)*X|0;v[J++]=255}}}function drawFigure(t,r,a){var i,o,l=r.coords,c=r.colors;switch(r.type){case"lattice":var u=r.verticesPerRow,d=Math.floor(l.length/u)-1,h=u-1;for(i=0;i<d;i++)for(var p=i*u,v=0;v<h;v++,p++){drawTriangle(t,a,l[p],l[p+1],l[p+u],c[p],c[p+1],c[p+u]);drawTriangle(t,a,l[p+u+1],l[p+1],l[p+u],c[p+u+1],c[p+1],c[p+u])}break;case"triangles":for(i=0,o=l.length;i<o;i+=3)drawTriangle(t,a,l[i],l[i+1],l[i+2],c[i],c[i+1],c[i+2]);break;default:throw new Error("illegal figure")}}var d=function(t){_inherits(MeshShadingPattern,t);var r=_createSuper(MeshShadingPattern);function MeshShadingPattern(t){var a;_classCallCheck(this,MeshShadingPattern);(a=r.call(this))._coords=t[2];a._colors=t[3];a._figures=t[4];a._bounds=t[5];a._bbox=t[7];a._background=t[8];a.matrix=null;return a}_createClass(MeshShadingPattern,[{key:"_createMeshCanvas",value:function _createMeshCanvas(t,r,a){var i=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-i,c=Math.ceil(this._bounds[3])-o,u=Math.min(Math.ceil(Math.abs(l*t[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*t[1]*1.1)),3e3),h=l/u,p=c/d,v={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-o,scaleX:1/h,scaleY:1/p},y=u+4,g=d+4,_=a.getCanvas("mesh",y,g,!1),m=_.context,b=m.createImageData(u,d);if(r)for(var A=b.data,k=0,P=A.length;k<P;k+=4){A[k]=r[0];A[k+1]=r[1];A[k+2]=r[2];A[k+3]=255}var S,w=_createForOfIteratorHelper(this._figures);try{for(w.s();!(S=w.n()).done;){drawFigure(b,S.value,v)}}catch(t){w.e(t)}finally{w.f()}m.putImageData(b,2,2);return{canvas:_.canvas,offsetX:i-2*h,offsetY:o-2*p,scaleX:h,scaleY:p}}},{key:"getPattern",value:function getPattern(t,r,a,o){applyBoundingBox(t,this._bbox);var c;if(o===l.SHADING)c=i.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else{c=i.Util.singularValueDecompose2dScale(r.baseTransform);if(this.matrix){var u=i.Util.singularValueDecompose2dScale(this.matrix);c=[c[0]*u[0],c[1]*u[1]]}}var d=this._createMeshCanvas(c,o===l.SHADING?null:this._background,r.cachedCanvases);if(o!==l.SHADING){t.setTransform.apply(t,r.baseTransform);this.matrix&&t.transform.apply(t,this.matrix)}t.translate(d.offsetX,d.offsetY);t.scale(d.scaleX,d.scaleY);return t.createPattern(d.canvas,"no-repeat")}}]);return MeshShadingPattern}(c),h=function(t){_inherits(DummyShadingPattern,t);var r=_createSuper(DummyShadingPattern);function DummyShadingPattern(){_classCallCheck(this,DummyShadingPattern);return r.apply(this,arguments)}_createClass(DummyShadingPattern,[{key:"getPattern",value:function getPattern(){return"hotpink"}}]);return DummyShadingPattern}(c);var p=1,v=2,y=function(){function TilingPattern(t,r,a,i,o){_classCallCheck(this,TilingPattern);this.operatorList=t[2];this.matrix=t[3]||[1,0,0,1,0,0];this.bbox=t[4];this.xstep=t[5];this.ystep=t[6];this.paintType=t[7];this.tilingType=t[8];this.color=r;this.ctx=a;this.canvasGraphicsFactory=i;this.baseTransform=o}_createClass(TilingPattern,[{key:"createPatternCanvas",value:function createPatternCanvas(t){var r=this.operatorList,a=this.bbox,o=this.xstep,l=this.ystep,c=this.paintType,u=this.tilingType,d=this.color,h=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+u);var p=a[0],v=a[1],y=a[2],g=a[3],_=i.Util.singularValueDecompose2dScale(this.matrix),m=i.Util.singularValueDecompose2dScale(this.baseTransform),b=[_[0]*m[0],_[1]*m[1]],A=this.getSizeAndScale(o,this.ctx.canvas.width,b[0]),k=this.getSizeAndScale(l,this.ctx.canvas.height,b[1]),P=t.cachedCanvases.getCanvas("pattern",A.size,k.size,!0),S=P.context,w=h.createCanvasGraphics(S);w.groupLevel=t.groupLevel;this.setFillAndStrokeStyleToContext(w,c,d);var x=p,C=v,T=y,E=g;if(p<0){x=0;T+=Math.abs(p)}if(v<0){C=0;E+=Math.abs(v)}S.translate(-A.scale*x,-k.scale*C);w.transform(A.scale,0,0,k.scale,0,0);S.save();this.clipBbox(w,x,C,T,E);w.baseTransform=w.ctx.mozCurrentTransform.slice();w.executeOperatorList(r);w.endDrawing();return{canvas:P.canvas,scaleX:A.scale,scaleY:k.scale,offsetX:x,offsetY:C}}},{key:"getSizeAndScale",value:function getSizeAndScale(t,r,a){t=Math.abs(t);var i=Math.max(TilingPattern.MAX_PATTERN_SIZE,r),o=Math.ceil(t*a);o>=i?o=i:a=o/t;return{scale:a,size:o}}},{key:"clipBbox",value:function clipBbox(t,r,a,i,o){var l=i-r,c=o-a;t.ctx.rect(r,a,l,c);t.current.updateRectMinMax(t.ctx.mozCurrentTransform,[r,a,i,o]);t.clip();t.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function setFillAndStrokeStyleToContext(t,r,a){var o=t.ctx,l=t.current;switch(r){case p:var c=this.ctx;o.fillStyle=c.fillStyle;o.strokeStyle=c.strokeStyle;l.fillColor=c.fillStyle;l.strokeColor=c.strokeStyle;break;case v:var u=i.Util.makeHexColor(a[0],a[1],a[2]);o.fillStyle=u;o.strokeStyle=u;l.fillColor=u;l.strokeColor=u;break;default:throw new i.FormatError("Unsupported paint type: ".concat(r))}}},{key:"getPattern",value:function getPattern(t,r,a,o){var c=a;if(o!==l.SHADING){c=i.Util.transform(c,r.baseTransform);this.matrix&&(c=i.Util.transform(c,this.matrix))}var u=this.createPatternCanvas(r),d=new DOMMatrix(c);d=(d=d.translate(u.offsetX,u.offsetY)).scale(1/u.scaleX,1/u.scaleY);var h=t.createPattern(u.canvas,"repeat");try{h.setTransform(d)}catch(t){(0,i.warn)(\'TilingPattern.getPattern: "\'.concat(null==t?void 0:t.message,\'".\'))}return h}}],[{key:"MAX_PATTERN_SIZE",get:function get(){return(0,i.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]);return TilingPattern}();r.TilingPattern=y},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.applyMaskImageData=function applyMaskImageData(t){var r=t.src,a=t.srcPos,o=void 0===a?0:a,l=t.dest,c=t.destPos,u=void 0===c?0:c,d=t.width,h=t.height,p=t.inverseDecode,v=void 0!==p&&p,y=i.FeatureTest.isLittleEndian?4278190080:255,g=function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(v?[0,y]:[y,0],2),_=g[0],m=g[1],b=d>>3,A=7&d,k=r.length;l=new Uint32Array(l.buffer);for(var P=0;P<h;P++){for(var S=o+b;o<S;o++){var w=o<k?r[o]:255;l[u++]=128&w?m:_;l[u++]=64&w?m:_;l[u++]=32&w?m:_;l[u++]=16&w?m:_;l[u++]=8&w?m:_;l[u++]=4&w?m:_;l[u++]=2&w?m:_;l[u++]=1&w?m:_}if(0!==A)for(var x=o<k?r[o++]:255,C=0;C<A;C++)l[u++]=x&1<<7-C?m:_}return{srcPos:o,destPos:u}};var i=a(1);function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.GlobalWorkerOptions=void 0;var a=Object.create(null);r.GlobalWorkerOptions=a;a.workerPort=void 0===a.workerPort?null:a.workerPort;a.workerSrc=void 0===a.workerSrc?"":a.workerSrc},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.MessageHandler=void 0;var i=a(1);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),c=new Context(i||[]);return l._invoke=function(t,r,a){var i="suspendedStart";return function(o,l){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw l;return doneResult()}for(a.method=o,a.arg=l;;){var c=a.delegate;if(c){var d=maybeInvokeDelegate(c,a);if(d){if(d===u)continue;return d}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var h=tryCatch(t,r,a);if("normal"===h.type){if(i=a.done?"completed":"suspendedYield",h.arg===u)continue;return{value:h.arg,done:a.done}}"throw"===h.type&&(i="completed",a.method="throw",a.arg=h.arg)}}}(t,a,c),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&a.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,o,l,c){var u=tryCatch(t[i],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&a.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var i;this._invoke=function(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,a,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var a=t.iterator[r.method];if(void 0===a){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return u}var i=tryCatch(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,u;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,u):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,l=function next(){for(;++i<t.length;)if(a.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return l.next=l}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(v),define(v,c,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,i){return l.type="throw",l.arg=t,r.next=a,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),u},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),u}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),d=u.value}catch(t){a(t);return}u.done?r(d):Promise.resolve(d).then(i,o)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var o=1,l=2,c=1,u=2,d=3,h=4,p=5,v=6,y=7,g=8;function wrapReason(t){t instanceof Error||"object"===_typeof(t)&&null!==t||(0,i.unreachable)(\'wrapReason: Expected "reason" to be a (possibly cloned) Error.\');switch(t.name){case"AbortException":return new i.AbortException(t.message);case"MissingPDFException":return new i.MissingPDFException(t.message);case"PasswordException":return new i.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new i.UnknownErrorException(t.message,t.details);default:return new i.UnknownErrorException(t.message,t.toString())}}var _=function(){function MessageHandler(t,r,a){var i=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MessageHandler);this.sourceName=t;this.targetName=r;this.comObj=a;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=function(t){var r=t.data;if(r.targetName===i.sourceName)if(r.stream)i._processStreamMessage(r);else if(r.callback){var c=r.callbackId,u=i.callbackCapabilities[c];if(!u)throw new Error("Cannot resolve callback ".concat(c));delete i.callbackCapabilities[c];if(r.callback===o)u.resolve(r.data);else{if(r.callback!==l)throw new Error("Unexpected callback case");u.reject(wrapReason(r.reason))}}else{var d=i.actionHandler[r.action];if(!d)throw new Error("Unknown action from worker: ".concat(r.action));if(r.callbackId){var h=i.sourceName,p=r.sourceName;new Promise((function(t){t(d(r.data))})).then((function(t){a.postMessage({sourceName:h,targetName:p,callback:o,callbackId:r.callbackId,data:t})}),(function(t){a.postMessage({sourceName:h,targetName:p,callback:l,callbackId:r.callbackId,reason:wrapReason(t)})}))}else r.streamId?i._createStreamSink(r):d(r.data)}};a.addEventListener("message",this._onComObjOnMessage)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(MessageHandler,[{key:"on",value:function on(t,r){var a=this.actionHandler;if(a[t])throw new Error(\'There is already an actionName called "\'.concat(t,\'"\'));a[t]=r}},{key:"send",value:function send(t,r,a){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:r},a)}},{key:"sendWithPromise",value:function sendWithPromise(t,r,a){var o=this.callbackId++,l=(0,i.createPromiseCapability)();this.callbackCapabilities[o]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:o,data:r},a)}catch(t){l.reject(t)}return l.promise}},{key:"sendWithStream",value:function sendWithStream(t,r,a,o){var l=this,u=this.streamId++,d=this.sourceName,h=this.targetName,p=this.comObj;return new ReadableStream({start:function start(a){var c=(0,i.createPromiseCapability)();l.streamControllers[u]={controller:a,startCall:c,pullCall:null,cancelCall:null,isClosed:!1};p.postMessage({sourceName:d,targetName:h,action:t,streamId:u,data:r,desiredSize:a.desiredSize},o);return c.promise},pull:function pull(t){var r=(0,i.createPromiseCapability)();l.streamControllers[u].pullCall=r;p.postMessage({sourceName:d,targetName:h,stream:v,streamId:u,desiredSize:t.desiredSize});return r.promise},cancel:function cancel(t){(0,i.assert)(t instanceof Error,"cancel must have a valid reason");var r=(0,i.createPromiseCapability)();l.streamControllers[u].cancelCall=r;l.streamControllers[u].isClosed=!0;p.postMessage({sourceName:d,targetName:h,stream:c,streamId:u,reason:wrapReason(t)});return r.promise}},a)}},{key:"_createStreamSink",value:function _createStreamSink(t){var r=t.streamId,a=this.sourceName,o=t.sourceName,l=this.comObj,c=this,u=this.actionHandler[t.action],v={enqueue:function enqueue(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var d=this.desiredSize;this.desiredSize-=c;if(d>0&&this.desiredSize<=0){this.sinkCapability=(0,i.createPromiseCapability)();this.ready=this.sinkCapability.promise}l.postMessage({sourceName:a,targetName:o,stream:h,streamId:r,chunk:t},u)}},close:function close(){if(!this.isCancelled){this.isCancelled=!0;l.postMessage({sourceName:a,targetName:o,stream:d,streamId:r});delete c.streamSinks[r]}},error:function error(t){(0,i.assert)(t instanceof Error,"error must have a valid reason");if(!this.isCancelled){this.isCancelled=!0;l.postMessage({sourceName:a,targetName:o,stream:p,streamId:r,reason:wrapReason(t)})}},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};v.sinkCapability.resolve();v.ready=v.sinkCapability.promise;this.streamSinks[r]=v;new Promise((function(r){r(u(t.data,v))})).then((function(){l.postMessage({sourceName:a,targetName:o,stream:g,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:a,targetName:o,stream:g,streamId:r,reason:wrapReason(t)})}))}},{key:"_processStreamMessage",value:function _processStreamMessage(t){var r=t.streamId,a=this.sourceName,o=t.sourceName,l=this.comObj,_=this.streamControllers[r],m=this.streamSinks[r];switch(t.stream){case g:t.success?_.startCall.resolve():_.startCall.reject(wrapReason(t.reason));break;case y:t.success?_.pullCall.resolve():_.pullCall.reject(wrapReason(t.reason));break;case v:if(!m){l.postMessage({sourceName:a,targetName:o,stream:y,streamId:r,success:!0});break}m.desiredSize<=0&&t.desiredSize>0&&m.sinkCapability.resolve();m.desiredSize=t.desiredSize;new Promise((function(t){t(m.onPull&&m.onPull())})).then((function(){l.postMessage({sourceName:a,targetName:o,stream:y,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:a,targetName:o,stream:y,streamId:r,reason:wrapReason(t)})}));break;case h:(0,i.assert)(_,"enqueue should have stream controller");if(_.isClosed)break;_.controller.enqueue(t.chunk);break;case d:(0,i.assert)(_,"close should have stream controller");if(_.isClosed)break;_.isClosed=!0;_.controller.close();this._deleteStreamController(_,r);break;case p:(0,i.assert)(_,"error should have stream controller");_.controller.error(wrapReason(t.reason));this._deleteStreamController(_,r);break;case u:t.success?_.cancelCall.resolve():_.cancelCall.reject(wrapReason(t.reason));this._deleteStreamController(_,r);break;case c:if(!m)break;new Promise((function(r){r(m.onCancel&&m.onCancel(wrapReason(t.reason)))})).then((function(){l.postMessage({sourceName:a,targetName:o,stream:u,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:a,targetName:o,stream:u,streamId:r,reason:wrapReason(t)})}));m.sinkCapability.reject(wrapReason(t.reason));m.isCancelled=!0;delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(t=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t,r){return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]);case 2:delete this.streamControllers[r];case 3:case"end":return a.stop()}}),_callee,this)}))),function _deleteStreamController(r,a){return t.apply(this,arguments)})},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]);var t;return MessageHandler}();r.MessageHandler=_},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.Metadata=void 0;var i=a(1);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _classPrivateFieldInitSpec(t,r,a){!function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r);r.set(t,a)}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,a){!function _classApplyDescriptorSet(t,r,a){if(r.set)r.set.call(t,a);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=a}}(t,_classExtractFieldDescriptor(t,r,"set"),a);return a}function _classExtractFieldDescriptor(t,r,a){if(!r.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return r.get(t)}var o=new WeakMap,l=new WeakMap,c=function(){function Metadata(t){var r=t.parsedData,a=t.rawData;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Metadata);_classPrivateFieldInitSpec(this,o,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,l,{writable:!0,value:void 0});_classPrivateFieldSet(this,o,r);_classPrivateFieldSet(this,l,a)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(Metadata,[{key:"getRaw",value:function getRaw(){return _classPrivateFieldGet(this,l)}},{key:"get",value:function get(t){var r;return null!==(r=_classPrivateFieldGet(this,o).get(t))&&void 0!==r?r:null}},{key:"getAll",value:function getAll(){return(0,i.objectFromMap)(_classPrivateFieldGet(this,o))}},{key:"has",value:function has(t){return _classPrivateFieldGet(this,o).has(t)}}]);return Metadata}();r.Metadata=c},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.OptionalContentConfig=void 0;var i=a(1);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classPrivateMethodGet(t,r,a){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return a}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classPrivateFieldInitSpec(t,r,a){_checkPrivateRedeclaration(t,r);r.set(t,a)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(t,r,a){!function _classApplyDescriptorSet(t,r,a){if(r.set)r.set.call(t,a);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=a}}(t,_classExtractFieldDescriptor(t,r,"set"),a);return a}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,a){if(!r.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return r.get(t)}var o=Symbol("INTERNAL"),l=new WeakMap,c=function(){function OptionalContentGroup(t,r){_classCallCheck(this,OptionalContentGroup);_classPrivateFieldInitSpec(this,l,{writable:!0,value:!0});this.name=t;this.intent=r}_createClass(OptionalContentGroup,[{key:"visible",get:function get(){return _classPrivateFieldGet(this,l)}},{key:"_setVisible",value:function _setVisible(t,r){t!==o&&(0,i.unreachable)("Internal method `_setVisible` called.");_classPrivateFieldSet(this,l,r)}}]);return OptionalContentGroup}(),u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakSet,y=function(){function OptionalContentConfig(t){_classCallCheck(this,OptionalContentConfig);!function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}(this,v);_classPrivateFieldInitSpec(this,u,{writable:!0,value:!0});_classPrivateFieldInitSpec(this,d,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,h,{writable:!0,value:null});_classPrivateFieldInitSpec(this,p,{writable:!0,value:null});this.name=null;this.creator=null;if(null!==t){this.name=t.name;this.creator=t.creator;_classPrivateFieldSet(this,p,t.order);var r,a=_createForOfIteratorHelper(t.groups);try{for(a.s();!(r=a.n()).done;){var i=r.value;_classPrivateFieldGet(this,d).set(i.id,new c(i.name,i.intent))}}catch(t){a.e(t)}finally{a.f()}if("OFF"===t.baseState){var l,y=_createForOfIteratorHelper(_classPrivateFieldGet(this,d).values());try{for(y.s();!(l=y.n()).done;){l.value._setVisible(o,!1)}}catch(t){y.e(t)}finally{y.f()}}var g,_=_createForOfIteratorHelper(t.on);try{for(_.s();!(g=_.n()).done;){var m=g.value;_classPrivateFieldGet(this,d).get(m)._setVisible(o,!0)}}catch(t){_.e(t)}finally{_.f()}var b,A=_createForOfIteratorHelper(t.off);try{for(A.s();!(b=A.n()).done;){var k=b.value;_classPrivateFieldGet(this,d).get(k)._setVisible(o,!1)}}catch(t){A.e(t)}finally{A.f()}_classPrivateFieldSet(this,h,new Map);var P,S=_createForOfIteratorHelper(_classPrivateFieldGet(this,d));try{for(S.s();!(P=S.n()).done;){var w=_slicedToArray(P.value,2),x=w[0],C=w[1];_classPrivateFieldGet(this,h).set(x,C.visible)}}catch(t){S.e(t)}finally{S.f()}}}_createClass(OptionalContentConfig,[{key:"isVisible",value:function isVisible(t){if(0===_classPrivateFieldGet(this,d).size)return!0;if(!t){(0,i.warn)("Optional content group not defined.");return!0}if("OCG"===t.type){if(!_classPrivateFieldGet(this,d).has(t.id)){(0,i.warn)("Optional content group not found: ".concat(t.id));return!0}return _classPrivateFieldGet(this,d).get(t.id).visible}if("OCMD"===t.type){if(t.expression)return _classPrivateMethodGet(this,v,_evaluateVisibilityExpression2).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){var r,a=_createForOfIteratorHelper(t.ids);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(!_classPrivateFieldGet(this,d).has(o)){(0,i.warn)("Optional content group not found: ".concat(o));return!0}if(_classPrivateFieldGet(this,d).get(o).visible)return!0}}catch(t){a.e(t)}finally{a.f()}return!1}if("AllOn"===t.policy){var l,c=_createForOfIteratorHelper(t.ids);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(!_classPrivateFieldGet(this,d).has(u)){(0,i.warn)("Optional content group not found: ".concat(u));return!0}if(!_classPrivateFieldGet(this,d).get(u).visible)return!1}}catch(t){c.e(t)}finally{c.f()}return!0}if("AnyOff"===t.policy){var h,p=_createForOfIteratorHelper(t.ids);try{for(p.s();!(h=p.n()).done;){var y=h.value;if(!_classPrivateFieldGet(this,d).has(y)){(0,i.warn)("Optional content group not found: ".concat(y));return!0}if(!_classPrivateFieldGet(this,d).get(y).visible)return!0}}catch(t){p.e(t)}finally{p.f()}return!1}if("AllOff"===t.policy){var g,_=_createForOfIteratorHelper(t.ids);try{for(_.s();!(g=_.n()).done;){var m=g.value;if(!_classPrivateFieldGet(this,d).has(m)){(0,i.warn)("Optional content group not found: ".concat(m));return!0}if(_classPrivateFieldGet(this,d).get(m).visible)return!1}}catch(t){_.e(t)}finally{_.f()}return!0}(0,i.warn)("Unknown optional content policy ".concat(t.policy,"."));return!0}(0,i.warn)("Unknown group type ".concat(t.type,"."));return!0}},{key:"setVisibility",value:function setVisibility(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(_classPrivateFieldGet(this,d).has(t)){_classPrivateFieldGet(this,d).get(t)._setVisible(o,!!r);_classPrivateFieldSet(this,u,null)}else(0,i.warn)("Optional content group not found: ".concat(t))}},{key:"hasInitialVisibility",get:function get(){if(null!==_classPrivateFieldGet(this,u))return _classPrivateFieldGet(this,u);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,d));try{for(r.s();!(t=r.n()).done;){var a=_slicedToArray(t.value,2),i=a[0],o=a[1],l=_classPrivateFieldGet(this,h).get(i);if(o.visible!==l)return _classPrivateFieldSet(this,u,!1)}}catch(t){r.e(t)}finally{r.f()}return _classPrivateFieldSet(this,u,!0)}},{key:"getOrder",value:function getOrder(){return _classPrivateFieldGet(this,d).size?_classPrivateFieldGet(this,p)?_classPrivateFieldGet(this,p).slice():_toConsumableArray(_classPrivateFieldGet(this,d).keys()):null}},{key:"getGroups",value:function getGroups(){return _classPrivateFieldGet(this,d).size>0?(0,i.objectFromMap)(_classPrivateFieldGet(this,d)):null}},{key:"getGroup",value:function getGroup(t){return _classPrivateFieldGet(this,d).get(t)||null}}]);return OptionalContentConfig}();r.OptionalContentConfig=y;function _evaluateVisibilityExpression2(t){var r=t.length;if(r<2)return!0;for(var a=t[0],o=1;o<r;o++){var l=t[o],c=void 0;if(Array.isArray(l))c=_classPrivateMethodGet(this,v,_evaluateVisibilityExpression2).call(this,l);else{if(!_classPrivateFieldGet(this,d).has(l)){(0,i.warn)("Optional content group not found: ".concat(l));return!0}c=_classPrivateFieldGet(this,d).get(l).visible}switch(a){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return"And"===a}},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFDataTransportStream=void 0;var i=a(1),o=a(129);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),c=new Context(i||[]);return l._invoke=function(t,r,a){var i="suspendedStart";return function(o,l){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw l;return doneResult()}for(a.method=o,a.arg=l;;){var c=a.delegate;if(c){var d=maybeInvokeDelegate(c,a);if(d){if(d===u)continue;return d}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var h=tryCatch(t,r,a);if("normal"===h.type){if(i=a.done?"completed":"suspendedYield",h.arg===u)continue;return{value:h.arg,done:a.done}}"throw"===h.type&&(i="completed",a.method="throw",a.arg=h.arg)}}}(t,a,c),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&a.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,o,l,c){var u=tryCatch(t[i],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&a.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var i;this._invoke=function(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,a,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var a=t.iterator[r.method];if(void 0===a){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return u}var i=tryCatch(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,u;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,u):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,l=function next(){for(;++i<t.length;)if(a.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return l.next=l}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(v),define(v,c,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,i){return l.type="throw",l.arg=t,r.next=a,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),u},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),u}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),d=u.value}catch(t){a(t);return}u.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}var l=function(){function PDFDataTransportStream(t,r){var a=this;_classCallCheck(this,PDFDataTransportStream);(0,i.assert)(r,\'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.\');this._queuedChunks=[];this._progressiveDone=t.progressiveDone||!1;this._contentDispositionFilename=t.contentDispositionFilename||null;var o=t.initialData;if((null==o?void 0:o.length)>0){var l=new Uint8Array(o).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=r;this._isStreamingSupported=!t.disableStream;this._isRangeSupported=!t.disableRange;this._contentLength=t.length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener((function(t,r){a._onReceiveData({begin:t,chunk:r})}));this._pdfDataRangeTransport.addProgressListener((function(t,r){a._onProgress({loaded:t,total:r})}));this._pdfDataRangeTransport.addProgressiveReadListener((function(t){a._onReceiveData({chunk:t})}));this._pdfDataRangeTransport.addProgressiveDoneListener((function(){a._onProgressiveDone()}));this._pdfDataRangeTransport.transportReady()}_createClass(PDFDataTransportStream,[{key:"_onReceiveData",value:function _onReceiveData(t){var r=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{var a=this._rangeReaders.some((function(a){if(a._begin!==t.begin)return!1;a._enqueue(r);return!0}));(0,i.assert)(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"_onProgress",value:function _onProgress(t){if(void 0===t.total){var r=this._rangeReaders[0];null!=r&&r.onProgress&&r.onProgress({loaded:t.loaded})}else{var a=this._fullRequestReader;null!=a&&a.onProgress&&a.onProgress({loaded:t.loaded,total:t.total})}}},{key:"_onProgressiveDone",value:function _onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone();this._progressiveDone=!0}},{key:"_removeRangeReader",value:function _removeRangeReader(t){var r=this._rangeReaders.indexOf(t);r>=0&&this._rangeReaders.splice(r,1)}},{key:"getFullReader",value:function getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;this._queuedChunks=null;return new c(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var a=new u(this,t,r);this._pdfDataRangeTransport.requestDataRange(t,r);this._rangeReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var r,a=_createForOfIteratorHelper(this._rangeReaders.slice(0));try{for(a.s();!(r=a.n()).done;){r.value.cancel(t)}}catch(t){a.e(t)}finally{a.f()}this._pdfDataRangeTransport.abort()}}]);return PDFDataTransportStream}();r.PDFDataTransportStream=l;var c=function(){function PDFDataTransportStreamReader(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,PDFDataTransportStreamReader);this._stream=t;this._done=a||!1;this._filename=(0,o.isPdfFile)(i)?i:null;this._queuedChunks=r||[];this._loaded=0;var l,c=_createForOfIteratorHelper(this._queuedChunks);try{for(c.s();!(l=c.n()).done;){var u=l.value;this._loaded+=u.byteLength}}catch(t){c.e(t)}finally{c.f()}this._requests=[];this._headersReady=Promise.resolve();t._fullRequestReader=this;this.onProgress=null}_createClass(PDFDataTransportStreamReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}},{key:"headersReady",get:function get(){return this._headersReady}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function get(){return this._stream._contentLength}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r;return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!(this._queuedChunks.length>0)){a.next=3;break}t=this._queuedChunks.shift();return a.abrupt("return",{value:t,done:!1});case 3:if(!this._done){a.next=5;break}return a.abrupt("return",{value:void 0,done:!0});case 5:r=(0,i.createPromiseCapability)();this._requests.push(r);return a.abrupt("return",r.promise);case 8:case"end":return a.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var r,a=_createForOfIteratorHelper(this._requests);try{for(a.s();!(r=a.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){a.e(t)}finally{a.f()}this._requests.length=0}},{key:"progressiveDone",value:function progressiveDone(){this._done||(this._done=!0)}}]);var t;return PDFDataTransportStreamReader}(),u=function(){function PDFDataTransportStreamRangeReader(t,r,a){_classCallCheck(this,PDFDataTransportStreamRangeReader);this._stream=t;this._begin=r;this._end=a;this._queuedChunk=null;this._requests=[];this._done=!1;this.onProgress=null}_createClass(PDFDataTransportStreamRangeReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});var r,a=_createForOfIteratorHelper(this._requests);try{for(a.s();!(r=a.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){a.e(t)}finally{a.f()}this._requests.length=0}this._done=!0;this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function get(){return!1}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r;return _regeneratorRuntime().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(!this._queuedChunk){a.next=4;break}t=this._queuedChunk;this._queuedChunk=null;return a.abrupt("return",{value:t,done:!1});case 4:if(!this._done){a.next=6;break}return a.abrupt("return",{value:void 0,done:!0});case 6:r=(0,i.createPromiseCapability)();this._requests.push(r);return a.abrupt("return",r.promise);case 9:case"end":return a.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var r,a=_createForOfIteratorHelper(this._requests);try{for(a.s();!(r=a.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){a.e(t)}finally{a.f()}this._requests.length=0;this._stream._removeRangeReader(this)}}]);var t;return PDFDataTransportStreamRangeReader}()},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.XfaText=void 0;function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var a=function(){function XfaText(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,XfaText)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(XfaText,null,[{key:"textContent",value:function textContent(t){var r=[],a={items:r,styles:Object.create(null)};!function walk(t){var a;if(t){var i=null,o=t.name;if("#text"===o)i=t.value;else{if(!XfaText.shouldBuildText(o))return;null!=t&&null!==(a=t.attributes)&&void 0!==a&&a.textContent?i=t.attributes.textContent:t.value&&(i=t.value)}null!==i&&r.push({str:i});if(t.children){var l,c=_createForOfIteratorHelper(t.children);try{for(c.s();!(l=c.n()).done;){walk(l.value)}}catch(t){c.e(t)}finally{c.f()}}}}(t);return a}},{key:"shouldBuildText",value:function shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}]);return XfaText}();r.XfaText=a},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.NodeStandardFontDataFactory=r.NodeCanvasFactory=r.NodeCMapReaderFactory=void 0;var i=a(130);function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}var o=function fetchData(t){return new Promise((function(r,a){require("fs").readFile(t,(function(t,i){!t&&i?r(new Uint8Array(i)):a(new Error(t))}))}))},l=function(t){_inherits(NodeCanvasFactory,t);var r=_createSuper(NodeCanvasFactory);function NodeCanvasFactory(){_classCallCheck(this,NodeCanvasFactory);return r.apply(this,arguments)}_createClass(NodeCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(t,r){return require("canvas").createCanvas(t,r)}}]);return NodeCanvasFactory}(i.BaseCanvasFactory);r.NodeCanvasFactory=l;var c=function(t){_inherits(NodeCMapReaderFactory,t);var r=_createSuper(NodeCMapReaderFactory);function NodeCMapReaderFactory(){_classCallCheck(this,NodeCMapReaderFactory);return r.apply(this,arguments)}_createClass(NodeCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(t,r){return o(t).then((function(t){return{cMapData:t,compressionType:r}}))}}]);return NodeCMapReaderFactory}(i.BaseCMapReaderFactory);r.NodeCMapReaderFactory=c;var u=function(t){_inherits(NodeStandardFontDataFactory,t);var r=_createSuper(NodeStandardFontDataFactory);function NodeStandardFontDataFactory(){_classCallCheck(this,NodeStandardFontDataFactory);return r.apply(this,arguments)}_createClass(NodeStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(t){return o(t)}}]);return NodeStandardFontDataFactory}(i.BaseStandardFontDataFactory);r.NodeStandardFontDataFactory=u},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationEditorLayer=void 0;var i=a(1),o=a(134),l=a(129),c=a(148),u=a(149);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _classPrivateFieldInitSpec(t,r,a){_checkPrivateRedeclaration(t,r);r.set(t,a)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(t,r,a){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return a}function _classStaticPrivateMethodGet(t,r,a){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return a}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateFieldSet(t,r,a){!function _classApplyDescriptorSet(t,r,a){if(r.set)r.set.call(t,a);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=a}}(t,_classExtractFieldDescriptor(t,r,"set"),a);return a}function _classExtractFieldDescriptor(t,r,a){if(!r.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return r.get(t)}var d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,_=new WeakMap,m=new WeakMap,b=new WeakMap,A=new WeakMap,k=new WeakSet,P=new WeakSet,S=new WeakSet,w=new WeakSet,x=function(){function AnnotationEditorLayer(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationEditorLayer);_classPrivateMethodInitSpec(this,w);_classPrivateMethodInitSpec(this,S);_classPrivateMethodInitSpec(this,P);_classPrivateMethodInitSpec(this,k);_classPrivateFieldInitSpec(this,A,{get:_get_hasTextLayer,set:void 0});_classPrivateFieldInitSpec(this,d,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,h,{writable:!0,value:this.pointerup.bind(this)});_classPrivateFieldInitSpec(this,p,{writable:!0,value:this.pointerdown.bind(this)});_classPrivateFieldInitSpec(this,v,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,y,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,g,{writable:!0,value:new WeakMap});_classPrivateFieldInitSpec(this,_,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,m,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,b,{writable:!0,value:new Set});if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;c.FreeTextEditor.initialize(t.l10n);u.InkEditor.initialize(t.l10n);t.uiManager.registerEditorTypes([c.FreeTextEditor,u.InkEditor])}_classPrivateFieldSet(this,m,t.uiManager);this.annotationStorage=t.annotationStorage;this.pageIndex=t.pageIndex;this.div=t.div;_classPrivateFieldGet(this,m).addLayer(this)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(AnnotationEditorLayer,[{key:"textLayerElements",get:function get(){var t=this.div.parentNode.getElementsByClassName("textLayer").item(0);if(!t)return(0,i.shadow)(this,"textLayerElements",null);var r=_classPrivateFieldGet(this,g).get(t);if(r)return r;if(0===(r=t.querySelectorAll(\'span[role="presentation"]\')).length)return(0,i.shadow)(this,"textLayerElements",null);(r=Array.from(r)).sort(_classStaticPrivateMethodGet(AnnotationEditorLayer,AnnotationEditorLayer,_compareElementPositions));_classPrivateFieldGet(this,g).set(t,r);return r}},{key:"updateToolbar",value:function updateToolbar(t){_classPrivateFieldGet(this,m).updateToolbar(t)}},{key:"updateMode",value:function updateMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_classPrivateFieldGet(this,m).getMode();_classPrivateMethodGet(this,w,_cleanup2).call(this);if(t===i.AnnotationEditorType.INK){this.addInkEditorIfNeeded(!1);this.disableClick()}else this.enableClick();_classPrivateFieldGet(this,m).unselectAll()}},{key:"addInkEditorIfNeeded",value:function addInkEditorIfNeeded(t){if(t||_classPrivateFieldGet(this,m).getMode()===i.AnnotationEditorType.INK){if(!t){var r,a=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).values());try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.isEmpty()){o.setInBackground();return}}}catch(t){a.e(t)}finally{a.f()}}_classPrivateMethodGet(this,S,_createAndAddNewEditor2).call(this,{offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function setEditingState(t){_classPrivateFieldGet(this,m).setEditingState(t)}},{key:"addCommands",value:function addCommands(t){_classPrivateFieldGet(this,m).addCommands(t)}},{key:"enable",value:function enable(){this.div.style.pointerEvents="auto";var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).values());try{for(r.s();!(t=r.n()).done;){t.value.enableEditing()}}catch(t){r.e(t)}finally{r.f()}}},{key:"disable",value:function disable(){this.div.style.pointerEvents="none";var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).values());try{for(r.s();!(t=r.n()).done;){t.value.disableEditing()}}catch(t){r.e(t)}finally{r.f()}}},{key:"setActiveEditor",value:function setActiveEditor(t){_classPrivateFieldGet(this,m).getActive()!==t&&_classPrivateFieldGet(this,m).setActiveEditor(t)}},{key:"enableClick",value:function enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(this,p));this.div.addEventListener("pointerup",_classPrivateFieldGet(this,h))}},{key:"disableClick",value:function disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(this,p));this.div.removeEventListener("pointerup",_classPrivateFieldGet(this,h))}},{key:"attach",value:function attach(t){_classPrivateFieldGet(this,v).set(t.id,t)}},{key:"detach",value:function detach(t){_classPrivateFieldGet(this,v).delete(t.id);this.removePointerInTextLayer(t)}},{key:"remove",value:function remove(t){var r=this;_classPrivateFieldGet(this,m).removeEditor(t);this.detach(t);this.annotationStorage.removeKey(t.id);t.div.style.display="none";setTimeout((function(){t.div.style.display="";t.div.remove();t.isAttachedToDOM=!1;document.activeElement===document.body&&_classPrivateFieldGet(r,m).focusMainContainer()}),0);_classPrivateFieldGet(this,y)||this.addInkEditorIfNeeded(!1)}},{key:"onTextLayerRendered",value:function onTextLayerRendered(){_classPrivateFieldGet(this,_).clear();var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,b));try{for(r.s();!(t=r.n()).done;){var a=t.value;a.isAttachedToDOM&&this.addPointerInTextLayer(a)}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldGet(this,b).clear()}},{key:"removePointerInTextLayer",value:function removePointerInTextLayer(t){var r;if(_classPrivateFieldGet(this,A)){var a=t.id,i=_classPrivateFieldGet(this,_).get(a);if(i){_classPrivateFieldGet(this,_).delete(a);var o=i.getAttribute("aria-owns");if(null!==(r=o)&&void 0!==r&&r.includes(a))if(o=o.split(" ").filter((function(t){return t!==a})).join(" "))i.setAttribute("aria-owns",o);else{i.removeAttribute("aria-owns");i.setAttribute("role","presentation")}}}else _classPrivateFieldGet(this,b).delete(t)}},{key:"addPointerInTextLayer",value:function addPointerInTextLayer(t){if(_classPrivateFieldGet(this,A)){this.removePointerInTextLayer(t);var r=this.textLayerElements;if(r){var a=t.contentDiv,i=t.getIdForTextLayer(),o=(0,l.binarySearchFirstItem)(r,(function(t){return _classStaticPrivateMethodGet(AnnotationEditorLayer,AnnotationEditorLayer,_compareElementPositions).call(AnnotationEditorLayer,a,t)<0})),c=r[Math.max(0,o-1)],u=c.getAttribute("aria-owns");null!=u&&u.includes(i)||c.setAttribute("aria-owns",u?"".concat(u," ").concat(i):i);c.removeAttribute("role");_classPrivateFieldGet(this,_).set(i,c)}}else _classPrivateFieldGet(this,b).add(t)}},{key:"moveDivInDOM",value:function moveDivInDOM(t){this.addPointerInTextLayer(t);var r=t.div,a=t.contentDiv;if(this.div.hasChildNodes()){var i=Array.from(this.div.childNodes).filter((function(t){return t!==r}));if(0!==i.length){var o=(0,l.binarySearchFirstItem)(i,(function(t){return _classStaticPrivateMethodGet(AnnotationEditorLayer,AnnotationEditorLayer,_compareElementPositions).call(AnnotationEditorLayer,a,t)<0}));0===o?i[0].before(r):i[o-1].after(r)}}else this.div.append(r)}},{key:"add",value:function add(t){_classPrivateMethodGet(this,k,_changeParent2).call(this,t);this.addToAnnotationStorage(t);_classPrivateFieldGet(this,m).addEditor(t);this.attach(t);if(!t.isAttachedToDOM){var r=t.render();this.div.append(r);t.isAttachedToDOM=!0}this.moveDivInDOM(t);t.onceAdded()}},{key:"addToAnnotationStorage",value:function addToAnnotationStorage(t){t.isEmpty()||this.annotationStorage.has(t.id)||this.annotationStorage.setValue(t.id,t)}},{key:"addOrRebuild",value:function addOrRebuild(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}},{key:"addANewEditor",value:function addANewEditor(t){var r=this;this.addCommands({cmd:function cmd(){r.addOrRebuild(t)},undo:function undo(){t.remove()},mustExec:!0})}},{key:"addUndoableEditor",value:function addUndoableEditor(t){var r=this;this.addCommands({cmd:function cmd(){r.addOrRebuild(t)},undo:function undo(){t.remove()},mustExec:!1})}},{key:"getNextId",value:function getNextId(){return _classPrivateFieldGet(this,m).getId()}},{key:"deserialize",value:function deserialize(t){switch(t.annotationType){case i.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(t,this);case i.AnnotationEditorType.INK:return u.InkEditor.deserialize(t,this)}return null}},{key:"setSelected",value:function setSelected(t){_classPrivateFieldGet(this,m).setSelected(t)}},{key:"toggleSelected",value:function toggleSelected(t){_classPrivateFieldGet(this,m).toggleSelected(t)}},{key:"isSelected",value:function isSelected(t){return _classPrivateFieldGet(this,m).isSelected(t)}},{key:"unselect",value:function unselect(t){_classPrivateFieldGet(this,m).unselect(t)}},{key:"pointerup",value:function pointerup(t){var r=o.KeyboardManager.platform.isMac;0!==t.button||t.ctrlKey&&r||t.target===this.div&&(_classPrivateFieldGet(this,d)?_classPrivateMethodGet(this,S,_createAndAddNewEditor2).call(this,t):_classPrivateFieldSet(this,d,!0))}},{key:"pointerdown",value:function pointerdown(t){var r=o.KeyboardManager.platform.isMac;if(!(0!==t.button||t.ctrlKey&&r)&&t.target===this.div){var a=_classPrivateFieldGet(this,m).getActive();_classPrivateFieldSet(this,d,!a||a.isEmpty())}}},{key:"drop",value:function drop(t){var r=t.dataTransfer.getData("text/plain"),a=_classPrivateFieldGet(this,m).getEditor(r);if(a){t.preventDefault();t.dataTransfer.dropEffect="move";_classPrivateMethodGet(this,k,_changeParent2).call(this,a);var i=this.div.getBoundingClientRect(),o=t.clientX-i.x,l=t.clientY-i.y;a.translate(o-a.startX,l-a.startY);this.moveDivInDOM(a);a.div.focus()}}},{key:"dragover",value:function dragover(t){t.preventDefault()}},{key:"destroy",value:function destroy(){var t;(null===(t=_classPrivateFieldGet(this,m).getActive())||void 0===t?void 0:t.parent)===this&&_classPrivateFieldGet(this,m).setActiveEditor(null);var r,a=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).values());try{for(a.s();!(r=a.n()).done;){var i=r.value;this.removePointerInTextLayer(i);i.isAttachedToDOM=!1;i.div.remove();i.parent=null}}catch(t){a.e(t)}finally{a.f()}_classPrivateFieldGet(this,_).clear();this.div=null;_classPrivateFieldGet(this,v).clear();_classPrivateFieldGet(this,b).clear();_classPrivateFieldGet(this,m).removeLayer(this)}},{key:"render",value:function render(t){this.viewport=t.viewport;(0,o.bindEvents)(this,this.div,["dragover","drop"]);this.setDimensions();var r,a=_createForOfIteratorHelper(_classPrivateFieldGet(this,m).getEditors(this.pageIndex));try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i)}}catch(t){a.e(t)}finally{a.f()}this.updateMode()}},{key:"update",value:function update(t){this.viewport=t.viewport;this.setDimensions();this.updateMode()}},{key:"scaleFactor",get:function get(){return this.viewport.scale}},{key:"pageDimensions",get:function get(){var t=_slicedToArray(this.viewport.viewBox,4),r=t[0],a=t[1];return[t[2]-r,t[3]-a]}},{key:"viewportBaseDimensions",get:function get(){var t=this.viewport,r=t.width,a=t.height;return t.rotation%180==0?[r,a]:[a,r]}},{key:"setDimensions",value:function setDimensions(){var t=this.viewport,r=t.width,a=t.height,i=t.rotation,o=i%180!=0,l=Math.floor(r)+"px",c=Math.floor(a)+"px";this.div.style.width=o?c:l;this.div.style.height=o?l:c;this.div.setAttribute("data-main-rotation",i)}}]);return AnnotationEditorLayer}();r.AnnotationEditorLayer=x;function _get_hasTextLayer(){return!!this.div.parentNode.querySelector(".textLayer .endOfContent")}function _changeParent2(t){var r;if(t.parent!==this){this.attach(t);t.pageIndex=this.pageIndex;null===(r=t.parent)||void 0===r||r.detach(t);t.parent=this;if(t.div&&t.isAttachedToDOM){t.div.remove();this.div.append(t.div)}}}function _compareElementPositions(t,r){var a=t.getBoundingClientRect(),i=r.getBoundingClientRect();return a.y+a.height<=i.y?-1:i.y+i.height<=a.y?1:a.x+a.width/2-(i.x+i.width/2)}function _createNewEditor2(t){switch(_classPrivateFieldGet(this,m).getMode()){case i.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(t);case i.AnnotationEditorType.INK:return new u.InkEditor(t)}return null}function _createAndAddNewEditor2(t){var r=this.getNextId(),a=_classPrivateMethodGet(this,P,_createNewEditor2).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY});a&&this.add(a);return a}function _cleanup2(){_classPrivateFieldSet(this,y,!0);var t,r=_createForOfIteratorHelper(_classPrivateFieldGet(this,v).values());try{for(r.s();!(t=r.n()).done;){var a=t.value;a.isEmpty()&&a.remove()}}catch(t){r.e(t)}finally{r.f()}_classPrivateFieldSet(this,y,!1)}!function _defineProperty(t,r,a){r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a;return t}(x,"_initialized",!1)},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.FreeTextEditor=void 0;var i=a(1),o=a(134),l=a(133);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.push.apply(a,i)}return a}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach((function(r){_defineProperty(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,a){var i=_superPropBase(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(arguments.length<3?t:a):o.value}};return _get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _defineProperty(t,r,a){r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a;return t}function _classPrivateFieldInitSpec(t,r,a){_checkPrivateRedeclaration(t,r);r.set(t,a)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classPrivateMethodGet(t,r,a){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return a}function _classPrivateFieldSet(t,r,a){!function _classApplyDescriptorSet(t,r,a){if(r.set)r.set.call(t,a);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=a}}(t,_classExtractFieldDescriptor(t,r,"set"),a);return a}function _classExtractFieldDescriptor(t,r,a){if(!r.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return r.get(t)}var c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,_=new WeakSet,m=new WeakSet,b=new WeakSet,A=new WeakSet,k=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(FreeTextEditor,t);var r=_createSuper(FreeTextEditor);function FreeTextEditor(t){var a;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,FreeTextEditor);_classPrivateMethodInitSpec(_assertThisInitialized(a=r.call(this,_objectSpread(_objectSpread({},t),{},{name:"freeTextEditor"}))),A);_classPrivateMethodInitSpec(_assertThisInitialized(a),b);_classPrivateMethodInitSpec(_assertThisInitialized(a),m);_classPrivateMethodInitSpec(_assertThisInitialized(a),_);_classPrivateFieldInitSpec(_assertThisInitialized(a),c,{writable:!0,value:a.editorDivBlur.bind(_assertThisInitialized(a))});_classPrivateFieldInitSpec(_assertThisInitialized(a),u,{writable:!0,value:a.editorDivFocus.bind(_assertThisInitialized(a))});_classPrivateFieldInitSpec(_assertThisInitialized(a),d,{writable:!0,value:a.editorDivKeydown.bind(_assertThisInitialized(a))});_classPrivateFieldInitSpec(_assertThisInitialized(a),h,{writable:!0,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(a),p,{writable:!0,value:""});_classPrivateFieldInitSpec(_assertThisInitialized(a),v,{writable:!0,value:""});_classPrivateFieldInitSpec(_assertThisInitialized(a),y,{writable:!0,value:!1});_classPrivateFieldInitSpec(_assertThisInitialized(a),g,{writable:!0,value:void 0});_classPrivateFieldSet(_assertThisInitialized(a),h,t.color||FreeTextEditor._defaultColor||l.AnnotationEditor._defaultLineColor);_classPrivateFieldSet(_assertThisInitialized(a),g,t.fontSize||FreeTextEditor._defaultFontSize);return a}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(FreeTextEditor,[{key:"updateParams",value:function updateParams(t,r){switch(t){case i.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,_,_updateFontSize2).call(this,r);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,m,_updateColor2).call(this,r)}}},{key:"propertiesToUpdate",get:function get(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,g)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,h)]]}},{key:"getInitialTranslation",value:function getInitialTranslation(){return[-FreeTextEditor._internalPadding*this.parent.scaleFactor,-(FreeTextEditor._internalPadding+_classPrivateFieldGet(this,g))*this.parent.scaleFactor]}},{key:"rebuild",value:function rebuild(){_get(_getPrototypeOf(FreeTextEditor.prototype),"rebuild",this).call(this);null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function enableEditMode(){if(!this.isInEditMode()){this.parent.setEditingState(!1);this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT);_get(_getPrototypeOf(FreeTextEditor.prototype),"enableEditMode",this).call(this);this.overlayDiv.classList.remove("enabled");this.editorDiv.contentEditable=!0;this.div.draggable=!1;this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(this,d));this.editorDiv.addEventListener("focus",_classPrivateFieldGet(this,u));this.editorDiv.addEventListener("blur",_classPrivateFieldGet(this,c))}}},{key:"disableEditMode",value:function disableEditMode(){if(this.isInEditMode()){this.parent.setEditingState(!0);_get(_getPrototypeOf(FreeTextEditor.prototype),"disableEditMode",this).call(this);this.overlayDiv.classList.add("enabled");this.editorDiv.contentEditable=!1;this.div.draggable=!0;this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(this,d));this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(this,u));this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(this,c));this.div.focus();this.isEditing=!1}}},{key:"focusin",value:function focusin(t){_get(_getPrototypeOf(FreeTextEditor.prototype),"focusin",this).call(this,t);t.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function onceAdded(){if(!this.width){this.enableEditMode();this.editorDiv.focus()}}},{key:"isEmpty",value:function isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}},{key:"remove",value:function remove(){this.isEditing=!1;this.parent.setEditingState(!0);_get(_getPrototypeOf(FreeTextEditor.prototype),"remove",this).call(this)}},{key:"commit",value:function commit(){_get(_getPrototypeOf(FreeTextEditor.prototype),"commit",this).call(this);if(!_classPrivateFieldGet(this,y)){_classPrivateFieldSet(this,y,!0);this.parent.addUndoableEditor(this)}this.disableEditMode();_classPrivateFieldSet(this,v,this.editorDiv.innerHTML);_classPrivateFieldSet(this,p,_classPrivateMethodGet(this,b,_extractText2).call(this).trimEnd());_classPrivateMethodGet(this,A,_setEditorDimensions2).call(this)}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return this.isInEditMode()}},{key:"dblclick",value:function dblclick(t){this.enableEditMode();this.editorDiv.focus()}},{key:"keydown",value:function keydown(t){if(t.target===this.div&&"Enter"===t.key){this.enableEditMode();this.editorDiv.focus()}}},{key:"editorDivKeydown",value:function editorDivKeydown(t){FreeTextEditor._keyboardManager.exec(this,t)}},{key:"editorDivFocus",value:function editorDivFocus(t){this.isEditing=!0}},{key:"editorDivBlur",value:function editorDivBlur(t){this.isEditing=!1}},{key:"disableEditing",value:function disableEditing(){this.editorDiv.setAttribute("role","comment");this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function enableEditing(){this.editorDiv.setAttribute("role","textbox");this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"getIdForTextLayer",value:function getIdForTextLayer(){return this.editorDiv.id}},{key:"render",value:function render(){var t,r,a=this;if(this.div)return this.div;if(this.width){t=this.x;r=this.y}_get(_getPrototypeOf(FreeTextEditor.prototype),"render",this).call(this);this.editorDiv=document.createElement("div");this.editorDiv.className="internal";this.editorDiv.setAttribute("id","".concat(this.id,"-editor"));this.enableEditing();FreeTextEditor._l10nPromise.get("editor_free_text_aria_label").then((function(t){var r;return null===(r=a.editorDiv)||void 0===r?void 0:r.setAttribute("aria-label",t)}));FreeTextEditor._l10nPromise.get("free_text_default_content").then((function(t){var r;return null===(r=a.editorDiv)||void 0===r?void 0:r.setAttribute("default-content",t)}));this.editorDiv.contentEditable=!0;var i=this.editorDiv.style;i.fontSize="calc(".concat(_classPrivateFieldGet(this,g),"px * var(--scale-factor))");i.color=_classPrivateFieldGet(this,h);this.div.append(this.editorDiv);this.overlayDiv=document.createElement("div");this.overlayDiv.classList.add("overlay","enabled");this.div.append(this.overlayDiv);(0,o.bindEvents)(this,this.div,["dblclick","keydown"]);if(this.width){var l=_slicedToArray(this.parent.viewportBaseDimensions,2),c=l[0],u=l[1];this.setAt(t*c,r*u,this.width*c,this.height*u);this.editorDiv.innerHTML=_classPrivateFieldGet(this,v);this.div.draggable=!0;this.editorDiv.contentEditable=!1}else{this.div.draggable=!1;this.editorDiv.contentEditable=!0}return this.div}},{key:"contentDiv",get:function get(){return this.editorDiv}},{key:"serialize",value:function serialize(){if(this.isEmpty())return null;var t=FreeTextEditor._internalPadding*this.parent.scaleFactor,r=this.getRect(t,t),a=l.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:i.AnnotationEditorType.FREETEXT,color:a,fontSize:_classPrivateFieldGet(this,g),value:_classPrivateFieldGet(this,p),pageIndex:this.parent.pageIndex,rect:r,rotation:this.rotation}}}],[{key:"initialize",value:function initialize(t){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map((function(r){return[r,t.get(r)]})));var r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function updateDefaultParams(t,r){switch(t){case i.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=r;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=r}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||l.AnnotationEditor._defaultLineColor]]}},{key:"deserialize",value:function deserialize(t,r){var a=_get(_getPrototypeOf(FreeTextEditor),"deserialize",this).call(this,t,r);_classPrivateFieldSet(a,g,t.fontSize);_classPrivateFieldSet(a,h,i.Util.makeHexColor.apply(i.Util,_toConsumableArray(t.color)));_classPrivateFieldSet(a,p,t.value);_classPrivateFieldSet(a,v,t.value.split("\\n").map((function(t){return"<div>".concat(t,"</div>")})).join(""));return a}}]);return FreeTextEditor}(l.AnnotationEditor);r.FreeTextEditor=k;function _updateFontSize2(t){var r=this,a=function setFontsize(t){r.editorDiv.style.fontSize="calc(".concat(t,"px * var(--scale-factor))");r.translate(0,-(t-_classPrivateFieldGet(r,g))*r.parent.scaleFactor);_classPrivateFieldSet(r,g,t);_classPrivateMethodGet(r,A,_setEditorDimensions2).call(r)},o=_classPrivateFieldGet(this,g);this.parent.addCommands({cmd:function cmd(){a(t)},undo:function undo(){a(o)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function _updateColor2(t){var r=this,a=_classPrivateFieldGet(this,h);this.parent.addCommands({cmd:function cmd(){_classPrivateFieldSet(r,h,t);r.editorDiv.style.color=t},undo:function undo(){_classPrivateFieldSet(r,h,a);r.editorDiv.style.color=a},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _extractText2(){var t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;for(var r=[],a=0,i=t.length;a<i;a++){var o=t[a].firstChild;"#text"===(null==o?void 0:o.nodeName)?r.push(o.data):r.push("")}return r.join("\\n")}function _setEditorDimensions2(){var t=_slicedToArray(this.parent.viewportBaseDimensions,2),r=t[0],a=t[1],i=this.div.getBoundingClientRect();this.width=i.width/r;this.height=i.height/a}_defineProperty(k,"_freeTextDefaultContent","");_defineProperty(k,"_l10nPromise",void 0);_defineProperty(k,"_internalPadding",0);_defineProperty(k,"_defaultColor",null);_defineProperty(k,"_defaultFontSize",10);_defineProperty(k,"_keyboardManager",new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],k.prototype.commitOrRemove]]))},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.InkEditor=void 0;Object.defineProperty(r,"fitCurve",{enumerable:!0,get:function get(){return l.fitCurve}});var i=a(1),o=a(133),l=a(150),c=a(134);function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.push.apply(a,i)}return a}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach((function(r){_defineProperty(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,a){var i=_superPropBase(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(arguments.length<3?t:a):o.value}};return _get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _classPrivateMethodInitSpec(t,r){_checkPrivateRedeclaration(t,r);r.add(t)}function _defineProperty(t,r,a){r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a;return t}function _classPrivateFieldInitSpec(t,r,a){_checkPrivateRedeclaration(t,r);r.set(t,a)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classStaticPrivateMethodGet(t,r,a){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return a}function _classPrivateFieldSet(t,r,a){!function _classApplyDescriptorSet(t,r,a){if(r.set)r.set.call(t,a);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=a}}(t,_classExtractFieldDescriptor(t,r,"set"),a);return a}function _classPrivateFieldGet(t,r){return function _classApplyDescriptorGet(t,r){if(r.get)return r.get.call(t);return r.value}(t,_classExtractFieldDescriptor(t,r,"get"))}function _classExtractFieldDescriptor(t,r,a){if(!r.has(t))throw new TypeError("attempted to "+a+" private field on non-instance");return r.get(t)}function _classPrivateMethodGet(t,r,a){if(!r.has(t))throw new TypeError("attempted to get private field on non-instance");return a}var u=16,d=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,_=new WeakMap,m=new WeakMap,b=new WeakMap,A=new WeakMap,k=new WeakMap,P=new WeakMap,S=new WeakMap,w=new WeakMap,x=new WeakSet,C=new WeakSet,T=new WeakSet,E=new WeakSet,I=new WeakSet,O=new WeakSet,M=new WeakSet,R=new WeakSet,D=new WeakSet,L=new WeakSet,G=new WeakSet,j=new WeakSet,N=new WeakSet,B=new WeakSet,W=new WeakSet,U=new WeakSet,H=new WeakSet,z=new WeakSet,V=new WeakSet,X=new WeakSet,Y=new WeakSet,K=new WeakSet,J=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}(InkEditor,t);var r=_createSuper(InkEditor);function InkEditor(t){var a;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,InkEditor);_classPrivateMethodInitSpec(_assertThisInitialized(a=r.call(this,_objectSpread(_objectSpread({},t),{},{name:"inkEditor"}))),K);_classPrivateMethodInitSpec(_assertThisInitialized(a),Y);_classPrivateMethodInitSpec(_assertThisInitialized(a),X);_classPrivateMethodInitSpec(_assertThisInitialized(a),V);_classPrivateMethodInitSpec(_assertThisInitialized(a),z);_classPrivateMethodInitSpec(_assertThisInitialized(a),H);_classPrivateMethodInitSpec(_assertThisInitialized(a),U);_classPrivateMethodInitSpec(_assertThisInitialized(a),W);_classPrivateMethodInitSpec(_assertThisInitialized(a),B);_classPrivateMethodInitSpec(_assertThisInitialized(a),N);_classPrivateMethodInitSpec(_assertThisInitialized(a),j);_classPrivateMethodInitSpec(_assertThisInitialized(a),G);_classPrivateMethodInitSpec(_assertThisInitialized(a),L);_classPrivateMethodInitSpec(_assertThisInitialized(a),D);_classPrivateMethodInitSpec(_assertThisInitialized(a),R);_classPrivateMethodInitSpec(_assertThisInitialized(a),M);_classPrivateMethodInitSpec(_assertThisInitialized(a),O);_classPrivateMethodInitSpec(_assertThisInitialized(a),I);_classPrivateMethodInitSpec(_assertThisInitialized(a),E);_classPrivateMethodInitSpec(_assertThisInitialized(a),T);_classPrivateMethodInitSpec(_assertThisInitialized(a),C);_classPrivateMethodInitSpec(_assertThisInitialized(a),x);_classPrivateFieldInitSpec(_assertThisInitialized(a),d,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(a),h,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(a),p,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(a),v,{writable:!0,value:a.canvasPointermove.bind(_assertThisInitialized(a))});_classPrivateFieldInitSpec(_assertThisInitialized(a),y,{writable:!0,value:a.canvasPointerleave.bind(_assertThisInitialized(a))});_classPrivateFieldInitSpec(_assertThisInitialized(a),g,{writable:!0,value:a.canvasPointerup.bind(_assertThisInitialized(a))});_classPrivateFieldInitSpec(_assertThisInitialized(a),_,{writable:!0,value:a.canvasPointerdown.bind(_assertThisInitialized(a))});_classPrivateFieldInitSpec(_assertThisInitialized(a),m,{writable:!0,value:!1});_classPrivateFieldInitSpec(_assertThisInitialized(a),b,{writable:!0,value:!1});_classPrivateFieldInitSpec(_assertThisInitialized(a),A,{writable:!0,value:null});_classPrivateFieldInitSpec(_assertThisInitialized(a),k,{writable:!0,value:null});_classPrivateFieldInitSpec(_assertThisInitialized(a),P,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(a),S,{writable:!0,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(a),w,{writable:!0,value:null});a.color=t.color||null;a.thickness=t.thickness||null;a.opacity=t.opacity||null;a.paths=[];a.bezierPath2D=[];a.currentPath=[];a.scaleFactor=1;a.translationX=a.translationY=0;a.x=0;a.y=0;return a}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(InkEditor,[{key:"updateParams",value:function updateParams(t,r){switch(t){case i.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,x,_updateThickness2).call(this,r);break;case i.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,C,_updateColor2).call(this,r);break;case i.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,T,_updateOpacity2).call(this,r)}}},{key:"propertiesToUpdate",get:function get(){var t;return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||o.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!==(t=this.opacity)&&void 0!==t?t:InkEditor._defaultOpacity))]]}},{key:"rebuild",value:function rebuild(){_get(_getPrototypeOf(InkEditor.prototype),"rebuild",this).call(this);if(null!==this.div){if(!this.canvas){_classPrivateMethodGet(this,G,_createCanvas2).call(this);_classPrivateMethodGet(this,j,_createObserver2).call(this)}if(!this.isAttachedToDOM){this.parent.add(this);_classPrivateMethodGet(this,N,_setCanvasDims2).call(this)}_classPrivateMethodGet(this,Y,_fitToContent2).call(this)}}},{key:"remove",value:function remove(){if(null!==this.canvas){this.isEmpty()||this.commit();this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;_classPrivateFieldGet(this,k).disconnect();_classPrivateFieldSet(this,k,null);_get(_getPrototypeOf(InkEditor.prototype),"remove",this).call(this)}}},{key:"enableEditMode",value:function enableEditMode(){if(!_classPrivateFieldGet(this,m)&&null!==this.canvas){_get(_getPrototypeOf(InkEditor.prototype),"enableEditMode",this).call(this);this.div.draggable=!1;this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,_));this.canvas.addEventListener("pointerup",_classPrivateFieldGet(this,g))}}},{key:"disableEditMode",value:function disableEditMode(){if(this.isInEditMode()&&null!==this.canvas){_get(_getPrototypeOf(InkEditor.prototype),"disableEditMode",this).call(this);this.div.draggable=!this.isEmpty();this.div.classList.remove("editing");this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,_));this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(this,g))}}},{key:"onceAdded",value:function onceAdded(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}},{key:"commit",value:function commit(){if(!_classPrivateFieldGet(this,m)){_get(_getPrototypeOf(InkEditor.prototype),"commit",this).call(this);this.isEditing=!1;this.disableEditMode();this.setInForeground();_classPrivateFieldSet(this,m,!0);this.div.classList.add("disabled");_classPrivateMethodGet(this,Y,_fitToContent2).call(this,!0);this.parent.addInkEditorIfNeeded(!0);this.parent.moveDivInDOM(this);this.div.focus()}}},{key:"focusin",value:function focusin(t){_get(_getPrototypeOf(InkEditor.prototype),"focusin",this).call(this,t);this.enableEditMode()}},{key:"canvasPointerdown",value:function canvasPointerdown(t){if(0===t.button&&this.isInEditMode()&&!_classPrivateFieldGet(this,m)){this.setInForeground();"mouse"!==t.type&&this.div.focus();t.stopPropagation();this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(this,y));this.canvas.addEventListener("pointermove",_classPrivateFieldGet(this,v));_classPrivateMethodGet(this,O,_startDrawing2).call(this,t.offsetX,t.offsetY)}}},{key:"canvasPointermove",value:function canvasPointermove(t){t.stopPropagation();_classPrivateMethodGet(this,M,_draw2).call(this,t.offsetX,t.offsetY)}},{key:"canvasPointerup",value:function canvasPointerup(t){if(0===t.button&&this.isInEditMode()&&0!==this.currentPath.length){t.stopPropagation();_classPrivateMethodGet(this,L,_endDrawing2).call(this,t);this.setInBackground()}}},{key:"canvasPointerleave",value:function canvasPointerleave(t){_classPrivateMethodGet(this,L,_endDrawing2).call(this,t);this.setInBackground()}},{key:"render",value:function render(){var t,r,a=this;if(this.div)return this.div;if(this.width){t=this.x;r=this.y}_get(_getPrototypeOf(InkEditor.prototype),"render",this).call(this);InkEditor._l10nPromise.get("editor_ink_aria_label").then((function(t){var r;return null===(r=a.div)||void 0===r?void 0:r.setAttribute("aria-label",t)}));var i=_slicedToArray(_classPrivateMethodGet(this,E,_getInitialBBox2).call(this),4),o=i[0],l=i[1],c=i[2],u=i[3];this.setAt(o,l,0,0);this.setDims(c,u);_classPrivateMethodGet(this,G,_createCanvas2).call(this);if(this.width){var d=_slicedToArray(this.parent.viewportBaseDimensions,2),h=d[0],p=d[1];this.setAt(t*h,r*p,this.width*h,this.height*p);_classPrivateFieldSet(this,b,!0);_classPrivateMethodGet(this,N,_setCanvasDims2).call(this);this.setDims(this.width*h,this.height*p);_classPrivateMethodGet(this,D,_redraw2).call(this);_classPrivateMethodGet(this,K,_setMinDims2).call(this);this.div.classList.add("disabled")}else{this.div.classList.add("editing");this.enableEditMode()}_classPrivateMethodGet(this,j,_createObserver2).call(this);return this.div}},{key:"setDimensions",value:function setDimensions(t,r){var a=Math.round(t),i=Math.round(r);if(_classPrivateFieldGet(this,P)!==a||_classPrivateFieldGet(this,S)!==i){_classPrivateFieldSet(this,P,a);_classPrivateFieldSet(this,S,i);this.canvas.style.visibility="hidden";if(_classPrivateFieldGet(this,d)&&Math.abs(_classPrivateFieldGet(this,d)-t/r)>.01){r=Math.ceil(t/_classPrivateFieldGet(this,d));this.setDims(t,r)}var o=_slicedToArray(this.parent.viewportBaseDimensions,2),l=o[0],c=o[1];this.width=t/l;this.height=r/c;_classPrivateFieldGet(this,m)&&_classPrivateMethodGet(this,B,_setScaleFactor2).call(this,t,r);_classPrivateMethodGet(this,N,_setCanvasDims2).call(this);_classPrivateMethodGet(this,D,_redraw2).call(this);this.canvas.style.visibility="visible"}}},{key:"serialize",value:function serialize(){if(this.isEmpty())return null;var t=this.getRect(0,0),r=this.rotation%180==0?t[3]-t[1]:t[2]-t[0],a=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:a,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,U,_serializePaths2).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,r),pageIndex:this.parent.pageIndex,rect:t,rotation:this.rotation}}}],[{key:"initialize",value:function initialize(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map((function(r){return[r,t.get(r)]})))}},{key:"updateDefaultParams",value:function updateDefaultParams(t,r){switch(t){case i.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=r;break;case i.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=r;break;case i.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=r/100}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||o.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*InkEditor._defaultOpacity)]]}},{key:"deserialize",value:function deserialize(t,r){var a=_get(_getPrototypeOf(InkEditor),"deserialize",this).call(this,t,r);a.thickness=t.thickness;a.color=i.Util.makeHexColor.apply(i.Util,_toConsumableArray(t.color));a.opacity=t.opacity;var o=_slicedToArray(r.pageDimensions,2),l=o[0],c=o[1],u=a.width*l,v=a.height*c,y=r.scaleFactor,g=t.thickness/2;_classPrivateFieldSet(a,d,u/v);_classPrivateFieldSet(a,m,!0);_classPrivateFieldSet(a,P,Math.round(u));_classPrivateFieldSet(a,S,Math.round(v));var _,b=_createForOfIteratorHelper(t.paths);try{for(b.s();!(_=b.n()).done;){var A=_.value.bezier,k=[];a.paths.push(k);for(var w=y*(A[0]-g),x=y*(v-A[1]-g),C=2,T=A.length;C<T;C+=6){var E=y*(A[C]-g),I=y*(v-A[C+1]-g),O=y*(A[C+2]-g),M=y*(v-A[C+3]-g),R=y*(A[C+4]-g),D=y*(v-A[C+5]-g);k.push([[w,x],[E,I],[O,M],[R,D]]);w=R;x=D}var L=_classStaticPrivateMethodGet(this,InkEditor,_buildPath2D).call(this,k);a.bezierPath2D.push(L)}}catch(t){b.e(t)}finally{b.f()}var G=_classPrivateMethodGet(a,V,_getBbox2).call(a);_classPrivateFieldSet(a,p,G[2]-G[0]);_classPrivateFieldSet(a,h,G[3]-G[1]);_classPrivateMethodGet(a,B,_setScaleFactor2).call(a,u,v);return a}}]);return InkEditor}(o.AnnotationEditor);r.InkEditor=J;function _updateThickness2(t){var r=this,a=this.thickness;this.parent.addCommands({cmd:function cmd(){r.thickness=t;_classPrivateMethodGet(r,Y,_fitToContent2).call(r)},undo:function undo(){r.thickness=a;_classPrivateMethodGet(r,Y,_fitToContent2).call(r)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function _updateColor2(t){var r=this,a=this.color;this.parent.addCommands({cmd:function cmd(){r.color=t;_classPrivateMethodGet(r,D,_redraw2).call(r)},undo:function undo(){r.color=a;_classPrivateMethodGet(r,D,_redraw2).call(r)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _updateOpacity2(t){var r=this;t/=100;var a=this.opacity;this.parent.addCommands({cmd:function cmd(){r.opacity=t;_classPrivateMethodGet(r,D,_redraw2).call(r)},undo:function undo(){r.opacity=a;_classPrivateMethodGet(r,D,_redraw2).call(r)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function _getInitialBBox2(){var t=this.parent.viewport,r=t.width,a=t.height;switch(t.rotation){case 90:return[0,r,r,a];case 180:return[r,a,r,a];case 270:return[a,0,r,a];default:return[0,0,r,a]}}function _setStroke2(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor;this.ctx.lineCap="round";this.ctx.lineJoin="round";this.ctx.miterLimit=10;this.ctx.strokeStyle="".concat(this.color).concat((0,c.opacityToHex)(this.opacity))}function _startDrawing2(t,r){var a=this;this.isEditing=!0;if(!_classPrivateFieldGet(this,b)){var i;_classPrivateFieldSet(this,b,!0);_classPrivateMethodGet(this,N,_setCanvasDims2).call(this);this.thickness||(this.thickness=J._defaultThickness);this.color||(this.color=J._defaultColor||o.AnnotationEditor._defaultLineColor);null!==(i=this.opacity)&&void 0!==i||(this.opacity=J._defaultOpacity)}this.currentPath.push([t,r]);_classPrivateFieldSet(this,A,null);_classPrivateMethodGet(this,I,_setStroke2).call(this);this.ctx.beginPath();this.ctx.moveTo(t,r);_classPrivateFieldSet(this,w,(function(){if(_classPrivateFieldGet(a,w)){if(_classPrivateFieldGet(a,A)){var t;if(a.isEmpty()){a.ctx.setTransform(1,0,0,1,0,0);a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height)}else _classPrivateMethodGet(a,D,_redraw2).call(a);(t=a.ctx).lineTo.apply(t,_toConsumableArray(_classPrivateFieldGet(a,A)));_classPrivateFieldSet(a,A,null);a.ctx.stroke()}window.requestAnimationFrame(_classPrivateFieldGet(a,w))}}));window.requestAnimationFrame(_classPrivateFieldGet(this,w))}function _draw2(t,r){var a=_slicedToArray(this.currentPath.at(-1),2),i=a[0],o=a[1];if(t!==i||r!==o){this.currentPath.push([t,r]);_classPrivateFieldSet(this,A,[t,r])}}function _stopDrawing2(t,r){var a=this;this.ctx.closePath();_classPrivateFieldSet(this,w,null);t=Math.min(Math.max(t,0),this.canvas.width);r=Math.min(Math.max(r,0),this.canvas.height);var i,o=_slicedToArray(this.currentPath.at(-1),2),c=o[0],u=o[1];t===c&&r===u||this.currentPath.push([t,r]);if(1!==this.currentPath.length)i=(0,l.fitCurve)(this.currentPath,30,null);else{var d=[t,r];i=[[d,d.slice(),d.slice(),d]]}var h=_classStaticPrivateMethodGet(J,J,_buildPath2D).call(J,i);this.currentPath.length=0;this.parent.addCommands({cmd:function cmd(){a.paths.push(i);a.bezierPath2D.push(h);a.rebuild()},undo:function undo(){a.paths.pop();a.bezierPath2D.pop();if(0===a.paths.length)a.remove();else{if(!a.canvas){_classPrivateMethodGet(a,G,_createCanvas2).call(a);_classPrivateMethodGet(a,j,_createObserver2).call(a)}_classPrivateMethodGet(a,Y,_fitToContent2).call(a)}},mustExec:!0})}function _redraw2(){if(this.isEmpty())_classPrivateMethodGet(this,W,_updateTransform2).call(this);else{_classPrivateMethodGet(this,I,_setStroke2).call(this);var t=this.canvas,r=this.ctx;r.setTransform(1,0,0,1,0,0);r.clearRect(0,0,t.width,t.height);_classPrivateMethodGet(this,W,_updateTransform2).call(this);var a,i=_createForOfIteratorHelper(this.bezierPath2D);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.stroke(o)}}catch(t){i.e(t)}finally{i.f()}}}function _endDrawing2(t){_classPrivateMethodGet(this,R,_stopDrawing2).call(this,t.offsetX,t.offsetY);this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(this,y));this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(this,v));this.parent.addToAnnotationStorage(this)}function _createCanvas2(){var t=this;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=0;this.canvas.className="inkEditorCanvas";J._l10nPromise.get("editor_ink_canvas_aria_label").then((function(r){var a;return null===(a=t.canvas)||void 0===a?void 0:a.setAttribute("aria-label",r)}));this.div.append(this.canvas);this.ctx=this.canvas.getContext("2d")}function _createObserver2(){var t=this;_classPrivateFieldSet(this,k,new ResizeObserver((function(r){var a=r[0].contentRect;a.width&&a.height&&t.setDimensions(a.width,a.height)})));_classPrivateFieldGet(this,k).observe(this.div)}function _setCanvasDims2(){if(_classPrivateFieldGet(this,b)){var t=_slicedToArray(this.parent.viewportBaseDimensions,2),r=t[0],a=t[1];this.canvas.width=Math.ceil(this.width*r);this.canvas.height=Math.ceil(this.height*a);_classPrivateMethodGet(this,W,_updateTransform2).call(this)}}function _setScaleFactor2(t,r){var a=_classPrivateMethodGet(this,X,_getPadding2).call(this),i=(t-a)/_classPrivateFieldGet(this,p),o=(r-a)/_classPrivateFieldGet(this,h);this.scaleFactor=Math.min(i,o)}function _updateTransform2(){var t=_classPrivateMethodGet(this,X,_getPadding2).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}function _buildPath2D(t){for(var r=new Path2D,a=0,i=t.length;a<i;a++){var o=_slicedToArray(t[a],4),l=o[0],c=o[1],u=o[2],d=o[3];0===a&&r.moveTo.apply(r,_toConsumableArray(l));r.bezierCurveTo(c[0],c[1],u[0],u[1],d[0],d[1])}return r}function _serializePaths2(t,r,a,i){var o,l,c,u=[],d=this.thickness/2,h=_createForOfIteratorHelper(this.paths);try{for(h.s();!(c=h.n()).done;){var p=c.value;o=[];l=[];for(var v=0,y=p.length;v<y;v++){var g=_slicedToArray(p[v],4),_=g[0],m=g[1],b=g[2],A=g[3],k=t*(_[0]+r)+d,P=i-t*(_[1]+a)-d,S=t*(m[0]+r)+d,w=i-t*(m[1]+a)-d,x=t*(b[0]+r)+d,C=i-t*(b[1]+a)-d,T=t*(A[0]+r)+d,E=i-t*(A[1]+a)-d;if(0===v){o.push(k,P);l.push(k,P)}o.push(S,w,x,C,T,E);_classPrivateMethodGet(this,H,_extractPointsOnBezier2).call(this,k,P,S,w,x,C,T,E,4,l)}u.push({bezier:o,points:l})}}catch(t){h.e(t)}finally{h.f()}return u}function _extractPointsOnBezier2(t,r,a,i,o,l,c,u,d,h){if(_classPrivateMethodGet(this,z,_isAlmostFlat2).call(this,t,r,a,i,o,l,c,u))h.push(c,u);else{for(var p=1;p<d-1;p++){var v=p/d,y=1-v,g=v*t+y*a,_=v*r+y*i,m=v*a+y*o,b=v*i+y*l;g=v*(g=v*g+y*m)+y*(m=v*m+y*(v*o+y*c));_=v*(_=v*_+y*b)+y*(b=v*b+y*(v*l+y*u));h.push(g,_)}h.push(c,u)}}function _isAlmostFlat2(t,r,a,i,o,l,c,u){var d=Math.pow(3*a-2*t-c,2),h=Math.pow(3*i-2*r-u,2),p=Math.pow(3*o-t-2*c,2),v=Math.pow(3*l-r-2*u,2);return Math.max(d,p)+Math.max(h,v)<=10}function _getBbox2(){var t,r=1/0,a=-1/0,o=1/0,l=-1/0,c=_createForOfIteratorHelper(this.paths);try{for(c.s();!(t=c.n()).done;){var u,d=_createForOfIteratorHelper(t.value);try{for(d.s();!(u=d.n()).done;){var h=_slicedToArray(u.value,4),p=h[0],v=h[1],y=h[2],g=h[3],_=i.Util.bezierBoundingBox.apply(i.Util,_toConsumableArray(p).concat(_toConsumableArray(v),_toConsumableArray(y),_toConsumableArray(g)));r=Math.min(r,_[0]);o=Math.min(o,_[1]);a=Math.max(a,_[2]);l=Math.max(l,_[3])}}catch(t){d.e(t)}finally{d.f()}}}catch(t){c.e(t)}finally{c.f()}return[r,o,a,l]}function _getPadding2(){return _classPrivateFieldGet(this,m)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function _fitToContent2(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isEmpty())if(_classPrivateFieldGet(this,m)){var r=_classPrivateMethodGet(this,V,_getBbox2).call(this),a=_classPrivateMethodGet(this,X,_getPadding2).call(this);_classPrivateFieldSet(this,p,Math.max(u,r[2]-r[0]));_classPrivateFieldSet(this,h,Math.max(u,r[3]-r[1]));var i=Math.ceil(a+_classPrivateFieldGet(this,p)*this.scaleFactor),o=Math.ceil(a+_classPrivateFieldGet(this,h)*this.scaleFactor),l=_slicedToArray(this.parent.viewportBaseDimensions,2),c=l[0],v=l[1];this.width=i/c;this.height=o/v;_classPrivateFieldSet(this,d,i/o);_classPrivateMethodGet(this,K,_setMinDims2).call(this);var y=this.translationX,g=this.translationY;this.translationX=-r[0];this.translationY=-r[1];_classPrivateMethodGet(this,N,_setCanvasDims2).call(this);_classPrivateMethodGet(this,D,_redraw2).call(this);_classPrivateFieldSet(this,P,i);_classPrivateFieldSet(this,S,o);this.setDims(i,o);var _=t?a/this.scaleFactor/2:0;this.translate(y-this.translationX-_,g-this.translationY-_)}else _classPrivateMethodGet(this,D,_redraw2).call(this)}function _setMinDims2(){var t=this.div.style;if(_classPrivateFieldGet(this,d)>=1){t.minHeight="".concat(u,"px");t.minWidth="".concat(Math.round(_classPrivateFieldGet(this,d)*u),"px")}else{t.minWidth="".concat(u,"px");t.minHeight="".concat(Math.round(u/_classPrivateFieldGet(this,d)),"px")}}_defineProperty(J,"_defaultColor",null);_defineProperty(J,"_defaultOpacity",1);_defineProperty(J,"_defaultThickness",1);_defineProperty(J,"_l10nPromise",void 0)},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.fitCurve=void 0;var i=a(151);r.fitCurve=i},t=>{"use strict";function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function fitCubic(t,r,i,o,l){var c,u,d,h,p,v,y,g,_,m,b,A,k;if(2===t.length){A=a.vectorLen(a.subtract(t[0],t[1]))/3;return[c=[t[0],a.addArrays(t[0],a.mulItems(r,A)),a.addArrays(t[1],a.mulItems(i,A)),t[1]]]}u=function chordLengthParameterize(t){var r,i,o,l=[];t.forEach((function(t,c){r=c?i+a.vectorLen(a.subtract(t,o)):0;l.push(r);i=r;o=t}));return l=l.map((function(t){return t/i}))}(t);var P=_slicedToArray(generateAndReport(t,u,u,r,i,l),3);c=P[0];h=P[1];v=P[2];if(0===h||h<o)return[c];if(h<o*o){d=u;p=h;y=v;for(k=0;k<20;k++){var S=_slicedToArray(generateAndReport(t,u,d=reparameterize(c,t,d),r,i,l),3);c=S[0];h=S[1];v=S[2];if(h<o)return[c];if(v===y){var w=h/p;if(w>.9999&&w<1.0001)break}p=h;y=v}}b=[];if((g=a.subtract(t[v-1],t[v+1])).every((function(t){return 0===t}))){var x=[-(g=a.subtract(t[v-1],t[v]))[1],g[0]];g[0]=x[0];g[1]=x[1]}_=a.normalize(g);m=a.mulItems(_,-1);return b=(b=b.concat(fitCubic(t.slice(0,v+1),r,_,o,l))).concat(fitCubic(t.slice(v),m,i,o,l))}function generateAndReport(t,o,l,c,u,d){var h,p,v;h=function generateBezier(t,r,o,l){var c,u,d,h,p,v,y,g,_,m,b,A,k,P,S,w,x,C=t[0],T=t[t.length-1];c=[C,null,null,T];u=a.zeros_Xx2x2(r.length);for(k=0,P=r.length;k<P;k++){x=1-(w=r[k]);(d=u[k])[0]=a.mulItems(o,3*w*(x*x));d[1]=a.mulItems(l,3*x*(w*w))}h=[[0,0],[0,0]];p=[0,0];for(k=0,P=t.length;k<P;k++){w=r[k];d=u[k];h[0][0]+=a.dot(d[0],d[0]);h[0][1]+=a.dot(d[0],d[1]);h[1][0]+=a.dot(d[0],d[1]);h[1][1]+=a.dot(d[1],d[1]);S=a.subtract(t[k],i.q([C,C,T,T],w));p[0]+=a.dot(d[0],S);p[1]+=a.dot(d[1],S)}v=h[0][0]*h[1][1]-h[1][0]*h[0][1];y=h[0][0]*p[1]-h[1][0]*p[0];g=p[0]*h[1][1]-p[1]*h[0][1];_=0===v?0:g/v;m=0===v?0:y/v;A=a.vectorLen(a.subtract(C,T));if(_<(b=1e-6*A)||m<b){c[1]=a.addArrays(C,a.mulItems(o,A/3));c[2]=a.addArrays(T,a.mulItems(l,A/3))}else{c[1]=a.addArrays(C,a.mulItems(o,_));c[2]=a.addArrays(T,a.mulItems(l,m))}return c}(t,l,c,u);var y=function computeMaxError(t,o,l){var c,u,d,h,p,v,y,g;u=0;d=Math.floor(t.length/2);var _=r(o,10);for(p=0,v=t.length;p<v;p++){y=t[p];g=find_t(o,l[p],_,10);if((c=(h=a.subtract(i.q(o,g),y))[0]*h[0]+h[1]*h[1])>u){u=c;d=p}}return[u,d]}(t,h,o),g=_slicedToArray(y,2);p=g[0];v=g[1];d&&d({bez:h,points:t,params:o,maxErr:p,maxPoint:v});return[h,p,v]}function reparameterize(t,r,a){return a.map((function(a,i){return newtonRaphsonRootFind(t,r[i],a)}))}function newtonRaphsonRootFind(t,r,o){var l=a.subtract(i.q(t,o),r),c=i.qprime(t,o),u=a.mulMatrix(l,c),d=a.sum(a.squareItems(c))+2*a.mulMatrix(l,i.qprimeprime(t,o));return 0===d?o:o-u/d}var r=function mapTtoRelativeDistances(t,r){for(var o,l=[0],c=t[0],u=0,d=1;d<=r;d++){o=i.q(t,d/r);u+=a.vectorLen(a.subtract(o,c));l.push(u);c=o}return l=l.map((function(t){return t/u}))};function find_t(t,r,a,i){if(r<0)return 0;if(r>1)return 1;for(var o,l,c,u,d=1;d<=i;d++)if(r<=a[d]){c=(d-1)/i;l=d/i;u=(r-(o=a[d-1]))/(a[d]-o)*(l-c)+c;break}return u}function createTangent(t,r){return a.normalize(a.subtract(t,r))}var a=function(){function maths(){_classCallCheck(this,maths)}_createClass(maths,null,[{key:"zeros_Xx2x2",value:function zeros_Xx2x2(t){for(var r=[];t--;)r.push([0,0]);return r}},{key:"mulItems",value:function mulItems(t,r){return t.map((function(t){return t*r}))}},{key:"mulMatrix",value:function mulMatrix(t,r){return t.reduce((function(t,a,i){return t+a*r[i]}),0)}},{key:"subtract",value:function subtract(t,r){return t.map((function(t,a){return t-r[a]}))}},{key:"addArrays",value:function addArrays(t,r){return t.map((function(t,a){return t+r[a]}))}},{key:"addItems",value:function addItems(t,r){return t.map((function(t){return t+r}))}},{key:"sum",value:function sum(t){return t.reduce((function(t,r){return t+r}))}},{key:"dot",value:function dot(t,r){return maths.mulMatrix(t,r)}},{key:"vectorLen",value:function vectorLen(t){return Math.hypot.apply(Math,_toConsumableArray(t))}},{key:"divItems",value:function divItems(t,r){return t.map((function(t){return t/r}))}},{key:"squareItems",value:function squareItems(t){return t.map((function(t){return t*t}))}},{key:"normalize",value:function normalize(t){return this.divItems(t,this.vectorLen(t))}}]);return maths}(),i=function(){function bezier(){_classCallCheck(this,bezier)}_createClass(bezier,null,[{key:"q",value:function q(t,r){var i=1-r,o=a.mulItems(t[0],i*i*i),l=a.mulItems(t[1],3*i*i*r),c=a.mulItems(t[2],3*i*r*r),u=a.mulItems(t[3],r*r*r);return a.addArrays(a.addArrays(o,l),a.addArrays(c,u))}},{key:"qprime",value:function qprime(t,r){var i=1-r,o=a.mulItems(a.subtract(t[1],t[0]),3*i*i),l=a.mulItems(a.subtract(t[2],t[1]),6*i*r),c=a.mulItems(a.subtract(t[3],t[2]),3*r*r);return a.addArrays(a.addArrays(o,l),c)}},{key:"qprimeprime",value:function qprimeprime(t,r){return a.addArrays(a.mulItems(a.addArrays(a.subtract(t[2],a.mulItems(t[1],2)),t[0]),6*(1-r)),a.mulItems(a.addArrays(a.subtract(t[3],a.mulItems(t[2],2)),t[1]),6*r))}}]);return bezier}();t.exports=function fitCurve(t,r,a){if(!Array.isArray(t))throw new TypeError("First argument should be an array");t.forEach((function(r){if(!Array.isArray(r)||r.some((function(t){return"number"!=typeof t}))||r.length!==t[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}));if((t=t.filter((function(r,a){return 0===a||!r.every((function(r,i){return r===t[a-1][i]}))}))).length<2)return[];var i=t.length,o=createTangent(t[1],t[0]),l=createTangent(t[i-2],t[i-1]);return fitCubic(t,o,l,r,a)};t.exports.fitCubic=fitCubic;t.exports.createTangent=createTangent},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationLayer=void 0;var i=a(1),o=a(129),l=a(132),c=a(153),u=a(154);function _classStaticPrivateMethodGet(t,r,a){!function _classCheckPrivateStaticAccess(t,r){if(t!==r)throw new TypeError("Private static access of wrong provenance")}(t,r);return a}function _get(){_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,a){var i=_superPropBase(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(arguments.length<3?t:a):o.value}};return _get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _defineProperty(t,r,a){r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a;return t}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}var d=1e3,h=new WeakSet;function getRectDims(t){return{width:t[2]-t[0],height:t[3]-t[1]}}var p=function(){function AnnotationElementFactory(){_classCallCheck(this,AnnotationElementFactory)}_createClass(AnnotationElementFactory,null,[{key:"create",value:function create(t){switch(t.data.annotationType){case i.AnnotationType.LINK:return new y(t);case i.AnnotationType.TEXT:return new g(t);case i.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new m(t);case"Btn":return t.data.radioButton?new A(t):t.data.checkBox?new b(t):new k(t);case"Ch":return new P(t)}return new _(t);case i.AnnotationType.POPUP:return new S(t);case i.AnnotationType.FREETEXT:return new x(t);case i.AnnotationType.LINE:return new C(t);case i.AnnotationType.SQUARE:return new T(t);case i.AnnotationType.CIRCLE:return new E(t);case i.AnnotationType.POLYLINE:return new I(t);case i.AnnotationType.CARET:return new M(t);case i.AnnotationType.INK:return new R(t);case i.AnnotationType.POLYGON:return new O(t);case i.AnnotationType.HIGHLIGHT:return new D(t);case i.AnnotationType.UNDERLINE:return new L(t);case i.AnnotationType.SQUIGGLY:return new G(t);case i.AnnotationType.STRIKEOUT:return new j(t);case i.AnnotationType.STAMP:return new N(t);case i.AnnotationType.FILEATTACHMENT:return new B(t);default:return new v(t)}}}]);return AnnotationElementFactory}(),v=function(){function AnnotationElement(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.isRenderable,i=void 0!==a&&a,o=r.ignoreBorder,l=void 0!==o&&o,c=r.createQuadrilaterals,u=void 0!==c&&c;_classCallCheck(this,AnnotationElement);this.isRenderable=i;this.data=t.data;this.layer=t.layer;this.page=t.page;this.viewport=t.viewport;this.linkService=t.linkService;this.downloadManager=t.downloadManager;this.imageResourcesPath=t.imageResourcesPath;this.renderForms=t.renderForms;this.svgFactory=t.svgFactory;this.annotationStorage=t.annotationStorage;this.enableScripting=t.enableScripting;this.hasJSActions=t.hasJSActions;this._fieldObjects=t.fieldObjects;this._mouseState=t.mouseState;i&&(this.container=this._createContainer(l));u&&(this.quadrilaterals=this._createQuadrilaterals(l))}_createClass(AnnotationElement,[{key:"_createContainer",value:function _createContainer(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.data,a=this.page,o=this.viewport,l=document.createElement("section"),c=getRectDims(r.rect),u=c.width,d=c.height,h=_slicedToArray(o.viewBox,4),p=h[0],v=h[1],y=h[2],g=h[3],_=y-p,m=g-v;l.setAttribute("data-annotation-id",r.id);var b=i.Util.normalizeRect([r.rect[0],a.view[3]-r.rect[1]+a.view[1],r.rect[2],a.view[3]-r.rect[3]+a.view[1]]);if(!t&&r.borderStyle.width>0){l.style.borderWidth="".concat(r.borderStyle.width,"px");var A=r.borderStyle.horizontalCornerRadius,k=r.borderStyle.verticalCornerRadius;if(A>0||k>0){var P="calc(".concat(A,"px * var(--scale-factor)) / calc(").concat(k,"px * var(--scale-factor))");l.style.borderRadius=P}switch(r.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:l.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:l.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:l.style.borderBottomStyle="solid"}var S=r.borderColor||null;S?l.style.borderColor=i.Util.makeHexColor(0|S[0],0|S[1],0|S[2]):l.style.borderWidth=0}l.style.left="".concat(100*(b[0]-p)/_,"%");l.style.top="".concat(100*(b[1]-v)/m,"%");var w=r.rotation;if(r.hasOwnCanvas||0===w){l.style.width="".concat(100*u/_,"%");l.style.height="".concat(100*d/m,"%")}else this.setRotation(w,l);return l}},{key:"setRotation",value:function setRotation(t){var r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,o=_slicedToArray(this.viewport.viewBox,4),l=o[0],c=o[1],u=o[2],d=o[3],h=u-l,p=d-c,v=getRectDims(this.data.rect),y=v.width,g=v.height;if(t%180==0){r=100*y/h;a=100*g/p}else{r=100*g/h;a=100*y/p}i.style.width="".concat(r,"%");i.style.height="".concat(a,"%");i.setAttribute("data-main-rotation",(360-t)%360)}},{key:"_commonActions",get:function get(){var t=this,r=function setColor(t,r,a){var i=a.detail[t];a.target.style[r]=c.ColorConverters["".concat(i[0],"_HTML")](i.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:function display(r){var a=r.detail.display%2==1;t.container.style.visibility=a?"hidden":"visible";t.annotationStorage.setValue(t.data.id,{hidden:a,print:0===r.detail.display||3===r.detail.display})},print:function print(r){t.annotationStorage.setValue(t.data.id,{print:r.detail.print})},hidden:function hidden(r){t.container.style.visibility=r.detail.hidden?"hidden":"visible";t.annotationStorage.setValue(t.data.id,{hidden:r.detail.hidden})},focus:function focus(t){setTimeout((function(){return t.target.focus({preventScroll:!1})}),0)},userName:function userName(t){t.target.title=t.detail.userName},readonly:function readonly(t){t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:function required(r){t._setRequired(r.target,r.detail.required)},bgColor:function bgColor(t){r("bgColor","backgroundColor",t)},fillColor:function fillColor(t){r("fillColor","backgroundColor",t)},fgColor:function fgColor(t){r("fgColor","color",t)},textColor:function textColor(t){r("textColor","color",t)},borderColor:function borderColor(t){r("borderColor","borderColor",t)},strokeColor:function strokeColor(t){r("strokeColor","borderColor",t)},rotation:function rotation(r){var a=r.detail.rotation;t.setRotation(a);t.annotationStorage.setValue(t.data.id,{rotation:a})}})}},{key:"_dispatchEventFromSandbox",value:function _dispatchEventFromSandbox(t,r){for(var a=this._commonActions,i=0,o=Object.keys(r.detail);i<o.length;i++){var l=o[i],c=t[l]||a[l];c&&c(r)}}},{key:"_setDefaultPropertiesFromJS",value:function _setDefaultPropertiesFromJS(t){if(this.enableScripting){var r=this.annotationStorage.getRawValue(this.data.id);if(r)for(var a=this._commonActions,i=0,o=Object.entries(r);i<o.length;i++){var l=_slicedToArray(o[i],2),c=l[0],u=l[1],d=a[c];if(d){d({detail:u,target:t});delete r[c]}}}}},{key:"_createQuadrilaterals",value:function _createQuadrilaterals(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;var r,a=[],i=this.data.rect,o=_createForOfIteratorHelper(this.data.quadPoints);try{for(o.s();!(r=o.n()).done;){var l=r.value;this.data.rect=[l[2].x,l[2].y,l[1].x,l[1].y];a.push(this._createContainer(t))}}catch(t){o.e(t)}finally{o.f()}this.data.rect=i;return a}},{key:"_createPopup",value:function _createPopup(t,r){var a=this.container;if(this.quadrilaterals){t=t||this.quadrilaterals;a=this.quadrilaterals[0]}if(!t){(t=document.createElement("div")).className="popupTriggerArea";a.append(t)}var i=new w({container:a,trigger:t,color:r.color,titleObj:r.titleObj,modificationDate:r.modificationDate,contentsObj:r.contentsObj,richText:r.richText,hideWrapper:!0}).render();i.style.left="100%";a.append(i)}},{key:"_renderQuadrilaterals",value:function _renderQuadrilaterals(t){var r,a=_createForOfIteratorHelper(this.quadrilaterals);try{for(a.s();!(r=a.n()).done;){r.value.className=t}}catch(t){a.e(t)}finally{a.f()}return this.quadrilaterals}},{key:"render",value:function render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function _getElementsByName(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=[];if(this._fieldObjects){var o=this._fieldObjects[t];if(o){var l,c=_createForOfIteratorHelper(o);try{for(c.s();!(l=c.n()).done;){var u=l.value,d=u.page,p=u.id,v=u.exportValues;if(-1!==d&&p!==r){var y="string"==typeof v?v:null,g=document.querySelector(\'[data-element-id="\'.concat(p,\'"]\'));!g||h.has(g)?a.push({id:p,exportValue:y,domElement:g}):(0,i.warn)("_getElementsByName - element not allowed: ".concat(p))}}}catch(t){c.e(t)}finally{c.f()}}return a}var _,m=_createForOfIteratorHelper(document.getElementsByName(t));try{for(m.s();!(_=m.n()).done;){var b=_.value,A=b.id,k=b.exportValue;A!==r&&(h.has(b)&&a.push({id:A,exportValue:k,domElement:b}))}}catch(t){m.e(t)}finally{m.f()}return a}}],[{key:"platform",get:function get(){var t="undefined"!=typeof navigator?navigator.platform:"";return(0,i.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]);return AnnotationElement}(),y=function(t){_inherits(LinkAnnotationElement,t);var r=_createSuper(LinkAnnotationElement);function LinkAnnotationElement(t){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,LinkAnnotationElement);(a=r.call(this,t,{isRenderable:!0,ignoreBorder:!(null==i||!i.ignoreBorder),createQuadrilaterals:!0})).isTooltipOnly=t.data.isTooltipOnly;return a}_createClass(LinkAnnotationElement,[{key:"render",value:function render(){var t=this.data,r=this.linkService,a=document.createElement("a");a.setAttribute("data-element-id",t.id);var i=!1;if(t.url){r.addLinkAttributes(a,t.url,t.newWindow);i=!0}else if(t.action){this._bindNamedAction(a,t.action);i=!0}else if(t.dest){this._bindLink(a,t.dest);i=!0}else{if(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(a,t);i=!0}if(t.resetForm){this._bindResetFormAction(a,t.resetForm);i=!0}else if(this.isTooltipOnly&&!i){this._bindLink(a,"");i=!0}}if(this.quadrilaterals)return this._renderQuadrilaterals("linkAnnotation").map((function(t,r){var i=0===r?a:a.cloneNode();t.append(i);return t}));this.container.className="linkAnnotation";i&&this.container.append(a);return this.container}},{key:"_bindLink",value:function _bindLink(t,r){var a=this;t.href=this.linkService.getDestinationHash(r);t.onclick=function(){r&&a.linkService.goToDestination(r);return!1};(r||""===r)&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function _bindNamedAction(t,r){var a=this;t.href=this.linkService.getAnchorUrl("");t.onclick=function(){a.linkService.executeNamedAction(r);return!1};t.className="internalLink"}},{key:"_bindJSAction",value:function _bindJSAction(t,r){var a=this;t.href=this.linkService.getAnchorUrl("");for(var i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),o=function _loop(){var o=c[l],u=i.get(o);if(!u)return"continue";t[u]=function(){var t;null===(t=a.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:a,detail:{id:r.id,name:o}});return!1}},l=0,c=Object.keys(r.actions);l<c.length;l++)o();t.onclick||(t.onclick=function(){return!1});t.className="internalLink"}},{key:"_bindResetFormAction",value:function _bindResetFormAction(t,r){var a=this,o=t.onclick;o||(t.href=this.linkService.getAnchorUrl(""));t.className="internalLink";if(this._fieldObjects)t.onclick=function(){o&&o();var t=r.fields,l=r.refs,c=r.include,u=[];if(0!==t.length||0!==l.length){var d,p=new Set(l),v=_createForOfIteratorHelper(t);try{for(v.s();!(d=v.n()).done;){var y,g=d.value,_=_createForOfIteratorHelper(a._fieldObjects[g]||[]);try{for(_.s();!(y=_.n()).done;){var m=y.value.id;p.add(m)}}catch(t){_.e(t)}finally{_.f()}}}catch(t){v.e(t)}finally{v.f()}for(var b=0,A=Object.values(a._fieldObjects);b<A.length;b++){var k,P=_createForOfIteratorHelper(A[b]);try{for(P.s();!(k=P.n()).done;){var S=k.value;p.has(S.id)===c&&u.push(S)}}catch(t){P.e(t)}finally{P.f()}}}else for(var w=0,x=Object.values(a._fieldObjects);w<x.length;w++){var C=x[w];u.push.apply(u,_toConsumableArray(C))}for(var T=a.annotationStorage,E=[],I=0,O=u;I<O.length;I++){var M=O[I],R=M.id;E.push(R);switch(M.type){case"text":var D=M.defaultValue||"";T.setValue(R,{value:D});break;case"checkbox":case"radiobutton":var L=M.defaultValue===M.exportValues;T.setValue(R,{value:L});break;case"combobox":case"listbox":var G=M.defaultValue||"";T.setValue(R,{value:G});break;default:continue}var j=document.querySelector(\'[data-element-id="\'.concat(R,\'"]\'));j&&(h.has(j)?j.dispatchEvent(new Event("resetform")):(0,i.warn)("_bindResetFormAction - element not allowed: ".concat(R)))}if(a.enableScripting){var N;null===(N=a.linkService.eventBus)||void 0===N||N.dispatch("dispatcheventinsandbox",{source:a,detail:{id:"app",ids:E,name:"ResetForm"}})}return!1};else{(0,i.warn)(\'_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.\');o||(t.onclick=function(){return!1})}}}]);return LinkAnnotationElement}(v),g=function(t){_inherits(TextAnnotationElement,t);var r=_createSuper(TextAnnotationElement);function TextAnnotationElement(t){var a,i,o;_classCallCheck(this,TextAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l})}_createClass(TextAnnotationElement,[{key:"render",value:function render(){this.container.className="textAnnotation";var t=document.createElement("img");t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";t.alt="[{{type}} Annotation]";t.dataset.l10nId="text_annotation_type";t.dataset.l10nArgs=JSON.stringify({type:this.data.name});this.data.hasPopup||this._createPopup(t,this.data);this.container.append(t);return this.container}}]);return TextAnnotationElement}(v),_=function(t){_inherits(WidgetAnnotationElement,t);var r=_createSuper(WidgetAnnotationElement);function WidgetAnnotationElement(){_classCallCheck(this,WidgetAnnotationElement);return r.apply(this,arguments)}_createClass(WidgetAnnotationElement,[{key:"render",value:function render(){this.data.alternativeText&&(this.container.title=this.data.alternativeText);return this.container}},{key:"_getKeyModifier",value:function _getKeyModifier(t){var r=v.platform,a=r.isWin,i=r.isMac;return a&&t.ctrlKey||i&&t.metaKey}},{key:"_setEventListener",value:function _setEventListener(t,r,a,i){var o=this;r.includes("mouse")?t.addEventListener(r,(function(t){var r;null===(r=o.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:o,detail:{id:o.data.id,name:a,value:i(t),shift:t.shiftKey,modifier:o._getKeyModifier(t)}})})):t.addEventListener(r,(function(t){var r;null===(r=o.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:o,detail:{id:o.data.id,name:a,value:i(t)}})}))}},{key:"_setEventListeners",value:function _setEventListeners(t,r,a){var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var l,c=_slicedToArray(i.value,2),u=c[0],d=c[1];("Action"===d||null!==(l=this.data.actions)&&void 0!==l&&l[d])&&this._setEventListener(t,u,d,a)}}catch(t){o.e(t)}finally{o.f()}}},{key:"_setBackgroundColor",value:function _setBackgroundColor(t){var r=this.data.backgroundColor||null;t.style.backgroundColor=null===r?"transparent":i.Util.makeHexColor(r[0],r[1],r[2])}},{key:"_setTextStyle",value:function _setTextStyle(t){var r,a=this.data.defaultAppearanceData.fontColor,o=this.data.defaultAppearanceData.fontSize||9,l=t.style;if(this.data.multiLine){var c=Math.abs(this.data.rect[3]-this.data.rect[1]),u=c/(Math.round(c/(i.LINE_FACTOR*o))||1);r=Math.min(o,Math.round(u/i.LINE_FACTOR))}else{var d=Math.abs(this.data.rect[3]-this.data.rect[1]);r=Math.min(o,Math.round(d/i.LINE_FACTOR))}l.fontSize="calc(".concat(r,"px * var(--scale-factor))");l.color=i.Util.makeHexColor(a[0],a[1],a[2]);null!==this.data.textAlignment&&(l.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function _setRequired(t,r){r?t.setAttribute("required",!0):t.removeAttribute("required");t.setAttribute("aria-required",r)}}]);return WidgetAnnotationElement}(v),m=function(t){_inherits(TextWidgetAnnotationElement,t);var r=_createSuper(TextWidgetAnnotationElement);function TextWidgetAnnotationElement(t){_classCallCheck(this,TextWidgetAnnotationElement);var a=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;return r.call(this,t,{isRenderable:a})}_createClass(TextWidgetAnnotationElement,[{key:"setPropertyOnSiblings",value:function setPropertyOnSiblings(t,r,a,i){var o,l=this.annotationStorage,c=_createForOfIteratorHelper(this._getElementsByName(t.name,t.id));try{for(c.s();!(o=c.n()).done;){var u=o.value;u.domElement&&(u.domElement[r]=a);l.setValue(u.id,_defineProperty({},i,a))}}catch(t){c.e(t)}finally{c.f()}}},{key:"render",value:function render(){var t=this,r=this.annotationStorage,a=this.data.id;this.container.className="textWidgetAnnotation";var i=null;if(this.renderForms){var o=r.getValue(a,{value:this.data.fieldValue}),l=o.formattedValue||o.value||"",c={userValue:l,formattedValue:null,valueOnFocus:""};if(this.data.multiLine){(i=document.createElement("textarea")).textContent=l;this.data.doNotScroll&&(i.style.overflowY="hidden")}else{(i=document.createElement("input")).type="text";i.setAttribute("value",l);this.data.doNotScroll&&(i.style.overflowX="hidden")}h.add(i);i.setAttribute("data-element-id",a);i.disabled=this.data.readOnly;i.name=this.data.fieldName;i.tabIndex=d;this._setRequired(i,this.data.required);i.addEventListener("input",(function(o){r.setValue(a,{value:o.target.value});t.setPropertyOnSiblings(i,"value",o.target.value,"value")}));i.addEventListener("resetform",(function(r){var a,o=null!==(a=t.data.defaultFieldValue)&&void 0!==a?a:"";i.value=c.userValue=o;c.formattedValue=null}));var u=function blurListener(t){var r=c.formattedValue;null!=r&&(t.target.value=r);t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var p;i.addEventListener("focus",(function(t){c.userValue&&(t.target.value=c.userValue);c.valueOnFocus=t.target.value}));i.addEventListener("updatefromsandbox",(function(i){var o={value:function value(t){var i;c.userValue=null!==(i=t.detail.value)&&void 0!==i?i:"";r.setValue(a,{value:c.userValue.toString()});t.target.value=c.userValue},formattedValue:function formattedValue(t){var formattedValue=t.detail.formattedValue;c.formattedValue=formattedValue;null!=formattedValue&&t.target!==document.activeElement&&(t.target.value=formattedValue);r.setValue(a,{formattedValue:formattedValue})},selRange:function selRange(t){var r;(r=t.target).setSelectionRange.apply(r,_toConsumableArray(t.detail.selRange))}};t._dispatchEventFromSandbox(o,i)}));i.addEventListener("keydown",(function(r){var i,o=-1;"Escape"===r.key?o=0:"Enter"===r.key?o=2:"Tab"===r.key&&(o=3);if(-1!==o){var l=r.target.value;if(c.valueOnFocus!==l){c.userValue=l;null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:a,name:"Keystroke",value:l,willCommit:!0,commitKey:o,selStart:r.target.selectionStart,selEnd:r.target.selectionEnd}})}}}));var v=u;u=null;i.addEventListener("blur",(function(r){var i=r.target.value;c.userValue=i;if(t._mouseState.isDown&&c.valueOnFocus!==i){var o;null===(o=t.linkService.eventBus)||void 0===o||o.dispatch("dispatcheventinsandbox",{source:t,detail:{id:a,name:"Keystroke",value:i,willCommit:!0,commitKey:1,selStart:r.target.selectionStart,selEnd:r.target.selectionEnd}})}v(r)}));null!==(p=this.data.actions)&&void 0!==p&&p.Keystroke&&i.addEventListener("beforeinput",(function(r){var i,o=r.data,l=r.target,c=l.value,u=l.selectionStart,d=l.selectionEnd,h=u,p=d;switch(r.inputType){case"deleteWordBackward":var v=c.substring(0,u).match(/\\w*[^\\w]*$/);v&&(h-=v[0].length);break;case"deleteWordForward":var y=c.substring(u).match(/^[^\\w]*\\w*/);y&&(p+=y[0].length);break;case"deleteContentBackward":u===d&&(h-=1);break;case"deleteContentForward":u===d&&(p+=1)}r.preventDefault();null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:a,name:"Keystroke",value:c,change:o||"",willCommit:!1,selStart:h,selEnd:p}})}));this._setEventListeners(i,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.value}))}u&&i.addEventListener("blur",u);null!==this.data.maxLen&&(i.maxLength=this.data.maxLen);if(this.data.comb){var y=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;i.classList.add("comb");i.style.letterSpacing="calc(".concat(y,"px * var(--scale-factor) - 1ch)")}}else{(i=document.createElement("div")).textContent=this.data.fieldValue;i.style.verticalAlign="middle";i.style.display="table-cell"}this._setTextStyle(i);this._setBackgroundColor(i);this._setDefaultPropertiesFromJS(i);this.container.append(i);return this.container}}]);return TextWidgetAnnotationElement}(_),b=function(t){_inherits(CheckboxWidgetAnnotationElement,t);var r=_createSuper(CheckboxWidgetAnnotationElement);function CheckboxWidgetAnnotationElement(t){_classCallCheck(this,CheckboxWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderForms})}_createClass(CheckboxWidgetAnnotationElement,[{key:"render",value:function render(){var t=this,r=this.annotationStorage,a=this.data,i=a.id,o=r.getValue(i,{value:a.exportValue===a.fieldValue}).value;if("string"==typeof o){o="Off"!==o;r.setValue(i,{value:o})}this.container.className="buttonWidgetAnnotation checkBox";var l=document.createElement("input");h.add(l);l.setAttribute("data-element-id",i);l.disabled=a.readOnly;this._setRequired(l,this.data.required);l.type="checkbox";l.name=a.fieldName;o&&l.setAttribute("checked",!0);l.setAttribute("exportValue",a.exportValue);l.tabIndex=d;l.addEventListener("change",(function(o){var l,c=o.target,u=c.name,d=c.checked,h=_createForOfIteratorHelper(t._getElementsByName(u,i));try{for(h.s();!(l=h.n()).done;){var p=l.value,v=d&&p.exportValue===a.exportValue;p.domElement&&(p.domElement.checked=v);r.setValue(p.id,{value:v})}}catch(t){h.e(t)}finally{h.f()}r.setValue(i,{value:d})}));l.addEventListener("resetform",(function(t){var r=a.defaultFieldValue||"Off";t.target.checked=r===a.exportValue}));if(this.enableScripting&&this.hasJSActions){l.addEventListener("updatefromsandbox",(function(a){var o={value:function value(t){t.target.checked="Off"!==t.detail.value;r.setValue(i,{value:t.target.checked})}};t._dispatchEventFromSandbox(o,a)}));this._setEventListeners(l,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}this._setBackgroundColor(l);this._setDefaultPropertiesFromJS(l);this.container.append(l);return this.container}}]);return CheckboxWidgetAnnotationElement}(_),A=function(t){_inherits(RadioButtonWidgetAnnotationElement,t);var r=_createSuper(RadioButtonWidgetAnnotationElement);function RadioButtonWidgetAnnotationElement(t){_classCallCheck(this,RadioButtonWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderForms})}_createClass(RadioButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t=this;this.container.className="buttonWidgetAnnotation radioButton";var r=this.annotationStorage,a=this.data,i=a.id,o=r.getValue(i,{value:a.fieldValue===a.buttonValue}).value;if("string"==typeof o){o=o!==a.buttonValue;r.setValue(i,{value:o})}var l=document.createElement("input");h.add(l);l.setAttribute("data-element-id",i);l.disabled=a.readOnly;this._setRequired(l,this.data.required);l.type="radio";l.name=a.fieldName;o&&l.setAttribute("checked",!0);l.tabIndex=d;l.addEventListener("change",(function(a){var o,l=a.target,c=l.name,u=l.checked,d=_createForOfIteratorHelper(t._getElementsByName(c,i));try{for(d.s();!(o=d.n()).done;){var h=o.value;r.setValue(h.id,{value:!1})}}catch(t){d.e(t)}finally{d.f()}r.setValue(i,{value:u})}));l.addEventListener("resetform",(function(t){var r=a.defaultFieldValue;t.target.checked=null!=r&&r===a.buttonValue}));if(this.enableScripting&&this.hasJSActions){var c=a.buttonValue;l.addEventListener("updatefromsandbox",(function(a){var o={value:function value(a){var o,l=c===a.detail.value,u=_createForOfIteratorHelper(t._getElementsByName(a.target.name));try{for(u.s();!(o=u.n()).done;){var d=o.value,h=l&&d.id===i;d.domElement&&(d.domElement.checked=h);r.setValue(d.id,{value:h})}}catch(t){u.e(t)}finally{u.f()}}};t._dispatchEventFromSandbox(o,a)}));this._setEventListeners(l,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}this._setBackgroundColor(l);this._setDefaultPropertiesFromJS(l);this.container.append(l);return this.container}}]);return RadioButtonWidgetAnnotationElement}(_),k=function(t){_inherits(PushButtonWidgetAnnotationElement,t);var r=_createSuper(PushButtonWidgetAnnotationElement);function PushButtonWidgetAnnotationElement(t){_classCallCheck(this,PushButtonWidgetAnnotationElement);return r.call(this,t,{ignoreBorder:t.data.hasAppearance})}_createClass(PushButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t=this,r=_get(_getPrototypeOf(PushButtonWidgetAnnotationElement.prototype),"render",this).call(this);r.className="buttonWidgetAnnotation pushButton";this.data.alternativeText&&(r.title=this.data.alternativeText);var a=r.lastChild;if(this.enableScripting&&this.hasJSActions&&a){this._setDefaultPropertiesFromJS(a);a.addEventListener("updatefromsandbox",(function(r){t._dispatchEventFromSandbox({},r)}))}return r}}]);return PushButtonWidgetAnnotationElement}(y),P=function(t){_inherits(ChoiceWidgetAnnotationElement,t);var r=_createSuper(ChoiceWidgetAnnotationElement);function ChoiceWidgetAnnotationElement(t){_classCallCheck(this,ChoiceWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderForms})}_createClass(ChoiceWidgetAnnotationElement,[{key:"render",value:function render(){var t=this;this.container.className="choiceWidgetAnnotation";var r=this.annotationStorage,a=this.data.id,i=r.getValue(a,{value:this.data.fieldValue}),o=document.createElement("select");h.add(o);o.setAttribute("data-element-id",a);o.disabled=this.data.readOnly;this._setRequired(o,this.data.required);o.name=this.data.fieldName;o.tabIndex=d;var l=this.data.combo&&this.data.options.length>0;if(!this.data.combo){o.size=this.data.options.length;this.data.multiSelect&&(o.multiple=!0)}o.addEventListener("resetform",(function(r){var a,i=t.data.defaultFieldValue,l=_createForOfIteratorHelper(o.options);try{for(l.s();!(a=l.n()).done;){var c=a.value;c.selected=c.value===i}}catch(t){l.e(t)}finally{l.f()}}));var c,u=_createForOfIteratorHelper(this.data.options);try{for(u.s();!(c=u.n()).done;){var p=c.value,v=document.createElement("option");v.textContent=p.displayValue;v.value=p.exportValue;if(i.value.includes(p.exportValue)){v.setAttribute("selected",!0);l=!1}o.append(v)}}catch(t){u.e(t)}finally{u.f()}var y=null;if(l){var g=document.createElement("option");g.value=" ";g.setAttribute("hidden",!0);g.setAttribute("selected",!0);o.prepend(g);y=function removeEmptyEntry(){g.remove();o.removeEventListener("input",y);y=null};o.addEventListener("input",y)}var _=function getValue(t,r){var a=r?"value":"textContent",i=t.target.options;return t.target.multiple?Array.prototype.filter.call(i,(function(t){return t.selected})).map((function(t){return t[a]})):-1===i.selectedIndex?null:i[i.selectedIndex][a]},m=function getItems(t){var r=t.target.options;return Array.prototype.map.call(r,(function(t){return{displayValue:t.textContent,exportValue:t.value}}))};if(this.enableScripting&&this.hasJSActions){o.addEventListener("updatefromsandbox",(function(i){var l={value:function value(t){var i;null===(i=y)||void 0===i||i();var l,value=t.detail.value,c=new Set(Array.isArray(value)?value:[value]),u=_createForOfIteratorHelper(o.options);try{for(u.s();!(l=u.n()).done;){var d=l.value;d.selected=c.has(d.value)}}catch(t){u.e(t)}finally{u.f()}r.setValue(a,{value:_(t,!0)})},multipleSelection:function multipleSelection(t){o.multiple=!0},remove:function remove(t){var i=o.options,l=t.detail.remove;i[l].selected=!1;o.remove(l);if(i.length>0){var c=Array.prototype.findIndex.call(i,(function(t){return t.selected}));-1===c&&(i[0].selected=!0)}r.setValue(a,{value:_(t,!0),items:m(t)})},clear:function clear(t){for(;0!==o.length;)o.remove(0);r.setValue(a,{value:null,items:[]})},insert:function insert(t){var i=t.detail.insert,l=i.index,c=i.displayValue,u=i.exportValue,d=o.children[l],h=document.createElement("option");h.textContent=c;h.value=u;d?d.before(h):o.append(h);r.setValue(a,{value:_(t,!0),items:m(t)})},items:function items(t){for(var items=t.detail.items;0!==o.length;)o.remove(0);var i,l=_createForOfIteratorHelper(items);try{for(l.s();!(i=l.n()).done;){var c=i.value,u=c.displayValue,d=c.exportValue,h=document.createElement("option");h.textContent=u;h.value=d;o.append(h)}}catch(t){l.e(t)}finally{l.f()}o.options.length>0&&(o.options[0].selected=!0);r.setValue(a,{value:_(t,!0),items:m(t)})},indices:function indices(t){var i,indices=new Set(t.detail.indices),o=_createForOfIteratorHelper(t.target.options);try{for(o.s();!(i=o.n()).done;){var l=i.value;l.selected=indices.has(l.index)}}catch(t){o.e(t)}finally{o.f()}r.setValue(a,{value:_(t,!0)})},editable:function editable(t){t.target.disabled=!t.detail.editable}};t._dispatchEventFromSandbox(l,i)}));o.addEventListener("input",(function(i){var o,l=_(i,!0),c=_(i,!1);r.setValue(a,{value:l});null===(o=t.linkService.eventBus)||void 0===o||o.dispatch("dispatcheventinsandbox",{source:t,detail:{id:a,name:"Keystroke",value:c,changeEx:l,willCommit:!0,commitKey:1,keyDown:!1}})}));this._setEventListeners(o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(function(t){return t.target.checked}))}else o.addEventListener("input",(function(t){r.setValue(a,{value:_(t,!0)})}));this.data.combo&&this._setTextStyle(o);this._setBackgroundColor(o);this._setDefaultPropertiesFromJS(o);this.container.append(o);return this.container}}]);return ChoiceWidgetAnnotationElement}(_),S=function(t){_inherits(PopupAnnotationElement,t);var r=_createSuper(PopupAnnotationElement);function PopupAnnotationElement(t){var a,i,o;_classCallCheck(this,PopupAnnotationElement);var l=!!(null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l})}_createClass(PopupAnnotationElement,[{key:"render",value:function render(){this.container.className="popupAnnotation";if(["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var t=\'[data-annotation-id="\'.concat(this.data.parentId,\'"]\'),r=this.layer.querySelectorAll(t);if(0===r.length)return this.container;var a=new w({container:this.container,trigger:Array.from(r),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),o=this.page,l=i.Util.normalizeRect([this.data.parentRect[0],o.view[3]-this.data.parentRect[1]+o.view[1],this.data.parentRect[2],o.view[3]-this.data.parentRect[3]+o.view[1]]),c=l[0]+this.data.parentRect[2]-this.data.parentRect[0],u=l[1],d=_slicedToArray(this.viewport.viewBox,4),h=d[0],p=d[1],v=d[2]-h,y=d[3]-p;this.container.style.left="".concat(100*(c-h)/v,"%");this.container.style.top="".concat(100*(u-p)/y,"%");this.container.append(a.render());return this.container}}]);return PopupAnnotationElement}(v),w=function(){function PopupElement(t){_classCallCheck(this,PopupElement);this.container=t.container;this.trigger=t.trigger;this.color=t.color;this.titleObj=t.titleObj;this.modificationDate=t.modificationDate;this.contentsObj=t.contentsObj;this.richText=t.richText;this.hideWrapper=t.hideWrapper||!1;this.pinned=!1}_createClass(PopupElement,[{key:"render",value:function render(){var t,r,a=document.createElement("div");a.className="popupWrapper";this.hideElement=this.hideWrapper?a:this.container;this.hideElement.hidden=!0;var l=document.createElement("div");l.className="popup";var c=this.color;if(c){var d=.7*(255-c[0])+c[0],h=.7*(255-c[1])+c[1],p=.7*(255-c[2])+c[2];l.style.backgroundColor=i.Util.makeHexColor(0|d,0|h,0|p)}var v=document.createElement("h1");v.dir=this.titleObj.dir;v.textContent=this.titleObj.str;l.append(v);var y=o.PDFDateString.toDateObject(this.modificationDate);if(y){var g=document.createElement("span");g.className="popupDate";g.textContent="{{date}}, {{time}}";g.dataset.l10nId="annotation_date_string";g.dataset.l10nArgs=JSON.stringify({date:y.toLocaleDateString(),time:y.toLocaleTimeString()});l.append(g)}if(null===(t=this.richText)||void 0===t||!t.str||null!==(r=this.contentsObj)&&void 0!==r&&r.str&&this.contentsObj.str!==this.richText.str){var _=this._formatContents(this.contentsObj);l.append(_)}else{u.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:l});l.lastChild.className="richText popupContent"}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var m,b=_createForOfIteratorHelper(this.trigger);try{for(b.s();!(m=b.n()).done;){var A=m.value;A.addEventListener("click",this._toggle.bind(this));A.addEventListener("mouseover",this._show.bind(this,!1));A.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(t){b.e(t)}finally{b.f()}l.addEventListener("click",this._hide.bind(this,!0));a.append(l);return a}},{key:"_formatContents",value:function _formatContents(t){var r=t.str,a=t.dir,i=document.createElement("p");i.className="popupContent";i.dir=a;for(var o=r.split(/(?:\\r\\n?|\\n)/),l=0,c=o.length;l<c;++l){var u=o[l];i.append(document.createTextNode(u));l<c-1&&i.append(document.createElement("br"))}return i}},{key:"_toggle",value:function _toggle(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function _show(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.pinned=!0);if(this.hideElement.hidden){this.hideElement.hidden=!1;this.container.style.zIndex+=1}}},{key:"_hide",value:function _hide(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(this.pinned=!1);if(!this.hideElement.hidden&&!this.pinned){this.hideElement.hidden=!0;this.container.style.zIndex-=1}}}]);return PopupElement}(),x=function(t){_inherits(FreeTextAnnotationElement,t);var r=_createSuper(FreeTextAnnotationElement);function FreeTextAnnotationElement(t){var a,i,o;_classCallCheck(this,FreeTextAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(FreeTextAnnotationElement,[{key:"render",value:function render(){this.container.className="freeTextAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return FreeTextAnnotationElement}(v),C=function(t){_inherits(LineAnnotationElement,t);var r=_createSuper(LineAnnotationElement);function LineAnnotationElement(t){var a,i,o;_classCallCheck(this,LineAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(LineAnnotationElement,[{key:"render",value:function render(){this.container.className="lineAnnotation";var t=this.data,r=getRectDims(t.rect),a=r.width,i=r.height,o=this.svgFactory.create(a,i,!0),l=this.svgFactory.createElement("svg:line");l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]);l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]);l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]);l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]);l.setAttribute("stroke-width",t.borderStyle.width||1);l.setAttribute("stroke","transparent");l.setAttribute("fill","transparent");o.append(l);this.container.append(o);this._createPopup(l,t);return this.container}}]);return LineAnnotationElement}(v),T=function(t){_inherits(SquareAnnotationElement,t);var r=_createSuper(SquareAnnotationElement);function SquareAnnotationElement(t){var a,i,o;_classCallCheck(this,SquareAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(SquareAnnotationElement,[{key:"render",value:function render(){this.container.className="squareAnnotation";var t=this.data,r=getRectDims(t.rect),a=r.width,i=r.height,o=this.svgFactory.create(a,i,!0),l=t.borderStyle.width,c=this.svgFactory.createElement("svg:rect");c.setAttribute("x",l/2);c.setAttribute("y",l/2);c.setAttribute("width",a-l);c.setAttribute("height",i-l);c.setAttribute("stroke-width",l||1);c.setAttribute("stroke","transparent");c.setAttribute("fill","transparent");o.append(c);this.container.append(o);this._createPopup(c,t);return this.container}}]);return SquareAnnotationElement}(v),E=function(t){_inherits(CircleAnnotationElement,t);var r=_createSuper(CircleAnnotationElement);function CircleAnnotationElement(t){var a,i,o;_classCallCheck(this,CircleAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(CircleAnnotationElement,[{key:"render",value:function render(){this.container.className="circleAnnotation";var t=this.data,r=getRectDims(t.rect),a=r.width,i=r.height,o=this.svgFactory.create(a,i,!0),l=t.borderStyle.width,c=this.svgFactory.createElement("svg:ellipse");c.setAttribute("cx",a/2);c.setAttribute("cy",i/2);c.setAttribute("rx",a/2-l/2);c.setAttribute("ry",i/2-l/2);c.setAttribute("stroke-width",l||1);c.setAttribute("stroke","transparent");c.setAttribute("fill","transparent");o.append(c);this.container.append(o);this._createPopup(c,t);return this.container}}]);return CircleAnnotationElement}(v),I=function(t){_inherits(PolylineAnnotationElement,t);var r=_createSuper(PolylineAnnotationElement);function PolylineAnnotationElement(t){var a,i,o,l;_classCallCheck(this,PolylineAnnotationElement);var c=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);(l=r.call(this,t,{isRenderable:c,ignoreBorder:!0})).containerClassName="polylineAnnotation";l.svgElementName="svg:polyline";return l}_createClass(PolylineAnnotationElement,[{key:"render",value:function render(){this.container.className=this.containerClassName;var t,r=this.data,a=getRectDims(r.rect),i=a.width,o=a.height,l=this.svgFactory.create(i,o,!0),c=[],u=_createForOfIteratorHelper(r.vertices);try{for(u.s();!(t=u.n()).done;){var d=t.value,h=d.x-r.rect[0],p=r.rect[3]-d.y;c.push(h+","+p)}}catch(t){u.e(t)}finally{u.f()}c=c.join(" ");var v=this.svgFactory.createElement(this.svgElementName);v.setAttribute("points",c);v.setAttribute("stroke-width",r.borderStyle.width||1);v.setAttribute("stroke","transparent");v.setAttribute("fill","transparent");l.append(v);this.container.append(l);this._createPopup(v,r);return this.container}}]);return PolylineAnnotationElement}(v),O=function(t){_inherits(PolygonAnnotationElement,t);var r=_createSuper(PolygonAnnotationElement);function PolygonAnnotationElement(t){var a;_classCallCheck(this,PolygonAnnotationElement);(a=r.call(this,t)).containerClassName="polygonAnnotation";a.svgElementName="svg:polygon";return a}return _createClass(PolygonAnnotationElement)}(I),M=function(t){_inherits(CaretAnnotationElement,t);var r=_createSuper(CaretAnnotationElement);function CaretAnnotationElement(t){var a,i,o;_classCallCheck(this,CaretAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(CaretAnnotationElement,[{key:"render",value:function render(){this.container.className="caretAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return CaretAnnotationElement}(v),R=function(t){_inherits(InkAnnotationElement,t);var r=_createSuper(InkAnnotationElement);function InkAnnotationElement(t){var a,i,o,l;_classCallCheck(this,InkAnnotationElement);var c=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);(l=r.call(this,t,{isRenderable:c,ignoreBorder:!0})).containerClassName="inkAnnotation";l.svgElementName="svg:polyline";return l}_createClass(InkAnnotationElement,[{key:"render",value:function render(){this.container.className=this.containerClassName;var t,r=this.data,a=getRectDims(r.rect),i=a.width,o=a.height,l=this.svgFactory.create(i,o,!0),c=_createForOfIteratorHelper(r.inkLists);try{for(c.s();!(t=c.n()).done;){var u,d=t.value,h=[],p=_createForOfIteratorHelper(d);try{for(p.s();!(u=p.n()).done;){var v=u.value,y=v.x-r.rect[0],g=r.rect[3]-v.y;h.push("".concat(y,",").concat(g))}}catch(t){p.e(t)}finally{p.f()}h=h.join(" ");var _=this.svgFactory.createElement(this.svgElementName);_.setAttribute("points",h);_.setAttribute("stroke-width",r.borderStyle.width||1);_.setAttribute("stroke","transparent");_.setAttribute("fill","transparent");this._createPopup(_,r);l.append(_)}}catch(t){c.e(t)}finally{c.f()}this.container.append(l);return this.container}}]);return InkAnnotationElement}(v),D=function(t){_inherits(HighlightAnnotationElement,t);var r=_createSuper(HighlightAnnotationElement);function HighlightAnnotationElement(t){var a,i,o;_classCallCheck(this,HighlightAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(HighlightAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("highlightAnnotation");this.container.className="highlightAnnotation";return this.container}}]);return HighlightAnnotationElement}(v),L=function(t){_inherits(UnderlineAnnotationElement,t);var r=_createSuper(UnderlineAnnotationElement);function UnderlineAnnotationElement(t){var a,i,o;_classCallCheck(this,UnderlineAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(UnderlineAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("underlineAnnotation");this.container.className="underlineAnnotation";return this.container}}]);return UnderlineAnnotationElement}(v),G=function(t){_inherits(SquigglyAnnotationElement,t);var r=_createSuper(SquigglyAnnotationElement);function SquigglyAnnotationElement(t){var a,i,o;_classCallCheck(this,SquigglyAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(SquigglyAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("squigglyAnnotation");this.container.className="squigglyAnnotation";return this.container}}]);return SquigglyAnnotationElement}(v),j=function(t){_inherits(StrikeOutAnnotationElement,t);var r=_createSuper(StrikeOutAnnotationElement);function StrikeOutAnnotationElement(t){var a,i,o;_classCallCheck(this,StrikeOutAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(StrikeOutAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("strikeoutAnnotation");this.container.className="strikeoutAnnotation";return this.container}}]);return StrikeOutAnnotationElement}(v),N=function(t){_inherits(StampAnnotationElement,t);var r=_createSuper(StampAnnotationElement);function StampAnnotationElement(t){var a,i,o;_classCallCheck(this,StampAnnotationElement);var l=!!(t.data.hasPopup||null!==(a=t.data.titleObj)&&void 0!==a&&a.str||null!==(i=t.data.contentsObj)&&void 0!==i&&i.str||null!==(o=t.data.richText)&&void 0!==o&&o.str);return r.call(this,t,{isRenderable:l,ignoreBorder:!0})}_createClass(StampAnnotationElement,[{key:"render",value:function render(){this.container.className="stampAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return StampAnnotationElement}(v),B=function(t){_inherits(FileAttachmentAnnotationElement,t);var r=_createSuper(FileAttachmentAnnotationElement);function FileAttachmentAnnotationElement(t){var a,i;_classCallCheck(this,FileAttachmentAnnotationElement);var l=(i=r.call(this,t,{isRenderable:!0})).data.file,c=l.filename,u=l.content;i.filename=(0,o.getFilenameFromUrl)(c);i.content=u;null===(a=i.linkService.eventBus)||void 0===a||a.dispatch("fileattachmentannotation",{source:_assertThisInitialized(i),filename:c,content:u});return i}_createClass(FileAttachmentAnnotationElement,[{key:"render",value:function render(){var t,r;this.container.className="fileAttachmentAnnotation";var a=document.createElement("div");a.className="popupTriggerArea";a.addEventListener("dblclick",this._download.bind(this));!this.data.hasPopup&&(null!==(t=this.data.titleObj)&&void 0!==t&&t.str||null!==(r=this.data.contentsObj)&&void 0!==r&&r.str||this.data.richText)&&this._createPopup(a,this.data);this.container.append(a);return this.container}},{key:"_download",value:function _download(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.container,this.content,this.filename)}}]);return FileAttachmentAnnotationElement}(v),W=function(){function AnnotationLayer(){_classCallCheck(this,AnnotationLayer)}_createClass(AnnotationLayer,null,[{key:"render",value:function render(t){var r=t.annotations,a=t.div,c=t.viewport;_classStaticPrivateMethodGet(this,AnnotationLayer,_setDimensions).call(this,a,c);var u,d=[],h=[],v=_createForOfIteratorHelper(r);try{for(v.s();!(u=v.n()).done;){var y=u.value;if(y)if(y.annotationType!==i.AnnotationType.POPUP){var g=getRectDims(y.rect),_=g.width,m=g.height;_<=0||m<=0||d.push(y)}else h.push(y)}}catch(t){v.e(t)}finally{v.f()}h.length&&d.push.apply(d,h);for(var b=0,A=d;b<A.length;b++){var k=A[b],P=p.create({data:k,layer:a,page:t.page,viewport:c,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new o.DOMSVGFactory,annotationStorage:t.annotationStorage||new l.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(P.isRenderable){var w=P.render();k.hidden&&(w.style.visibility="hidden");if(Array.isArray(w)){var x,C=_createForOfIteratorHelper(w);try{for(C.s();!(x=C.n()).done;){var T=x.value;a.append(T)}}catch(t){C.e(t)}finally{C.f()}}else P instanceof S?a.prepend(w):a.append(w)}}_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,a,t.annotationCanvasMap)}},{key:"update",value:function update(t){var r=t.annotationCanvasMap,a=t.div,i=t.viewport;_classStaticPrivateMethodGet(this,AnnotationLayer,_setDimensions).call(this,a,i);_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,a,r);a.hidden=!1}}]);return AnnotationLayer}();r.AnnotationLayer=W;function _setDimensions(t,r){var a=r.width,i=r.height,o=r.rotation,l=t.style,c=o%180!=0,u=Math.floor(a)+"px",d=Math.floor(i)+"px";l.width=c?d:u;l.height=c?u:d;t.setAttribute("data-main-rotation",o)}function _setAnnotationCanvasMap(t,r){if(r){var a,i=_createForOfIteratorHelper(r);try{for(i.s();!(a=i.n()).done;){var o=_slicedToArray(a.value,2),l=o[0],c=o[1],u=t.querySelector(\'[data-annotation-id="\'.concat(l,\'"]\'));if(u){var d=u.firstChild;d?"CANVAS"===d.nodeName?d.replaceWith(c):d.before(c):u.append(c)}}}catch(t){i.e(t)}finally{i.f()}r.clear()}}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ColorConverters=void 0;function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function makeColorComp(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}var a=function(){function ColorConverters(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ColorConverters)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(ColorConverters,null,[{key:"CMYK_G",value:function CMYK_G(t){var r=_slicedToArray(t,4),a=r[0],i=r[1],o=r[2],l=r[3];return["G",1-Math.min(1,.3*a+.59*o+.11*i+l)]}},{key:"G_CMYK",value:function G_CMYK(t){return["CMYK",0,0,0,1-_slicedToArray(t,1)[0]]}},{key:"G_RGB",value:function G_RGB(t){var r=_slicedToArray(t,1)[0];return["RGB",r,r,r]}},{key:"G_HTML",value:function G_HTML(t){var r=makeColorComp(_slicedToArray(t,1)[0]);return"#".concat(r).concat(r).concat(r)}},{key:"RGB_G",value:function RGB_G(t){var r=_slicedToArray(t,3);return["G",.3*r[0]+.59*r[1]+.11*r[2]]}},{key:"RGB_HTML",value:function RGB_HTML(t){var r=_slicedToArray(t,3),a=r[0],i=r[1],o=r[2],l=makeColorComp(a),c=makeColorComp(i),u=makeColorComp(o);return"#".concat(l).concat(c).concat(u)}},{key:"T_HTML",value:function T_HTML(){return"#00000000"}},{key:"CMYK_RGB",value:function CMYK_RGB(t){var r=_slicedToArray(t,4),a=r[0],i=r[1],o=r[2],l=r[3];return["RGB",1-Math.min(1,a+l),1-Math.min(1,o+l),1-Math.min(1,i+l)]}},{key:"CMYK_HTML",value:function CMYK_HTML(t){var r=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(r)}},{key:"RGB_CMYK",value:function RGB_CMYK(t){var r=_slicedToArray(t,3),a=1-r[0],i=1-r[1],o=1-r[2];return["CMYK",a,i,o,Math.min(a,i,o)]}}]);return ColorConverters}();r.ColorConverters=a},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.XfaLayer=void 0;var i=a(145);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o=function(){function XfaLayer(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,XfaLayer)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(XfaLayer,null,[{key:"setupStorage",value:function setupStorage(t,r,a,i,o){var l=i.getValue(r,{value:null});switch(a.name){case"textarea":null!==l.value&&(t.textContent=l.value);if("print"===o)break;t.addEventListener("input",(function(t){i.setValue(r,{value:t.target.value})}));break;case"input":if("radio"===a.attributes.type||"checkbox"===a.attributes.type){l.value===a.attributes.xfaOn?t.setAttribute("checked",!0):l.value===a.attributes.xfaOff&&t.removeAttribute("checked");if("print"===o)break;t.addEventListener("change",(function(t){i.setValue(r,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{null!==l.value&&t.setAttribute("value",l.value);if("print"===o)break;t.addEventListener("input",(function(t){i.setValue(r,{value:t.target.value})}))}break;case"select":if(null!==l.value){var c,u=_createForOfIteratorHelper(a.children);try{for(u.s();!(c=u.n()).done;){var d=c.value;d.attributes.value===l.value&&(d.attributes.selected=!0)}}catch(t){u.e(t)}finally{u.f()}}t.addEventListener("input",(function(t){var a=t.target.options,o=-1===a.selectedIndex?"":a[a.selectedIndex].value;i.setValue(r,{value:o})}))}}},{key:"setAttributes",value:function setAttributes(t){var r=t.html,a=t.element,i=t.storage,o=void 0===i?null:i,l=t.intent,c=t.linkService,u=a.attributes,d=r instanceof HTMLAnchorElement;"radio"===u.type&&(u.name="".concat(u.name,"-").concat(l));for(var h=0,p=Object.entries(u);h<p.length;h++){var v=_slicedToArray(p[h],2),y=v[0],g=v[1];if(null!=g)switch(y){case"class":g.length&&r.setAttribute(y,g.join(" "));break;case"dataId":break;case"id":r.setAttribute("data-element-id",g);break;case"style":Object.assign(r.style,g);break;case"textContent":r.textContent=g;break;default:(!d||"href"!==y&&"newWindow"!==y)&&r.setAttribute(y,g)}}d&&c.addLinkAttributes(r,u.href,u.newWindow);o&&u.dataId&&this.setupStorage(r,u.dataId,a,o)}},{key:"render",value:function render(t){var r=t.annotationStorage,a=t.linkService,o=t.xfaHtml,l=t.intent||"display",c=document.createElement(o.name);o.attributes&&this.setAttributes({html:c,element:o,intent:l,linkService:a});var u=[[o,-1,c]],d=t.div;d.append(c);if(t.viewport){var h="matrix(".concat(t.viewport.transform.join(","),")");d.style.transform=h}"richText"!==l&&d.setAttribute("class","xfaLayer xfaFont");for(var p=[];u.length>0;){var v,y=_slicedToArray(u.at(-1),3),g=y[0],_=y[1],m=y[2];if(_+1!==g.children.length){var b=g.children[++u.at(-1)[1]];if(null!==b){var A=b.name;if("#text"!==A){var k=void 0;k=null!=b&&null!==(v=b.attributes)&&void 0!==v&&v.xmlns?document.createElementNS(b.attributes.xmlns,A):document.createElement(A);m.append(k);b.attributes&&this.setAttributes({html:k,element:b,storage:r,intent:l,linkService:a});if(b.children&&b.children.length>0)u.push([b,-1,k]);else if(b.value){var P=document.createTextNode(b.value);i.XfaText.shouldBuildText(A)&&p.push(P);k.append(P)}}else{var S=document.createTextNode(b.value);p.push(S);m.append(S)}}}else u.pop()}var w,x=_createForOfIteratorHelper(d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(x.s();!(w=x.n()).done;){w.value.setAttribute("readOnly",!0)}}catch(t){x.e(t)}finally{x.f()}return{textDivs:p}}},{key:"update",value:function update(t){var r="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=r;t.div.hidden=!1}}]);return XfaLayer}();r.XfaLayer=o},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TextLayerRenderTask=void 0;r.renderTextLayer=function renderTextLayer(t){var r=new d({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});r._render(t.timeout);return r};var i=a(1),o=a(129);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}var l=30,c=new Map,u=/^\\s+$/g;function appendText(t,r,a,o){var d=document.createElement("span"),h=t._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==r.str,hasEOL:r.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==r.str,hasEOL:r.hasEOL,fontSize:0};t._textDivs.push(d);var p=i.Util.transform(t._viewport.transform,r.transform),v=Math.atan2(p[1],p[0]),y=a[r.fontName];y.vertical&&(v+=Math.PI/2);var g,_,m=Math.hypot(p[2],p[3]),b=m*function getAscent(t,r){var a=c.get(t);if(a)return a;r.save();r.font="".concat(l,"px ").concat(t);var i=r.measureText(""),o=i.fontBoundingBoxAscent,u=Math.abs(i.fontBoundingBoxDescent);if(o){r.restore();var d=o/(o+u);c.set(t,d);return d}r.strokeStyle="red";r.clearRect(0,0,l,l);r.strokeText("g",0,0);var h=r.getImageData(0,0,l,l).data;u=0;for(var p=h.length-1-3;p>=0;p-=4)if(h[p]>0){u=Math.ceil(p/4/l);break}r.clearRect(0,0,l,l);r.strokeText("A",0,l);o=0;for(var v=0,y=(h=r.getImageData(0,0,l,l).data).length;v<y;v+=4)if(h[v]>0){o=l-Math.floor(v/4/l);break}r.restore();if(o){var g=o/(o+u);c.set(t,g);return g}c.set(t,.8);return.8}(y.fontFamily,o);if(0===v){g=p[4];_=p[5]-b}else{g=p[4]+b*Math.sin(v);_=p[5]-b*Math.cos(v)}d.style.left="".concat(g,"px");d.style.top="".concat(_,"px");d.style.fontSize="".concat(m,"px");d.style.fontFamily=y.fontFamily;h.fontSize=m;d.setAttribute("role","presentation");d.textContent=r.str;d.dir=r.dir;t._fontInspectorEnabled&&(d.dataset.fontName=r.fontName);0!==v&&(h.angle=v*(180/Math.PI));var A=!1;if(r.str.length>1||t._enhanceTextSelection&&u.test(r.str))A=!0;else if(" "!==r.str&&r.transform[0]!==r.transform[3]){var k=Math.abs(r.transform[0]),P=Math.abs(r.transform[3]);k!==P&&Math.max(k,P)/Math.min(k,P)>1.5&&(A=!0)}A&&(y.vertical?h.canvasWidth=r.height*t._viewport.scale:h.canvasWidth=r.width*t._viewport.scale);t._textDivProperties.set(d,h);t._textContentStream&&t._layoutText(d);if(t._enhanceTextSelection&&h.hasText){var S=1,w=0;if(0!==v){S=Math.cos(v);w=Math.sin(v)}var x,C,T=(y.vertical?r.height:r.width)*t._viewport.scale,E=m;if(0!==v){x=[S,w,-w,S,g,_];C=i.Util.getAxialAlignedBoundingBox([0,0,T,E],x)}else C=[g,_,g+T,_+E];t._bounds.push({left:C[0],top:C[1],right:C[2],bottom:C[3],div:d,size:[T,E],m:x})}}function render(t){if(!t._canceled){var r=t._textDivs,a=t._capability,i=r.length;if(i>1e5){t._renderingDone=!0;a.resolve()}else{if(!t._textContentStream)for(var o=0;o<i;o++)t._layoutText(r[o]);t._renderingDone=!0;a.resolve()}}}function findPositiveMin(t,r,a){for(var i=0,o=0;o<a;o++){var l=t[r++];l>0&&(i=i?Math.min(l,i):l)}return i}function expand(t){for(var r=t._bounds,a=t._viewport,o=function expandBounds(t,r,a){var i=a.map((function(t,r){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:r,x1New:void 0,x2New:void 0}}));expandBoundsLTR(t,i);var o,l=new Array(a.length),c=_createForOfIteratorHelper(i);try{for(c.s();!(o=c.n()).done;){var u=o.value,d=u.index;l[d]={left:u.x1New,top:0,right:u.x2New,bottom:0}}}catch(t){c.e(t)}finally{c.f()}a.map((function(r,a){var o=l[a],c=i[a];c.x1=r.top;c.y1=t-o.right;c.x2=r.bottom;c.y2=t-o.left;c.index=a;c.x1New=void 0;c.x2New=void 0}));expandBoundsLTR(r,i);var h,p=_createForOfIteratorHelper(i);try{for(p.s();!(h=p.n()).done;){var v=h.value,y=v.index;l[y].top=v.x1New;l[y].bottom=v.x2New}}catch(t){p.e(t)}finally{p.f()}return l}(a.width,a.height,r),l=0;l<o.length;l++){var c=r[l].div,u=t._textDivProperties.get(c);if(0!==u.angle){for(var d=o[l],h=r[l],p=h.m,v=p[0],y=p[1],g=[[0,0],[0,h.size[1]],[h.size[0],0],h.size],_=new Float64Array(64),m=0,b=g.length;m<b;m++){var A=i.Util.applyTransform(g[m],p);_[m+0]=v&&(d.left-A[0])/v;_[m+4]=y&&(d.top-A[1])/y;_[m+8]=v&&(d.right-A[0])/v;_[m+12]=y&&(d.bottom-A[1])/y;_[m+16]=y&&(d.left-A[0])/-y;_[m+20]=v&&(d.top-A[1])/v;_[m+24]=y&&(d.right-A[0])/-y;_[m+28]=v&&(d.bottom-A[1])/v;_[m+32]=v&&(d.left-A[0])/-v;_[m+36]=y&&(d.top-A[1])/-y;_[m+40]=v&&(d.right-A[0])/-v;_[m+44]=y&&(d.bottom-A[1])/-y;_[m+48]=y&&(d.left-A[0])/y;_[m+52]=v&&(d.top-A[1])/-v;_[m+56]=y&&(d.right-A[0])/y;_[m+60]=v&&(d.bottom-A[1])/-v}var k=1+Math.min(Math.abs(v),Math.abs(y));u.paddingLeft=findPositiveMin(_,32,16)/k;u.paddingTop=findPositiveMin(_,48,16)/k;u.paddingRight=findPositiveMin(_,0,16)/k;u.paddingBottom=findPositiveMin(_,16,16)/k;t._textDivProperties.set(c,u)}else{u.paddingLeft=r[l].left-o[l].left;u.paddingTop=r[l].top-o[l].top;u.paddingRight=o[l].right-r[l].right;u.paddingBottom=o[l].bottom-r[l].bottom;t._textDivProperties.set(c,u)}}}function expandBoundsLTR(t,r){r.sort((function(t,r){return t.x1-r.x1||t.index-r.index}));var a,i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}],o=_createForOfIteratorHelper(r);try{for(o.s();!(a=o.n()).done;){for(var l=a.value,c=0;c<i.length&&i[c].end<=l.y1;)c++;for(var u=i.length-1;u>=0&&i[u].start>=l.y2;)u--;var d=void 0,h=void 0,p=void 0,v=void 0,y=-1/0;for(p=c;p<=u;p++){h=(d=i[p]).boundary;var g=void 0;(g=h.x2>l.x1?h.index>l.index?h.x1New:l.x1:void 0===h.x2New?(h.x2+l.x1)/2:h.x2New)>y&&(y=g)}l.x1New=y;for(p=c;p<=u;p++)void 0===(h=(d=i[p]).boundary).x2New?h.x2>l.x1?h.index>l.index&&(h.x2New=h.x2):h.x2New=y:h.x2New>y&&(h.x2New=Math.max(y,h.x2));var _=[],m=null;for(p=c;p<=u;p++){var b=(h=(d=i[p]).boundary).x2>l.x2?h:l;if(m===b)_.at(-1).end=d.end;else{_.push({start:d.start,end:d.end,boundary:b});m=b}}if(i[c].start<l.y1){_[0].start=l.y1;_.unshift({start:i[c].start,end:l.y1,boundary:i[c].boundary})}if(l.y2<i[u].end){_.at(-1).end=l.y2;_.push({start:l.y2,end:i[u].end,boundary:i[u].boundary})}for(p=c;p<=u;p++)if(void 0===(h=(d=i[p]).boundary).x2New){var A=!1;for(v=c-1;!A&&v>=0&&i[v].start>=h.y1;v--)A=i[v].boundary===h;for(v=u+1;!A&&v<i.length&&i[v].end<=h.y2;v++)A=i[v].boundary===h;for(v=0;!A&&v<_.length;v++)A=_[v].boundary===h;A||(h.x2New=y)}Array.prototype.splice.apply(i,[c,u-c+1].concat(_))}}catch(t){o.e(t)}finally{o.f()}for(var k=0,P=i;k<P.length;k++){var S=P[k].boundary;void 0===S.x2New&&(S.x2New=Math.max(t,S.x2))}}var d=function(){function TextLayerRenderTask(t){var r,a=this,l=t.textContent,c=t.textContentStream,u=t.container,d=t.viewport,h=t.textDivs,p=t.textContentItemsStr,v=t.enhanceTextSelection;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,TextLayerRenderTask);v&&(0,o.deprecated)("The `enhanceTextSelection` functionality will be removed in the future.");this._textContent=l;this._textContentStream=c;this._container=u;this._document=u.ownerDocument;this._viewport=d;this._textDivs=h||[];this._textContentItemsStr=p||[];this._enhanceTextSelection=!!v;this._fontInspectorEnabled=!(null===(r=globalThis.FontInspector)||void 0===r||!r.enabled);this._reader=null;this._layoutTextLastFontSize=null;this._layoutTextLastFontFamily=null;this._layoutTextCtx=null;this._textDivProperties=new WeakMap;this._renderingDone=!1;this._canceled=!1;this._capability=(0,i.createPromiseCapability)();this._renderTimer=null;this._bounds=[];this._devicePixelRatio=globalThis.devicePixelRatio||1;this._capability.promise.finally((function(){a._enhanceTextSelection||(a._textDivProperties=null);if(a._layoutTextCtx){a._layoutTextCtx.canvas.width=0;a._layoutTextCtx.canvas.height=0;a._layoutTextCtx=null}})).catch((function(){}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}(TextLayerRenderTask,[{key:"promise",get:function get(){return this._capability.promise}},{key:"cancel",value:function cancel(){this._canceled=!0;if(this._reader){this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch((function(){}));this._reader=null}if(null!==this._renderTimer){clearTimeout(this._renderTimer);this._renderTimer=null}this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function _processItems(t,r){for(var a=0,i=t.length;a<i;a++)if(void 0!==t[a].str){this._textContentItemsStr.push(t[a].str);appendText(this,t[a],r,this._layoutTextCtx)}else if("beginMarkedContentProps"===t[a].type||"beginMarkedContent"===t[a].type){var o=this._container;this._container=document.createElement("span");this._container.classList.add("markedContent");null!==t[a].id&&this._container.setAttribute("id","".concat(t[a].id));o.append(this._container)}else"endMarkedContent"===t[a].type&&(this._container=this._container.parentNode)}},{key:"_layoutText",value:function _layoutText(t){var r=this._textDivProperties.get(t),a="";if(0!==r.canvasWidth&&r.hasText){var i=t.style.fontFamily,o=r.fontSize;if(o!==this._layoutTextLastFontSize||i!==this._layoutTextLastFontFamily){this._layoutTextCtx.font="".concat(o*this._devicePixelRatio,"px ").concat(i);this._layoutTextLastFontSize=o;this._layoutTextLastFontFamily=i}var l=this._layoutTextCtx.measureText(t.textContent).width;if(l>0){var c=this._devicePixelRatio*r.canvasWidth/l;this._enhanceTextSelection&&(r.scale=c);a="scaleX(".concat(c,")")}}0!==r.angle&&(a="rotate(".concat(r.angle,"deg) ").concat(a));if(a.length>0){this._enhanceTextSelection&&(r.originalTransform=a);t.style.transform=a}r.hasText&&this._container.append(t);if(r.hasEOL){var u=document.createElement("br");u.setAttribute("role","presentation");this._container.append(u)}}},{key:"_render",value:function _render(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=(0,i.createPromiseCapability)(),o=Object.create(null),c=this._document.createElement("canvas");c.height=c.width=l;this._layoutTextCtx=c.getContext("2d",{alpha:!1});if(this._textContent){var u=this._textContent.items,d=this._textContent.styles;this._processItems(u,d);a.resolve()}else{if(!this._textContentStream)throw new Error(\'Neither "textContent" nor "textContentStream" parameters specified.\');var h=function pump(){t._reader.read().then((function(r){var i=r.value;if(r.done)a.resolve();else{Object.assign(o,i.styles);t._processItems(i.items,o);pump()}}),a.reject)};this._reader=this._textContentStream.getReader();h()}a.promise.then((function(){o=null;r?t._renderTimer=setTimeout((function(){render(t);t._renderTimer=null}),r):render(t)}),this._capability.reject)}},{key:"expandTextDivs",value:function expandTextDivs(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._enhanceTextSelection&&this._renderingDone){if(null!==this._bounds){expand(this);this._bounds=null}for(var r=[],a=[],i=0,o=this._textDivs.length;i<o;i++){var l=this._textDivs[i],c=this._textDivProperties.get(l);if(c.hasText)if(t){r.length=0;a.length=0;c.originalTransform&&r.push(c.originalTransform);if(c.paddingTop>0){a.push("".concat(c.paddingTop,"px"));r.push("translateY(".concat(-c.paddingTop,"px)"))}else a.push(0);c.paddingRight>0?a.push("".concat(c.paddingRight/c.scale,"px")):a.push(0);c.paddingBottom>0?a.push("".concat(c.paddingBottom,"px")):a.push(0);if(c.paddingLeft>0){a.push("".concat(c.paddingLeft/c.scale,"px"));r.push("translateX(".concat(-c.paddingLeft/c.scale,"px)"))}else a.push(0);l.style.padding=a.join(" ");r.length&&(l.style.transform=r.join(" "))}else{l.style.padding=null;l.style.transform=c.originalTransform}}}}}]);return TextLayerRenderTask}();r.TextLayerRenderTask=d},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.SVGGraphics=void 0;var i=a(129),o=a(1),l=a(3);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var c=_createClass((function SVGGraphics(){_classCallCheck(this,SVGGraphics);(0,o.unreachable)("Not implemented: SVGGraphics")}));r.SVGGraphics=c;var u=function pf(t){if(Number.isInteger(t))return t.toString();var r=t.toFixed(10),a=r.length-1;if("0"!==r[a])return r;do{a--}while("0"===r[a]);return r.substring(0,"."===r[a]?a:a+1)},d=function pm(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":"scale(".concat(u(t[0])," ").concat(u(t[3]),")");if(t[0]===t[3]&&t[1]===-t[2]){var r=180*Math.acos(t[0])/Math.PI;return"rotate(".concat(u(r),")")}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return"translate(".concat(u(t[4])," ").concat(u(t[5]),")");return"matrix(".concat(u(t[0])," ").concat(u(t[1])," ").concat(u(t[2])," ").concat(u(t[3])," ").concat(u(t[4])," ")+"".concat(u(t[5]),")")},h={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p=["butt","round","square"],v=["miter","round","bevel"],y=function createObjectURL(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!=typeof Blob&&!a)return URL.createObjectURL(new Blob([t],{type:r}));for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="data:".concat(r,";base64,"),l=0,c=t.length;l<c;l+=3){var u=255&t[l],d=255&t[l+1],h=255&t[l+2],p=u>>2,v=(3&u)<<4|d>>4,y=l+1<c?(15&d)<<2|h>>6:64,g=l+2<c?63&h:64;o+=i[p]+i[v]+i[y]+i[g]}return o},g=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),r=new Int32Array(256),a=0;a<256;a++){for(var i=a,c=0;c<8;c++)i=1&i?3988292384^i>>1&2147483647:i>>1&2147483647;r[a]=i}function writePngChunk(t,a,i,o){var l=o,c=a.length;i[l]=c>>24&255;i[l+1]=c>>16&255;i[l+2]=c>>8&255;i[l+3]=255&c;i[l+=4]=255&t.charCodeAt(0);i[l+1]=255&t.charCodeAt(1);i[l+2]=255&t.charCodeAt(2);i[l+3]=255&t.charCodeAt(3);l+=4;i.set(a,l);var u=function crc32(t,a,i){for(var o=-1,l=a;l<i;l++){var c=255&(o^t[l]);o=o>>>8^r[c]}return-1^o}(i,o+4,l+=a.length);i[l]=u>>24&255;i[l+1]=u>>16&255;i[l+2]=u>>8&255;i[l+3]=255&u}function deflateSyncUncompressed(t){var r=t.length,a=65535,i=Math.ceil(r/a),o=new Uint8Array(2+r+5*i+4),l=0;o[l++]=120;o[l++]=156;for(var c=0;r>a;){o[l++]=0;o[l++]=255;o[l++]=255;o[l++]=0;o[l++]=0;o.set(t.subarray(c,c+a),l);l+=a;c+=a;r-=a}o[l++]=1;o[l++]=255&r;o[l++]=r>>8&255;o[l++]=255&~r;o[l++]=(65535&~r)>>8&255;o.set(t.subarray(c),l);l+=t.length-c;var u=function adler32(t,r,a){for(var i=1,o=0,l=r;l<a;++l)o=(o+(i=(i+(255&t[l]))%65521))%65521;return o<<16|i}(t,0,t.length);o[l++]=u>>24&255;o[l++]=u>>16&255;o[l++]=u>>8&255;o[l++]=255&u;return o}function encode(r,a,i,c){var u,d,h,p=r.width,v=r.height,g=r.data;switch(a){case o.ImageKind.GRAYSCALE_1BPP:d=0;u=1;h=p+7>>3;break;case o.ImageKind.RGB_24BPP:d=2;u=8;h=3*p;break;case o.ImageKind.RGBA_32BPP:d=6;u=8;h=4*p;break;default:throw new Error("invalid format")}for(var _=new Uint8Array((1+h)*v),m=0,b=0,A=0;A<v;++A){_[m++]=0;_.set(g.subarray(b,b+h),m);b+=h;m+=h}if(a===o.ImageKind.GRAYSCALE_1BPP&&c){m=0;for(var k=0;k<v;k++){m++;for(var P=0;P<h;P++)_[m++]^=255}}var S=new Uint8Array([p>>24&255,p>>16&255,p>>8&255,255&p,v>>24&255,v>>16&255,v>>8&255,255&v,u,d,0,0,0]),w=function deflateSync(t){if(!l.isNodeJS)return deflateSyncUncompressed(t);try{var r;r=parseInt(process.versions.node)>=8?t:Buffer.from(t);var a=require("zlib").deflateSync(r,{level:9});return a instanceof Uint8Array?a:new Uint8Array(a)}catch(t){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return deflateSyncUncompressed(t)}(_),x=t.length+36+S.length+w.length,C=new Uint8Array(x),T=0;C.set(t,T);writePngChunk("IHDR",S,C,T+=t.length);writePngChunk("IDATA",w,C,T+=12+S.length);T+=12+w.length;writePngChunk("IEND",new Uint8Array(0),C,T);return y(C,"image/png",i)}return function convertImgDataToPng(t,r,a){return encode(t,void 0===t.kind?o.ImageKind.GRAYSCALE_1BPP:t.kind,r,a)}}(),_=function(){function SVGExtraState(){_classCallCheck(this,SVGExtraState);this.fontSizeScale=1;this.fontWeight=h.fontWeight;this.fontSize=0;this.textMatrix=o.IDENTITY_MATRIX;this.fontMatrix=o.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=o.TextRenderingMode.FILL;this.textMatrixScale=1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=h.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId=""}_createClass(SVGExtraState,[{key:"clone",value:function clone(){return Object.create(this)}},{key:"setCurrentPoint",value:function setCurrentPoint(t,r){this.x=t;this.y=r}}]);return SVGExtraState}(),m=0,b=0,A=0;r.SVGGraphics=c=function(){function SVGGraphics(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,SVGGraphics);(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future.");this.svgFactory=new i.DOMSVGFactory;this.current=new _;this.transformMatrix=o.IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=t;this.objs=r;this.pendingClip=null;this.pendingEOFill=!1;this.embedFonts=!1;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!a;this._operatorIdMapping=[];for(var l in o.OPS)this._operatorIdMapping[o.OPS[l]]=l}_createClass(SVGGraphics,[{key:"save",value:function save(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t);this.current=t.clone()}},{key:"restore",value:function restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null}},{key:"group",value:function group(t){this.save();this.executeOpTree(t);this.restore()}},{key:"loadDependencies",value:function loadDependencies(t){for(var r=this,a=t.fnArray,i=t.argsArray,l=0,c=a.length;l<c;l++)if(a[l]===o.OPS.dependency){var u,d=_createForOfIteratorHelper(i[l]);try{var h=function _loop(){var t=u.value,a=t.startsWith("g_")?r.commonObjs:r.objs,i=new Promise((function(r){a.get(t,r)}));r.current.dependencies.push(i)};for(d.s();!(u=d.n()).done;)h()}catch(t){d.e(t)}finally{d.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function transform(t,r,a,i,l,c){var u=[t,r,a,i,l,c];this.transformMatrix=o.Util.transform(this.transformMatrix,u);this.tgrp=null}},{key:"getSVG",value:function getSVG(t,r){var a=this;this.viewport=r;var i=this._initialize(r);return this.loadDependencies(t).then((function(){a.transformMatrix=o.IDENTITY_MATRIX;a.executeOpTree(a.convertOpList(t));return i}))}},{key:"convertOpList",value:function convertOpList(t){for(var r=this._operatorIdMapping,a=t.argsArray,i=t.fnArray,o=[],l=0,c=i.length;l<c;l++){var u=i[l];o.push({fnId:u,fn:r[u],args:a[l]})}return function opListToTree(t){var r,a=[],i=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var l=r.value;if("save"!==l.fn)"restore"===l.fn?a=i.pop():a.push(l);else{a.push({fnId:92,fn:"group",items:[]});i.push(a);a=a.at(-1).items}}}catch(t){o.e(t)}finally{o.f()}return a}(o)}},{key:"executeOpTree",value:function executeOpTree(t){var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var i=r.value,l=i.fn,c=i.fnId,u=i.args;switch(0|c){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(u);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(u[0],u[1]);break;case o.OPS.setFont:this.setFont(u);break;case o.OPS.showText:case o.OPS.showSpacedText:this.showText(u[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(u[0],u[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(u[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(u[0]);break;case o.OPS.setHScale:this.setHScale(u[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(u[0],u[1],u[2],u[3],u[4],u[5]);break;case o.OPS.setTextRise:this.setTextRise(u[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(u[0]);break;case o.OPS.setLineWidth:this.setLineWidth(u[0]);break;case o.OPS.setLineJoin:this.setLineJoin(u[0]);break;case o.OPS.setLineCap:this.setLineCap(u[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(u[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(u[0],u[1],u[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(u[0],u[1],u[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(u);break;case o.OPS.setFillColorN:this.setFillColorN(u);break;case o.OPS.shadingFill:this.shadingFill(u[0]);break;case o.OPS.setDash:this.setDash(u[0],u[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(u[0]);break;case o.OPS.setFlatness:this.setFlatness(u[0]);break;case o.OPS.setGState:this.setGState(u[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(u[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(u[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(u[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(u[0],u[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(u[0],u[1],u[2],u[3],u[4],u[5]);break;case o.OPS.constructPath:this.constructPath(u[0],u[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,o.warn)("Unimplemented operator ".concat(l))}}}catch(t){a.e(t)}finally{a.f()}}},{key:"setWordSpacing",value:function setWordSpacing(t){this.current.wordSpacing=t}},{key:"setCharSpacing",value:function setCharSpacing(t){this.current.charSpacing=t}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function setTextMatrix(t,r,a,i,o,l){var c=this.current;c.textMatrix=c.lineMatrix=[t,r,a,i,o,l];c.textMatrixScale=Math.hypot(t,r);c.x=c.lineX=0;c.y=c.lineY=0;c.xcoords=[];c.ycoords=[];c.tspan=this.svgFactory.createElement("svg:tspan");c.tspan.setAttributeNS(null,"font-family",c.fontFamily);c.tspan.setAttributeNS(null,"font-size","".concat(u(c.fontSize),"px"));c.tspan.setAttributeNS(null,"y",u(-c.y));c.txtElement=this.svgFactory.createElement("svg:text");c.txtElement.append(c.tspan)}},{key:"beginText",value:function beginText(){var t=this.current;t.x=t.lineX=0;t.y=t.lineY=0;t.textMatrix=o.IDENTITY_MATRIX;t.lineMatrix=o.IDENTITY_MATRIX;t.textMatrixScale=1;t.tspan=this.svgFactory.createElement("svg:tspan");t.txtElement=this.svgFactory.createElement("svg:text");t.txtgrp=this.svgFactory.createElement("svg:g");t.xcoords=[];t.ycoords=[]}},{key:"moveText",value:function moveText(t,r){var a=this.current;a.x=a.lineX+=t;a.y=a.lineY+=r;a.xcoords=[];a.ycoords=[];a.tspan=this.svgFactory.createElement("svg:tspan");a.tspan.setAttributeNS(null,"font-family",a.fontFamily);a.tspan.setAttributeNS(null,"font-size","".concat(u(a.fontSize),"px"));a.tspan.setAttributeNS(null,"y",u(-a.y))}},{key:"showText",value:function showText(t){var r=this.current,a=r.font,i=r.fontSize;if(0!==i){var l,c=r.fontSizeScale,p=r.charSpacing,v=r.wordSpacing,y=r.fontDirection,g=r.textHScale*y,_=a.vertical,m=_?1:-1,b=a.defaultVMetrics,A=i*r.fontMatrix[0],k=0,P=_createForOfIteratorHelper(t);try{for(P.s();!(l=P.n()).done;){var S=l.value;if(null!==S)if("number"!=typeof S){var w=(S.isSpace?v:0)+p,x=S.fontChar,C=void 0,T=void 0,E=S.width;if(_){var I=void 0,O=S.vmetric||b;I=-(I=S.vmetric?O[1]:.5*E)*A;var M=O[2]*A;E=O?-O[0]:E;C=I/c;T=(k+M)/c}else{C=k/c;T=0}if(S.isInFont||a.missingFile){r.xcoords.push(r.x+C);_&&r.ycoords.push(-r.y+T);r.tspan.textContent+=x}k+=_?E*A-w*y:E*A+w*y}else k+=m*S*i/1e3;else k+=y*v}}catch(t){P.e(t)}finally{P.f()}r.tspan.setAttributeNS(null,"x",r.xcoords.map(u).join(" "));_?r.tspan.setAttributeNS(null,"y",r.ycoords.map(u).join(" ")):r.tspan.setAttributeNS(null,"y",u(-r.y));_?r.y-=k:r.x+=k*g;r.tspan.setAttributeNS(null,"font-family",r.fontFamily);r.tspan.setAttributeNS(null,"font-size","".concat(u(r.fontSize),"px"));r.fontStyle!==h.fontStyle&&r.tspan.setAttributeNS(null,"font-style",r.fontStyle);r.fontWeight!==h.fontWeight&&r.tspan.setAttributeNS(null,"font-weight",r.fontWeight);var R=r.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(R===o.TextRenderingMode.FILL||R===o.TextRenderingMode.FILL_STROKE){r.fillColor!==h.fillColor&&r.tspan.setAttributeNS(null,"fill",r.fillColor);r.fillAlpha<1&&r.tspan.setAttributeNS(null,"fill-opacity",r.fillAlpha)}else r.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?r.tspan.setAttributeNS(null,"fill","transparent"):r.tspan.setAttributeNS(null,"fill","none");if(R===o.TextRenderingMode.STROKE||R===o.TextRenderingMode.FILL_STROKE){var D=1/(r.textMatrixScale||1);this._setStrokeAttributes(r.tspan,D)}var L=r.textMatrix;0!==r.textRise&&((L=L.slice())[5]+=r.textRise);r.txtElement.setAttributeNS(null,"transform","".concat(d(L)," scale(").concat(u(g),", -1)"));r.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");r.txtElement.append(r.tspan);r.txtgrp.append(r.txtElement);this._ensureTransformGroup().append(r.txtElement)}}},{key:"setLeadingMoveText",value:function setLeadingMoveText(t,r){this.setLeading(-r);this.moveText(t,r)}},{key:"addFontStyle",value:function addFontStyle(t){if(!t.data)throw new Error(\'addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.\');if(!this.cssStyle){this.cssStyle=this.svgFactory.createElement("svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.append(this.cssStyle)}var r=y(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=\'@font-face { font-family: "\'.concat(t.loadedName,\'";\')+" src: url(".concat(r,"); }\\n")}},{key:"setFont",value:function setFont(t){var r=this.current,a=this.commonObjs.get(t[0]),i=t[1];r.font=a;if(this.embedFonts&&!a.missingFile&&!this.embeddedFonts[a.loadedName]){this.addFontStyle(a);this.embeddedFonts[a.loadedName]=a}r.fontMatrix=a.fontMatrix||o.FONT_IDENTITY_MATRIX;var l="normal";a.black?l="900":a.bold&&(l="bold");var c=a.italic?"italic":"normal";if(i<0){i=-i;r.fontDirection=-1}else r.fontDirection=1;r.fontSize=i;r.fontFamily=a.loadedName;r.fontWeight=l;r.fontStyle=c;r.tspan=this.svgFactory.createElement("svg:tspan");r.tspan.setAttributeNS(null,"y",u(-r.y));r.xcoords=[];r.ycoords=[]}},{key:"endText",value:function endText(){var t,r=this.current;if(r.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(t=r.txtElement)&&void 0!==t&&t.hasChildNodes()){r.element=r.txtElement;this.clip("nonzero");this.endPath()}}},{key:"setLineWidth",value:function setLineWidth(t){t>0&&(this.current.lineWidth=t)}},{key:"setLineCap",value:function setLineCap(t){this.current.lineCap=p[t]}},{key:"setLineJoin",value:function setLineJoin(t){this.current.lineJoin=v[t]}},{key:"setMiterLimit",value:function setMiterLimit(t){this.current.miterLimit=t}},{key:"setStrokeAlpha",value:function setStrokeAlpha(t){this.current.strokeAlpha=t}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(t,r,a){this.current.strokeColor=o.Util.makeHexColor(t,r,a)}},{key:"setFillAlpha",value:function setFillAlpha(t){this.current.fillAlpha=t}},{key:"setFillRGBColor",value:function setFillRGBColor(t,r,a){this.current.fillColor=o.Util.makeHexColor(t,r,a);this.current.tspan=this.svgFactory.createElement("svg:tspan");this.current.xcoords=[];this.current.ycoords=[]}},{key:"setStrokeColorN",value:function setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}},{key:"setFillColorN",value:function setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}},{key:"shadingFill",value:function shadingFill(t){var r=this.viewport.width,a=this.viewport.height,i=o.Util.inverseTransform(this.transformMatrix),l=o.Util.applyTransform([0,0],i),c=o.Util.applyTransform([0,a],i),u=o.Util.applyTransform([r,0],i),d=o.Util.applyTransform([r,a],i),h=Math.min(l[0],c[0],u[0],d[0]),p=Math.min(l[1],c[1],u[1],d[1]),v=Math.max(l[0],c[0],u[0],d[0]),y=Math.max(l[1],c[1],u[1],d[1]),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",h);g.setAttributeNS(null,"y",p);g.setAttributeNS(null,"width",v-h);g.setAttributeNS(null,"height",y-p);g.setAttributeNS(null,"fill",this._makeShadingPattern(t));this.current.fillAlpha<1&&g.setAttributeNS(null,"fill-opacity",this.current.fillAlpha);this._ensureTransformGroup().append(g)}},{key:"_makeColorN_Pattern",value:function _makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}},{key:"_makeTilingPattern",value:function _makeTilingPattern(t){var r=t[1],a=t[2],i=t[3]||o.IDENTITY_MATRIX,l=_slicedToArray(t[4],4),c=l[0],u=l[1],d=l[2],h=l[3],p=t[5],v=t[6],y=t[7],g="shading".concat(A++),_=_slicedToArray(o.Util.normalizeRect([].concat(_toConsumableArray(o.Util.applyTransform([c,u],i)),_toConsumableArray(o.Util.applyTransform([d,h],i)))),4),m=_[0],b=_[1],k=_[2],P=_[3],S=_slicedToArray(o.Util.singularValueDecompose2dScale(i),2),w=p*S[0],x=v*S[1],C=this.svgFactory.createElement("svg:pattern");C.setAttributeNS(null,"id",g);C.setAttributeNS(null,"patternUnits","userSpaceOnUse");C.setAttributeNS(null,"width",w);C.setAttributeNS(null,"height",x);C.setAttributeNS(null,"x","".concat(m));C.setAttributeNS(null,"y","".concat(b));var T=this.svg,E=this.transformMatrix,I=this.current.fillColor,O=this.current.strokeColor,M=this.svgFactory.create(k-m,P-b);this.svg=M;this.transformMatrix=i;if(2===y){var R=o.Util.makeHexColor.apply(o.Util,_toConsumableArray(r));this.current.fillColor=R;this.current.strokeColor=R}this.executeOpTree(this.convertOpList(a));this.svg=T;this.transformMatrix=E;this.current.fillColor=I;this.current.strokeColor=O;C.append(M.childNodes[0]);this.defs.append(C);return"url(#".concat(g,")")}},{key:"_makeShadingPattern",value:function _makeShadingPattern(t){"string"==typeof t&&(t=this.objs.get(t));switch(t[0]){case"RadialAxial":var r,a="shading".concat(A++),i=t[3];switch(t[1]){case"axial":var l=t[4],c=t[5];(r=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",a);r.setAttributeNS(null,"gradientUnits","userSpaceOnUse");r.setAttributeNS(null,"x1",l[0]);r.setAttributeNS(null,"y1",l[1]);r.setAttributeNS(null,"x2",c[0]);r.setAttributeNS(null,"y2",c[1]);break;case"radial":var u=t[4],d=t[5],h=t[6],p=t[7];(r=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",a);r.setAttributeNS(null,"gradientUnits","userSpaceOnUse");r.setAttributeNS(null,"cx",d[0]);r.setAttributeNS(null,"cy",d[1]);r.setAttributeNS(null,"r",p);r.setAttributeNS(null,"fx",u[0]);r.setAttributeNS(null,"fy",u[1]);r.setAttributeNS(null,"fr",h);break;default:throw new Error("Unknown RadialAxial type: ".concat(t[1]))}var v,y=_createForOfIteratorHelper(i);try{for(y.s();!(v=y.n()).done;){var g=v.value,_=this.svgFactory.createElement("svg:stop");_.setAttributeNS(null,"offset",g[0]);_.setAttributeNS(null,"stop-color",g[1]);r.append(_)}}catch(t){y.e(t)}finally{y.f()}this.defs.append(r);return"url(#".concat(a,")");case"Mesh":(0,o.warn)("Unimplemented pattern Mesh");return null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(t[0]))}}},{key:"setDash",value:function setDash(t,r){this.current.dashArray=t;this.current.dashPhase=r}},{key:"constructPath",value:function constructPath(t,r){var a,i=this.current,l=i.x,c=i.y,d=[],h=0,p=_createForOfIteratorHelper(t);try{for(p.s();!(a=p.n()).done;){switch(0|a.value){case o.OPS.rectangle:l=r[h++];c=r[h++];var v=r[h++],y=r[h++],g=l+v,_=c+y;d.push("M",u(l),u(c),"L",u(g),u(c),"L",u(g),u(_),"L",u(l),u(_),"Z");break;case o.OPS.moveTo:l=r[h++];c=r[h++];d.push("M",u(l),u(c));break;case o.OPS.lineTo:l=r[h++];c=r[h++];d.push("L",u(l),u(c));break;case o.OPS.curveTo:l=r[h+4];c=r[h+5];d.push("C",u(r[h]),u(r[h+1]),u(r[h+2]),u(r[h+3]),u(l),u(c));h+=6;break;case o.OPS.curveTo2:d.push("C",u(l),u(c),u(r[h]),u(r[h+1]),u(r[h+2]),u(r[h+3]));l=r[h+2];c=r[h+3];h+=4;break;case o.OPS.curveTo3:l=r[h+2];c=r[h+3];d.push("C",u(r[h]),u(r[h+1]),u(l),u(c),u(l),u(c));h+=4;break;case o.OPS.closePath:d.push("Z")}}}catch(t){p.e(t)}finally{p.f()}d=d.join(" ");if(i.path&&t.length>0&&t[0]!==o.OPS.rectangle&&t[0]!==o.OPS.moveTo)d=i.path.getAttributeNS(null,"d")+d;else{i.path=this.svgFactory.createElement("svg:path");this._ensureTransformGroup().append(i.path)}i.path.setAttributeNS(null,"d",d);i.path.setAttributeNS(null,"fill","none");i.element=i.path;i.setCurrentPoint(l,c)}},{key:"endPath",value:function endPath(){var t=this.current;t.path=null;if(this.pendingClip)if(t.element){var r="clippath".concat(m++),a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",r);a.setAttributeNS(null,"transform",d(this.transformMatrix));var i=t.element.cloneNode(!0);"evenodd"===this.pendingClip?i.setAttributeNS(null,"clip-rule","evenodd"):i.setAttributeNS(null,"clip-rule","nonzero");this.pendingClip=null;a.append(i);this.defs.append(a);if(t.activeClipUrl){t.clipGroup=null;var o,l=_createForOfIteratorHelper(this.extraStack);try{for(l.s();!(o=l.n()).done;){o.value.clipGroup=null}}catch(t){l.e(t)}finally{l.f()}a.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl="url(#".concat(r,")");this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function clip(t){this.pendingClip=t}},{key:"closePath",value:function closePath(){var t=this.current;if(t.path){var r="".concat(t.path.getAttributeNS(null,"d"),"Z");t.path.setAttributeNS(null,"d",r)}}},{key:"setLeading",value:function setLeading(t){this.current.leading=-t}},{key:"setTextRise",value:function setTextRise(t){this.current.textRise=t}},{key:"setTextRenderingMode",value:function setTextRenderingMode(t){this.current.textRenderingMode=t}},{key:"setHScale",value:function setHScale(t){this.current.textHScale=t/100}},{key:"setRenderingIntent",value:function setRenderingIntent(t){}},{key:"setFlatness",value:function setFlatness(t){}},{key:"setGState",value:function setGState(t){var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var i=_slicedToArray(r.value,2),l=i[0],c=i[1];switch(l){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c);break;case"CA":this.setStrokeAlpha(c);break;case"ca":this.setFillAlpha(c);break;default:(0,o.warn)("Unimplemented graphic state operator ".concat(l))}}}catch(t){a.e(t)}finally{a.f()}}},{key:"fill",value:function fill(){var t=this.current;if(t.element){t.element.setAttributeNS(null,"fill",t.fillColor);t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha);this.endPath()}}},{key:"stroke",value:function stroke(){var t=this.current;if(t.element){this._setStrokeAttributes(t.element);t.element.setAttributeNS(null,"fill","none");this.endPath()}}},{key:"_setStrokeAttributes",value:function _setStrokeAttributes(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.current,i=a.dashArray;1!==r&&i.length>0&&(i=i.map((function(t){return r*t})));t.setAttributeNS(null,"stroke",a.strokeColor);t.setAttributeNS(null,"stroke-opacity",a.strokeAlpha);t.setAttributeNS(null,"stroke-miterlimit",u(a.miterLimit));t.setAttributeNS(null,"stroke-linecap",a.lineCap);t.setAttributeNS(null,"stroke-linejoin",a.lineJoin);t.setAttributeNS(null,"stroke-width",u(r*a.lineWidth)+"px");t.setAttributeNS(null,"stroke-dasharray",i.map(u).join(" "));t.setAttributeNS(null,"stroke-dashoffset",u(r*a.dashPhase)+"px")}},{key:"eoFill",value:function eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fill()}},{key:"fillStroke",value:function fillStroke(){this.stroke();this.fill()}},{key:"eoFillStroke",value:function eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.closePath();this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){var t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0");t.setAttributeNS(null,"y","0");t.setAttributeNS(null,"width","1px");t.setAttributeNS(null,"height","1px");t.setAttributeNS(null,"fill",this.current.fillColor);this._ensureTransformGroup().append(t)}},{key:"paintImageXObject",value:function paintImageXObject(t){var r=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);r?this.paintInlineImageXObject(r):(0,o.warn)("Dependent image with object ID ".concat(t," is not ready yet"))}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(t,r){var a=t.width,i=t.height,o=g(t,this.forceDataSchema,!!r),l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0");l.setAttributeNS(null,"y","0");l.setAttributeNS(null,"width",u(a));l.setAttributeNS(null,"height",u(i));this.current.element=l;this.clip("nonzero");var c=this.svgFactory.createElement("svg:image");c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);c.setAttributeNS(null,"x","0");c.setAttributeNS(null,"y",u(-i));c.setAttributeNS(null,"width",u(a)+"px");c.setAttributeNS(null,"height",u(i)+"px");c.setAttributeNS(null,"transform","scale(".concat(u(1/a)," ").concat(u(-1/i),")"));r?r.append(c):this._ensureTransformGroup().append(c)}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(t){var r=this.current,a=t.width,i=t.height,o=r.fillColor;r.maskId="mask".concat(b++);var l=this.svgFactory.createElement("svg:mask");l.setAttributeNS(null,"id",r.maskId);var c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0");c.setAttributeNS(null,"y","0");c.setAttributeNS(null,"width",u(a));c.setAttributeNS(null,"height",u(i));c.setAttributeNS(null,"fill",o);c.setAttributeNS(null,"mask","url(#".concat(r.maskId,")"));this.defs.append(l);this._ensureTransformGroup().append(c);this.paintInlineImageXObject(t,l)}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(t,r){Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]);if(r){var a=r[2]-r[0],i=r[3]-r[1],o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x",r[0]);o.setAttributeNS(null,"y",r[1]);o.setAttributeNS(null,"width",u(a));o.setAttributeNS(null,"height",u(i));this.current.element=o;this.clip("nonzero");this.endPath()}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){}},{key:"_initialize",value:function _initialize(t){var r=this.svgFactory.create(t.width,t.height),a=this.svgFactory.createElement("svg:defs");r.append(a);this.defs=a;var i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"transform",d(t.transform));r.append(i);this.svg=i;return r}},{key:"_ensureClipGroup",value:function _ensureClipGroup(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl);this.svg.append(t);this.current.clipGroup=t}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function _ensureTransformGroup(){if(!this.tgrp){this.tgrp=this.svgFactory.createElement("svg:g");this.tgrp.setAttributeNS(null,"transform",d(this.transformMatrix));this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)}return this.tgrp}}]);return SVGGraphics}()},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFNodeStream=void 0;var i=a(1),o=a(158);function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){t.__proto__=r;return t};return _setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),c=new Context(i||[]);return l._invoke=function(t,r,a){var i="suspendedStart";return function(o,l){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw l;return doneResult()}for(a.method=o,a.arg=l;;){var c=a.delegate;if(c){var d=maybeInvokeDelegate(c,a);if(d){if(d===u)continue;return d}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var h=tryCatch(t,r,a);if("normal"===h.type){if(i=a.done?"completed":"suspendedYield",h.arg===u)continue;return{value:h.arg,done:a.done}}"throw"===h.type&&(i="completed",a.method="throw",a.arg=h.arg)}}}(t,a,c),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&a.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,o,l,c){var u=tryCatch(t[i],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&a.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var i;this._invoke=function(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,a,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var a=t.iterator[r.method];if(void 0===a){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return u}var i=tryCatch(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,u;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,u):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,l=function next(){for(;++i<t.length;)if(a.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return l.next=l}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(v),define(v,c,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,i){return l.type="throw",l.arg=t,r.next=a,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),u},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),u}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),d=u.value}catch(t){a(t);return}u.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}var l=require("fs"),c=require("http"),u=require("https"),d=require("url"),h=/^file:\\/\\/\\/[a-zA-Z]:\\//;var p=function(){function PDFNodeStream(t){_classCallCheck(this,PDFNodeStream);this.source=t;this.url=function parseUrl(t){var r=d.parse(t);if("file:"===r.protocol||r.host)return r;if(/^[a-z]:[/\\\\]/i.test(t))return d.parse("file:///".concat(t));r.host||(r.protocol="file:");return r}(t.url);this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol;this.isFsUrl="file:"===this.url.protocol;this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFNodeStream,[{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=this.isFsUrl?new m(this):new g(this);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var a=this.isFsUrl?new b(this,t,r):new _(this,t,r);this._rangeRequestReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var r,a=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(a.s();!(r=a.n()).done;){r.value.cancel(t)}}catch(t){a.e(t)}finally{a.f()}}}]);return PDFNodeStream}();r.PDFNodeStream=p;var v=function(){function BaseFullReader(t){_classCallCheck(this,BaseFullReader);this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;var r=t.source;this._contentLength=r.length;this._loaded=0;this._filename=null;this._disableRange=r.disableRange||!1;this._rangeChunkSize=r.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!r.disableStream;this._isRangeSupported=!r.disableRange;this._readableStream=null;this._readCapability=(0,i.createPromiseCapability)();this._headersCapability=(0,i.createPromiseCapability)()}_createClass(BaseFullReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r;return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return this._readCapability.promise;case 2:if(!this._done){a.next=4;break}return a.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){a.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){a.next=10;break}this._readCapability=(0,i.createPromiseCapability)();return a.abrupt("return",this.read());case 10:this._loaded+=t.length;this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});r=new Uint8Array(t).buffer;return a.abrupt("return",{value:r,done:!1});case 14:case"end":return a.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t;this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var r=this;this._readableStream=t;t.on("readable",(function(){r._readCapability.resolve()}));t.on("end",(function(){t.destroy();r._done=!0;r._readCapability.resolve()}));t.on("error",(function(t){r._error(t)}));!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled"));this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t;return BaseFullReader}(),y=function(){function BaseRangeReader(t){_classCallCheck(this,BaseRangeReader);this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=(0,i.createPromiseCapability)();var r=t.source;this._isStreamingSupported=!r.disableStream}_createClass(BaseRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r;return _regeneratorRuntime().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return this._readCapability.promise;case 2:if(!this._done){a.next=4;break}return a.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){a.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){a.next=10;break}this._readCapability=(0,i.createPromiseCapability)();return a.abrupt("return",this.read());case 10:this._loaded+=t.length;this.onProgress&&this.onProgress({loaded:this._loaded});r=new Uint8Array(t).buffer;return a.abrupt("return",{value:r,done:!1});case 14:case"end":return a.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t;this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var r=this;this._readableStream=t;t.on("readable",(function(){r._readCapability.resolve()}));t.on("end",(function(){t.destroy();r._done=!0;r._readCapability.resolve()}));t.on("error",(function(t){r._error(t)}));this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t;return BaseRangeReader}();function createRequestOptions(t,r){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:r}}var g=function(t){_inherits(PDFNodeStreamFullReader,t);var r=_createSuper(PDFNodeStreamFullReader);function PDFNodeStreamFullReader(t){var a;_classCallCheck(this,PDFNodeStreamFullReader);var l=function handleResponse(r){if(404!==r.statusCode){a._headersCapability.resolve();a._setReadableStream(r);var l=function getResponseHeader(t){return a._readableStream.headers[t.toLowerCase()]},c=(0,o.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:t.isHttp,rangeChunkSize:a._rangeChunkSize,disableRange:a._disableRange}),u=c.allowRangeRequests,d=c.suggestedLength;a._isRangeSupported=u;a._contentLength=d||a._contentLength;a._filename=(0,o.extractFilenameFromHeader)(l)}else{var h=new i.MissingPDFException(\'Missing PDF "\'.concat(a._url,\'".\'));a._storedError=h;a._headersCapability.reject(h)}};(a=r.call(this,t))._request=null;"http:"===a._url.protocol?a._request=c.request(createRequestOptions(a._url,t.httpHeaders),l):a._request=u.request(createRequestOptions(a._url,t.httpHeaders),l);a._request.on("error",(function(t){a._storedError=t;a._headersCapability.reject(t)}));a._request.end();return a}return _createClass(PDFNodeStreamFullReader)}(v),_=function(t){_inherits(PDFNodeStreamRangeReader,t);var r=_createSuper(PDFNodeStreamRangeReader);function PDFNodeStreamRangeReader(t,a,o){var l;_classCallCheck(this,PDFNodeStreamRangeReader);(l=r.call(this,t))._httpHeaders={};for(var d in t.httpHeaders){var h=t.httpHeaders[d];void 0!==h&&(l._httpHeaders[d]=h)}l._httpHeaders.Range="bytes=".concat(a,"-").concat(o-1);var p=function handleResponse(t){if(404!==t.statusCode)l._setReadableStream(t);else{var r=new i.MissingPDFException(\'Missing PDF "\'.concat(l._url,\'".\'));l._storedError=r}};l._request=null;"http:"===l._url.protocol?l._request=c.request(createRequestOptions(l._url,l._httpHeaders),p):l._request=u.request(createRequestOptions(l._url,l._httpHeaders),p);l._request.on("error",(function(t){l._storedError=t}));l._request.end();return l}return _createClass(PDFNodeStreamRangeReader)}(y),m=function(t){_inherits(PDFNodeStreamFsFullReader,t);var r=_createSuper(PDFNodeStreamFsFullReader);function PDFNodeStreamFsFullReader(t){var a;_classCallCheck(this,PDFNodeStreamFsFullReader);a=r.call(this,t);var o=decodeURIComponent(a._url.path);h.test(a._url.href)&&(o=o.replace(/^\\//,""));l.lstat(o,(function(t,r){if(t){"ENOENT"===t.code&&(t=new i.MissingPDFException(\'Missing PDF "\'.concat(o,\'".\')));a._storedError=t;a._headersCapability.reject(t)}else{a._contentLength=r.size;a._setReadableStream(l.createReadStream(o));a._headersCapability.resolve()}}));return a}return _createClass(PDFNodeStreamFsFullReader)}(v),b=function(t){_inherits(PDFNodeStreamFsRangeReader,t);var r=_createSuper(PDFNodeStreamFsRangeReader);function PDFNodeStreamFsRangeReader(t,a,i){var o;_classCallCheck(this,PDFNodeStreamFsRangeReader);o=r.call(this,t);var c=decodeURIComponent(o._url.path);h.test(o._url.href)&&(c=c.replace(/^\\//,""));o._setReadableStream(l.createReadStream(c,{start:a,end:i-1}));return o}return _createClass(PDFNodeStreamFsRangeReader)}(y)},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.createResponseStatusError=function createResponseStatusError(t,r){if(404===t||0===t&&r.startsWith("file:"))return new i.MissingPDFException(\'Missing PDF "\'+r+\'".\');return new i.UnexpectedResponseException("Unexpected server response (".concat(t,\') while retrieving PDF "\').concat(r,\'".\'),t)};r.extractFilenameFromHeader=function extractFilenameFromHeader(t){var r=t("Content-Disposition");if(r){var a=(0,o.getFilenameFromContentDispositionHeader)(r);if(a.includes("%"))try{a=decodeURIComponent(a)}catch(t){}if((0,l.isPdfFile)(a))return a}return null};r.validateRangeRequestCapabilities=function validateRangeRequestCapabilities(t){var r=t.getResponseHeader,a=t.isHttp,i=t.rangeChunkSize,o=t.disableRange,l={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(r("Content-Length"),10);if(!Number.isInteger(c))return l;l.suggestedLength=c;if(c<=2*i)return l;if(o||!a)return l;if("bytes"!==r("Accept-Ranges"))return l;if("identity"!==(r("Content-Encoding")||"identity"))return l;l.allowRangeRequests=!0;return l};r.validateResponseStatus=function validateResponseStatus(t){return 200===t||206===t};var i=a(1),o=a(159),l=a(129)},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(t){var r=!0,a=toParamRegExp("filename\\\\*","i").exec(t);if(a){var o=rfc2616unquote(a=a[1]);return fixupEncoding(o=rfc2047decode(o=rfc5987decode(o=unescape(o))))}if(a=function rfc2231getparam(t){var r,a=[],i=toParamRegExp("filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)","ig");for(;null!==(r=i.exec(t));){var o=_slicedToArray(r,4),l=o[1],c=o[2],u=o[3];if((l=parseInt(l,10))in a){if(0===l)break}else a[l]=[c,u]}for(var d=[],h=0;h<a.length&&h in a;++h){var p=_slicedToArray(a[h],2),v=p[0],y=p[1];y=rfc2616unquote(y);if(v){y=unescape(y);0===h&&(y=rfc5987decode(y))}d.push(y)}return d.join("")}(t)){return fixupEncoding(rfc2047decode(a))}if(a=toParamRegExp("filename","i").exec(t)){var l=rfc2616unquote(a=a[1]);return fixupEncoding(l=rfc2047decode(l))}function toParamRegExp(t,r){return new RegExp("(?:^|;)\\\\s*"+t+\'\\\\s*=\\\\s*([^";\\\\s][^;\\\\s]*|"(?:[^"\\\\\\\\]|\\\\\\\\"?)+"?)\',r)}function textdecode(t,a){if(t){if(!/^[\\x00-\\xFF]+$/.test(a))return a;try{var o=new TextDecoder(t,{fatal:!0}),l=(0,i.stringToBytes)(a);a=o.decode(l);r=!1}catch(t){}}return a}function fixupEncoding(t){if(r&&/[\\x80-\\xff]/.test(t)){t=textdecode("utf-8",t);r&&(t=textdecode("iso-8859-1",t))}return t}function rfc2616unquote(t){if(t.startsWith(\'"\')){for(var r=t.slice(1).split(\'\\\\"\'),a=0;a<r.length;++a){var i=r[a].indexOf(\'"\');if(-1!==i){r[a]=r[a].slice(0,i);r.length=a+1}r[a]=r[a].replace(/\\\\(.)/g,"$1")}t=r.join(\'"\')}return t}function rfc5987decode(t){var r=t.indexOf("\'");return-1===r?t:textdecode(t.slice(0,r),t.slice(r+1).replace(/^[^\']*\'/,""))}function rfc2047decode(t){return!t.startsWith("=?")||/[\\x00-\\x19\\x80-\\xff]/.test(t)?t:t.replace(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,(function(t,r,a,i){if("q"===a||"Q"===a)return textdecode(r,i=(i=i.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,r){return String.fromCharCode(parseInt(r,16))})));try{i=atob(i)}catch(t){}return textdecode(r,i)}))}return""};var i=a(1);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var i,o,l=[],c=!0,u=!1;try{for(a=a.call(t);!(c=(i=a.next()).done);c=!0){l.push(i.value);if(r&&l.length===r)break}}catch(t){u=!0;o=t}finally{try{c||null==a.return||a.return()}finally{if(u)throw o}}return l}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFNetworkStream=void 0;var i=a(1),o=a(158);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),c=new Context(i||[]);return l._invoke=function(t,r,a){var i="suspendedStart";return function(o,l){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw l;return doneResult()}for(a.method=o,a.arg=l;;){var c=a.delegate;if(c){var d=maybeInvokeDelegate(c,a);if(d){if(d===u)continue;return d}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var h=tryCatch(t,r,a);if("normal"===h.type){if(i=a.done?"completed":"suspendedYield",h.arg===u)continue;return{value:h.arg,done:a.done}}"throw"===h.type&&(i="completed",a.method="throw",a.arg=h.arg)}}}(t,a,c),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&a.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,o,l,c){var u=tryCatch(t[i],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&a.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var i;this._invoke=function(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,a,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var a=t.iterator[r.method];if(void 0===a){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return u}var i=tryCatch(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,u;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,u):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,l=function next(){for(;++i<t.length;)if(a.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return l.next=l}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(v),define(v,c,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,i){return l.type="throw",l.arg=t,r.next=a,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),u},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),u}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),d=u.value}catch(t){a(t);return}u.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}var l=function(){function NetworkManager(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,NetworkManager);this.url=t;this.isHttp=/^https?:/i.test(t);this.httpHeaders=this.isHttp&&r.httpHeaders||Object.create(null);this.withCredentials=r.withCredentials||!1;this.getXhr=r.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest};this.currXhrId=0;this.pendingRequests=Object.create(null)}_createClass(NetworkManager,[{key:"requestRange",value:function requestRange(t,r,a){var i={begin:t,end:r};for(var o in a)i[o]=a[o];return this.request(i)}},{key:"requestFull",value:function requestFull(t){return this.request(t)}},{key:"request",value:function request(t){var r=this.getXhr(),a=this.currXhrId++,i=this.pendingRequests[a]={xhr:r};r.open("GET",this.url);r.withCredentials=this.withCredentials;for(var o in this.httpHeaders){var l=this.httpHeaders[o];void 0!==l&&r.setRequestHeader(o,l)}if(this.isHttp&&"begin"in t&&"end"in t){r.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1));i.expectedStatus=206}else i.expectedStatus=200;r.responseType="arraybuffer";t.onError&&(r.onerror=function(a){t.onError(r.status)});r.onreadystatechange=this.onStateChange.bind(this,a);r.onprogress=this.onProgress.bind(this,a);i.onHeadersReceived=t.onHeadersReceived;i.onDone=t.onDone;i.onError=t.onError;i.onProgress=t.onProgress;r.send(null);return a}},{key:"onProgress",value:function onProgress(t,r){var a,i=this.pendingRequests[t];i&&(null===(a=i.onProgress)||void 0===a||a.call(i,r))}},{key:"onStateChange",value:function onStateChange(t,r){var a=this.pendingRequests[t];if(a){var o=a.xhr;if(o.readyState>=2&&a.onHeadersReceived){a.onHeadersReceived();delete a.onHeadersReceived}if(4===o.readyState&&t in this.pendingRequests){delete this.pendingRequests[t];if(0===o.status&&this.isHttp){var l;null===(l=a.onError)||void 0===l||l.call(a,o.status)}else{var c=o.status||200;if(200===c&&206===a.expectedStatus||c===a.expectedStatus){var u=function getArrayBuffer(t){var r=t.response;return"string"!=typeof r?r:(0,i.stringToBytes)(r).buffer}(o);if(206===c){var d=o.getResponseHeader("Content-Range"),h=/bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(d);a.onDone({begin:parseInt(h[1],10),chunk:u})}else if(u)a.onDone({begin:0,chunk:u});else{var p;null===(p=a.onError)||void 0===p||p.call(a,o.status)}}else{var v;null===(v=a.onError)||void 0===v||v.call(a,o.status)}}}}}},{key:"getRequestXhr",value:function getRequestXhr(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function isPendingRequest(t){return t in this.pendingRequests}},{key:"abortRequest",value:function abortRequest(t){var r=this.pendingRequests[t].xhr;delete this.pendingRequests[t];r.abort()}}]);return NetworkManager}(),c=function(){function PDFNetworkStream(t){_classCallCheck(this,PDFNetworkStream);this._source=t;this._manager=new l(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials});this._rangeChunkSize=t.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFNetworkStream,[{key:"_onRangeRequestReaderClosed",value:function _onRangeRequestReaderClosed(t){var r=this._rangeRequestReaders.indexOf(t);r>=0&&this._rangeRequestReaders.splice(r,1)}},{key:"getFullReader",value:function getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new u(this._manager,this._source);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){var a=new d(this._manager,t,r);a.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){var r;null===(r=this._fullRequestReader)||void 0===r||r.cancel(t);var a,i=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(i.s();!(a=i.n()).done;){a.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}]);return PDFNetworkStream}();r.PDFNetworkStream=c;var u=function(){function PDFNetworkStreamFullRequestReader(t,r){_classCallCheck(this,PDFNetworkStreamFullRequestReader);this._manager=t;var a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url;this._fullRequestId=t.requestFull(a);this._headersReceivedCapability=(0,i.createPromiseCapability)();this._disableRange=r.disableRange||!1;this._contentLength=r.length;this._rangeChunkSize=r.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!1;this._isRangeSupported=!1;this._cachedChunks=[];this._requests=[];this._done=!1;this._storedError=void 0;this._filename=null;this.onProgress=null}_createClass(PDFNetworkStreamFullRequestReader,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var t=this._fullRequestId,r=this._manager.getRequestXhr(t),a=function getResponseHeader(t){return r.getResponseHeader(t)},i=(0,o.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),l=i.allowRangeRequests,c=i.suggestedLength;l&&(this._isRangeSupported=!0);this._contentLength=c||this._contentLength;this._filename=(0,o.extractFilenameFromHeader)(a);this._isRangeSupported&&this._manager.abortRequest(t);this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function _onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);this._done=!0;if(!(this._cachedChunks.length>0)){var r,a=_createForOfIteratorHelper(this._requests);try{for(a.s();!(r=a.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){a.e(t)}finally{a.f()}this._requests.length=0}}},{key:"_onError",value:function _onError(t){this._storedError=(0,o.createResponseStatusError)(t,this._url);this._headersReceivedCapability.reject(this._storedError);var r,a=_createForOfIteratorHelper(this._requests);try{for(a.s();!(r=a.n()).done;){r.value.reject(this._storedError)}}catch(t){a.e(t)}finally{a.f()}this._requests.length=0;this._cachedChunks.length=0}},{key:"_onProgress",value:function _onProgress(t){var r;null===(r=this.onProgress)||void 0===r||r.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"headersReady",get:function get(){return this._headersReceivedCapability.promise}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r;return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!this._storedError){a.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){a.next=5;break}t=this._cachedChunks.shift();return a.abrupt("return",{value:t,done:!1});case 5:if(!this._done){a.next=7;break}return a.abrupt("return",{value:void 0,done:!0});case 7:r=(0,i.createPromiseCapability)();this._requests.push(r);return a.abrupt("return",r.promise);case 10:case"end":return a.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;this._headersReceivedCapability.reject(t);var r,a=_createForOfIteratorHelper(this._requests);try{for(a.s();!(r=a.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){a.e(t)}finally{a.f()}this._requests.length=0;this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId);this._fullRequestReader=null}}]);var t;return PDFNetworkStreamFullRequestReader}(),d=function(){function PDFNetworkStreamRangeRequestReader(t,r,a){_classCallCheck(this,PDFNetworkStreamRangeRequestReader);this._manager=t;var i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url;this._requestId=t.requestRange(r,a,i);this._requests=[];this._queuedChunk=null;this._done=!1;this._storedError=void 0;this.onProgress=null;this.onClosed=null}_createClass(PDFNetworkStreamRangeRequestReader,[{key:"_close",value:function _close(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}},{key:"_onDone",value:function _onDone(t){var r=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:r,done:!1})}else this._queuedChunk=r;this._done=!0;var a,i=_createForOfIteratorHelper(this._requests);try{for(i.s();!(a=i.n()).done;){a.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0;this._close()}},{key:"_onError",value:function _onError(t){this._storedError=(0,o.createResponseStatusError)(t,this._url);var r,a=_createForOfIteratorHelper(this._requests);try{for(a.s();!(r=a.n()).done;){r.value.reject(this._storedError)}}catch(t){a.e(t)}finally{a.f()}this._requests.length=0;this._queuedChunk=null}},{key:"_onProgress",value:function _onProgress(t){if(!this.isStreamingSupported){var r;null===(r=this.onProgress)||void 0===r||r.call(this,{loaded:t.loaded})}}},{key:"isStreamingSupported",get:function get(){return!1}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r;return _regeneratorRuntime().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(!this._storedError){a.next=2;break}throw this._storedError;case 2:if(null===this._queuedChunk){a.next=6;break}t=this._queuedChunk;this._queuedChunk=null;return a.abrupt("return",{value:t,done:!1});case 6:if(!this._done){a.next=8;break}return a.abrupt("return",{value:void 0,done:!0});case 8:r=(0,i.createPromiseCapability)();this._requests.push(r);return a.abrupt("return",r.promise);case 11:case"end":return a.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var r,a=_createForOfIteratorHelper(this._requests);try{for(a.s();!(r=a.n()).done;){r.value.resolve({value:void 0,done:!0})}}catch(t){a.e(t)}finally{a.f()}this._requests.length=0;this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId);this._close()}}]);var t;return PDFNetworkStreamRangeRequestReader}()},(t,r,a)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFFetchStream=void 0;var i=a(1),o=a(158);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),c=new Context(i||[]);return l._invoke=function(t,r,a){var i="suspendedStart";return function(o,l){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw l;return doneResult()}for(a.method=o,a.arg=l;;){var c=a.delegate;if(c){var d=maybeInvokeDelegate(c,a);if(d){if(d===u)continue;return d}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var h=tryCatch(t,r,a);if("normal"===h.type){if(i=a.done?"completed":"suspendedYield",h.arg===u)continue;return{value:h.arg,done:a.done}}"throw"===h.type&&(i="completed",a.method="throw",a.arg=h.arg)}}}(t,a,c),l}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};define(d,o,(function(){return this}));var h=Object.getPrototypeOf,p=h&&h(h(values([])));p&&p!==r&&a.call(p,o)&&(d=p);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,o,l,c){var u=tryCatch(t[i],t,o);if("throw"!==u.type){var d=u.arg,h=d.value;return h&&"object"==_typeof(h)&&a.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(h).then((function(t){d.value=t,l(d)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var i;this._invoke=function(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,a,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var a=t.iterator[r.method];if(void 0===a){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return u}var i=tryCatch(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,u;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,u):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,l=function next(){for(;++i<t.length;)if(a.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return l.next=l}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(v,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,c,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(v),define(v,c,"Generator"),define(v,o,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var a in t)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in t)return next.value=a,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,i){return l.type="throw",l.arg=t,r.next=a,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),u},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),u}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}function asyncGeneratorStep(t,r,a,i,o,l,c){try{var u=t[l](c),d=u.value}catch(t){a(t);return}u.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();c=t.done;return t},e:function e(t){u=!0;l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);Object.defineProperty(t,"prototype",{writable:!1});return t}function createFetchOptions(t,r,a){return{method:"GET",headers:t,signal:null==a?void 0:a.signal,mode:"cors",credentials:r?"include":"same-origin",redirect:"follow"}}function createHeaders(t){var r=new Headers;for(var a in t){var i=t[a];void 0!==i&&r.append(a,i)}return r}var l=function(){function PDFFetchStream(t){_classCallCheck(this,PDFFetchStream);this.source=t;this.isHttp=/^https?:/i.test(t.url);this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFFetchStream,[{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new c(this);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var a=new u(this,t,r);this._rangeRequestReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var r,a=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(a.s();!(r=a.n()).done;){r.value.cancel(t)}}catch(t){a.e(t)}finally{a.f()}}}]);return PDFFetchStream}();r.PDFFetchStream=l;var c=function(){function PDFFetchStreamReader(t){var r=this;_classCallCheck(this,PDFFetchStreamReader);this._stream=t;this._reader=null;this._loaded=0;this._filename=null;var a=t.source;this._withCredentials=a.withCredentials||!1;this._contentLength=a.length;this._headersCapability=(0,i.createPromiseCapability)();this._disableRange=a.disableRange||!1;this._rangeChunkSize=a.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);"undefined"!=typeof AbortController&&(this._abortController=new AbortController);this._isStreamingSupported=!a.disableStream;this._isRangeSupported=!a.disableRange;this._headers=createHeaders(this._stream.httpHeaders);var l=a.url;fetch(l,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,o.validateResponseStatus)(t.status))throw(0,o.createResponseStatusError)(t.status,l);r._reader=t.body.getReader();r._headersCapability.resolve();var a=function getResponseHeader(r){return t.headers.get(r)},c=(0,o.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:r._stream.isHttp,rangeChunkSize:r._rangeChunkSize,disableRange:r._disableRange}),u=c.allowRangeRequests,d=c.suggestedLength;r._isRangeSupported=u;r._contentLength=d||r._contentLength;r._filename=(0,o.extractFilenameFromHeader)(a);!r._isStreamingSupported&&r._isRangeSupported&&r.cancel(new i.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject);this.onProgress=null}_createClass(PDFFetchStreamReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,a,i;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return this._headersCapability.promise;case 2:o.next=4;return this._reader.read();case 4:t=o.sent;r=t.value;if(!(a=t.done)){o.next=9;break}return o.abrupt("return",{value:r,done:a});case 9:this._loaded+=r.byteLength;this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});i=new Uint8Array(r).buffer;return o.abrupt("return",{value:i,done:!1});case 13:case"end":return o.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader&&this._reader.cancel(t);this._abortController&&this._abortController.abort()}}]);var t;return PDFFetchStreamReader}(),u=function(){function PDFFetchStreamRangeReader(t,r,a){var l=this;_classCallCheck(this,PDFFetchStreamRangeReader);this._stream=t;this._reader=null;this._loaded=0;var c=t.source;this._withCredentials=c.withCredentials||!1;this._readCapability=(0,i.createPromiseCapability)();this._isStreamingSupported=!c.disableStream;"undefined"!=typeof AbortController&&(this._abortController=new AbortController);this._headers=createHeaders(this._stream.httpHeaders);this._headers.append("Range","bytes=".concat(r,"-").concat(a-1));var u=c.url;fetch(u,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,o.validateResponseStatus)(t.status))throw(0,o.createResponseStatusError)(t.status,u);l._readCapability.resolve();l._reader=t.body.getReader()})).catch(this._readCapability.reject);this.onProgress=null}_createClass(PDFFetchStreamRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t,r,a,i;return _regeneratorRuntime().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return this._readCapability.promise;case 2:o.next=4;return this._reader.read();case 4:t=o.sent;r=t.value;if(!(a=t.done)){o.next=9;break}return o.abrupt("return",{value:r,done:a});case 9:this._loaded+=r.byteLength;this.onProgress&&this.onProgress({loaded:this._loaded});i=new Uint8Array(r).buffer;return o.abrupt("return",{value:i,done:!1});case 13:case"end":return o.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader&&this._reader.cancel(t);this._abortController&&this._abortController.abort()}}]);var t;return PDFFetchStreamRangeReader}()}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var r=__webpack_module_cache__[t];if(void 0!==r)return r.exports;var a=__webpack_module_cache__[t]={exports:{}};__webpack_modules__[t](a,a.exports,__w_pdfjs_require__);return a.exports}var __webpack_exports__={};(()=>{"use strict";var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0});Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function get(){return o.AnnotationEditorLayer}});Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function get(){return r.AnnotationEditorParamsType}});Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function get(){return r.AnnotationEditorType}});Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function get(){return l.AnnotationEditorUIManager}});Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function get(){return c.AnnotationLayer}});Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function get(){return r.AnnotationMode}});Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function get(){return r.CMapCompressionType}});Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function get(){return u.GlobalWorkerOptions}});Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function get(){return r.InvalidPDFException}});Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function get(){return i.LoopbackPort}});Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function get(){return r.MissingPDFException}});Object.defineProperty(t,"OPS",{enumerable:!0,get:function get(){return r.OPS}});Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function get(){return i.PDFDataRangeTransport}});Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function get(){return a.PDFDateString}});Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function get(){return i.PDFWorker}});Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function get(){return r.PasswordResponses}});Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function get(){return r.PermissionFlag}});Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function get(){return a.PixelsPerInch}});Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function get(){return a.RenderingCancelledException}});Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function get(){return p.SVGGraphics}});Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function get(){return r.UNSUPPORTED_FEATURES}});Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function get(){return r.UnexpectedResponseException}});Object.defineProperty(t,"Util",{enumerable:!0,get:function get(){return r.Util}});Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function get(){return r.VerbosityLevel}});Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function get(){return v.XfaLayer}});Object.defineProperty(t,"binarySearchFirstItem",{enumerable:!0,get:function get(){return a.binarySearchFirstItem}});Object.defineProperty(t,"build",{enumerable:!0,get:function get(){return i.build}});Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function get(){return r.createPromiseCapability}});Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function get(){return r.createValidAbsoluteUrl}});Object.defineProperty(t,"getDocument",{enumerable:!0,get:function get(){return i.getDocument}});Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function get(){return a.getFilenameFromUrl}});Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function get(){return a.getPdfFilenameFromUrl}});Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function get(){return a.getXfaPageViewport}});Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function get(){return a.isPdfFile}});Object.defineProperty(t,"loadScript",{enumerable:!0,get:function get(){return a.loadScript}});Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function get(){return h.renderTextLayer}});Object.defineProperty(t,"shadow",{enumerable:!0,get:function get(){return r.shadow}});Object.defineProperty(t,"version",{enumerable:!0,get:function get(){return i.version}});var r=__w_pdfjs_require__(1),a=__w_pdfjs_require__(129),i=__w_pdfjs_require__(131),o=__w_pdfjs_require__(147),l=__w_pdfjs_require__(134),c=__w_pdfjs_require__(152),u=__w_pdfjs_require__(140),d=__w_pdfjs_require__(3),h=__w_pdfjs_require__(155),p=__w_pdfjs_require__(156),v=__w_pdfjs_require__(154);if(d.isNodeJS){var y=__w_pdfjs_require__(157).PDFNodeStream;(0,i.setPDFNetworkStreamFactory)((function(t){return new y(t)}))}else{var g=__w_pdfjs_require__(160).PDFNetworkStream,_=__w_pdfjs_require__(161).PDFFetchStream;(0,i.setPDFNetworkStreamFactory)((function(t){return(0,a.isValidFetchUrl)(t.url)?new _(t):new g(t)}))}})();return __webpack_exports__})()));',document.body.appendChild(t))})(),this.getAttribute("cmap")&&(o=this.getAttribute("cmap")),this.documentObject=await t(a,i,this.language,o),this.hasAttribute("protected")&&(this.loading.hide(),this.passwordModal.onEnter((async t=>new Promise((async(e,r)=>{this.listeners.passwordEnter?l(this.listeners.passwordEnter)?e(await this.listeners.passwordEnter(t)):e(this.listeners.passwordEnter(t)):r(new Error("Password protection requires password enter event"))})))),await this.passwordModal.show(),this.loading.show());const s=await(async()=>{const{width:t,height:e}=(await this.documentObject.getPage(1)).getViewport({scale:1.5});return{width:t,height:e}})(),c=(n("pageWidth",this.pageView,s),new x(this,s));c.onChange((t=>{((t,e=1)=>{for(let r=1;r<=t.length;r++){const a=t[r-1],n=a.getViewport({scale:1.5*e}),i=window.devicePixelRatio||1,o=document.querySelector(`#page${r}`);o.style.width=`${Math.floor(n.width)}px`,o.style.height=`${Math.floor(n.height)}px`,o.style.margin=4*e+"px",o.querySelector("canvas")?.remove();const s=document.createElement("canvas");s.width=Math.floor(n.width*i),s.height=Math.floor(n.height*i),o.appendChild(s),a.render({canvasContext:s.getContext("2d"),transform:1!==i?[i,0,0,i,0,0]:null,viewport:n})}})(u,t)}));const u=await(async(t,e=1)=>{const r=document.querySelector('[data-element="pageView"]'),a=[];for(let n=1;n<=t.numPages;n++){const i=await t.getPage(n),o=i.getViewport({scale:1.5*e}),s=window.devicePixelRatio||1,l=document.createElement("div");l.id=`page${n}`,l.style.width=`${Math.floor(o.width)}px`,l.style.height=`${Math.floor(o.height)}px`,l.style.margin=4*e+"px",l.classList.add("pl-page"),l.dataset.pageNumber=n.toString();const c=document.createElement("canvas");c.width=Math.floor(o.width*s),c.height=Math.floor(o.height*s),l.appendChild(c),r.appendChild(l);const u=i.render({canvasContext:c.getContext("2d"),transform:1!==s?[s,0,0,s,0,0]:null,viewport:o});await u.promise,a.push(i)}return a})(this.documentObject,c.getZoomFactor()),h=new P(this,u).onSelect((t=>{this.pageNav?.activatePage(t)}));this.pageNav=new C(this,this.documentObject.numPages).onChange((t=>{h.activatePage(t),this.listeners.pageChange&&this.listeners.pageChange(t)})),this.printButton.addEventListener("click",(async()=>{await e(a)}),{passive:!0}),this.downloadButton.addEventListener("click",(async()=>{await this.download()}),{passive:!0}),this.themeChangeButton.addEventListener("click",(t=>{let e=document.documentElement.getAttribute("data-theme");const a=t.currentTarget;let n;e&&"light"!==e?(n="light",a.setAttribute("data-mode","light"),a.setAttribute("aria-label",this.language.action.lightMode),a.setAttribute("title",this.language.action.lightMode)):(n="dark",a.setAttribute("data-mode","dark"),a.setAttribute("aria-label",this.language.action.darkMode),a.setAttribute("title",this.language.action.darkMode)),r(n)}),{passive:!0}),this.classList.add("pl-document-loaded"),!this.calledLoadListener&&this.listeners.documentLoaded&&this.listeners.documentLoaded(),this.loaded=!0}catch(t){throw this.errorModal.show(t instanceof Error?t.message:String(t)),t}finally{this.loading.hide()}}static define(){return window.customElements.get("pdf-live")||window.customElements.define("pdf-live",this),this}static createElement(){return new(this.define())}on(t,e){if(!(t in this.listeners))throw new Error(`Invalid event type "${t}" dispatched in element <pdf-live>, Valid types are "pageChange", "documentLoaded", and "passwordEnter"`);return this.listeners[t]=e,"documentLoaded"===t&&this.loaded&&(this.listeners.documentLoaded&&this.listeners.documentLoaded(),this.calledLoadListener=!0),this}getCurrentPageNumber(){return this.pageNav.getCurrentPageNumber()}render(){const t=!(window.innerWidth<=640);this.insertAdjacentHTML("beforeend",u.compile('\x3c!-- begin:Header --\x3e\n      <div data-element="header" class="pl-header">\n        <div class="pl-header-container">\n          <button data-element="leftPanelToggle" class="pl-left-panel-toggle pl-btn" aria-label="{{language.component.leftPanel}}" title="{{language.component.leftPanel}}">\n            <svg class="pl-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n              <path d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/>\n            </svg>\n          </button>\n          <div class="pl-document-title">\n            <div data-element="title" class="pl-document-title-ellipsis"></div>\n          </div>\n          <div class="pl-zoom-overlay">\n            <button data-element="zoomOutButton" class="pl-btn pl-btn-action" aria-label="{{language.action.zoomOut}}" aria-keyshortcuts="Control+-" title="{{language.action.zoomOut}}{{language.shortcut.zoomOut}}">\n              <svg class="pl-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n                <path d="M400 288h-352c-17.69 0-32-14.32-32-32.01s14.31-31.99 32-31.99h352c17.69 0 32 14.3 32 31.99S417.7 288 400 288z"/>\n              </svg>\n            </button>\n            <div data-element="zoomToggle" class="pl-zoom-overlay-toggle">\n              <div class="pl-zoom-overlay-toggle-text">\n                <form data-element="zoomForm">\n                  <input data-element="zoomInput" type="text" class="textarea" tabindex="-1" aria-label="Set zoom">\n                </form>\n                <span>%</span>\n              </div>\n              <button class="pl-btn" aria-label="Zoom Controls">\n                <svg class="pl-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\n                  <path d="M192 384c-8.188 0-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L192 306.8l137.4-137.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-160 160C208.4 380.9 200.2 384 192 384z"/>\n                </svg>\n              </button>\n            </div>\n            <button data-element="zoomInButton" class="pl-btn pl-btn-action" aria-label="{{language.action.zoomIn}}" aria-keyshortcuts="Control+=" title="{{language.action.zoomIn}}{{language.shortcut.zoomIn}}">\n              <svg class="pl-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n                <path d="M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99H192v-144c0-17.69 14.33-32.01 32-32.01s32 14.32 32 32.01v144h144C417.7 224 432 238.3 432 256z"/>\n              </svg>\n            </button>\n          </div>\n          <div class="pl-header-nav">\n            <button data-element="printButton" class="pl-btn" aria-label="{{language.action.print}}" title="{{language.action.print}}">\n              <svg class="pl-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n                <path d="M448 192H64C28.65 192 0 220.7 0 256v96c0 17.67 14.33 32 32 32h32v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h32c17.67 0 32-14.33 32-32V256C512 220.7 483.3 192 448 192zM384 448H128v-96h256V448zM432 296c-13.25 0-24-10.75-24-24c0-13.27 10.75-24 24-24s24 10.73 24 24C456 285.3 445.3 296 432 296zM128 64h229.5L384 90.51V160h64V77.25c0-8.484-3.375-16.62-9.375-22.62l-45.25-45.25C387.4 3.375 379.2 0 370.8 0H96C78.34 0 64 14.33 64 32v128h64V64z"/>\n              </svg>\n            </button>\n            <button data-element="downloadButton" class="pl-btn" aria-label="{{language.action.download}}" title="{{language.action.download}}">\n              <svg class="pl-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n                <path d="M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"/>\n              </svg>\n            </button>\n            <button data-element="themeChangeButton" class="pl-btn" data-mode="light" aria-label="{{language.action.darkMode}}" title="{{language.action.darkMode}}">\n              <svg class="pl-icon pl-icon-dark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n                <path d="M279.135 512c78.756 0 150.982-35.804 198.844-94.775 28.27-34.831-2.558-85.722-46.249-77.401-82.348 15.683-158.272-47.268-158.272-130.792 0-48.424 26.06-92.292 67.434-115.836 38.745-22.05 28.999-80.788-15.022-88.919A257.936 257.936 0 0 0 279.135 0c-141.36 0-256 114.575-256 256 0 141.36 114.576 256 256 256zm0-464c12.985 0 25.689 1.201 38.016 3.478-54.76 31.163-91.693 90.042-91.693 157.554 0 113.848 103.641 199.2 215.252 177.944C402.574 433.964 344.366 464 279.135 464c-114.875 0-208-93.125-208-208s93.125-208 208-208z"/>\n              </svg>\n              <svg class="pl-icon pl-icon-light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n                <path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n      \x3c!-- end:Header --\x3e\n      \x3c!-- begin:Content --\x3e\n      <div class="pl-content">\n        \x3c!-- begin:Left panel --\x3e\n        <div data-element="leftPanel" class="pl-left-panel{{#unless openLeftPanel}} pl-left-panel-closed{{/unless}}">\n          <div class="pl-left-panel-container">\n            <div data-element="thumbnailsPanel" class="pl-thumbnails-panel"></div>\n          </div>\n        </div>\n        \x3c!-- end:Left panel --\x3e\n        \x3c!-- begin:Page container --\x3e\n        <div data-element="pagegContainer" class="pl-page-container {{#if openLeftPanel}} pl-page-container-open{{/if}}">\n          \x3c!-- begin:Page view --\x3e\n          <div data-element="pageView" class="pl-page-view"></div>\n          \x3c!-- end:Page view --\x3e\n          \x3c!-- begin:Page navigation --\x3e\n          <div class="pl-page-footer" style="width: calc(100% - 0px); margin-left: 0px;">\n            <div data-element="pageNavOverlay" class="pl-page-nav-overlay">\n              <button data-element="prevPageButton" class="pl-btn pl-btn-page" aria-label="{{language.action.pagePrev}}" title="{{language.action.pagePrev}}" disabled>\n                <svg class="pl-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512">\n                  <path d="M192 448c-8.188 0-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25l160-160c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L77.25 256l137.4 137.4c12.5 12.5 12.5 32.75 0 45.25C208.4 444.9 200.2 448 192 448z"/>\n                </svg>\n              </button>\n              <div class="pl-page-nav-form-container">\n                <form data-element="pageForm">\n                  <input data-element="pageInput" type="text" tabindex="-1" aria-label="Set page" value="1"> / <span data-element="totalPage">1</span>\n                </form>\n              </div>\n              <button data-element="nextPageButton" class="pl-btn pl-btn-page" aria-label="{{language.action.pageNext}}" title="{{language.action.pageNext}}">\n                <svg class="pl-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512">\n                  <path d="M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n          \x3c!-- end:Page navigation --\x3e\n        </div>\n        \x3c!-- end:Page container --\x3e\n      </div>\n      \x3c!-- end:Content --\x3e\n      \x3c!-- begin:Zoom menu --\x3e\n      <div data-element="zoomMenu" class="pl-zoom-menu pl-zoom-menu-closed" role="listbox" aria-label="{{language.component.zoomOverlay}}">\n        <button data-element="zoomSelect" data-value="pageWidth" class="pl-btn pl-zoom-menu-item" aria-label="{{language.action.fitToWidth}}" role="option">\n          <svg class="pl-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n            <path d="M5.93,4.36,9.17,7.6a.39.39,0,0,1,0,.56l-1,1a.39.39,0,0,1-.56,0L4.36,5.93,2.68,7.6A.4.4,0,0,1,2,7.32V2.4A.4.4,0,0,1,2.4,2H7.32a.4.4,0,0,1,.28.68ZM7.6,14.83,4.36,18.07,2.68,16.4a.4.4,0,0,0-.68.28V21.6a.4.4,0,0,0,.4.4H7.32a.4.4,0,0,0,.28-.68L5.93,19.64,9.17,16.4a.39.39,0,0,0,0-.56l-1-1A.39.39,0,0,0,7.6,14.83ZM16.4,2.68l1.67,1.68L14.83,7.6a.39.39,0,0,0,0,.56l1,1a.39.39,0,0,0,.56,0l3.24-3.24L21.32,7.6A.4.4,0,0,0,22,7.32V2.4a.4.4,0,0,0-.4-.4H16.68A.4.4,0,0,0,16.4,2.68Zm-.56,12.15-1,1a.39.39,0,0,0,0,.56l3.24,3.24L16.4,21.32a.4.4,0,0,0,.28.68H21.6a.4.4,0,0,0,.4-.4V16.68a.4.4,0,0,0-.68-.28l-1.68,1.67L16.4,14.83A.39.39,0,0,0,15.84,14.83Z"></path>\n          </svg>{{language.action.fitToWidth}}\n        </button>\n        <button data-element="zoomSelect" data-value="pageFit" class="pl-btn pl-zoom-menu-item" aria-label="{{language.action.fitToPage}}" role="option">\n          <svg class="pl-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n            <path d="M9.76,13.06l-5,5L3.07,16.4a.4.4,0,0,0-.68.28V21.6a.4.4,0,0,0,.4.4H7.71A.4.4,0,0,0,8,21.32L6.32,19.64l5-5a.4.4,0,0,0,0-.57l-1-1A.39.39,0,0,0,9.76,13.06Zm7-10.38,1.67,1.68-5,5a.4.4,0,0,0,0,.57l1,1A.4.4,0,0,0,15,11l5-5L21.71,7.6a.4.4,0,0,0,.68-.28V2.4A.4.4,0,0,0,22,2H17.07A.4.4,0,0,0,16.79,2.68Z"></path>\n          </svg>{{language.action.fitToPage}}\n        </button>\n        <div class="pl-divider"></div>\n        <button data-element="zoomSelect" data-value="50" class="pl-zoom-menu-item" aria-label="50%" role="option">50%</button>\n        <button data-element="zoomSelect" data-value="75" class="pl-zoom-menu-item" aria-label="75%" role="option">75%</button>\n        <button data-element="zoomSelect" data-value="100" class="pl-zoom-menu-item" aria-label="100%" role="option"">100%</button>\n        <button data-element="zoomSelect" data-value="125" class="pl-zoom-menu-item" aria-label="125%" role="option"">125%</button>\n        <button data-element="zoomSelect" data-value="150" class="pl-zoom-menu-item" aria-label="150%" role="option"">150%</button>\n        <button data-element="zoomSelect" data-value="200" class="pl-zoom-menu-item" aria-label="200%" role="option"">200%</button>\n      </div>\n      \x3c!-- end:Zoom menu --\x3e\n      <iframe data-element="printFrame" style="display: none;"></iframe>')({language:this.language,openLeftPanel:t}))}async print(){return e(this.documentUrl)}async download(){let t;this.getAttribute("title")?(t=this.getAttribute("title"),t.match(/\.pdf$/i)||(t+=".pdf")):t=E(this.documentUrl),await(async(t,e)=>{const r=await t.getData(),a=new Uint8Array(r),n=new File([a],e,{type:"application/pdf"}),i=document.createElement("a");i.download=e,i.rel="noopener",i.href=URL.createObjectURL(n),setTimeout((()=>URL.revokeObjectURL(i.href)),4e4),setTimeout((()=>i.dispatchEvent(new MouseEvent("click"))),0)})(this.documentObject,t)}}U.define();export{U as default};
